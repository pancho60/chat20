"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[781],{781:(y,g,s)=>{s.r(g),s.d(g,{HomePageModule:()=>O});var l=s(6895),o=s(2078),h=s(433),m=s(2435),d=s(655),p=s(9751),t=s(4650),u=s(6237);const f=["area"];function C(n,c){if(1&n&&(t.TgZ(0,"ion-card")(1,"ion-card-content"),t._uU(2),t.qZA(),t.TgZ(3,"ion-card-subtitle",10),t._uU(4),t.qZA()()),2&n){const e=c.$implicit,i=t.oxw(2);t.xp6(2),t.hij(" ",e.content," "),t.xp6(2),t.AsE(" ",i.convertir(e.date)," - ",e.type," ")}}function _(n,c){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,C,5,3,"ion-card",9),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.room.Messages)}}let Z=(()=>{class n{constructor(e,i,a){this.navParams=e,this.modal=i,this.chatService=a,this.name="",this.mensaje="",this.msg=""}ngOnInit(){this.name=this.navParams.get("name"),this.chat=this.navParams.get("chat"),this.chatService.getChat(this.chat.id).subscribe(e=>{this.room=e})}ngAfterViewChecked(){this.foco.setFocus()}cerrarChat(){this.modal.dismiss()}sendMessage(){if(""!==this.msg){const e=JSON.parse(localStorage.getItem("usuario"));this.chatService.enviarABD({content:this.msg,type:e,date:new Date},this.chat.id),this.msg=""}else this.foco.setFocus()}convertir(e){return this.fecha=e.toDate(),this.fecha.getDay()+"/"+this.fecha.getMonth()+"/"+this.fecha.getYear()+" - "+this.fecha.getHours()+":"+this.fecha.getMinutes()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(o.X1),t.Y36(o.IN),t.Y36(u.a))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-chat"]],viewQuery:function(e,i){if(1&e&&t.Gf(f,5),2&e){let a;t.iGM(a=t.CRH())&&(i.foco=a.first)}},decls:14,vars:3,consts:[["color","tertiary"],["slot","start","fill","clear",3,"click"],["name","arrow-back","color","secondary",1,"icono"],[1,"ion-padding"],[4,"ngIf"],[3,"ngModel","ngModelChange"],["area",""],["color","success","slot","end",3,"click"],["name","send"],[4,"ngFor","ngForOf"],[1,"espacios"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-button",1),t.NdJ("click",function(){return i.cerrarChat()}),t._UZ(3,"ion-icon",2),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5),t.qZA()()(),t.TgZ(6,"ion-content",3),t.YNc(7,_,2,1,"div",4),t.qZA(),t.TgZ(8,"ion-footer",3)(9,"ion-item")(10,"ion-textarea",5,6),t.NdJ("ngModelChange",function(r){return i.msg=r}),t.qZA(),t.TgZ(12,"ion-button",7),t.NdJ("click",function(){return i.sendMessage()}),t._UZ(13,"ion-icon",8),t.qZA()()()),2&e&&(t.xp6(5),t.Oqu(i.chat.name),t.xp6(2),t.Q6J("ngIf",i.room),t.xp6(3),t.Q6J("ngModel",i.msg))},dependencies:[l.sg,l.O5,o.YG,o.PM,o.FN,o.tO,o.W2,o.fr,o.Gu,o.gu,o.Ie,o.g2,o.wd,o.sr,o.j9,h.JJ,h.On],styles:[".icono[_ngcontent-%COMP%]{color:#f0f8ff;font-size:25px}ion-content[_ngcontent-%COMP%]{--background:rgb(161, 207, 154)}ion-card[_ngcontent-%COMP%]{--background: #c5acac}ion-textarea[_ngcontent-%COMP%]{--background: rgb(153, 142, 176)}"]}),n})();var v=s(6893);function P(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item",6),t.NdJ("click",function(){const r=t.CHM(e).$implicit,T=t.oxw();return t.KtG(T.openChat(r))}),t.TgZ(1,"ion-avatar",7),t._UZ(2,"ion-img",8),t.qZA(),t.TgZ(3,"ion-label")(4,"h2")(5,"b"),t._uU(6),t.qZA()(),t.TgZ(7,"h3"),t._uU(8),t.qZA()()()}if(2&n){const e=c.$implicit;t.xp6(2),t.Q6J("src",e.img),t.xp6(4),t.Oqu(e.name),t.xp6(2),t.Oqu(e.description)}}const M=[{path:"",component:(()=>{class n{constructor(e,i,a,r){this.s=e,this.modal=i,this.asc=a,this.chatService=r,this.chats=[],this.mensajes=[],this.bd=new p.y}ngOnInit(){this.chatService.getChatRooms().subscribe(e=>{this.chats=e})}presentActionSheet(){return(0,d.mG)(this,void 0,void 0,function*(){yield(yield this.asc.create({header:"opciones",cssClass:"fondo",buttons:[{text:"cerrar sesion",role:"destuctive",icon:"log-out",handler:()=>{this.salir()}},{text:"Cancelar",role:"cancel",icon:"close"}]})).present()})}salir(){this.s.logout()}openChat(e){this.modal.create({component:Z,componentProps:{chat:e}}).then(i=>i.present())}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(v.e),t.Y36(o.IN),t.Y36(o.BX),t.Y36(u.a))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-home"]],decls:10,vars:3,consts:[[3,"translucent"],["color","tertery"],["fill","clear","slot","end",3,"click"],["name","menu",1,"menu-icon"],[3,"fullscreen"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["slot","start"],[3,"src"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar",1),t._UZ(2,"ion-title"),t.TgZ(3,"ion-button",2),t.NdJ("click",function(){return i.presentActionSheet()}),t._UZ(4,"ion-icon",3),t.qZA(),t.TgZ(5,"ion-title"),t._uU(6," Sala De Chats\n"),t.qZA()()(),t.TgZ(7,"ion-content",4)(8,"ion-list"),t.YNc(9,P,9,3,"ion-item",5),t.qZA()()),2&e&&(t.Q6J("translucent",!0),t.xp6(7),t.Q6J("fullscreen",!0),t.xp6(2),t.Q6J("ngForOf",i.chats))},dependencies:[l.sg,o.BJ,o.YG,o.W2,o.Gu,o.gu,o.Xz,o.Ie,o.Q$,o.q_,o.wd,o.sr],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.menu-icon[_ngcontent-%COMP%]{color:#f0f8ff;font-size:25px}"]}),n})()}];let x=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[m.Bz.forChild(M),m.Bz]}),n})(),O=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.ez,h.u5,o.Pc,x]}),n})()}}]);