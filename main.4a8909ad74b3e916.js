(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{6217:(ln,ft,$)=>{"use strict";$.d(ft,{nm:()=>Gr});var a=$(2122);$(4650),$(259);var st=$(5861),et=$(9681),Qe=$(4859),Pe=$(2090),Oe=$(1877);const J=new Map,Xe={activated:!1,tokenObservers:[]},Fe={initialized:!1,enabled:!1};function je(it){return J.get(it)||Object.assign({},Xe)}function tt(){return Fe}const W="https://content-firebaseappcheck.googleapis.com/v1",Ie="exchangeDebugToken",we={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Je{constructor(qe,mt,Ut,nn,In){if(this.operation=qe,this.retryPolicy=mt,this.getWaitDuration=Ut,this.lowerBound=nn,this.upperBound=In,this.pending=null,this.nextErrorWaitInterval=nn,nn>In)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(qe){var mt=this;return(0,st.Z)(function*(){mt.stop();try{mt.pending=new Pe.BH,yield function Le(it){return new Promise(qe=>{setTimeout(qe,it)})}(mt.getNextRun(qe)),mt.pending.resolve(),yield mt.pending.promise,mt.pending=new Pe.BH,yield mt.operation(),mt.pending.resolve(),yield mt.pending.promise,mt.process(!0).catch(()=>{})}catch(Ut){mt.retryPolicy(Ut)?mt.process(!1).catch(()=>{}):mt.stop()}})()}getNextRun(qe){if(qe)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const mt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),mt}}}const He=new Pe.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function xt(it,qe){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,st.Z)(function*({url:it,body:qe},mt){const Ut={"Content-Type":"application/json"},nn=mt.getImmediate({optional:!0});if(nn){const Kn=yield nn.getHeartbeatsHeader();Kn&&(Ut["X-Firebase-Client"]=Kn)}const In={method:"POST",body:JSON.stringify(qe),headers:Ut};let rr,kr;try{rr=yield fetch(it,In)}catch(Kn){throw He.create("fetch-network-error",{originalErrorMessage:null==Kn?void 0:Kn.message})}if(200!==rr.status)throw He.create("fetch-status-error",{httpStatus:rr.status});try{kr=yield rr.json()}catch(Kn){throw He.create("fetch-parse-error",{originalErrorMessage:null==Kn?void 0:Kn.message})}const Er=kr.ttl.match(/^([\d.]+)(s)$/);if(!Er||!Er[2]||isNaN(Number(Er[1])))throw He.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${kr.ttl}`});const Ir=1e3*Number(Er[1]),pr=Date.now();return{token:kr.token,expireTimeMillis:pr+Ir,issuedAtTimeMillis:pr}})).apply(this,arguments)}const nr="firebase-app-check-database",Cr=1,_r="firebase-app-check-store";let dr=null;function Ar(it,qe){return xn.apply(this,arguments)}function xn(){return(xn=(0,st.Z)(function*(it,qe){const Ut=(yield function Yt(){return dr||(dr=new Promise((it,qe)=>{try{const mt=indexedDB.open(nr,Cr);mt.onsuccess=Ut=>{it(Ut.target.result)},mt.onerror=Ut=>{var nn;qe(He.create("storage-open",{originalErrorMessage:null===(nn=Ut.target.error)||void 0===nn?void 0:nn.message}))},mt.onupgradeneeded=Ut=>{0===Ut.oldVersion&&Ut.target.result.createObjectStore(_r,{keyPath:"compositeKey"})}}catch(mt){qe(He.create("storage-open",{originalErrorMessage:null==mt?void 0:mt.message}))}}),dr)}()).transaction(_r,"readwrite"),In=Ut.objectStore(_r).put({compositeKey:it,value:qe});return new Promise((rr,kr)=>{In.onsuccess=Er=>{rr()},Ut.onerror=Er=>{var Ir;kr(He.create("storage-set",{originalErrorMessage:null===(Ir=Er.target.error)||void 0===Ir?void 0:Ir.message}))}})})).apply(this,arguments)}const Cn=new Oe.Yd("@firebase/app-check");function yi(it,qe){return(0,Pe.hl)()?function Tr(it,qe){return Ar(function xr(it){return`${it.options.appId}-${it.name}`}(it),qe)}(it,qe).catch(mt=>{Cn.warn(`Failed to write token to IndexedDB. Error: ${mt}`)}):Promise.resolve()}function sr(){return kn.apply(this,arguments)}function kn(){return(kn=(0,st.Z)(function*(){const it=tt();if(it.enabled&&it.token)return it.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const rn={error:"UNKNOWN_ERROR"};function $t(it){return Pe.US.encodeString(JSON.stringify(it),!1)}function yn(it){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,st.Z)(function*(it,qe=!1){const mt=it.app;!function St(it){if(!je(it).activated)throw He.create("use-before-activation",{appName:it.name})}(mt);const Ut=je(mt);let In,nn=Ut.token;if(nn&&!We(nn)&&(Ut.token=void 0,nn=void 0),!nn){const Er=yield Ut.cachedTokenPromise;Er&&(We(Er)?nn=Er:yield yi(mt,void 0))}if(!qe&&nn&&We(nn))return{token:nn.token};let kr,rr=!1;if(function ui(){return tt().enabled}()){Ut.exchangeTokenPromise||(Ut.exchangeTokenPromise=xt(function Qt(it,qe){const{projectId:mt,appId:Ut,apiKey:nn}=it.options;return{url:`${W}/projects/${mt}/apps/${Ut}:${Ie}?key=${nn}`,body:{debug_token:qe}}}(mt,yield sr()),it.heartbeatServiceProvider).finally(()=>{Ut.exchangeTokenPromise=void 0}),rr=!0);const Er=yield Ut.exchangeTokenPromise;return yield yi(mt,Er),Ut.token=Er,{token:Er.token}}try{Ut.exchangeTokenPromise||(Ut.exchangeTokenPromise=Ut.provider.getToken().finally(()=>{Ut.exchangeTokenPromise=void 0}),rr=!0),nn=yield je(mt).exchangeTokenPromise}catch(Er){"appCheck/throttled"===Er.code?Cn.warn(Er.message):Cn.error(Er),In=Er}return nn?In?kr=We(nn)?{token:nn.token,internalError:In}:Rt(In):(kr={token:nn.token},Ut.token=nn,yield yi(mt,nn)):kr=Rt(In),rr&&function Ee(it,qe){const mt=je(it).tokenObservers;for(const Ut of mt)try{"EXTERNAL"===Ut.type&&null!=qe.error?Ut.error(qe.error):Ut.next(qe)}catch(nn){}}(mt,kr),kr})).apply(this,arguments)}function jn(it,qe){const mt=je(it),Ut=mt.tokenObservers.filter(nn=>nn.next!==qe);0===Ut.length&&mt.tokenRefresher&&mt.tokenRefresher.isRunning()&&mt.tokenRefresher.stop(),mt.tokenObservers=Ut}function Or(it){const{app:qe}=it,mt=je(qe);let Ut=mt.tokenRefresher;Ut||(Ut=function Re(it){const{app:qe}=it;return new Je((0,st.Z)(function*(){let Ut;if(Ut=je(qe).token?yield yn(it,!0):yield yn(it),Ut.error)throw Ut.error;if(Ut.internalError)throw Ut.internalError}),()=>!0,()=>{const mt=je(qe);if(mt.token){let Ut=mt.token.issuedAtTimeMillis+.5*(mt.token.expireTimeMillis-mt.token.issuedAtTimeMillis)+3e5;return Ut=Math.min(Ut,mt.token.expireTimeMillis-3e5),Math.max(0,Ut-Date.now())}return 0},we.RETRIAL_MIN_WAIT,we.RETRIAL_MAX_WAIT)}(it),mt.tokenRefresher=Ut),!Ut.isRunning()&&mt.isTokenAutoRefreshEnabled&&Ut.start()}function We(it){return it.expireTimeMillis-Date.now()>0}function Rt(it){return{token:$t(rn),error:it}}class vt{constructor(qe,mt){this.app=qe,this.heartbeatServiceProvider=mt}_delete(){const{tokenObservers:qe}=je(this.app);for(const mt of qe)jn(this.app,mt.next);return Promise.resolve()}}const Qr="app-check-internal";!function Oi(){(0,et._registerComponent)(new Qe.wA("app-check",it=>function hn(it,qe){return new vt(it,qe)}(it.getProvider("app").getImmediate(),it.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((it,qe,mt)=>{it.getProvider(Qr).initialize()})),(0,et._registerComponent)(new Qe.wA(Qr,it=>function Be(it){return{getToken:qe=>yn(it,qe),addTokenListener:qe=>function Pn(it,qe,mt,Ut){const{app:nn}=it,In=je(nn);if(In.tokenObservers=[...In.tokenObservers,{next:mt,error:Ut,type:qe}],In.token&&We(In.token)){const kr=In.token;Promise.resolve().then(()=>{mt({token:kr.token}),Or(it)}).catch(()=>{})}In.cachedTokenPromise.then(()=>Or(it))}(it,"INTERNAL",qe),removeTokenListener:qe=>jn(it.app,qe)}}(it.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,et.registerVersion)("@firebase/app-check","0.6.4")}();class Gr{constructor(){return(0,a.vb)("app-check")}}typeof window<"u"&&window},1205:(ln,ft,$)=>{"use strict";$.d(ft,{zQ:()=>W,ww:()=>pt,rT:()=>Fe,f7:()=>Ke,L6:()=>J,_Q:()=>Xe,lh:()=>je,Qv:()=>Oe,nw:()=>tt});var a=$(4650),te=$(7579),z=$(9646),Te=$(9751),xe=$(8996),Se=$(6451),de=$(5363),Ae=$(3900),Ue=$(4004),me=$(6063);class fe extends te.x{constructor(Ie=1/0,we=1/0,be=me.l){super(),this._bufferSize=Ie,this._windowTime=we,this._timestampProvider=be,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=we===1/0,this._bufferSize=Math.max(1,Ie),this._windowTime=Math.max(1,we)}next(Ie){const{isStopped:we,_buffer:be,_infiniteTimeWindow:Je,_timestampProvider:Le,_windowTime:rt}=this;we||(be.push(Ie),!Je&&be.push(Le.now()+rt)),this._trimBuffer(),super.next(Ie)}_subscribe(Ie){this._throwIfClosed(),this._trimBuffer();const we=this._innerSubscribe(Ie),{_infiniteTimeWindow:be,_buffer:Je}=this,Le=Je.slice();for(let rt=0;rt<Le.length&&!Ie.closed;rt+=be?1:2)Ie.next(Le[rt]);return this._checkFinalizedStatuses(Ie),we}_trimBuffer(){const{_bufferSize:Ie,_timestampProvider:we,_buffer:be,_infiniteTimeWindow:Je}=this,Le=(Je?1:2)*Ie;if(Ie<1/0&&Le<be.length&&be.splice(0,be.length-Le),!Je){const rt=we.now();let He=0;for(let Pt=1;Pt<be.length&&be[Pt]<=rt;Pt+=2)He=Pt;He&&be.splice(0,He+1)}}}var pe=$(3099);function ke(nt,Ie,we){let be,Je=!1;return nt&&"object"==typeof nt?({bufferSize:be=1/0,windowTime:Ie=1/0,refCount:Je=!1,scheduler:we}=nt):be=null!=nt?nt:1/0,(0,pe.B)({connector:()=>new fe(be,Ie,we),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Je})}var Ge=$(590),ut=$(576);function Dt(nt,Ie){return(0,ut.m)(Ie)?(0,Ae.w)(()=>nt,Ie):(0,Ae.w)(()=>nt)}var Me=$(9468),ve=$(9300),le=$(2122),at=$(2011),st=$(6895),et=$(6217),Qe=$(9260);const Oe=new a.OlP("angularfire2.auth.use-emulator"),J=new a.OlP("angularfire2.auth.settings"),Xe=new a.OlP("angularfire2.auth.tenant-id"),Fe=new a.OlP("angularfire2.auth.langugage-code"),je=new a.OlP("angularfire2.auth.use-device-language"),Ke=new a.OlP("angularfire.auth.persistence"),tt=(nt,Ie,we,be,Je,Le,rt,He)=>(0,at.cc)(`${nt.name}.auth`,"AngularFireAuth",nt.name,()=>{const Pt=Ie.runOutsideAngular(()=>nt.auth());if(we&&Pt.useEmulator(...we),be&&(Pt.tenantId=be),Pt.languageCode=Je,Le&&Pt.useDeviceLanguage(),rt)for(const[St,Nt]of Object.entries(rt))Pt.settings[St]=Nt;return He&&Pt.setPersistence(He),Pt},[we,be,Je,Le,rt,He]);let W=(()=>{class nt{constructor(we,be,Je,Le,rt,He,Pt,St,Nt,cn,xt,Dn){const Ln=new te.x,Un=(0,z.of)(void 0).pipe((0,de.Q)(rt.outsideAngular),(0,Ae.w)(()=>Le.runOutsideAngular(()=>Promise.resolve().then($.bind($,4217)))),(0,Ue.U)(()=>(0,at.on)(we,Le,be)),(0,Ue.U)(Qt=>tt(Qt,Le,He,St,Nt,cn,Pt,xt)),ke({bufferSize:1,refCount:!1}));if((0,st.PM)(Je))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,z.of)(null);else{Un.pipe((0,Ge.P)()).subscribe();const nr=Un.pipe((0,Ae.w)(gn=>gn.getRedirectResult().then(dr=>dr,()=>null)),le.iC,ke({bufferSize:1,refCount:!1})),Cr=Un.pipe((0,Ae.w)(gn=>new Te.y(dr=>({unsubscribe:Le.runOutsideAngular(()=>gn.onAuthStateChanged(Yt=>dr.next(Yt),Yt=>dr.error(Yt),()=>dr.complete()))})))),_r=Un.pipe((0,Ae.w)(gn=>new Te.y(dr=>({unsubscribe:Le.runOutsideAngular(()=>gn.onIdTokenChanged(Yt=>dr.next(Yt),Yt=>dr.error(Yt),()=>dr.complete()))}))));this.authState=nr.pipe(Dt(Cr),(0,Me.R)(rt.outsideAngular),(0,de.Q)(rt.insideAngular)),this.user=nr.pipe(Dt(_r),(0,Me.R)(rt.outsideAngular),(0,de.Q)(rt.insideAngular)),this.idToken=this.user.pipe((0,Ae.w)(gn=>gn?(0,xe.D)(gn.getIdToken()):(0,z.of)(null))),this.idTokenResult=this.user.pipe((0,Ae.w)(gn=>gn?(0,xe.D)(gn.getIdTokenResult()):(0,z.of)(null))),this.credential=(0,Se.T)(nr,Ln,this.authState.pipe((0,ve.h)(gn=>!gn))).pipe((0,Ue.U)(gn=>null!=gn&&gn.user?gn:null),(0,Me.R)(rt.outsideAngular),(0,de.Q)(rt.insideAngular))}return(0,at.pX)(this,Un,Le,{spy:{apply:(Qt,nr,Cr)=>{(Qt.startsWith("signIn")||Qt.startsWith("createUser"))&&Cr.then(_r=>Ln.next(_r))}}})}}return nt.\u0275fac=function(we){return new(we||nt)(a.LFG(at.Dh),a.LFG(at.xv,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(le.HU),a.LFG(Oe,8),a.LFG(J,8),a.LFG(Xe,8),a.LFG(Fe,8),a.LFG(je,8),a.LFG(Ke,8),a.LFG(et.nm,8))},nt.\u0275prov=a.Yz7({token:nt,factory:nt.\u0275fac,providedIn:"any"}),nt})(),pt=(()=>{class nt{constructor(){Qe.Z.registerVersion("angularfire",le.q4.full,"auth-compat")}}return nt.\u0275fac=function(we){return new(we||nt)},nt.\u0275mod=a.oAB({type:nt}),nt.\u0275inj=a.cJS({providers:[W]}),nt})()},3101:(ln,ft,$)=>{"use strict";$.d(ft,{ST:()=>iv,yb:()=>N_});var a=$(4650),te=$(4986),z=$(9751),Te=$(8996),xe=$(9646),Se=$(2122),de=$(8675),Ae=$(4482),Ue=$(5403);function me(){return(0,Ae.e)((i,e)=>{let t,s=!1;i.subscribe((0,Ue.x)(e,c=>{const m=t;t=c,s&&e.next([m,c]),s=!0}))})}var J,fe=$(4004),pe=$(5026),ke=$(1884),Ge=$(9300),ut=$(2011),Dt=$(6895),ve=($(4217),$(3942)),le=$(5861),at=$(9681),st=$(4859),et=$(1877),Qe=$(2090),Pe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Oe={},Xe=Xe||{},Fe=Pe||self;function je(){}function Ke(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function tt(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var pt="closure_uid_"+(1e9*Math.random()>>>0),nt=0;function Ie(i,e,t){return i.call.apply(i.bind,arguments)}function we(i,e,t){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,s),i.apply(e,c)}}return function(){return i.apply(e,arguments)}}function be(i,e,t){return(be=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ie:we).apply(null,arguments)}function Je(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function Le(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Wb=function(s,c,m){for(var C=Array(arguments.length-2),R=2;R<arguments.length;R++)C[R-2]=arguments[R];return e.prototype[c].apply(s,C)}}function rt(){this.s=this.s,this.o=this.o}rt.prototype.s=!1,rt.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function W(i){Object.prototype.hasOwnProperty.call(i,pt)&&i[pt]||(i[pt]=++nt)}(this)},rt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Pt=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function St(i){const e=i.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=i[s];return t}return[]}function Nt(i,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(Ke(s)){const c=i.length||0,m=s.length||0;i.length=c+m;for(let C=0;C<m;C++)i[c+C]=s[C]}else i.push(s)}}function cn(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}cn.prototype.h=function(){this.defaultPrevented=!0};var xt=function(){if(!Fe.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{Fe.addEventListener("test",je,e),Fe.removeEventListener("test",je,e)}catch(t){}return i}();function Dn(i){return/^[\s\xa0]*$/.test(i)}var Ln=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Un(i,e){return i<e?-1:i>e?1:0}function Qt(){var i=Fe.navigator;return i&&(i=i.userAgent)?i:""}function nr(i){return-1!=Qt().indexOf(i)}function Cr(i){return Cr[" "](i),i}Cr[" "]=je;var Ar,i,gn=nr("Opera"),dr=nr("Trident")||nr("MSIE"),Yt=nr("Edge"),Zr=Yt||dr,Tr=nr("Gecko")&&!(-1!=Qt().toLowerCase().indexOf("webkit")&&!nr("Edge"))&&!(nr("Trident")||nr("MSIE"))&&!nr("Edge"),br=-1!=Qt().toLowerCase().indexOf("webkit")&&!nr("Edge");function ei(){var i=Fe.document;return i?i.documentMode:void 0}e:{var xn="",En=(i=Qt(),Tr?/rv:([^\);]+)(\)|;)/.exec(i):Yt?/Edge\/([\d\.]+)/.exec(i):dr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):br?/WebKit\/(\S+)/.exec(i):gn?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(En&&(xn=En?En[1]:""),dr){var Tn=ei();if(null!=Tn&&Tn>parseFloat(xn)){Ar=String(Tn);break e}}Ar=xn}var xr={};var yi=Fe.document&&dr&&(ei()||parseInt(Ar,10))||void 0;function Gi(i,e){if(cn.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Tr){e:{try{Cr(e.nodeName);var c=!0;break e}catch(m){}c=!1}c||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Sr[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Gi.X.h.call(this)}}Le(Gi,cn);var Sr={2:"touch",3:"pen",4:"mouse"};Gi.prototype.h=function(){Gi.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var ui="closure_listenable_"+(1e6*Math.random()|0),sr=0;function kn(i,e,t,s,c){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ha=c,this.key=++sr,this.ba=this.ea=!1}function hi(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function rn(i,e,t){for(const s in i)e.call(t,i[s],s,i)}function $t(i){const e={};for(const t in i)e[t]=i[t];return e}const yn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Mn(i,e){let t,s;for(let c=1;c<arguments.length;c++){for(t in s=arguments[c],s)i[t]=s[t];for(let m=0;m<yn.length;m++)t=yn[m],Object.prototype.hasOwnProperty.call(s,t)&&(i[t]=s[t])}}function Pn(i){this.src=i,this.g={},this.h=0}function jn(i,e){var t=e.type;if(t in i.g){var m,s=i.g[t],c=Pt(s,e);(m=0<=c)&&Array.prototype.splice.call(s,c,1),m&&(hi(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Or(i,e,t,s){for(var c=0;c<i.length;++c){var m=i[c];if(!m.ba&&m.listener==e&&m.capture==!!t&&m.ha==s)return c}return-1}Pn.prototype.add=function(i,e,t,s,c){var m=i.toString();(i=this.g[m])||(i=this.g[m]=[],this.h++);var C=Or(i,e,s,c);return-1<C?(e=i[C],t||(e.ea=!1)):((e=new kn(e,this.src,m,!!s,c)).ea=t,i.push(e)),e};var Re="closure_lm_"+(1e6*Math.random()|0),Ee={};function We(i,e,t,s,c){if(s&&s.once)return hn(i,e,t,s,c);if(Array.isArray(e)){for(var m=0;m<e.length;m++)We(i,e[m],t,s,c);return null}return t=On(t),i&&i[ui]?i.N(e,t,tt(s)?!!s.capture:!!s,c):Rt(i,e,t,!1,s,c)}function Rt(i,e,t,s,c,m){if(!e)throw Error("Invalid event type");var C=tt(c)?!!c.capture:!!c,R=Ot(i);if(R||(i[Re]=R=new Pn(i)),(t=R.add(e,t,s,C,m)).proxy)return t;if(s=function vt(){const e=yt;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=s,s.src=i,s.listener=t,i.addEventListener)xt||(c=C),void 0===c&&(c=!1),i.addEventListener(e.toString(),s,c);else if(i.attachEvent)i.attachEvent(ge(e.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return t}function hn(i,e,t,s,c){if(Array.isArray(e)){for(var m=0;m<e.length;m++)hn(i,e[m],t,s,c);return null}return t=On(t),i&&i[ui]?i.O(e,t,tt(s)?!!s.capture:!!s,c):Rt(i,e,t,!0,s,c)}function Be(i,e,t,s,c){if(Array.isArray(e))for(var m=0;m<e.length;m++)Be(i,e[m],t,s,c);else s=tt(s)?!!s.capture:!!s,t=On(t),i&&i[ui]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Or(m=i.g[e],t,s,c))&&(hi(m[t]),Array.prototype.splice.call(m,t,1),0==m.length&&(delete i.g[e],i.h--))):i&&(i=Ot(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Or(e,t,s,c)),(t=-1<i?e[i]:null)&&$e(t))}function $e(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[ui])jn(e.i,i);else{var t=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(t,s,i.capture):e.detachEvent?e.detachEvent(ge(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=Ot(e))?(jn(t,i),0==t.h&&(t.src=null,e[Re]=null)):hi(i)}}}function ge(i){return i in Ee?Ee[i]:Ee[i]="on"+i}function yt(i,e){if(i.ba)i=!0;else{e=new Gi(e,this);var t=i.listener,s=i.ha||i.src;i.ea&&$e(i),i=t.call(s,e)}return i}function Ot(i){return(i=i[Re])instanceof Pn?i:null}var Ht="__closure_events_fn_"+(1e9*Math.random()>>>0);function On(i){return"function"==typeof i?i:(i[Ht]||(i[Ht]=function(e){return i.handleEvent(e)}),i[Ht])}function Wn(){rt.call(this),this.i=new Pn(this),this.P=this,this.I=null}function fr(i,e){var t,s=i.I;if(s)for(t=[];s;s=s.I)t.push(s);if(i=i.P,s=e.type||e,"string"==typeof e)e=new cn(e,i);else if(e instanceof cn)e.target=e.target||i;else{var c=e;Mn(e=new cn(s,i),c)}if(c=!0,t)for(var m=t.length-1;0<=m;m--){var C=e.g=t[m];c=Fi(C,s,!0,e)&&c}if(c=Fi(C=e.g=i,s,!0,e)&&c,c=Fi(C,s,!1,e)&&c,t)for(m=0;m<t.length;m++)c=Fi(C=e.g=t[m],s,!1,e)&&c}function Fi(i,e,t,s){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var c=!0,m=0;m<e.length;++m){var C=e[m];if(C&&!C.ba&&C.capture==t){var R=C.listener,H=C.ha||C.src;C.ea&&jn(i.i,C),c=!1!==R.call(H,s)&&c}}return c&&!s.defaultPrevented}Le(Wn,rt),Wn.prototype[ui]=!0,Wn.prototype.removeEventListener=function(i,e,t,s){Be(this,i,e,t,s)},Wn.prototype.M=function(){if(Wn.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],s=0;s<t.length;s++)hi(t[s]);delete i.g[e],i.h--}}this.I=null},Wn.prototype.N=function(i,e,t,s){return this.i.add(String(i),e,!1,t,s)},Wn.prototype.O=function(i,e,t,s){return this.i.add(String(i),e,!0,t,s)};var Li=Fe.JSON.stringify;function Yi(){var i=vi;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Qn,Ri=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Pr,i=>i.reset());class Pr{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ls(i){Fe.setTimeout(()=>{throw i},0)}function zi(i,e){Qn||function ti(){var i=Fe.Promise.resolve(void 0);Qn=function(){i.then(ri)}}(),Nr||(Qn(),Nr=!0),vi.add(i,e)}var Nr=!1,vi=new class fi{constructor(){this.h=this.g=null}add(e,t){const s=Ri.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function ri(){for(var i;i=Yi();){try{i.h.call(i.g)}catch(t){ls(t)}var e=Ri;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Nr=!1}function Mr(i,e){Wn.call(this),this.h=i||1,this.g=e||Fe,this.j=be(this.lb,this),this.l=Date.now()}function fn(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function Xn(i,e,t){if("function"==typeof i)t&&(i=be(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=be(i.handleEvent,i)}return 2147483647<Number(e)?-1:Fe.setTimeout(i,e||0)}function $r(i){i.g=Xn(()=>{i.g=null,i.i&&(i.i=!1,$r(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Le(Mr,Wn),(J=Mr.prototype).ca=!1,J.R=null,J.lb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),fr(this,"tick"),this.ca&&(fn(this),this.start()))}},J.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},J.M=function(){Mr.X.M.call(this),fn(this),delete this.g};class Qr extends rt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:$r(this)}M(){super.M(),this.g&&(Fe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Oi(i){rt.call(this),this.h=i,this.g={}}Le(Oi,rt);var Hr=[];function wi(i,e,t,s){Array.isArray(t)||(t&&(Hr[0]=t.toString()),t=Hr);for(var c=0;c<t.length;c++){var m=We(e,t[c],s||i.handleEvent,!1,i.h||i);if(!m)break;i.g[m.key]=m}}function Gr(i){rn(i.g,function(e,t){this.g.hasOwnProperty(t)&&$e(e)},i),i.g={}}function ne(){this.g=!0}function lt(i,e,t,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ce(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var s=t[i];if(!(2>s.length)){var c=s[1];if(Array.isArray(c)&&!(1>c.length)){var m=c[0];if("noop"!=m&&"stop"!=m&&"close"!=m)for(var C=1;C<c.length;C++)c[C]=""}}}return Li(t)}catch(R){return e}}(i,t)+(s?" "+s:"")})}Oi.prototype.M=function(){Oi.X.M.call(this),Gr(this)},Oi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ne.prototype.Aa=function(){this.g=!1},ne.prototype.info=function(){};var Ye={},dt=null;function Ct(){return dt=dt||new Wn}function Lt(i){cn.call(this,Ye.Pa,i)}function sn(i){const e=Ct();fr(e,new Lt(e))}function Sn(i,e){cn.call(this,Ye.STAT_EVENT,i),this.stat=e}function Bn(i){const e=Ct();fr(e,new Sn(e,i))}function Yn(i,e){cn.call(this,Ye.Qa,i),this.size=e}function pi(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Fe.setTimeout(function(){i()},e)}Ye.Pa="serverreachability",Le(Lt,cn),Ye.STAT_EVENT="statevent",Le(Sn,cn),Ye.Qa="timingevent",Le(Yn,cn);var it={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},qe={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function mt(){}function nn(){}mt.prototype.h=null;var Er,In={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function rr(){cn.call(this,"d")}function kr(){cn.call(this,"c")}function Ir(){}function pr(i,e,t,s){this.l=i,this.j=e,this.m=t,this.U=s||1,this.S=new Oi(this),this.O=gi,this.T=new Mr(i=Zr?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Kn}function Kn(){this.i=null,this.g="",this.h=!1}Le(rr,cn),Le(kr,cn),Le(Ir,mt),Ir.prototype.g=function(){return new XMLHttpRequest},Ir.prototype.i=function(){return{}},Er=new Ir;var gi=45e3,ii={},lo={};function uo(i,e,t){i.K=1,i.v=bi(rs(e)),i.s=t,i.P=!0,Ls(i,null)}function Ls(i,e){i.F=Date.now(),ni(i),i.A=rs(i.v);var t=i.A,s=i.U;Array.isArray(s)||(s=[String(s)]),Xs(t.i,"t",s),i.C=0,t=i.l.H,i.h=new Kn,i.g=Hs(i.l,t?e:null,!i.s),0<i.N&&(i.L=new Qr(be(i.La,i,i.g),i.N)),wi(i.S,i.g,"readystatechange",i.ib),e=i.H?$t(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),sn(),function he(i,e,t,s,c,m){i.info(function(){if(i.g)if(m)for(var C="",R=m.split("&"),H=0;H<R.length;H++){var Z=R[H].split("=");if(1<Z.length){var ue=Z[0];Z=Z[1];var ze=ue.split("_");C=2<=ze.length&&"type"==ze[1]?C+(ue+"=")+Z+"&":C+(ue+"=redacted&")}}else C=null;else C=m;return"XMLHTTP REQ ("+s+") [attempt "+c+"]: "+e+"\n"+t+"\n"+C})}(i.j,i.u,i.A,i.m,i.U,i.s)}function Io(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function Vr(i,e,t){let c,s=!0;for(;!i.I&&i.C<t.length;){if(c=Jn(i,t),c==lo){4==e&&(i.o=4,Bn(14),s=!1),lt(i.j,i.m,null,"[Incomplete Response]");break}if(c==ii){i.o=4,Bn(15),lt(i.j,i.m,t,"[Invalid Chunk]"),s=!1;break}lt(i.j,i.m,c,null),Ss(i,c)}Io(i)&&c!=lo&&c!=ii&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Bn(16),s=!1),i.i=i.i&&s,s?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ka(e),e.K=!0,Bn(11))):(lt(i.j,i.m,t,"[Invalid Chunked Response]"),ms(i),Bi(i))}function Jn(i,e){var t=i.C,s=e.indexOf("\n",t);return-1==s?lo:(t=Number(e.substring(t,s)),isNaN(t)?ii:(s+=1)+t>e.length?lo:(e=e.substr(s,t),i.C=s+t,e))}function ni(i){i.V=Date.now()+i.O,wo(i,i.O)}function wo(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=pi(be(i.gb,i),e)}function Co(i){i.B&&(Fe.clearTimeout(i.B),i.B=null)}function Bi(i){0==i.l.G||i.I||ql(i.l,i)}function ms(i){Co(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,fn(i.T),Gr(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Ss(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||Js(t.h,i)))if(!i.J&&Js(t.h,i)&&3==t.G){try{var s=t.Fa.g.parse(e)}catch(Z){s=null}if(Array.isArray(s)&&3==s.length){var c=s;if(0==c[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;ll(t),Wa(t)}So(t),Bn(18)}}else t.Ba=c[1],0<t.Ba-t.T&&37500>c[2]&&t.L&&0==t.A&&!t.v&&(t.v=pi(be(t.cb,t),6e3));if(1>=ho(t.h)&&t.ja){try{t.ja()}catch(Z){}t.ja=void 0}}else Xo(t,11)}else if((i.J||t.g==i)&&ll(t),!Dn(e))for(c=t.Fa.g.parse(e),e=0;e<c.length;e++){let Z=c[e];if(t.T=Z[0],Z=Z[1],2==t.G)if("c"==Z[0]){t.I=Z[1],t.ka=Z[2];const ue=Z[3];null!=ue&&(t.ma=ue,t.j.info("VER="+t.ma));const ze=Z[4];null!=ze&&(t.Ca=ze,t.j.info("SVER="+t.Ca));const wt=Z[5];null!=wt&&"number"==typeof wt&&0<wt&&(t.J=s=1.5*wt,t.j.info("backChannelRequestTimeoutMs_="+s)),s=t;const Kt=i.g;if(Kt){const en=Kt.g?Kt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(en){var m=s.h;m.g||-1==en.indexOf("spdy")&&-1==en.indexOf("quic")&&-1==en.indexOf("h2")||(m.j=m.l,m.g=new Set,m.h&&(ki(m,m.h),m.h=null))}if(s.D){const Hn=Kt.g?Kt.g.getResponseHeader("X-HTTP-Session-Id"):null;Hn&&(s.za=Hn,zr(s.F,s.D,Hn))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var C=i;if((s=t).sa=_i(s,s.H?s.ka:null,s.V),C.J){Xr(s.h,C);var R=C,H=s.J;H&&R.setTimeout(H),R.B&&(Co(R),ni(R)),s.g=C}else Bo(s);0<t.i.length&&ca(t)}else"stop"!=Z[0]&&"close"!=Z[0]||Xo(t,7);else 3==t.G&&("stop"==Z[0]||"close"==Z[0]?"stop"==Z[0]?Xo(t,7):js(t):"noop"!=Z[0]&&t.l&&t.l.wa(Z),t.A=0)}sn()}catch(Z){}}function Qs(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Ke(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function ns(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(Ke(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const s in i)e[t++]=s;return e}}}(i),s=function Zs(i){if(i.W&&"function"==typeof i.W)return i.W();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(Ke(i)){for(var e=[],t=i.length,s=0;s<t;s++)e.push(i[s]);return e}for(s in e=[],t=0,i)e[t++]=i[s];return e}(i),c=s.length,m=0;m<c;m++)e.call(void 0,s[m],t&&t[m],i)}(J=pr.prototype).setTimeout=function(i){this.O=i},J.ib=function(i){i=i.target;const e=this.L;e&&3==Zn(i)?e.l():this.La(i)},J.La=function(i){try{if(i==this.g)e:{const ue=Zn(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>ue)&&(3!=ue||Zr||this.g&&(this.h.h||this.g.fa()||Br(this.g)))){this.I||4!=ue||7==e||sn(),Co(this);var t=this.g.aa();this.Y=t;t:if(Io(this)){var s=Br(this.g);i="";var c=s.length,m=4==Zn(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ms(this),Bi(this);var C="";break t}this.h.i=new Fe.TextDecoder}for(e=0;e<c;e++)this.h.h=!0,i+=this.h.i.decode(s[e],{stream:m&&e==c-1});s.splice(0,c),this.h.g+=i,this.C=0,C=this.h.g}else C=this.g.fa();if(this.i=200==t,function Ne(i,e,t,s,c,m,C){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+c+"]: "+e+"\n"+t+"\n"+m+" "+C})}(this.j,this.u,this.A,this.m,this.U,ue,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var R,H=this.g;if((R=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Dn(R)){var Z=R;break t}}Z=null}if(!(t=Z)){this.i=!1,this.o=3,Bn(12),ms(this),Bi(this);break e}lt(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ss(this,t)}this.P?(Vr(this,ue,C),Zr&&this.i&&3==ue&&(wi(this.S,this.T,"tick",this.hb),this.T.start())):(lt(this.j,this.m,C,null),Ss(this,C)),4==ue&&ms(this),this.i&&!this.I&&(4==ue?ql(this.l,this):(this.i=!1,ni(this)))}else 400==t&&0<C.indexOf("Unknown SID")?(this.o=3,Bn(12)):(this.o=0,Bn(13)),ms(this),Bi(this)}}}catch(ue){}},J.hb=function(){if(this.g){var i=Zn(this.g),e=this.g.fa();this.C<e.length&&(Co(this),Vr(this,i,e),this.i&&4!=i&&ni(this))}},J.cancel=function(){this.I=!0,ms(this)},J.gb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function Mt(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(sn(),Bn(17)),ms(this),this.o=2,Bi(this)):wo(this,this.V-i)};var Bs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pi(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Pi){this.h=void 0!==e?e:i.h,bo(this,i.j),this.s=i.s,this.g=i.g,is(this,i.m),this.l=i.l,e=i.i;var t=new mi;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Lo(this,t),this.o=i.o}else i&&(t=String(i).match(Bs))?(this.h=!!e,bo(this,t[1]||"",!0),this.s=gr(t[2]||""),this.g=gr(t[3]||"",!0),is(this,t[4]),this.l=gr(t[5]||"",!0),Lo(this,t[6]||"",!0),this.o=gr(t[7]||"")):(this.h=!!e,this.i=new mi(null,this.h))}function rs(i){return new Pi(i)}function bo(i,e,t){i.j=t?gr(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function is(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Lo(i,e,t){e instanceof mi?(i.i=e,function Zo(i,e){e&&!i.j&&($s(i),i.i=null,i.g.forEach(function(t,s){var c=s.toLowerCase();s!=c&&(Dr(this,s),Xs(this,c,t))},i)),i.j=e}(i.i,i.h)):(t||(e=us(e,Qi)),i.i=new mi(e,i.h))}function zr(i,e,t){i.i.set(e,t)}function bi(i){return zr(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function gr(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function us(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,As),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function As(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Pi.prototype.toString=function(){var i=[],e=this.j;e&&i.push(us(e,ss,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(us(e,ss,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(us(t,"/"==t.charAt(0)?cs:Ni,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",us(t,Xi)),i.join("")};var ss=/[#\/\?@]/g,Ni=/[#\?:]/g,cs=/[#\?]/g,Qi=/[#\?@]/g,Xi=/#/g;function mi(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function $s(i){i.g||(i.g=new Map,i.h=0,i.i&&function ys(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var s=i[t].indexOf("="),c=null;if(0<=s){var m=i[t].substring(0,s);c=i[t].substring(s+1)}else m=i[t];e(m,c?decodeURIComponent(c.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Dr(i,e){$s(i),e=Ci(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function Vs(i,e){return $s(i),e=Ci(i,e),i.g.has(e)}function Xs(i,e,t){Dr(i,e),0<t.length&&(i.i=null,i.g.set(Ci(i,e),St(t)),i.h+=t.length)}function Ci(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function qi(i){this.l=i||$i,i=Fe.PerformanceNavigationTiming?0<(i=Fe.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Fe.g&&Fe.g.Ga&&Fe.g.Ga()&&Fe.g.Ga().$b),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(J=mi.prototype).add=function(i,e){$s(this),this.i=null,i=Ci(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},J.forEach=function(i,e){$s(this),this.g.forEach(function(t,s){t.forEach(function(c){i.call(e,c,s,this)},this)},this)},J.oa=function(){$s(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const c=i[s];for(let m=0;m<c.length;m++)t.push(e[s])}return t},J.W=function(i){$s(this);let e=[];if("string"==typeof i)Vs(this,i)&&(e=e.concat(this.g.get(Ci(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},J.set=function(i,e){return $s(this),this.i=null,Vs(this,i=Ci(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},J.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},J.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const m=encodeURIComponent(String(s)),C=this.W(s);for(s=0;s<C.length;s++){var c=m;""!==C[s]&&(c+="="+encodeURIComponent(String(C[s]))),i.push(c)}}return this.i=i.join("&")};var $i=10;function Qo(i){return!!i.h||!!i.g&&i.g.size>=i.j}function ho(i){return i.h?1:i.g?i.g.size:0}function Js(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function ki(i,e){i.g?i.g.add(e):i.h=e}function Xr(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function eo(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return St(i.i)}function or(){}function Do(){this.g=new or}function va(i,e,t){const s=t||"";try{Qs(i,function(c,m){let C=c;tt(c)&&(C=Li(c)),e.push(s+m+"="+encodeURIComponent(C))})}catch(c){throw e.push(s+"type="+encodeURIComponent("_badmap")),c}}function vs(i,e,t,s,c){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,c(s)}catch(m){}}function Us(i){this.l=i.ac||null,this.j=i.jb||!1}function tr(i,e){Wn.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=fo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}qi.prototype.cancel=function(){if(this.i=eo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},or.prototype.stringify=function(i){return Fe.JSON.stringify(i,void 0)},or.prototype.parse=function(i){return Fe.JSON.parse(i,void 0)},Le(Us,mt),Us.prototype.g=function(){return new tr(this.l,this.j)},Us.prototype.i=function(i){return function(){return i}}({}),Le(tr,Wn);var fo=0;function To(i){i.j.read().then(i.Ta.bind(i)).catch(i.ga.bind(i))}function qt(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Fn(i)}function Fn(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(J=tr.prototype).open=function(i,e){if(this.readyState!=fo)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Fn(this)},J.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||Fe).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},J.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qt(this)),this.readyState=fo},J.Wa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Fn(this)),this.g&&(this.readyState=3,Fn(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Fe.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;To(this)}else i.text().then(this.Va.bind(this),this.ga.bind(this))},J.Ta=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?qt(this):Fn(this),3==this.readyState&&To(this)}},J.Va=function(i){this.g&&(this.response=this.responseText=i,qt(this))},J.Ua=function(i){this.g&&(this.response=i,qt(this))},J.ga=function(){this.g&&qt(this)},J.setRequestHeader=function(i,e){this.v.append(i,e)},J.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},J.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(tr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var j=Fe.JSON.parse;function f(i){Wn.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=I,this.K=this.L=!1}Le(f,Wn);var I="",y=/^https?$/i,P=["POST","PUT"];function gt(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,tn(i),Gn(i)}function tn(i){i.D||(i.D=!0,fr(i,"complete"),fr(i,"error"))}function vn(i){if(i.h&&typeof Xe<"u"&&(!i.C[1]||4!=Zn(i)||2!=i.aa()))if(i.v&&4==Zn(i))Xn(i.Ha,0,i);else if(fr(i,"readystatechange"),4==Zn(i)){i.h=!1;try{const R=i.aa();e:switch(R){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===R){var c=String(i.H).match(Bs)[1]||null;if(!c&&Fe.self&&Fe.self.location){var m=Fe.self.location.protocol;c=m.substr(0,m.length-1)}s=!y.test(c?c.toLowerCase():"")}t=s}if(t)fr(i,"complete"),fr(i,"success");else{i.m=6;try{var C=2<Zn(i)?i.g.statusText:""}catch(H){C=""}i.j=C+" ["+i.aa()+"]",tn(i)}}finally{Gn(i)}}}function Gn(i,e){if(i.g){Rr(i);const t=i.g,s=i.C[0]?je:null;i.g=null,i.C=null,e||fr(i,"ready");try{t.onreadystatechange=s}catch(c){}}}function Rr(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(Fe.clearTimeout(i.A),i.A=null)}function Zn(i){return i.g?i.g.readyState:0}function Br(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case I:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ji(i){let e="";return rn(i,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function Ui(i,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=Ji(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):zr(i,e,t))}function si(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function la(i){this.Ca=0,this.i=[],this.j=new ne,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=si("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=si("baseRetryDelayMs",5e3,i),this.bb=si("retryDelaySeedMs",1e4,i),this.$a=si("forwardChannelMaxRetries",2,i),this.ta=si("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Zb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new qi(i&&i.concurrentRequestLimit),this.Fa=new Do,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=i&&i.Xb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function js(i){if(ua(i),3==i.G){var e=i.U++,t=rs(i.F);zr(t,"SID",i.I),zr(t,"RID",e),zr(t,"TYPE","terminate"),xs(i,t),(e=new pr(i,i.j,e,void 0)).K=2,e.v=bi(rs(t)),t=!1,Fe.navigator&&Fe.navigator.sendBeacon&&(t=Fe.navigator.sendBeacon(e.v.toString(),"")),!t&&Fe.Image&&((new Image).src=e.v,t=!0),t||(e.g=Hs(e.l,null),e.g.da(e.v)),e.F=Date.now(),ni(e)}Iu(i)}function Wa(i){i.g&&(Ka(i),i.g.cancel(),i.g=null)}function ua(i){Wa(i),i.u&&(Fe.clearTimeout(i.u),i.u=null),ll(i),i.h.cancel(),i.m&&("number"==typeof i.m&&Fe.clearTimeout(i.m),i.m=null)}function ca(i){Qo(i.h)||i.m||(i.m=!0,zi(i.Ja,i),i.C=0)}function Pa(i,e){var t;t=e?e.m:i.U++;const s=rs(i.F);zr(s,"SID",i.I),zr(s,"RID",t),zr(s,"AID",i.T),xs(i,s),i.o&&i.s&&Ui(s,i.o,i.s),t=new pr(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=Na(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),ki(i.h,t),uo(t,s,e)}function xs(i,e){i.ia&&rn(i.ia,function(t,s){zr(e,s,t)}),i.l&&Qs({},function(t,s){zr(e,s,t)})}function Na(i,e,t){t=Math.min(i.i.length,t);var s=i.l?be(i.l.Ra,i.l,i):null;e:{var c=i.i;let m=-1;for(;;){const C=["count="+t];-1==m?0<t?(m=c[0].h,C.push("ofs="+m)):m=0:C.push("ofs="+m);let R=!0;for(let H=0;H<t;H++){let Z=c[H].h;const ue=c[H].g;if(Z-=m,0>Z)m=Math.max(0,c[H].h-100),R=!1;else try{va(ue,C,"req"+Z+"_")}catch(ze){s&&s(ue)}}if(R){s=C.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,s}function Bo(i){i.g||i.u||(i.Z=1,zi(i.Ia,i),i.A=0)}function So(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=pi(be(i.Ia,i),Ya(i,i.A)),i.A++,0))}function Ka(i){null!=i.B&&(Fe.clearTimeout(i.B),i.B=null)}function al(i){i.g=new pr(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=rs(i.sa);zr(e,"RID","rpc"),zr(e,"SID",i.I),zr(e,"CI",i.L?"0":"1"),zr(e,"AID",i.T),zr(e,"TYPE","xmlhttp"),xs(i,e),i.o&&i.s&&Ui(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=bi(rs(e)),t.s=null,t.P=!0,Ls(t,i)}function ll(i){null!=i.v&&(Fe.clearTimeout(i.v),i.v=null)}function ql(i,e){var t=null;if(i.g==e){ll(i),Ka(i),i.g=null;var s=2}else{if(!Js(i.h,e))return;t=e.D,Xr(i.h,e),s=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var c=i.C;fr(s=Ct(),new Yn(s,t)),ca(i)}else Bo(i);else if(3==(c=e.o)||0==c&&0<i.pa||!(1==s&&function _a(i,e){return!(ho(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Za?0:i.$a)||(i.m=pi(be(i.Ja,i,e),Ya(i,i.C)),i.C++,0)))}(i,e)||2==s&&So(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),c){case 1:Xo(i,5);break;case 4:Xo(i,10);break;case 3:Xo(i,6);break;default:Xo(i,2)}}function Ya(i,e){let t=i.Xa+Math.floor(Math.random()*i.bb);return i.l||(t*=2),t*e}function Xo(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var s=be(i.kb,i);t||(t=new Pi("//www.google.com/images/cleardot.gif"),Fe.location&&"http"==Fe.location.protocol||bo(t,"https"),bi(t)),function to(i,e){const t=new ne;if(Fe.Image){const s=new Image;s.onload=Je(vs,t,s,"TestLoadImage: loaded",!0,e),s.onerror=Je(vs,t,s,"TestLoadImage: error",!1,e),s.onabort=Je(vs,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=Je(vs,t,s,"TestLoadImage: timeout",!1,e),Fe.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}(t.toString(),s)}else Bn(2);i.G=0,i.l&&i.l.va(e),Iu(i),ua(i)}function Iu(i){if(i.G=0,i.la=[],i.l){const e=eo(i.h);(0!=e.length||0!=i.i.length)&&(Nt(i.la,e),Nt(i.la,i.i),i.h.i.length=0,St(i.i),i.i.length=0),i.l.ua()}}function _i(i,e,t){var s=t instanceof Pi?rs(t):new Pi(t,void 0);if(""!=s.g)e&&(s.g=e+"."+s.g),is(s,s.m);else{var c=Fe.location;s=c.protocol,e=e?e+"."+c.hostname:c.hostname,c=+c.port;var m=new Pi(null,void 0);s&&bo(m,s),e&&(m.g=e),c&&is(m,c),t&&(m.l=t),s=m}return e=i.za,(t=i.D)&&e&&zr(s,t,e),zr(s,"VER",i.ma),xs(i,s),s}function Hs(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new f(t&&i.Da&&!i.ra?new Us({jb:!0}):i.ra)).Ka(i.H),e}function Di(){}function Jo(){if(dr&&!(10<=Number(yi)))throw Error("Environmental error: no available transport.")}function ds(i,e){Wn.call(this),this.g=new la(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Yb)&&!Dn(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Dn(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Ti(this)}function Ao(i){rr.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function $o(){kr.call(this),this.status=1}function Ti(i){this.g=i}(J=f.prototype).Ka=function(i){this.L=i},J.da=function(i,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Er.g(),this.C=function Ut(i){return i.h||(i.h=i.i())}(this.u?this.u:Er),this.g.onreadystatechange=be(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(m){return void gt(this,m)}if(i=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var c in s)t.set(c,s[c]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const m of s.keys())t.set(m,s.get(m))}s=Array.from(t.keys()).find(m=>"content-type"==m.toLowerCase()),c=Fe.FormData&&i instanceof Fe.FormData,!(0<=Pt(P,e))||s||c||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[m,C]of t)this.g.setRequestHeader(m,C);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Rr(this),0<this.B&&((this.K=function Q(i){return dr&&function Cn(){return function _r(i){var e=xr;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=Ln(String(Ar)).split("."),t=Ln("9").split("."),s=Math.max(e.length,t.length);for(let C=0;0==i&&C<s;C++){var c=e[C]||"",m=t[C]||"";do{if(c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],m=/(\d*)(\D*)(.*)/.exec(m)||["","","",""],0==c[0].length&&0==m[0].length)break;i=Un(0==c[1].length?0:parseInt(c[1],10),0==m[1].length?0:parseInt(m[1],10))||Un(0==c[2].length,0==m[2].length)||Un(c[2],m[2]),c=c[3],m=m[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=be(this.qa,this)):this.A=Xn(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(m){gt(this,m)}},J.qa=function(){typeof Xe<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,fr(this,"timeout"),this.abort(8))},J.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,fr(this,"complete"),fr(this,"abort"),Gn(this))},J.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Gn(this,!0)),f.X.M.call(this)},J.Ha=function(){this.s||(this.F||this.v||this.l?vn(this):this.fb())},J.fb=function(){vn(this)},J.aa=function(){try{return 2<Zn(this)?this.g.status:-1}catch(i){return-1}},J.fa=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},J.Sa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),j(e)}},J.Ea=function(){return this.m},J.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(J=la.prototype).ma=8,J.G=1,J.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const c=new pr(this,this.j,i,void 0);let m=this.s;if(this.S&&(m?(m=$t(m),Mn(m,this.S)):m=this.S),null!==this.o||this.N||(c.H=m,m=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var s=this.i[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Na(this,c,e),zr(t=rs(this.F),"RID",i),zr(t,"CVER",22),this.D&&zr(t,"X-HTTP-Session-Id",this.D),xs(this,t),m&&(this.N?e="headers="+encodeURIComponent(String(Ji(m)))+"&"+e:this.o&&Ui(t,this.o,m)),ki(this.h,c),this.Ya&&zr(t,"TYPE","init"),this.O?(zr(t,"$req",e),zr(t,"SID","null"),c.Z=!0,uo(c,t,null)):uo(c,t,e),this.G=2}}else 3==this.G&&(i?Pa(this,i):0==this.i.length||Qo(this.h)||Pa(this))},J.Ia=function(){if(this.u=null,al(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=pi(be(this.eb,this),i)}},J.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Bn(10),Wa(this),al(this))},J.cb=function(){null!=this.v&&(this.v=null,Wa(this),So(this),Bn(19))},J.kb=function(i){i?(this.j.info("Successfully pinged google.com"),Bn(2)):(this.j.info("Failed to ping google.com"),Bn(1))},(J=Di.prototype).xa=function(){},J.wa=function(){},J.va=function(){},J.ua=function(){},J.Ra=function(){},Jo.prototype.g=function(i,e){return new ds(i,e)},Le(ds,Wn),ds.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;Bn(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=_i(i,null,i.V),ca(i)},ds.prototype.close=function(){js(this.g)},ds.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=Li(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.ab++,i)),3==e.G&&ca(e)},ds.prototype.M=function(){this.g.l=null,delete this.j,js(this.g),delete this.g,ds.X.M.call(this)},Le(Ao,rr),Le($o,kr),Le(Ti,Di),Ti.prototype.xa=function(){fr(this.g,"a")},Ti.prototype.wa=function(i){fr(this.g,new Ao(i))},Ti.prototype.va=function(i){fr(this.g,new $o)},Ti.prototype.ua=function(){fr(this.g,"b")},Jo.prototype.createWebChannel=Jo.prototype.g,ds.prototype.send=ds.prototype.u,ds.prototype.open=ds.prototype.m,ds.prototype.close=ds.prototype.close,it.NO_ERROR=0,it.TIMEOUT=8,it.HTTP_ERROR=6,qe.COMPLETE="complete",nn.EventType=In,In.OPEN="a",In.CLOSE="b",In.ERROR="c",In.MESSAGE="d",Wn.prototype.listen=Wn.prototype.N,f.prototype.listenOnce=f.prototype.O,f.prototype.getLastError=f.prototype.Oa,f.prototype.getLastErrorCode=f.prototype.Ea,f.prototype.getStatus=f.prototype.aa,f.prototype.getResponseJson=f.prototype.Sa,f.prototype.getResponseText=f.prototype.fa,f.prototype.send=f.prototype.da,f.prototype.setWithCredentials=f.prototype.Ka;var da=Oe.createWebChannelTransport=function(){return new Jo},pl=Oe.getStatEventTarget=function(){return Ct()},ka=Oe.ErrorCode=it,ea=Oe.EventType=qe,Fa=Oe.Event=Ye,Pl=Oe.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},N=Oe.FetchXmlHttpFactory=Us,K=Oe.WebChannel=nn,B=Oe.XhrIo=f;const re="@firebase/firestore";class ye{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ye.UNAUTHENTICATED=new ye(null),ye.GOOGLE_CREDENTIALS=new ye("google-credentials-uid"),ye.FIRST_PARTY=new ye("first-party-uid"),ye.MOCK_USER=new ye("mock-user");let _t="9.17.2";const Vt=new et.Yd("@firebase/firestore");function un(){return Vt.logLevel}function Ft(i,...e){if(Vt.logLevel<=et.in.DEBUG){const t=e.map(Ei);Vt.debug(`Firestore (${_t}): ${i}`,...t)}}function ir(i,...e){if(Vt.logLevel<=et.in.ERROR){const t=e.map(Ei);Vt.error(`Firestore (${_t}): ${i}`,...t)}}function ar(i,...e){if(Vt.logLevel<=et.in.WARN){const t=e.map(Ei);Vt.warn(`Firestore (${_t}): ${i}`,...t)}}function Ei(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function zt(i="Unexpected state"){const e=`FIRESTORE (${_t}) INTERNAL ASSERTION FAILED: `+i;throw ir(e),new Error(e)}function _n(i,e){i||zt()}function dn(i,e){return i}const It={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Wt extends Qe.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ii{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Vo{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Uo{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ye.UNAUTHENTICATED))}shutdown(){}}class qa{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Zl{constructor(e){this.t=e,this.currentUser=ye.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let c=this.i;const m=Z=>this.i!==c?(c=this.i,t(Z)):Promise.resolve();let C=new Ii;this.o=()=>{this.i++,this.currentUser=this.u(),C.resolve(),C=new Ii,e.enqueueRetryable(()=>m(this.currentUser))};const R=()=>{const Z=C;e.enqueueRetryable((0,le.Z)(function*(){yield Z.promise,yield m(s.currentUser)}))},H=Z=>{Ft("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=Z,this.auth.addAuthTokenListener(this.o),R()};this.t.onInit(Z=>H(Z)),setTimeout(()=>{if(!this.auth){const Z=this.t.getImmediate({optional:!0});Z?H(Z):(Ft("FirebaseAuthCredentialsProvider","Auth not yet detected"),C.resolve(),C=new Ii)}},0),R()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(Ft("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(_n("string"==typeof s.accessToken),new Vo(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return _n(null===e||"string"==typeof e),new ye(e)}}class Ea{constructor(e,t,s,c){this.h=e,this.l=t,this.m=s,this.g=c,this.type="FirstParty",this.user=ye.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(_n(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Za{constructor(e,t,s,c){this.h=e,this.l=t,this.m=s,this.g=c}getToken(){return Promise.resolve(new Ea(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(ye.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Gs{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gl{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const s=m=>{null!=m.error&&Ft("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const C=m.token!==this.A;return this.A=m.token,Ft("FirebaseAppCheckTokenProvider",`Received ${C?"new":"existing"} token.`),C?t(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable(()=>s(m))};const c=m=>{Ft("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.appCheck.addTokenListener(this.o)};this.T.onInit(m=>c(m)),setTimeout(()=>{if(!this.appCheck){const m=this.T.getImmediate({optional:!0});m?c(m):Ft("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(_n("string"==typeof t.token),this.A=t.token,new Gs(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ml(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}class ul{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const c=ml(40);for(let m=0;m<c.length;++m)s.length<20&&c[m]<t&&(s+=e.charAt(c[m]%e.length))}return s}}function mr(i,e){return i<e?-1:i>e?1:0}function ha(i,e,t){return i.length===e.length&&i.every((s,c)=>t(s,e[c]))}function Ql(i){return i+"\0"}class Si{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Wt(It.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Wt(It.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Wt(It.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Wt(It.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Si.fromMillis(Date.now())}static fromDate(e){return Si.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Si(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?mr(this.nanoseconds,e.nanoseconds):mr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class qn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new qn(e)}static min(){return new qn(new Si(0,0))}static max(){return new qn(new Si(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class xo{constructor(e,t,s){void 0===t?t=0:t>e.length&&zt(),void 0===s?s=e.length-t:s>e.length-t&&zt(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===xo.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xo?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let c=0;c<s;c++){const m=e.get(c),C=t.get(c);if(m<C)return-1;if(m>C)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ur extends xo{construct(e,t,s){return new Ur(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Wt(It.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(c=>c.length>0))}return new Ur(t)}static emptyPath(){return new Ur([])}}const Nl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ai extends xo{construct(e,t,s){return new ai(e,t,s)}static isValidIdentifier(e){return Nl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ai.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ai(["__name__"])}static fromServerFormat(e){const t=[];let s="",c=0;const m=()=>{if(0===s.length)throw new Wt(It.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let C=!1;for(;c<e.length;){const R=e[c];if("\\"===R){if(c+1===e.length)throw new Wt(It.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const H=e[c+1];if("\\"!==H&&"."!==H&&"`"!==H)throw new Wt(It.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=H,c+=2}else"`"===R?(C=!C,c++):"."!==R||C?(s+=R,c++):(m(),c++)}if(m(),C)throw new Wt(It.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ai(t)}static emptyPath(){return new ai([])}}class pn{constructor(e){this.path=e}static fromPath(e){return new pn(Ur.fromString(e))}static fromName(e){return new pn(Ur.fromString(e).popFirst(5))}static empty(){return new pn(Ur.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ur.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ur.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pn(new Ur(e.slice()))}}class cl{constructor(e,t,s,c){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=c}}function es(i){return i.fields.find(e=>2===e.kind)}function fa(i){return i.fields.filter(e=>2!==e.kind)}cl.UNKNOWN_ID=-1;class Mo{constructor(e,t){this.fieldPath=e,this.kind=t}}class Qa{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Qa(0,zs.min())}}function wu(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,c=qn.fromTimestamp(1e9===s?new Si(t+1,0):new Si(t,s));return new zs(c,pn.empty(),e)}function Cu(i){return new zs(i.readTime,i.key,-1)}class zs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new zs(qn.min(),pn.empty(),-1)}static max(){return new zs(qn.max(),pn.empty(),-1)}}function ta(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=pn.comparator(i.documentKey,e.documentKey),0!==t?t:mr(i.largestBatchId,e.largestBatchId))}const na="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Zi{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function wa(i){return Ca.apply(this,arguments)}function Ca(){return Ca=(0,le.Z)(function*(i){if(i.code!==It.FAILED_PRECONDITION||i.message!==na)throw i;Ft("LocalStore","Unexpectedly lost primary lease")}),Ca.apply(this,arguments)}class bt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&zt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new bt((s,c)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(s,c)},this.catchCallback=m=>{this.wrapFailure(t,m).next(s,c)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof bt?t:bt.resolve(t)}catch(t){return bt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):bt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):bt.reject(t)}static resolve(e){return new bt((t,s)=>{t(e)})}static reject(e){return new bt((t,s)=>{s(e)})}static waitFor(e){return new bt((t,s)=>{let c=0,m=0,C=!1;e.forEach(R=>{++c,R.next(()=>{++m,C&&m===c&&t()},H=>s(H))}),C=!0,m===c&&t()})}static or(e){let t=bt.resolve(!1);for(const s of e)t=t.next(c=>c?bt.resolve(c):s());return t}static forEach(e,t){const s=[];return e.forEach((c,m)=>{s.push(t.call(this,c,m))}),this.waitFor(s)}static mapArray(e,t){return new bt((s,c)=>{const m=e.length,C=new Array(m);let R=0;for(let H=0;H<m;H++){const Z=H;t(e[Z]).next(ue=>{C[Z]=ue,++R,R===m&&s(C)},ue=>c(ue))}})}static doWhile(e,t){return new bt((s,c)=>{const m=()=>{!0===e()?t().next(()=>{m()},c):s()};m()})}}class yl{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Ii,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new vl(e,t.error)):this.v.resolve()},this.transaction.onerror=s=>{const c=_l(s.target.error);this.v.reject(new vl(e,c))}}static open(e,t,s,c){try{return new yl(t,e.transaction(c,s))}catch(m){throw new vl(t,m)}}get P(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ft("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new bu(t)}}class Ms{constructor(e,t,s){this.name=e,this.version=t,this.S=s,12.2===Ms.D((0,Qe.z$)())&&ir("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ft("SimpleDb","Removing database:",e),Ja(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Qe.hl)())return!1;if(Ms.N())return!0;const e=(0,Qe.z$)(),t=Ms.D(e),s=0<t&&t<10,c=Ms.k(e),m=0<c&&c<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||m)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static k(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}F(e){var t=this;return(0,le.Z)(function*(){return t.db||(Ft("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,c)=>{const m=indexedDB.open(t.name,t.version);m.onsuccess=C=>{s(C.target.result)},m.onblocked=()=>{c(new vl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},m.onerror=C=>{const R=C.target.error;c("VersionError"===R.name?new Wt(It.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===R.name?new Wt(It.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+R):new vl(e,R))},m.onupgradeneeded=C=>{Ft("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',C.oldVersion),t.S.$(C.target.result,m.transaction,C.oldVersion,t.version).next(()=>{Ft("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=s=>t.B(s)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,c){var m=this;return(0,le.Z)(function*(){const C="readonly"===t;let R=0;for(;;){++R;try{m.db=yield m.F(e);const H=yl.open(m.db,e,C?"readonly":"readwrite",s),Z=c(H).next(ue=>(H.V(),ue)).catch(ue=>(H.abort(ue),bt.reject(ue))).toPromise();return Z.catch(()=>{}),yield H.P,Z}catch(H){const Z=H,ue="FirebaseError"!==Z.name&&R<3;if(Ft("SimpleDb","Transaction failed with error:",Z.message,"Retrying:",ue),m.close(),!ue)return Promise.reject(Z)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Ai{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Ja(this.q.delete())}}class vl extends Wt{constructor(e,t){super(It.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Xa(i){return"IndexedDbTransactionError"===i.name}class bu{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(Ft("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(Ft("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Ja(s)}add(e){return Ft("SimpleDb","ADD",this.store.name,e,e),Ja(this.store.add(e))}get(e){return Ja(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ft("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ft("SimpleDb","DELETE",this.store.name,e),Ja(this.store.delete(e))}count(){return Ft("SimpleDb","COUNT",this.store.name),Ja(this.store.count())}W(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const c=this.cursor(s),m=[];return this.H(c,(C,R)=>{m.push(R)}).next(()=>m)}{const c=this.store.getAll(s.range);return new bt((m,C)=>{c.onerror=R=>{C(R.target.error)},c.onsuccess=R=>{m(R.target.result)}})}}J(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new bt((c,m)=>{s.onerror=C=>{m(C.target.error)},s.onsuccess=C=>{c(C.target.result)}})}Y(e,t){Ft("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Z=!1;const c=this.cursor(s);return this.H(c,(m,C,R)=>R.delete())}X(e,t){let s;t?s=e:(s={},t=e);const c=this.cursor(s);return this.H(c,t)}tt(e){const t=this.cursor({});return new bt((s,c)=>{t.onerror=m=>{const C=_l(m.target.error);c(C)},t.onsuccess=m=>{const C=m.target.result;C?e(C.primaryKey,C.value).next(R=>{R?C.continue():s()}):s()}})}H(e,t){const s=[];return new bt((c,m)=>{e.onerror=C=>{m(C.target.error)},e.onsuccess=C=>{const R=C.target.result;if(!R)return void c();const H=new Ai(R),Z=t(R.primaryKey,R.value,H);if(Z instanceof bt){const ue=Z.catch(ze=>(H.done(),bt.reject(ze)));s.push(ue)}H.isDone?c():null===H.G?R.continue():R.continue(H.G)}}).next(()=>bt.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Z?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ja(i){return new bt((e,t)=>{i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{const c=_l(s.target.error);t(c)}})}let kl=!1;function _l(i){const e=Ms.D((0,Qe.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const s=new Wt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return kl||(kl=!0,setTimeout(()=>{throw s},0)),s}}return i}class Du{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ft("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,le.Z)(function*(){t.task=null;try{Ft("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(s){Xa(s)?Ft("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield wa(s)}yield t.nt(6e4)}))}}class ba{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,le.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.it(s,e))})()}it(e,t){const s=new Set;let c=t,m=!0;return bt.doWhile(()=>!0===m&&c>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(C=>{if(null!==C&&!s.has(C))return Ft("IndexBackiller",`Processing collection: ${C}`),this.rt(e,C,c).next(R=>{c-=R,s.add(C)});m=!1})).next(()=>t-c)}rt(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(c=>this.localStore.localDocuments.getNextDocuments(e,t,c,s).next(m=>{const C=m.changes;return this.localStore.indexManager.updateIndexEntries(e,C).next(()=>this.ot(c,m)).next(R=>(Ft("IndexBackiller",`Updating offset: ${R}`),this.localStore.indexManager.updateCollectionGroup(e,t,R))).next(()=>C.size)}))}ot(e,t){let s=e;return t.changes.forEach((c,m)=>{const C=Cu(m);ta(C,s)>0&&(s=C)}),new zs(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let no=(()=>{class i{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=c=>this.ut(c),this.ct=c=>s.writeSequenceNumber(c))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return i.at=-1,i})();class ra{constructor(e,t,s,c,m,C,R,H){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=c,this.ssl=m,this.forceLongPolling=C,this.autoDetectLongPolling=R,this.useFetchStreams=H}}class Ta{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ta("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ta&&e.projectId===this.projectId&&e.database===this.database}}function Rs(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function po(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Ba(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Ro(i){return null==i}function jo(i){return 0===i&&1/i==-1/0}function Fl(i){return"number"==typeof i&&Number.isInteger(i)&&!jo(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class Xl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class _s{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(c){throw c instanceof DOMException?new Xl("Invalid base64 string: "+c):c}}(e);return new _s(t)}static fromUint8Array(e){const t=function(s){let c="";for(let m=0;m<s.length;++m)c+=String.fromCharCode(s[m]);return c}(e);return new _s(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_s.EMPTY_BYTE_STRING=new _s("");const ro=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ws(i){if(_n(!!i),"string"==typeof i){let e=0;const t=ro.exec(i);if(_n(!!t),t[1]){let c=t[1];c=(c+"000000000").substr(0,9),e=Number(c)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:li(i.seconds),nanos:li(i.nanos)}}function li(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function ia(i){return"string"==typeof i?_s.fromBase64String(i):_s.fromUint8Array(i)}function $a(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function T(i){const e=i.mapValue.fields.__previous_value__;return $a(e)?T(e):e}function x(i){const e=Ws(i.mapValue.fields.__local_write_time__.timestampValue);return new Si(e.seconds,e.nanos)}const w={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},M={nullValue:"NULL_VALUE"};function V(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?$a(i)?4:Jt(i)?9007199254740991:10:zt()}function X(i,e){if(i===e)return!0;const t=V(i);if(t!==V(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return x(i).isEqual(x(e));case 3:return function(s,c){if("string"==typeof s.timestampValue&&"string"==typeof c.timestampValue&&s.timestampValue.length===c.timestampValue.length)return s.timestampValue===c.timestampValue;const m=Ws(s.timestampValue),C=Ws(c.timestampValue);return m.seconds===C.seconds&&m.nanos===C.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return c=e,ia(i.bytesValue).isEqual(ia(c.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,c){return li(s.geoPointValue.latitude)===li(c.geoPointValue.latitude)&&li(s.geoPointValue.longitude)===li(c.geoPointValue.longitude)}(i,e);case 2:return function(s,c){if("integerValue"in s&&"integerValue"in c)return li(s.integerValue)===li(c.integerValue);if("doubleValue"in s&&"doubleValue"in c){const m=li(s.doubleValue),C=li(c.doubleValue);return m===C?jo(m)===jo(C):isNaN(m)&&isNaN(C)}return!1}(i,e);case 9:return ha(i.arrayValue.values||[],e.arrayValue.values||[],X);case 10:return function(s,c){const m=s.mapValue.fields||{},C=c.mapValue.fields||{};if(Rs(m)!==Rs(C))return!1;for(const R in m)if(m.hasOwnProperty(R)&&(void 0===C[R]||!X(m[R],C[R])))return!1;return!0}(i,e);default:return zt()}var c}function ie(i,e){return void 0!==(i.values||[]).find(t=>X(t,e))}function Ze(i,e){if(i===e)return 0;const t=V(i),s=V(e);if(t!==s)return mr(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return mr(i.booleanValue,e.booleanValue);case 2:return function(c,m){const C=li(c.integerValue||c.doubleValue),R=li(m.integerValue||m.doubleValue);return C<R?-1:C>R?1:C===R?0:isNaN(C)?isNaN(R)?0:-1:1}(i,e);case 3:return At(i.timestampValue,e.timestampValue);case 4:return At(x(i),x(e));case 5:return mr(i.stringValue,e.stringValue);case 6:return function(c,m){const C=ia(c),R=ia(m);return C.compareTo(R)}(i.bytesValue,e.bytesValue);case 7:return function(c,m){const C=c.split("/"),R=m.split("/");for(let H=0;H<C.length&&H<R.length;H++){const Z=mr(C[H],R[H]);if(0!==Z)return Z}return mr(C.length,R.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,m){const C=mr(li(c.latitude),li(m.latitude));return 0!==C?C:mr(li(c.longitude),li(m.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(c,m){const C=c.values||[],R=m.values||[];for(let H=0;H<C.length&&H<R.length;++H){const Z=Ze(C[H],R[H]);if(Z)return Z}return mr(C.length,R.length)}(i.arrayValue,e.arrayValue);case 10:return function(c,m){if(c===w.mapValue&&m===w.mapValue)return 0;if(c===w.mapValue)return 1;if(m===w.mapValue)return-1;const C=c.fields||{},R=Object.keys(C),H=m.fields||{},Z=Object.keys(H);R.sort(),Z.sort();for(let ue=0;ue<R.length&&ue<Z.length;++ue){const ze=mr(R[ue],Z[ue]);if(0!==ze)return ze;const wt=Ze(C[R[ue]],H[Z[ue]]);if(0!==wt)return wt}return mr(R.length,Z.length)}(i.mapValue,e.mapValue);default:throw zt()}}function At(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return mr(i,e);const t=Ws(i),s=Ws(e),c=mr(t.seconds,s.seconds);return 0!==c?c:mr(t.nanos,s.nanos)}function on(i){return Rn(i)}function Rn(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const c=Ws(s);return`time(${c.seconds},${c.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?ia(i.bytesValue).toBase64():"referenceValue"in i?pn.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(s){let c="[",m=!0;for(const C of s.values||[])m?m=!1:c+=",",c+=Rn(C);return c+"]"}(i.arrayValue):"mapValue"in i?function(s){const c=Object.keys(s.fields||{}).sort();let m="{",C=!0;for(const R of c)C?C=!1:m+=",",m+=`${R}:${Rn(s.fields[R])}`;return m+"}"}(i.mapValue):zt();var e}function wn(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function F(i){return!!i&&"integerValue"in i}function U(i){return!!i&&"arrayValue"in i}function ee(i){return!!i&&"nullValue"in i}function De(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function ot(i){return!!i&&"mapValue"in i}function Et(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return po(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Et(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Et(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Jt(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Nn(i){return"nullValue"in i?M:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?wn(Ta.empty(),pn.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:zt()}function An(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?wn(Ta.empty(),pn.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?w:zt()}function er(i,e){const t=Ze(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Wr(i,e){const t=Ze(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class lr{constructor(e,t){this.position=e,this.inclusive=t}}function io(i,e,t){let s=0;for(let c=0;c<i.position.length;c++){const m=e[c],C=i.position[c];if(s=m.field.isKeyField()?pn.comparator(pn.fromName(C.referenceValue),t.key):Ze(C,t.data.field(m.field)),"desc"===m.dir&&(s*=-1),0!==s)break}return s}function so(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!X(i.position[t],e.position[t]))return!1;return!0}class Va{}class Yr extends Va{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new id(e,t,s):"array-contains"===t?new El(e,s):"in"===t?new sd(e,s):"not-in"===t?new Ah(e,s):"array-contains-any"===t?new Cf(e,s):new Yr(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new Tu(e,s):new zd(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ze(t,this.value)):null!==t&&V(this.value)===V(t)&&this.matchesComparison(Ze(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return zt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ci extends Va{constructor(e,t){super(),this.filters=e,this.op=t,this.ft=null}static create(e,t){return new ci(e,t)}matches(e){return Os(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ft||(this.ft=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(t=>t.isInequality());return null!==e?e.field:null}dt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Os(i){return"and"===i.op}function Go(i){return"or"===i.op}function dl(i){return Jc(i)&&Os(i)}function Jc(i){for(const e of i.filters)if(e instanceof ci)return!1;return!0}function ed(i){if(i instanceof Yr)return i.field.canonicalString()+i.op.toString()+on(i.value);if(dl(i))return i.filters.map(e=>ed(e)).join(",");{const e=i.filters.map(t=>ed(t)).join(",");return`${i.op}(${e})`}}function td(i,e){return i instanceof Yr?(t=i,(s=e)instanceof Yr&&t.op===s.op&&t.field.isEqual(s.field)&&X(t.value,s.value)):i instanceof ci?function(t,s){return s instanceof ci&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((c,m,C)=>c&&td(m,s.filters[C]),!0)}(i,e):void zt();var t,s}function nd(i,e){const t=i.filters.concat(e);return ci.create(t,i.op)}function rd(i){return i instanceof Yr?`${(e=i).field.canonicalString()} ${e.op} ${on(e.value)}`:i instanceof ci?function(e){return e.op.toString()+" {"+e.getFilters().map(rd).join(" ,")+"}"}(i):"Filter";var e}class id extends Yr{constructor(e,t,s){super(e,t,s),this.key=pn.fromName(s.referenceValue)}matches(e){const t=pn.comparator(e.key,this.key);return this.matchesComparison(t)}}class Tu extends Yr{constructor(e,t){super(e,"in",t),this.keys=Jl(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class zd extends Yr{constructor(e,t){super(e,"not-in",t),this.keys=Jl(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Jl(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>pn.fromName(s.referenceValue))}class El extends Yr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return U(t)&&ie(t.arrayValue,this.value)}}class sd extends Yr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ie(this.value.arrayValue,t)}}class Ah extends Yr{constructor(e,t){super(e,"not-in",t)}matches(e){if(ie(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ie(this.value.arrayValue,t)}}class Cf extends Yr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!U(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>ie(this.value.arrayValue,s))}}class Ll{constructor(e,t="asc"){this.field=e,this.dir=t}}function xh(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class Es{constructor(e,t){this.comparator=e,this.root=t||ps.EMPTY}insert(e,t){return new Es(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ps.BLACK,null,null))}remove(e){return new Es(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ps.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const c=this.comparator(e,s.key);if(0===c)return t+s.left.size;c<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Il(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Il(this.root,e,this.comparator,!1)}getReverseIterator(){return new Il(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Il(this.root,e,this.comparator,!0)}}class Il{constructor(e,t,s,c){this.isReverse=c,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=t?s(e.key,t):1,t&&c&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(0===m){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ps{constructor(e,t,s,c,m){this.key=e,this.value=t,this.color=null!=s?s:ps.RED,this.left=null!=c?c:ps.EMPTY,this.right=null!=m?m:ps.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,c,m){return new ps(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=c?c:this.left,null!=m?m:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let c=this;const m=s(e,c.key);return c=m<0?c.copy(null,null,null,c.left.insert(e,t,s),null):0===m?c.copy(null,t,null,null,null):c.copy(null,null,null,null,c.right.insert(e,t,s)),c.fixUp()}removeMin(){if(this.left.isEmpty())return ps.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,c=this;if(t(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,t),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),0===t(e,c.key)){if(c.right.isEmpty())return ps.EMPTY;s=c.right.min(),c=c.copy(s.key,s.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,t))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ps.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ps.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw zt();const e=this.left.check();if(e!==this.right.check())throw zt();return e+(this.isRed()?0:1)}}ps.EMPTY=null,ps.RED=!0,ps.BLACK=!1,ps.EMPTY=new class{constructor(){this.size=0}get key(){throw zt()}get value(){throw zt()}get color(){throw zt()}get left(){throw zt()}get right(){throw zt()}copy(i,e,t,s,c){return this}insert(i,e,t){return new ps(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ji{constructor(e){this.comparator=e,this.data=new Es(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const c=s.getNext();if(this.comparator(c.key,e[1])>=0)return;t(c.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new od(this.data.getIterator())}getIteratorFrom(e){return new od(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof ji)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const c=t.getNext().key,m=s.getNext().key;if(0!==this.comparator(c,m))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ji(this.comparator);return t.data=e,t}}class od{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function eu(i){return i.hasNext()?i.getNext():void 0}class os{constructor(e){this.fields=e,e.sort(ai.comparator)}static empty(){return new os([])}unionWith(e){let t=new ji(ai.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new os(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ha(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Ps{constructor(e){this.value=e}static empty(){return new Ps({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ot(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Et(t)}setAll(e){let t=ai.emptyPath(),s={},c=[];e.forEach((C,R)=>{if(!t.isImmediateParentOf(R)){const H=this.getFieldsMap(t);this.applyChanges(H,s,c),s={},c=[],t=R.popLast()}C?s[R.lastSegment()]=Et(C):c.push(R.lastSegment())});const m=this.getFieldsMap(t);this.applyChanges(m,s,c)}delete(e){const t=this.field(e.popLast());ot(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return X(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let c=t.mapValue.fields[e.get(s)];ot(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=c),t=c}return t.mapValue.fields}applyChanges(e,t,s){po(t,(c,m)=>e[c]=m);for(const c of s)delete e[c]}clone(){return new Ps(Et(this.value))}}function bc(i){const e=[];return po(i.fields,(t,s)=>{const c=new ai([t]);if(ot(s)){const m=bc(s.mapValue).fields;if(0===m.length)e.push(c);else for(const C of m)e.push(c.child(C))}else e.push(c)}),new os(e)}class as{constructor(e,t,s,c,m,C,R){this.key=e,this.documentType=t,this.version=s,this.readTime=c,this.createTime=m,this.data=C,this.documentState=R}static newInvalidDocument(e){return new as(e,0,qn.min(),qn.min(),qn.min(),Ps.empty(),0)}static newFoundDocument(e,t,s,c){return new as(e,1,t,qn.min(),s,c,0)}static newNoDocument(e,t){return new as(e,2,t,qn.min(),qn.min(),Ps.empty(),0)}static newUnknownDocument(e,t){return new as(e,3,t,qn.min(),qn.min(),Ps.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(qn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ps.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ps.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof as&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new as(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Su{constructor(e,t=null,s=[],c=[],m=null,C=null,R=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=c,this.limit=m,this.startAt=C,this.endAt=R,this._t=null}}function ga(i,e=null,t=[],s=[],c=null,m=null,C=null){return new Su(i,e,t,s,c,m,C)}function el(i){const e=dn(i);if(null===e._t){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>ed(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(c=s).field.canonicalString()+c.dir;var c}).join(","),Ro(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>on(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>on(s)).join(",")),e._t=t}return e._t}function tu(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!xh(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!td(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!so(i.startAt,e.startAt)&&so(i.endAt,e.endAt)}function qu(i){return pn.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function wl(i,e){return i.filters.filter(t=>t instanceof Yr&&t.field.isEqual(e))}function Au(i,e,t){let s=M,c=!0;for(const m of wl(i,e)){let C=M,R=!0;switch(m.op){case"<":case"<=":C=Nn(m.value);break;case"==":case"in":case">=":C=m.value;break;case">":C=m.value,R=!1;break;case"!=":case"not-in":C=M}er({value:s,inclusive:c},{value:C,inclusive:R})<0&&(s=C,c=R)}if(null!==t)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const C=t.position[m];er({value:s,inclusive:c},{value:C,inclusive:t.inclusive})<0&&(s=C,c=t.inclusive);break}return{value:s,inclusive:c}}function nu(i,e,t){let s=w,c=!0;for(const m of wl(i,e)){let C=w,R=!0;switch(m.op){case">=":case">":C=An(m.value),R=!1;break;case"==":case"in":case"<=":C=m.value;break;case"<":C=m.value,R=!1;break;case"!=":case"not-in":C=w}Wr({value:s,inclusive:c},{value:C,inclusive:R})>0&&(s=C,c=R)}if(null!==t)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const C=t.position[m];Wr({value:s,inclusive:c},{value:C,inclusive:t.inclusive})>0&&(s=C,c=t.inclusive);break}return{value:s,inclusive:c}}class Is{constructor(e,t=null,s=[],c=[],m=null,C="F",R=null,H=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=c,this.limit=m,this.limitType=C,this.startAt=R,this.endAt=H,this.wt=null,this.gt=null}}function Oo(i,e,t,s,c,m,C,R){return new Is(i,e,t,s,c,m,C,R)}function Bl(i){return new Is(i)}function Zu(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function ws(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Cl(i){for(const e of i.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function zo(i){return null!==i.collectionGroup}function bl(i){const e=dn(i);if(null===e.wt){e.wt=[];const t=Cl(e),s=ws(e);if(null!==t&&null===s)t.isKeyField()||e.wt.push(new Ll(t)),e.wt.push(new Ll(ai.keyField(),"asc"));else{let c=!1;for(const m of e.explicitOrderBy)e.wt.push(m),m.field.isKeyField()&&(c=!0);if(!c){const m=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Ll(ai.keyField(),m))}}}return e.wt}function sa(i){const e=dn(i);if(!e.gt)if("F"===e.limitType)e.gt=ga(e.path,e.collectionGroup,bl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const m of bl(e))t.push(new Ll(m.field,"desc"===m.dir?"asc":"desc"));const s=e.endAt?new lr(e.endAt.position,e.endAt.inclusive):null,c=e.startAt?new lr(e.startAt.position,e.startAt.inclusive):null;e.gt=ga(e.path,e.collectionGroup,t,e.filters,e.limit,s,c)}return e.gt}function Qu(i,e){e.getFirstInequalityField(),Cl(i);const t=i.filters.concat([e]);return new Is(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function Xu(i,e,t){return new Is(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function xu(i,e){return tu(sa(i),sa(e))&&i.limitType===e.limitType}function Mh(i){return`${el(sa(i))}|lt:${i.limitType}`}function tl(i){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>rd(s)).join(", ")}]`),Ro(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(c=s).field.canonicalString()} (${c.dir})`;var c}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>on(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>on(s)).join(",")),`Target(${t})`}(sa(i))}; limitType=${i.limitType})`}function Dl(i,e){return e.isFoundDocument()&&function(t,s){const c=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(c):pn.isDocumentKey(t.path)?t.path.isEqual(c):t.path.isImmediateParentOf(c)}(i,e)&&function(t,s){for(const c of bl(t))if(!c.field.isKeyField()&&null===s.data.field(c.field))return!1;return!0}(i,e)&&function(t,s){for(const c of t.filters)if(!c.matches(s))return!1;return!0}(i,e)&&(s=e,!((t=i).startAt&&!function(c,m,C){const R=io(c,m,C);return c.inclusive?R<=0:R<0}(t.startAt,bl(t),s)||t.endAt&&!function(c,m,C){const R=io(c,m,C);return c.inclusive?R>=0:R>0}(t.endAt,bl(t),s)));var t,s}function ad(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function ru(i){return(e,t)=>{let s=!1;for(const c of bl(i)){const m=ld(c,e,t);if(0!==m)return m;s=s||c.field.isKeyField()}return 0}}function ld(i,e,t){const s=i.field.isKeyField()?pn.comparator(e.key,t.key):function(c,m,C){const R=m.data.field(c),H=C.data.field(c);return null!==R&&null!==H?Ze(R,H):zt()}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return zt()}}function Mu(i,e){if(i.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jo(e)?"-0":e}}function Tl(i){return{integerValue:""+i}}function Wd(i,e){return Fl(e)?Tl(e):Mu(i,e)}class $l{constructor(){this._=void 0}}function ud(i,e,t){return i instanceof Ua?function(s,c){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return c&&(m.fields.__previous_value__=c),{mapValue:m}}(t,e):i instanceof Sl?dd(i,e):i instanceof iu?Ru(i,e):function(s,c){const m=Ju(s,c),C=Dc(m)+Dc(s.It);return F(m)&&F(s.It)?Tl(C):Mu(s.Tt,C)}(i,e)}function cd(i,e,t){return i instanceof Sl?dd(i,e):i instanceof iu?Ru(i,e):t}function Ju(i,e){return i instanceof Vl?F(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class Ua extends $l{}class Sl extends $l{constructor(e){super(),this.elements=e}}function dd(i,e){const t=su(e);for(const s of i.elements)t.some(c=>X(c,s))||t.push(s);return{arrayValue:{values:t}}}class iu extends $l{constructor(e){super(),this.elements=e}}function Ru(i,e){let t=su(e);for(const s of i.elements)t=t.filter(c=>!X(c,s));return{arrayValue:{values:t}}}class Vl extends $l{constructor(e,t){super(),this.Tt=e,this.It=t}}function Dc(i){return li(i.integerValue||i.doubleValue)}function su(i){return U(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class ja{constructor(e,t){this.field=e,this.transform=t}}class ec{constructor(e,t){this.version=e,this.transformResults=t}}class Ki{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ki}static exists(e){return new Ki(void 0,e)}static updateTime(e){return new Ki(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ou(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Sa{}function Tc(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new hl(i.key,Ki.none()):new ma(i.key,i.data,Ki.none());{const t=i.data,s=Ps.empty();let c=new ji(ai.comparator);for(let m of e.fields)if(!c.has(m)){let C=t.field(m);null===C&&m.length>1&&(m=m.popLast(),C=t.field(m)),null===C?s.delete(m):s.set(m,C),c=c.add(m)}return new Ha(i.key,s,new os(c.toArray()),Ki.none())}}function Kd(i,e,t){i instanceof ma?function(s,c,m){const C=s.value.clone(),R=ku(s.fieldTransforms,c,m.transformResults);C.setAll(R),c.convertToFoundDocument(m.version,C).setHasCommittedMutations()}(i,e,t):i instanceof Ha?function(s,c,m){if(!Ou(s.precondition,c))return void c.convertToUnknownDocument(m.version);const C=ku(s.fieldTransforms,c,m.transformResults),R=c.data;R.setAll(fd(s)),R.setAll(C),c.convertToFoundDocument(m.version,R).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Pu(i,e,t,s){return i instanceof ma?function(c,m,C,R){if(!Ou(c.precondition,m))return C;const H=c.value.clone(),Z=pd(c.fieldTransforms,R,m);return H.setAll(Z),m.convertToFoundDocument(m.version,H).setHasLocalMutations(),null}(i,e,t,s):i instanceof Ha?function(c,m,C,R){if(!Ou(c.precondition,m))return C;const H=pd(c.fieldTransforms,R,m),Z=m.data;return Z.setAll(fd(c)),Z.setAll(H),m.convertToFoundDocument(m.version,Z).setHasLocalMutations(),null===C?null:C.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(ue=>ue.field))}(i,e,t,s):(C=t,Ou(i.precondition,m=e)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):C);var m,C}function Sc(i,e){let t=null;for(const s of i.fieldTransforms){const c=e.data.field(s.field),m=Ju(s.transform,c||null);null!=m&&(null===t&&(t=Ps.empty()),t.set(s.field,m))}return t||null}function Nu(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===s||t&&s&&ha(t,s,(c,m)=>function hd(i,e){return i.field.isEqual(e.field)&&(s=e.transform,(t=i.transform)instanceof Sl&&s instanceof Sl||t instanceof iu&&s instanceof iu?ha(t.elements,s.elements,X):t instanceof Vl&&s instanceof Vl?X(t.It,s.It):t instanceof Ua&&s instanceof Ua);var t,s}(c,m))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,s}class ma extends Sa{constructor(e,t,s,c=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class Ha extends Sa{constructor(e,t,s,c,m=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=c,this.fieldTransforms=m,this.type=1}getFieldMask(){return this.fieldMask}}function fd(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function ku(i,e,t){const s=new Map;_n(i.length===t.length);for(let c=0;c<t.length;c++){const m=i[c],C=m.transform,R=e.data.field(m.field);s.set(m.field,cd(C,R,t[c]))}return s}function pd(i,e,t){const s=new Map;for(const c of i){const m=c.transform,C=t.data.field(c.field);s.set(c.field,ud(m,C,e))}return s}class hl extends Sa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ac extends Sa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Yd{constructor(e){this.count=e}}var Cs,di;function ou(i){switch(i){default:return zt();case It.CANCELLED:case It.UNKNOWN:case It.DEADLINE_EXCEEDED:case It.RESOURCE_EXHAUSTED:case It.INTERNAL:case It.UNAVAILABLE:case It.UNAUTHENTICATED:return!1;case It.INVALID_ARGUMENT:case It.NOT_FOUND:case It.ALREADY_EXISTS:case It.PERMISSION_DENIED:case It.FAILED_PRECONDITION:case It.ABORTED:case It.OUT_OF_RANGE:case It.UNIMPLEMENTED:case It.DATA_LOSS:return!0}}function Fu(i){if(void 0===i)return ir("GRPC error has no .code"),It.UNKNOWN;switch(i){case Cs.OK:return It.OK;case Cs.CANCELLED:return It.CANCELLED;case Cs.UNKNOWN:return It.UNKNOWN;case Cs.DEADLINE_EXCEEDED:return It.DEADLINE_EXCEEDED;case Cs.RESOURCE_EXHAUSTED:return It.RESOURCE_EXHAUSTED;case Cs.INTERNAL:return It.INTERNAL;case Cs.UNAVAILABLE:return It.UNAVAILABLE;case Cs.UNAUTHENTICATED:return It.UNAUTHENTICATED;case Cs.INVALID_ARGUMENT:return It.INVALID_ARGUMENT;case Cs.NOT_FOUND:return It.NOT_FOUND;case Cs.ALREADY_EXISTS:return It.ALREADY_EXISTS;case Cs.PERMISSION_DENIED:return It.PERMISSION_DENIED;case Cs.FAILED_PRECONDITION:return It.FAILED_PRECONDITION;case Cs.ABORTED:return It.ABORTED;case Cs.OUT_OF_RANGE:return It.OUT_OF_RANGE;case Cs.UNIMPLEMENTED:return It.UNIMPLEMENTED;case Cs.DATA_LOSS:return It.DATA_LOSS;default:return zt()}}(di=Cs||(Cs={}))[di.OK=0]="OK",di[di.CANCELLED=1]="CANCELLED",di[di.UNKNOWN=2]="UNKNOWN",di[di.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",di[di.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",di[di.NOT_FOUND=5]="NOT_FOUND",di[di.ALREADY_EXISTS=6]="ALREADY_EXISTS",di[di.PERMISSION_DENIED=7]="PERMISSION_DENIED",di[di.UNAUTHENTICATED=16]="UNAUTHENTICATED",di[di.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",di[di.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",di[di.ABORTED=10]="ABORTED",di[di.OUT_OF_RANGE=11]="OUT_OF_RANGE",di[di.UNIMPLEMENTED=12]="UNIMPLEMENTED",di[di.INTERNAL=13]="INTERNAL",di[di.UNAVAILABLE=14]="UNAVAILABLE",di[di.DATA_LOSS=15]="DATA_LOSS";class ts{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[c,m]of s)if(this.equalsFn(c,e))return m}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),c=this.inner[s];if(void 0===c)return this.inner[s]=[[e,t]],void this.innerSize++;for(let m=0;m<c.length;m++)if(this.equalsFn(c[m][0],e))return void(c[m]=[e,t]);c.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let c=0;c<s.length;c++)if(this.equalsFn(s[c][0],e))return 1===s.length?delete this.inner[t]:s.splice(c,1),this.innerSize--,!0;return!1}forEach(e){po(this.inner,(t,s)=>{for(const[c,m]of s)e(c,m)})}isEmpty(){return Ba(this.inner)}size(){return this.innerSize}}const Ul=new Es(pn.comparator);function bs(){return Ul}const Al=new Es(pn.comparator);function go(...i){let e=Al;for(const t of i)e=e.insert(t.key,t);return e}function Ds(i){let e=Al;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function oo(){return Ga()}function xc(){return Ga()}function Ga(){return new ts(i=>i.toString(),(i,e)=>i.isEqual(e))}const qd=new Es(pn.comparator),gd=new ji(pn.comparator);function Kr(...i){let e=gd;for(const t of i)e=e.add(t);return e}const tc=new ji(mr);function nc(){return tc}class oa{constructor(e,t,s,c,m){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=c,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const c=new Map;return c.set(e,jl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new oa(qn.min(),c,nc(),bs(),Kr())}}class jl{constructor(e,t,s,c,m){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=c,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new jl(s,t,Kr(),Kr(),Kr())}}class xl{constructor(e,t,s,c){this.Et=e,this.removedTargetIds=t,this.key=s,this.At=c}}class Lu{constructor(e,t){this.targetId=e,this.Rt=t}}class rc{constructor(e,t,s=_s.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=c}}class Bu{constructor(){this.bt=0,this.vt=ic(),this.Pt=_s.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.Pt}get Dt(){return 0!==this.bt}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.Pt=e)}Nt(){let e=Kr(),t=Kr(),s=Kr();return this.vt.forEach((c,m)=>{switch(m){case 0:e=e.add(c);break;case 2:t=t.add(c);break;case 1:s=s.add(c);break;default:zt()}}),new jl(this.Pt,this.Vt,e,t,s)}kt(){this.St=!1,this.vt=ic()}Ot(e,t){this.St=!0,this.vt=this.vt.insert(e,t)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ft(){this.bt+=1}$t(){this.bt-=1}Bt(){this.St=!0,this.Vt=!0}}class Wo{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=bs(),this.Kt=au(),this.Gt=new ji(mr)}Qt(e){for(const t of e.Et)e.At&&e.At.isFoundDocument()?this.jt(t,e.At):this.zt(t,e.key,e.At);for(const t of e.removedTargetIds)this.zt(t,e.key,e.At)}Wt(e){this.forEachTarget(e,t=>{const s=this.Ht(t);switch(e.state){case 0:this.Jt(t)&&s.xt(e.resumeToken);break;case 1:s.$t(),s.Dt||s.kt(),s.xt(e.resumeToken);break;case 2:s.$t(),s.Dt||this.removeTarget(t);break;case 3:this.Jt(t)&&(s.Bt(),s.xt(e.resumeToken));break;case 4:this.Jt(t)&&(this.Yt(t),s.xt(e.resumeToken));break;default:zt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qt.forEach((s,c)=>{this.Jt(c)&&t(c)})}Zt(e){const t=e.targetId,s=e.Rt.count,c=this.Xt(t);if(c){const m=c.target;if(qu(m))if(0===s){const C=new pn(m.path);this.zt(t,C,as.newNoDocument(C,qn.min()))}else _n(1===s);else this.te(t)!==s&&(this.Yt(t),this.Gt=this.Gt.add(t))}}ee(e){const t=new Map;this.qt.forEach((m,C)=>{const R=this.Xt(C);if(R){if(m.current&&qu(R.target)){const H=new pn(R.target.path);null!==this.Ut.get(H)||this.ne(C,H)||this.zt(C,H,as.newNoDocument(H,e))}m.Ct&&(t.set(C,m.Nt()),m.kt())}});let s=Kr();this.Kt.forEach((m,C)=>{let R=!0;C.forEachWhile(H=>{const Z=this.Xt(H);return!Z||2===Z.purpose||(R=!1,!1)}),R&&(s=s.add(m))}),this.Ut.forEach((m,C)=>C.setReadTime(e));const c=new oa(e,t,this.Gt,this.Ut,s);return this.Ut=bs(),this.Kt=au(),this.Gt=new ji(mr),c}jt(e,t){if(!this.Jt(e))return;const s=this.ne(e,t.key)?2:0;this.Ht(e).Ot(t.key,s),this.Ut=this.Ut.insert(t.key,t),this.Kt=this.Kt.insert(t.key,this.se(t.key).add(e))}zt(e,t,s){if(!this.Jt(e))return;const c=this.Ht(e);this.ne(e,t)?c.Ot(t,1):c.Mt(t),this.Kt=this.Kt.insert(t,this.se(t).delete(e)),s&&(this.Ut=this.Ut.insert(t,s))}removeTarget(e){this.qt.delete(e)}te(e){const t=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ft(e){this.Ht(e).Ft()}Ht(e){let t=this.qt.get(e);return t||(t=new Bu,this.qt.set(e,t)),t}se(e){let t=this.Kt.get(e);return t||(t=new ji(mr),this.Kt=this.Kt.insert(e,t)),t}Jt(e){const t=null!==this.Xt(e);return t||Ft("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.qt.get(e);return t&&t.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new Bu),this.Lt.getRemoteKeysForTarget(e).forEach(t=>{this.zt(e,t,null)})}ne(e,t){return this.Lt.getRemoteKeysForTarget(e).has(t)}}function au(){return new Es(pn.comparator)}function ic(){return new Es(pn.comparator)}const md={asc:"ASCENDING",desc:"DESCENDING"},Aa={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Hl={and:"AND",or:"OR"};class xa{constructor(e,t){this.databaseId=e,this.yt=t}}function Ml(i,e){return i.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yd(i,e){return i.yt?e.toBase64():e.toUint8Array()}function Mc(i,e){return Ml(i,e.toTimestamp())}function Ns(i){return _n(!!i),qn.fromTimestamp(function(e){const t=Ws(e);return new Si(t.seconds,t.nanos)}(i))}function Rc(i,e){return(t=i,new Ur(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Zd(i){const e=Ur.fromString(i);return _n(kc(e)),e}function sc(i,e){return Rc(i.databaseId,e.path)}function b(i,e){const t=Zd(e);if(t.get(1)!==i.databaseId.projectId)throw new Wt(It.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Wt(It.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new pn(q(t))}function g(i,e){return Rc(i.databaseId,e)}function E(i){const e=Zd(i);return 4===e.length?Ur.emptyPath():q(e)}function A(i){return new Ur(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function q(i){return _n(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function ae(i,e,t){return{name:sc(i,e),fields:t.value.mapValue.fields}}function ht(i,e,t){const s=b(i,e.name),c=Ns(e.updateTime),m=e.createTime?Ns(e.createTime):qn.min(),C=new Ps({mapValue:{fields:e.fields}}),R=as.newFoundDocument(s,c,m,C);return t&&R.setHasCommittedMutations(),t?R.setHasCommittedMutations():R}function $n(i,e){let t;if(e instanceof ma)t={update:ae(i,e.key,e.value)};else if(e instanceof hl)t={delete:sc(i,e.key)};else if(e instanceof Ha)t={update:ae(i,e.key,e.data),updateMask:Nc(e.fieldMask)};else{if(!(e instanceof Ac))return zt();t={verify:sc(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(c,m){const C=m.transform;if(C instanceof Ua)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(C instanceof Sl)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:C.elements}};if(C instanceof iu)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:C.elements}};if(C instanceof Vl)return{fieldPath:m.field.canonicalString(),increment:C.It};throw zt()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(c=e.precondition).updateTime?{updateTime:Mc(i,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:zt()),t;var c}function wr(i,e){const t=e.currentDocument?void 0!==(c=e.currentDocument).updateTime?Ki.updateTime(Ns(c.updateTime)):void 0!==c.exists?Ki.exists(c.exists):Ki.none():Ki.none(),s=e.updateTransforms?e.updateTransforms.map(c=>function(m,C){let R=null;"setToServerValue"in C?(_n("REQUEST_TIME"===C.setToServerValue),R=new Ua):"appendMissingElements"in C?R=new Sl(C.appendMissingElements.values||[]):"removeAllFromArray"in C?R=new iu(C.removeAllFromArray.values||[]):"increment"in C?R=new Vl(m,C.increment):zt();const H=ai.fromServerFormat(C.fieldPath);return new ja(H,R)}(i,c)):[];var c;if(e.update){const c=b(i,e.update.name),m=new Ps({mapValue:{fields:e.update.fields}});if(e.updateMask){const C=new os((e.updateMask.fieldPaths||[]).map(Z=>ai.fromServerFormat(Z)));return new Ha(c,m,C,t,s)}return new ma(c,m,t,s)}if(e.delete){const c=b(i,e.delete);return new hl(c,t)}if(e.verify){const c=b(i,e.verify);return new Ac(c,t)}return zt()}function Ks(i,e){return{documents:[g(i,e.path)]}}function Ma(i,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=g(i,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=g(i,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const c=function(H){if(0!==H.length)return vd(ci.create(H,"and"))}(e.filters);c&&(t.structuredQuery.where=c);const m=function(H){if(0!==H.length)return H.map(Z=>{return{field:Rl((ue=Z).field),direction:oc(ue.dir)};var ue})}(e.orderBy);m&&(t.structuredQuery.orderBy=m);const C=(Z=e.limit,i.yt||Ro(Z)?Z:{value:Z});var Z,R,H;return null!==C&&(t.structuredQuery.limit=C),e.startAt&&(t.structuredQuery.startAt={before:(R=e.startAt).inclusive,values:R.position}),e.endAt&&(t.structuredQuery.endAt={before:!(H=e.endAt).inclusive,values:H.position}),t}function lu(i){let e=E(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let c=null;if(s>0){_n(1===s);const ue=t.from[0];ue.allDescendants?c=ue.collectionId:e=e.child(ue.collectionId)}let m=[];t.where&&(m=function(ue){const ze=Gl(ue);return ze instanceof ci&&dl(ze)?ze.getFilters():[ze]}(t.where));let C=[];t.orderBy&&(C=t.orderBy.map(ue=>{return new Ll($u((ze=ue).field),function(wt){switch(wt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ze.direction));var ze}));let R=null;t.limit&&(R=function(ue){let ze;return ze="object"==typeof ue?ue.value:ue,Ro(ze)?null:ze}(t.limit));let H=null;var ue;t.startAt&&(H=new lr((ue=t.startAt).values||[],!!ue.before));let Z=null;return t.endAt&&(Z=function(ue){return new lr(ue.values||[],!ue.before)}(t.endAt)),Oo(e,c,C,m,R,"F",H,Z)}function Gl(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=$u(e.unaryFilter.field);return Yr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=$u(e.unaryFilter.field);return Yr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=$u(e.unaryFilter.field);return Yr.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=$u(e.unaryFilter.field);return Yr.create(m,"!=",{nullValue:"NULL_VALUE"});default:return zt()}}(i):void 0!==i.fieldFilter?Yr.create($u((e=i).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return zt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return ci.create(e.compositeFilter.filters.map(t=>Gl(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return zt()}}(e.compositeFilter.op))}(i):zt();var e}function oc(i){return md[i]}function Oc(i){return Aa[i]}function Pc(i){return Hl[i]}function Rl(i){return{fieldPath:i.canonicalString()}}function $u(i){return ai.fromServerFormat(i.fieldPath)}function vd(i){return i instanceof Yr?function(e){if("=="===e.op){if(De(e.value))return{unaryFilter:{field:Rl(e.field),op:"IS_NAN"}};if(ee(e.value))return{unaryFilter:{field:Rl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(De(e.value))return{unaryFilter:{field:Rl(e.field),op:"IS_NOT_NAN"}};if(ee(e.value))return{unaryFilter:{field:Rl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rl(e.field),op:Oc(e.op),value:e.value}}}(i):i instanceof ci?function(e){const t=e.getFilters().map(s=>vd(s));return 1===t.length?t[0]:{compositeFilter:{op:Pc(e.op),filters:t}}}(i):zt()}function Nc(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function kc(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Po(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Rh(e)),e=bf(i.get(t),e);return Rh(e)}function bf(i,e){let t=e;const s=i.length;for(let c=0;c<s;c++){const m=i.charAt(c);switch(m){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=m}}return t}function Rh(i){return i+"\x01\x01"}function uu(i){const e=i.length;if(_n(e>=2),2===e)return _n("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Ur.emptyPath();const t=e-2,s=[];let c="";for(let m=0;m<e;){const C=i.indexOf("\x01",m);switch((C<0||C>t)&&zt(),i.charAt(C+1)){case"\x01":const R=i.substring(m,C);let H;0===c.length?H=R:(c+=R,H=c,c=""),s.push(H);break;case"\x10":c+=i.substring(m,C),c+="\0";break;case"\x11":c+=i.substring(m,C+1);break;default:zt()}m=C+2}return new Ur(s)}const Oh=["userId","batchId"];function Qd(i,e){return[i,Po(e)]}function Df(i,e,t){return[i,Po(e),t]}const Tf={},Xd=["prefixPath","collectionGroup","readTime","documentId"],Rp=["prefixPath","collectionGroup","documentId"],Ph=["collectionGroup","readTime","prefixPath","documentId"],Op=["canonicalId","targetId"],mo=["targetId","path"],Pp=["path","targetId"],lm=["collectionId","parent"],Np=["indexId","uid"],Sf=["uid","sequenceNumber"],kp=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Fp=["indexId","uid","orderedDocumentKey"],Af=["userId","collectionPath","documentId"],Lp=["userId","collectionPath","largestBatchId"],xf=["userId","collectionGroup","largestBatchId"],Bp=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],um=[...Bp,"documentOverlays"],nl=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],yo=nl,za=[...yo,"indexConfiguration","indexState","indexEntries"];class Vu extends Zi{constructor(e,t){super(),this.re=e,this.currentSequenceNumber=t}}function No(i,e){const t=dn(i);return Ms.M(t.re,e)}class Mf{constructor(e,t,s,c){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=c}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let c=0;c<this.mutations.length;c++){const m=this.mutations[c];m.key.isEqual(e.key)&&Kd(m,e,s[c])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Pu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Pu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=xc();return this.mutations.forEach(c=>{const m=e.get(c.key),C=m.overlayedDocument;let R=this.applyToLocalView(C,m.mutatedFields);R=t.has(c.key)?null:R;const H=Tc(C,R);null!==H&&s.set(c.key,H),C.isValidDocument()||C.convertToNoDocument(qn.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Kr())}isEqual(e){return this.batchId===e.batchId&&ha(this.mutations,e.mutations,(t,s)=>Nu(t,s))&&ha(this.baseMutations,e.baseMutations,(t,s)=>Nu(t,s))}}class Nh{constructor(e,t,s,c){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=c}static from(e,t,s){_n(e.mutations.length===s.length);let c=qd;const m=e.mutations;for(let C=0;C<m.length;C++)c=c.insert(m[C].key,s[C].version);return new Nh(e,t,s,c)}}class Jd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class cu{constructor(e,t,s,c,m=qn.min(),C=qn.min(),R=_s.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=c,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=C,this.resumeToken=R}withSequenceNumber(e){return new cu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new cu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new cu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class eh{constructor(e){this.oe=e}}function th(i,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:_d(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:sc(c=i.oe,(m=e).key),fields:m.data.value.mapValue.fields,updateTime:Ml(c,m.version.toTimestamp()),createTime:Ml(c,m.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:zl(e.version)};else{if(!e.isUnknownDocument())return zt();s.unknownDocument={path:t.path.toArray(),version:zl(e.version)}}var c,m;return s}function _d(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function zl(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function du(i){const e=new Si(i.seconds,i.nanoseconds);return qn.fromTimestamp(e)}function hu(i,e){const t=(e.baseMutations||[]).map(m=>wr(i.oe,m));for(let m=0;m<e.mutations.length-1;++m)m+1<e.mutations.length&&void 0!==e.mutations[m+1].transform&&(e.mutations[m].updateTransforms=e.mutations[m+1].transform.fieldTransforms,e.mutations.splice(m+1,1),++m);const s=e.mutations.map(m=>wr(i.oe,m)),c=Si.fromMillis(e.localWriteTimeMs);return new Mf(e.batchId,c,t,s)}function Ra(i){const e=du(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?du(i.lastLimboFreeSnapshotVersion):qn.min();let s;var c;return void 0!==i.query.documents?(_n(1===(c=i.query).documents.length),s=sa(Bl(E(c.documents[0])))):s=sa(lu(i.query)),new cu(s,i.targetId,0,i.lastListenSequenceNumber,e,t,_s.fromBase64String(i.resumeToken))}function Rf(i,e){const t=zl(e.snapshotVersion),s=zl(e.lastLimboFreeSnapshotVersion);let c;c=qu(e.target)?Ks(i.oe,e.target):Ma(i.oe,e.target);const m=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:el(e.target),readTime:t,resumeToken:m,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:c}}function Fc(i){const e=lu({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Xu(e,e.limit,"L"):e}function Lc(i,e){return new Jd(e.largestBatchId,wr(i.oe,e.overlayMutation))}function Of(i,e){const t=e.path.lastSegment();return[i,Po(e.path.popLast()),t]}function Ed(i,e,t,s){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:zl(s.readTime),documentKey:Po(s.documentKey.path),largestBatchId:s.largestBatchId}}class Id{getBundleMetadata(e,t){return fu(e).get(t).next(s=>{if(s)return{id:(c=s).bundleId,createTime:du(c.createTime),version:c.version};var c})}saveBundleMetadata(e,t){return fu(e).put({bundleId:(s=t).id,createTime:zl(Ns(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return kh(e).get(t).next(s=>{if(s)return{name:(c=s).name,query:Fc(c.bundledQuery),readTime:du(c.readTime)};var c})}saveNamedQuery(e,t){return kh(e).put({name:(s=t).name,readTime:zl(Ns(s.readTime)),bundledQuery:s.bundledQuery});var s}}function fu(i){return No(i,"bundles")}function kh(i){return No(i,"namedQueries")}class Bc{constructor(e,t){this.Tt=e,this.userId=t}static ue(e,t){return new Bc(e,t.uid||"")}getOverlay(e,t){return wd(e).get(Of(this.userId,t)).next(s=>s?Lc(this.Tt,s):null)}getOverlays(e,t){const s=oo();return bt.forEach(t,c=>this.getOverlay(e,c).next(m=>{null!==m&&s.set(c,m)})).next(()=>s)}saveOverlays(e,t,s){const c=[];return s.forEach((m,C)=>{const R=new Jd(t,C);c.push(this.ce(e,R))}),bt.waitFor(c)}removeOverlaysForBatchId(e,t,s){const c=new Set;t.forEach(C=>c.add(Po(C.getCollectionPath())));const m=[];return c.forEach(C=>{const R=IDBKeyRange.bound([this.userId,C,s],[this.userId,C,s+1],!1,!0);m.push(wd(e).Y("collectionPathOverlayIndex",R))}),bt.waitFor(m)}getOverlaysForCollection(e,t,s){const c=oo(),m=Po(t),C=IDBKeyRange.bound([this.userId,m,s],[this.userId,m,Number.POSITIVE_INFINITY],!0);return wd(e).W("collectionPathOverlayIndex",C).next(R=>{for(const H of R){const Z=Lc(this.Tt,H);c.set(Z.getKey(),Z)}return c})}getOverlaysForCollectionGroup(e,t,s,c){const m=oo();let C;const R=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return wd(e).X({index:"collectionGroupOverlayIndex",range:R},(H,Z,ue)=>{const ze=Lc(this.Tt,Z);m.size()<c||ze.largestBatchId===C?(m.set(ze.getKey(),ze),C=ze.largestBatchId):ue.done()}).next(()=>m)}ce(e,t){return wd(e).put(function(s,c,m){const[C,R,H]=Of(c,m.mutation.key);return{userId:c,collectionPath:R,documentId:H,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:$n(s.oe,m.mutation)}}(this.Tt,this.userId,t))}}function wd(i){return No(i,"documentOverlays")}class Uu{constructor(){}ae(e,t){this.he(e,t),t.le()}he(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(li(e.integerValue));else if("doubleValue"in e){const s=li(e.doubleValue);isNaN(s)?this.fe(t,13):(this.fe(t,15),jo(s)?t.de(0):t.de(s))}else if("timestampValue"in e){const s=e.timestampValue;this.fe(t,20),"string"==typeof s?t._e(s):(t._e(`${s.seconds||""}`),t.de(s.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge(ia(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.fe(t,45),t.de(s.latitude||0),t.de(s.longitude||0)}else"mapValue"in e?Jt(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):zt()}we(e,t){this.fe(t,25),this.Te(e,t)}Te(e,t){t._e(e)}pe(e,t){const s=e.fields||{};this.fe(t,55);for(const c of Object.keys(s))this.we(c,t),this.he(s[c],t)}Ie(e,t){const s=e.values||[];this.fe(t,50);for(const c of s)this.he(c,t)}ye(e,t){this.fe(t,37),pn.fromName(e).path.forEach(s=>{this.fe(t,60),this.Te(s,t)})}fe(e,t){e.de(t)}me(e){e.de(2)}}function Pf(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function ac(i){const e=64-function(t){let s=0;for(let c=0;c<8;++c){const m=Pf(255&t[c]);if(s+=m,8!==m)break}return s}(i);return Math.ceil(e/8)}Uu.Ee=new Uu;class Nf{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Re(s.value),s=t.next();this.be()}ve(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Pe(s.value),s=t.next();this.Ve()}Se(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Re(s);else if(s<2048)this.Re(960|s>>>6),this.Re(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Re(480|s>>>12),this.Re(128|63&s>>>6),this.Re(128|63&s);else{const c=t.codePointAt(0);this.Re(240|c>>>18),this.Re(128|63&c>>>12),this.Re(128|63&c>>>6),this.Re(128|63&c)}}this.be()}De(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Pe(s);else if(s<2048)this.Pe(960|s>>>6),this.Pe(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|s>>>12),this.Pe(128|63&s>>>6),this.Pe(128|63&s);else{const c=t.codePointAt(0);this.Pe(240|c>>>18),this.Pe(128|63&c>>>12),this.Pe(128|63&c>>>6),this.Pe(128|63&c)}}this.Ve()}Ce(e){const t=this.xe(e),s=ac(t);this.Ne(1+s),this.buffer[this.position++]=255&s;for(let c=t.length-s;c<t.length;++c)this.buffer[this.position++]=255&t[c]}ke(e){const t=this.xe(e),s=ac(t);this.Ne(1+s),this.buffer[this.position++]=~(255&s);for(let c=t.length-s;c<t.length;++c)this.buffer[this.position++]=~(255&t[c])}Oe(){this.Me(255),this.Me(255)}Fe(){this.$e(255),this.$e(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const t=function(c){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,c,!1),new Uint8Array(m.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let c=1;c<t.length;++c)t[c]^=s?255:0;return t}Re(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.$e(0),this.$e(255)):255===t?(this.$e(255),this.$e(0)):this.$e(e)}be(){this.Me(0),this.Me(1)}Ve(){this.$e(0),this.$e(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}$e(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const c=new Uint8Array(s);c.set(this.buffer),this.buffer=c}}class $p{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.Oe()}}class Vp{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Fe()}}class lc{constructor(){this.Le=new Nf,this.qe=new $p(this.Le),this.Ue=new Vp(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return 0===e?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}class uc{constructor(e,t,s,c){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=c}Ge(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new uc(this.indexId,this.documentKey,this.arrayValue,s)}}function pu(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=kf(i.arrayValue,e.arrayValue),0!==t?t:(t=kf(i.directionalValue,e.directionalValue),0!==t?t:pn.comparator(i.documentKey,e.documentKey)))}function kf(i,e){for(let t=0;t<i.length&&t<e.length;++t){const s=i[t]-e[t];if(0!==s)return s}return i.length-e.length}class Fh{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const t of e.filters){const s=t;s.isInequality()?this.ze=s:this.je.push(s)}}We(e){_n(e.collectionGroup===this.collectionId);const t=es(e);if(void 0!==t&&!this.He(t))return!1;const s=fa(e);let c=0,m=0;for(;c<s.length&&this.He(s[c]);++c);if(c===s.length)return!0;if(void 0!==this.ze){const C=s[c];if(!this.Je(this.ze,C)||!this.Ye(this.Qe[m++],C))return!1;++c}for(;c<s.length;++c)if(m>=this.Qe.length||!this.Ye(this.Qe[m++],s[c]))return!1;return!0}He(e){for(const t of this.je)if(this.Je(t,e))return!0;return!1}Je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ye(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function dm(i){var e,t;if(_n(i instanceof Yr||i instanceof ci),i instanceof Yr){if(i instanceof sd){const c=(null===(t=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(m=>Yr.create(i.field,"==",m)))||[];return ci.create(c,"or")}return i}const s=i.filters.map(c=>dm(c));return ci.create(s,i.op)}function Up(i){if(0===i.getFilters().length)return[];const e=hc(dm(i));return _n(dc(e)),cc(e)||Lh(e)?[e]:e.getFilters()}function cc(i){return i instanceof Yr}function Lh(i){return i instanceof ci&&dl(i)}function dc(i){return cc(i)||Lh(i)||function(e){if(e instanceof ci&&Go(e)){for(const t of e.getFilters())if(!cc(t)&&!Lh(t))return!1;return!0}return!1}(i)}function hc(i){if(_n(i instanceof Yr||i instanceof ci),i instanceof Yr)return i;if(1===i.filters.length)return hc(i.filters[0]);const e=i.filters.map(s=>hc(s));let t=ci.create(e,i.op);return t=h(t),dc(t)?t:(_n(t instanceof ci),_n(Os(t)),_n(t.filters.length>1),t.filters.reduce((s,c)=>Bh(s,c)))}function Bh(i,e){let t;return _n(i instanceof Yr||i instanceof ci),_n(e instanceof Yr||e instanceof ci),t=i instanceof Yr?e instanceof Yr?ci.create([i,e],"and"):$h(i,e):e instanceof Yr?$h(e,i):function(s,c){if(_n(s.filters.length>0&&c.filters.length>0),Os(s)&&Os(c))return nd(s,c.getFilters());const m=Go(s)?s:c,C=Go(s)?c:s,R=m.filters.map(H=>Bh(H,C));return ci.create(R,"or")}(i,e),h(t)}function $h(i,e){if(Os(e))return nd(e,i.getFilters());{const t=e.filters.map(s=>Bh(i,s));return ci.create(t,"or")}}function h(i){if(_n(i instanceof Yr||i instanceof ci),i instanceof Yr)return i;const e=i.getFilters();if(1===e.length)return h(e[0]);if(Jc(i))return i;const t=e.map(c=>h(c)),s=[];return t.forEach(c=>{c instanceof Yr?s.push(c):c instanceof ci&&(c.op===i.op?s.push(...c.filters):s.push(c))}),1===s.length?s[0]:ci.create(s,i.op)}class u{constructor(){this.Ze=new d}addToCollectionParentIndex(e,t){return this.Ze.add(t),bt.resolve()}getCollectionParents(e,t){return bt.resolve(this.Ze.getEntries(t))}addFieldIndex(e,t){return bt.resolve()}deleteFieldIndex(e,t){return bt.resolve()}getDocumentsMatchingTarget(e,t){return bt.resolve(null)}getIndexType(e,t){return bt.resolve(0)}getFieldIndexes(e,t){return bt.resolve([])}getNextCollectionGroupToUpdate(e){return bt.resolve(null)}getMinOffset(e,t){return bt.resolve(zs.min())}getMinOffsetFromCollectionGroup(e,t){return bt.resolve(zs.min())}updateCollectionGroup(e,t,s){return bt.resolve()}updateIndexEntries(e,t){return bt.resolve()}}class d{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t]||new ji(Ur.comparator),m=!c.has(s);return this.index[t]=c.add(s),m}has(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t];return c&&c.has(s)}getEntries(e){return(this.index[e]||new ji(Ur.comparator)).toArray()}}const v=new Uint8Array(0);class S{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new d,this.tn=new ts(s=>el(s),(s,c)=>tu(s,c)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const s=t.lastSegment(),c=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const m={collectionId:s,parent:Po(c)};return k(e).put(m)}return bt.resolve()}getCollectionParents(e,t){const s=[],c=IDBKeyRange.bound([t,""],[Ql(t),""],!1,!0);return k(e).W(c).next(m=>{for(const C of m){if(C.collectionId!==t)break;s.push(uu(C.parent))}return s})}addFieldIndex(e,t){const s=se(e),c={indexId:(C=t).indexId,collectionGroup:C.collectionGroup,fields:C.fields.map(R=>[R.fieldPath.canonicalString(),R.kind])};var C;delete c.indexId;const m=s.add(c);if(t.indexState){const C=_e(e);return m.next(R=>{C.put(Ed(R,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return m.next()}deleteFieldIndex(e,t){const s=se(e),c=_e(e),m=G(e);return s.delete(t.indexId).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>m.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=G(e);let c=!0;const m=new Map;return bt.forEach(this.en(t),C=>this.nn(e,C).next(R=>{c&&(c=!!R),m.set(C,R)})).next(()=>{if(c){let C=Kr();const R=[];return bt.forEach(m,(H,Z)=>{var ue;Ft("IndexedDbIndexManager",`Using index ${ue=H,`id=${ue.indexId}|cg=${ue.collectionGroup}|f=${ue.fields.map(Mi=>`${Mi.fieldPath}:${Mi.kind}`).join(",")}`} to execute ${el(t)}`);const ze=function(Mi,ao){const Vi=es(ao);if(void 0===Vi)return null;for(const Hi of wl(Mi,Vi.fieldPath))switch(Hi.op){case"array-contains-any":return Hi.value.arrayValue.values||[];case"array-contains":return[Hi.value]}return null}(Z,H),wt=function(Mi,ao){const Vi=new Map;for(const Hi of fa(ao))for(const qo of wl(Mi,Hi.fieldPath))switch(qo.op){case"==":case"in":Vi.set(Hi.fieldPath.canonicalString(),qo.value);break;case"not-in":case"!=":return Vi.set(Hi.fieldPath.canonicalString(),qo.value),Array.from(Vi.values())}return null}(Z,H),Kt=function(Mi,ao){const Vi=[];let Hi=!0;for(const qo of fa(ao)){const If=0===qo.kind?Au(Mi,qo.fieldPath,Mi.startAt):nu(Mi,qo.fieldPath,Mi.startAt);Vi.push(If.value),Hi&&(Hi=If.inclusive)}return new lr(Vi,Hi)}(Z,H),en=function(Mi,ao){const Vi=[];let Hi=!0;for(const qo of fa(ao)){const If=0===qo.kind?nu(Mi,qo.fieldPath,Mi.endAt):Au(Mi,qo.fieldPath,Mi.endAt);Vi.push(If.value),Hi&&(Hi=If.inclusive)}return new lr(Vi,Hi)}(Z,H),Hn=this.sn(H,Z,Kt),cr=this.sn(H,Z,en),fs=this.rn(H,Z,wt),ks=this.on(H.indexId,ze,Hn,Kt.inclusive,cr,en.inclusive,fs);return bt.forEach(ks,Mi=>s.J(Mi,t.limit).next(ao=>{ao.forEach(Vi=>{const Hi=pn.fromSegments(Vi.documentKey);C.has(Hi)||(C=C.add(Hi),R.push(Hi))})}))}).next(()=>R)}return bt.resolve(null)})}en(e){let t=this.tn.get(e);return t||(t=0===e.filters.length?[e]:Up(ci.create(e.filters,"and")).map(s=>ga(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,t),t)}on(e,t,s,c,m,C,R){const H=(null!=t?t.length:1)*Math.max(s.length,m.length),Z=H/(null!=t?t.length:1),ue=[];for(let ze=0;ze<H;++ze){const wt=t?this.un(t[ze/Z]):v,Kt=this.cn(e,wt,s[ze%Z],c),en=this.an(e,wt,m[ze%Z],C),Hn=R.map(cr=>this.cn(e,wt,cr,!0));ue.push(...this.createRange(Kt,en,Hn))}return ue}cn(e,t,s,c){const m=new uc(e,pn.empty(),t,s);return c?m:m.Ge()}an(e,t,s,c){const m=new uc(e,pn.empty(),t,s);return c?m.Ge():m}nn(e,t){const s=new Fh(t),c=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,c).next(m=>{let C=null;for(const R of m)s.We(R)&&(!C||R.fields.length>C.fields.length)&&(C=R);return C})}getIndexType(e,t){let s=2;const c=this.en(t);return bt.forEach(c,m=>this.nn(e,m).next(C=>{C?0!==s&&C.fields.length<function(R){let H=new ji(ai.comparator),Z=!1;for(const ue of R.filters)for(const ze of ue.getFlattenedFilters())ze.field.isKeyField()||("array-contains"===ze.op||"array-contains-any"===ze.op?Z=!0:H=H.add(ze.field));for(const ue of R.orderBy)ue.field.isKeyField()||(H=H.add(ue.field));return H.size+(Z?1:0)}(m)&&(s=1):s=0})).next(()=>null!==t.limit&&c.length>1&&2===s?1:s)}hn(e,t){const s=new lc;for(const c of fa(e)){const m=t.data.field(c.fieldPath);if(null==m)return null;const C=s.Ke(c.kind);Uu.Ee.ae(m,C)}return s.Be()}un(e){const t=new lc;return Uu.Ee.ae(e,t.Ke(0)),t.Be()}ln(e,t){const s=new lc;return Uu.Ee.ae(wn(this.databaseId,t),s.Ke(function(c){const m=fa(c);return 0===m.length?0:m[m.length-1].kind}(e))),s.Be()}rn(e,t,s){if(null===s)return[];let c=[];c.push(new lc);let m=0;for(const C of fa(e)){const R=s[m++];for(const H of c)if(this.fn(t,C.fieldPath)&&U(R))c=this.dn(c,C,R);else{const Z=H.Ke(C.kind);Uu.Ee.ae(R,Z)}}return this._n(c)}sn(e,t,s){return this.rn(e,t,s.position)}_n(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Be();return t}dn(e,t,s){const c=[...e],m=[];for(const C of s.arrayValue.values||[])for(const R of c){const H=new lc;H.seed(R.Be()),Uu.Ee.ae(C,H.Ke(t.kind)),m.push(H)}return m}fn(e,t){return!!e.filters.find(s=>s instanceof Yr&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=se(e),c=_e(e);return(t?s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.W()).next(m=>{const C=[];return bt.forEach(m,R=>c.get([R.indexId,this.uid]).next(H=>{C.push(function(Z,ue){const ze=ue?new Qa(ue.sequenceNumber,new zs(du(ue.readTime),new pn(uu(ue.documentKey)),ue.largestBatchId)):Qa.empty(),wt=Z.fields.map(([Kt,en])=>new Mo(ai.fromServerFormat(Kt),en));return new cl(Z.indexId,Z.collectionGroup,wt,ze)}(R,H))})).next(()=>C)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,c)=>{const m=s.indexState.sequenceNumber-c.indexState.sequenceNumber;return 0!==m?m:mr(s.collectionGroup,c.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const c=se(e),m=_e(e);return this.wn(e).next(C=>c.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(R=>bt.forEach(R,H=>m.put(Ed(H.indexId,this.user,C,s)))))}updateIndexEntries(e,t){const s=new Map;return bt.forEach(t,(c,m)=>{const C=s.get(c.collectionGroup);return(C?bt.resolve(C):this.getFieldIndexes(e,c.collectionGroup)).next(R=>(s.set(c.collectionGroup,R),bt.forEach(R,H=>this.mn(e,c,H).next(Z=>{const ue=this.gn(m,H);return Z.isEqual(ue)?bt.resolve():this.yn(e,m,H,Z,ue)}))))})}pn(e,t,s,c){return G(e).put({indexId:c.indexId,uid:this.uid,arrayValue:c.arrayValue,directionalValue:c.directionalValue,orderedDocumentKey:this.ln(s,t.key),documentKey:t.key.path.toArray()})}In(e,t,s,c){return G(e).delete([c.indexId,this.uid,c.arrayValue,c.directionalValue,this.ln(s,t.key),t.key.path.toArray()])}mn(e,t,s){const c=G(e);let m=new ji(pu);return c.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.ln(s,t)])},(C,R)=>{m=m.add(new uc(s.indexId,t,R.arrayValue,R.directionalValue))}).next(()=>m)}gn(e,t){let s=new ji(pu);const c=this.hn(t,e);if(null==c)return s;const m=es(t);if(null!=m){const C=e.data.field(m.fieldPath);if(U(C))for(const R of C.arrayValue.values||[])s=s.add(new uc(t.indexId,e.key,this.un(R),c))}else s=s.add(new uc(t.indexId,e.key,v,c));return s}yn(e,t,s,c,m){Ft("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const C=[];return function(R,H,Z,ue,ze){const wt=R.getIterator(),Kt=H.getIterator();let en=eu(wt),Hn=eu(Kt);for(;en||Hn;){let cr=!1,fs=!1;if(en&&Hn){const ks=Z(en,Hn);ks<0?fs=!0:ks>0&&(cr=!0)}else null!=en?fs=!0:cr=!0;cr?(ue(Hn),Hn=eu(Kt)):fs?(ze(en),en=eu(wt)):(en=eu(wt),Hn=eu(Kt))}}(c,m,pu,R=>{C.push(this.pn(e,t,s,R))},R=>{C.push(this.In(e,t,s,R))}),bt.waitFor(C)}wn(e){let t=1;return _e(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,c,m)=>{m.done(),t=c.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((C,R)=>pu(C,R)).filter((C,R,H)=>!R||0!==pu(C,H[R-1]));const c=[];c.push(e);for(const C of s){const R=pu(C,e),H=pu(C,t);if(0===R)c[0]=e.Ge();else if(R>0&&H<0)c.push(C),c.push(C.Ge());else if(H>0)break}c.push(t);const m=[];for(let C=0;C<c.length;C+=2){if(this.Tn(c[C],c[C+1]))return[];m.push(IDBKeyRange.bound([c[C].indexId,this.uid,c[C].arrayValue,c[C].directionalValue,v,[]],[c[C+1].indexId,this.uid,c[C+1].arrayValue,c[C+1].directionalValue,v,[]]))}return m}Tn(e,t){return pu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Ve)}getMinOffset(e,t){return bt.mapArray(this.en(t),s=>this.nn(e,s).next(c=>c||zt())).next(Ve)}}function k(i){return No(i,"collectionParents")}function G(i){return No(i,"indexEntries")}function se(i){return No(i,"indexConfiguration")}function _e(i){return No(i,"indexState")}function Ve(i){_n(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<i.length;s++){const c=i[s].indexState.offset;ta(c,e)<0&&(e=c),t<c.largestBatchId&&(t=c.largestBatchId)}return new zs(e.readTime,e.documentKey,t)}const Bt={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class kt{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new kt(e,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Zt(i,e,t){const s=i.store("mutations"),c=i.store("documentMutations"),m=[],C=IDBKeyRange.only(t.batchId);let R=0;const H=s.X({range:C},(ue,ze,wt)=>(R++,wt.delete()));m.push(H.next(()=>{_n(1===R)}));const Z=[];for(const ue of t.mutations){const ze=Df(e,ue.key.path,t.batchId);m.push(c.delete(ze)),Z.push(ue.key)}return bt.waitFor(m).next(()=>Z)}function Vn(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw zt();e=i.noDocument}return JSON.stringify(e).length}kt.DEFAULT_COLLECTION_PERCENTILE=10,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kt.DEFAULT=new kt(41943040,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kt.DISABLED=new kt(-1,0,0);class ur{constructor(e,t,s,c){this.userId=e,this.Tt=t,this.indexManager=s,this.referenceDelegate=c,this.En={}}static ue(e,t,s,c){_n(""!==e.uid);const m=e.isAuthenticated()?e.uid:"";return new ur(m,t,s,c)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return gs(e).X({index:"userMutationsIndex",range:s},(c,m,C)=>{t=!1,C.done()}).next(()=>t)}addMutationBatch(e,t,s,c){const m=vo(e),C=gs(e);return C.add({}).next(R=>{_n("number"==typeof R);const H=new Mf(R,t,s,c),Z=function(wt,Kt,en){const Hn=en.baseMutations.map(fs=>$n(wt.oe,fs)),cr=en.mutations.map(fs=>$n(wt.oe,fs));return{userId:Kt,batchId:en.batchId,localWriteTimeMs:en.localWriteTime.toMillis(),baseMutations:Hn,mutations:cr}}(this.Tt,this.userId,H),ue=[];let ze=new ji((wt,Kt)=>mr(wt.canonicalString(),Kt.canonicalString()));for(const wt of c){const Kt=Df(this.userId,wt.key.path,R);ze=ze.add(wt.key.path.popLast()),ue.push(C.put(Z)),ue.push(m.put(Kt,Tf))}return ze.forEach(wt=>{ue.push(this.indexManager.addToCollectionParentIndex(e,wt))}),e.addOnCommittedListener(()=>{this.En[R]=H.keys()}),bt.waitFor(ue).next(()=>H)})}lookupMutationBatch(e,t){return gs(e).get(t).next(s=>s?(_n(s.userId===this.userId),hu(this.Tt,s)):null)}An(e,t){return this.En[t]?bt.resolve(this.En[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const c=s.keys();return this.En[t]=c,c}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,c=IDBKeyRange.lowerBound([this.userId,s]);let m=null;return gs(e).X({index:"userMutationsIndex",range:c},(C,R,H)=>{R.userId===this.userId&&(_n(R.batchId>=s),m=hu(this.Tt,R)),H.done()}).next(()=>m)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return gs(e).X({index:"userMutationsIndex",range:t,reverse:!0},(c,m,C)=>{s=m.batchId,C.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return gs(e).W("userMutationsIndex",t).next(s=>s.map(c=>hu(this.Tt,c)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=Qd(this.userId,t.path),c=IDBKeyRange.lowerBound(s),m=[];return vo(e).X({range:c},(C,R,H)=>{const[Z,ue,ze]=C,wt=uu(ue);if(Z===this.userId&&t.path.isEqual(wt))return gs(e).get(ze).next(Kt=>{if(!Kt)throw zt();_n(Kt.userId===this.userId),m.push(hu(this.Tt,Kt))});H.done()}).next(()=>m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ji(mr);const c=[];return t.forEach(m=>{const C=Qd(this.userId,m.path),R=IDBKeyRange.lowerBound(C),H=vo(e).X({range:R},(Z,ue,ze)=>{const[wt,Kt,en]=Z,Hn=uu(Kt);wt===this.userId&&m.path.isEqual(Hn)?s=s.add(en):ze.done()});c.push(H)}),bt.waitFor(c).next(()=>this.Rn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,c=s.length+1,m=Qd(this.userId,s),C=IDBKeyRange.lowerBound(m);let R=new ji(mr);return vo(e).X({range:C},(H,Z,ue)=>{const[ze,wt,Kt]=H,en=uu(wt);ze===this.userId&&s.isPrefixOf(en)?en.length===c&&(R=R.add(Kt)):ue.done()}).next(()=>this.Rn(e,R))}Rn(e,t){const s=[],c=[];return t.forEach(m=>{c.push(gs(e).get(m).next(C=>{if(null===C)throw zt();_n(C.userId===this.userId),s.push(hu(this.Tt,C))}))}),bt.waitFor(c).next(()=>s)}removeMutationBatch(e,t){return Zt(e.re,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.bn(t.batchId)}),bt.forEach(s,c=>this.referenceDelegate.markPotentiallyOrphaned(e,c))))}bn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return bt.resolve();const s=IDBKeyRange.lowerBound([this.userId]),c=[];return vo(e).X({range:s},(m,C,R)=>{if(m[0]===this.userId){const H=uu(m[1]);c.push(H)}else R.done()}).next(()=>{_n(0===c.length)})})}containsKey(e,t){return xi(e,this.userId,t)}vn(e){return Ko(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function xi(i,e,t){const s=Qd(e,t.path),c=s[1],m=IDBKeyRange.lowerBound(s);let C=!1;return vo(i).X({range:m,Z:!0},(R,H,Z)=>{const[ue,ze,wt]=R;ue===e&&ze===c&&(C=!0),Z.done()}).next(()=>C)}function gs(i){return No(i,"mutations")}function vo(i){return No(i,"documentMutations")}function Ko(i){return No(i,"mutationQueues")}class fl{constructor(e){this.Pn=e}next(){return this.Pn+=2,this.Pn}static Vn(){return new fl(0)}static Sn(){return new fl(-1)}}class jp{constructor(e,t){this.referenceDelegate=e,this.Tt=t}allocateTargetId(e){return this.Dn(e).next(t=>{const s=new fl(t.highestTargetId);return t.highestTargetId=s.next(),this.Cn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(t=>qn.fromTimestamp(new Si(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.Dn(e).next(c=>(c.highestListenSequenceNumber=t,s&&(c.lastRemoteSnapshotVersion=s.toTimestamp()),t>c.highestListenSequenceNumber&&(c.highestListenSequenceNumber=t),this.Cn(e,c)))}addTargetData(e,t){return this.xn(e,t).next(()=>this.Dn(e).next(s=>(s.targetCount+=1,this.Nn(t,s),this.Cn(e,s))))}updateTargetData(e,t){return this.xn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Vh(e).delete(t.targetId)).next(()=>this.Dn(e)).next(s=>(_n(s.targetCount>0),s.targetCount-=1,this.Cn(e,s)))}removeTargets(e,t,s){let c=0;const m=[];return Vh(e).X((C,R)=>{const H=Ra(R);H.sequenceNumber<=t&&null===s.get(H.targetId)&&(c++,m.push(this.removeTargetData(e,H)))}).next(()=>bt.waitFor(m)).next(()=>c)}forEachTarget(e,t){return Vh(e).X((s,c)=>{const m=Ra(c);t(m)})}Dn(e){return gv(e).get("targetGlobalKey").next(t=>(_n(null!==t),t))}Cn(e,t){return gv(e).put("targetGlobalKey",t)}xn(e,t){return Vh(e).put(Rf(this.Tt,t))}Nn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.Dn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=el(t),c=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let m=null;return Vh(e).X({range:c,index:"queryTargetsIndex"},(C,R,H)=>{const Z=Ra(R);tu(t,Z.target)&&(m=Z,H.done())}).next(()=>m)}addMatchingKeys(e,t,s){const c=[],m=fc(e);return t.forEach(C=>{const R=Po(C.path);c.push(m.put({targetId:s,path:R})),c.push(this.referenceDelegate.addReference(e,s,C))}),bt.waitFor(c)}removeMatchingKeys(e,t,s){const c=fc(e);return bt.forEach(t,m=>{const C=Po(m.path);return bt.waitFor([c.delete([s,C]),this.referenceDelegate.removeReference(e,s,m)])})}removeMatchingKeysForTargetId(e,t){const s=fc(e),c=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(c)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),c=fc(e);let m=Kr();return c.X({range:s,Z:!0},(C,R,H)=>{const Z=uu(C[1]),ue=new pn(Z);m=m.add(ue)}).next(()=>m)}containsKey(e,t){const s=Po(t.path),c=IDBKeyRange.bound([s],[Ql(s)],!1,!0);let m=0;return fc(e).X({index:"documentTargetsIndex",Z:!0,range:c},([C,R],H,Z)=>{0!==C&&(m++,Z.done())}).next(()=>m>0)}ie(e,t){return Vh(e).get(t).next(s=>s?Ra(s):null)}}function Vh(i){return No(i,"targets")}function gv(i){return No(i,"targetGlobal")}function fc(i){return No(i,"targetDocuments")}function mv([i,e],[t,s]){const c=mr(i,t);return 0===c?mr(e,s):c}class hm{constructor(e){this.kn=e,this.buffer=new ji(mv),this.On=0}Mn(){return++this.On}Fn(e){const t=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();mv(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class fm{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.$n=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}stop(){this.$n&&(this.$n.cancel(),this.$n=null)}get started(){return null!==this.$n}Bn(e){var t=this;Ft("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.$n=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,le.Z)(function*(){t.$n=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){Xa(s)?Ft("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield wa(s)}yield t.Bn(3e5)}))}}class yv{constructor(e,t){this.Ln=e,this.params=t}calculateTargetCount(e,t){return this.Ln.qn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return bt.resolve(no.at);const s=new hm(t);return this.Ln.forEachTarget(e,c=>s.Fn(c.sequenceNumber)).next(()=>this.Ln.Un(e,c=>s.Fn(c))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Ln.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Ln.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ft("LruGarbageCollector","Garbage collection skipped; disabled"),bt.resolve(Bt)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Ft("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Bt):this.Kn(e,t))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,t){let s,c,m,C,R,H,Z;const ue=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ze=>(ze>this.params.maximumSequenceNumbersToCollect?(Ft("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ze}`),c=this.params.maximumSequenceNumbersToCollect):c=ze,C=Date.now(),this.nthSequenceNumber(e,c))).next(ze=>(s=ze,R=Date.now(),this.removeTargets(e,s,t))).next(ze=>(m=ze,H=Date.now(),this.removeOrphanedDocuments(e,s))).next(ze=>(Z=Date.now(),un()<=et.in.DEBUG&&Ft("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${C-ue}ms\n\tDetermined least recently used ${c} in `+(R-C)+`ms\n\tRemoved ${m} targets in `+(H-R)+`ms\n\tRemoved ${ze} documents in `+(Z-H)+`ms\nTotal Duration: ${Z-ue}ms`),bt.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:m,documentsRemoved:ze})))}}class pm{constructor(e,t){this.db=e,this.garbageCollector=new yv(this,t)}qn(e){const t=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(c=>s+c))}Gn(e){let t=0;return this.Un(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Un(e,t){return this.Qn(e,(s,c)=>t(c))}addReference(e,t,s){return Ff(e,s)}removeReference(e,t,s){return Ff(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Ff(e,t)}jn(e,t){return function(s,c){let m=!1;return Ko(s).tt(C=>xi(s,C,c).next(R=>(R&&(m=!0),bt.resolve(!R)))).next(()=>m)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),c=[];let m=0;return this.Qn(e,(C,R)=>{if(R<=t){const H=this.jn(e,C).next(Z=>{if(!Z)return m++,s.getEntry(e,C).next(()=>(s.removeEntry(C,qn.min()),fc(e).delete([0,Po(C.path)])))});c.push(H)}}).next(()=>bt.waitFor(c)).next(()=>s.apply(e)).next(()=>m)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Ff(e,t)}Qn(e,t){const s=fc(e);let c,m=no.at;return s.X({index:"documentTargetsIndex"},([C,R],{path:H,sequenceNumber:Z})=>{0===C?(m!==no.at&&t(new pn(uu(c)),m),m=Z,c=H):m=no.at}).next(()=>{m!==no.at&&t(new pn(uu(c)),m)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ff(i,e){return fc(i).put((s=i.currentSequenceNumber,{targetId:0,path:Po(e.path),sequenceNumber:s}));var s}class gm{constructor(){this.changes=new ts(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,as.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?bt.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gu{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return Cd(e).put(s)}removeEntry(e,t,s){return Cd(e).delete(function(c,m){const C=c.path.toArray();return[C.slice(0,C.length-2),C[C.length-2],_d(m),C[C.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.zn(e,s)))}getEntry(e,t){let s=as.newInvalidDocument(t);return Cd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Uh(t))},(c,m)=>{s=this.Wn(t,m)}).next(()=>s)}Hn(e,t){let s={size:0,document:as.newInvalidDocument(t)};return Cd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Uh(t))},(c,m)=>{s={document:this.Wn(t,m),size:Vn(m)}}).next(()=>s)}getEntries(e,t){let s=bs();return this.Jn(e,t,(c,m)=>{const C=this.Wn(c,m);s=s.insert(c,C)}).next(()=>s)}Yn(e,t){let s=bs(),c=new Es(pn.comparator);return this.Jn(e,t,(m,C)=>{const R=this.Wn(m,C);s=s.insert(m,R),c=c.insert(m,Vn(C))}).next(()=>({documents:s,Zn:c}))}Jn(e,t,s){if(t.isEmpty())return bt.resolve();let c=new ji(Hp);t.forEach(H=>c=c.add(H));const m=IDBKeyRange.bound(Uh(c.first()),Uh(c.last())),C=c.getIterator();let R=C.getNext();return Cd(e).X({index:"documentKeyIndex",range:m},(H,Z,ue)=>{const ze=pn.fromSegments([...Z.prefixPath,Z.collectionGroup,Z.documentId]);for(;R&&Hp(R,ze)<0;)s(R,null),R=C.getNext();R&&R.isEqual(ze)&&(s(R,Z),R=C.hasNext()?C.getNext():null),R?ue.j(Uh(R)):ue.done()}).next(()=>{for(;R;)s(R,null),R=C.hasNext()?C.getNext():null})}getDocumentsMatchingQuery(e,t,s,c){const m=t.path,C=[m.popLast().toArray(),m.lastSegment(),_d(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],R=[m.popLast().toArray(),m.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Cd(e).W(IDBKeyRange.bound(C,R,!0)).next(H=>{let Z=bs();for(const ue of H){const ze=this.Wn(pn.fromSegments(ue.prefixPath.concat(ue.collectionGroup,ue.documentId)),ue);ze.isFoundDocument()&&(Dl(t,ze)||c.has(ze.key))&&(Z=Z.insert(ze.key,ze))}return Z})}getAllFromCollectionGroup(e,t,s,c){let m=bs();const C=_m(t,s),R=_m(t,zs.max());return Cd(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(C,R,!0)},(H,Z,ue)=>{const ze=this.Wn(pn.fromSegments(Z.prefixPath.concat(Z.collectionGroup,Z.documentId)),Z);m=m.insert(ze.key,ze),m.size===c&&ue.done()}).next(()=>m)}newChangeBuffer(e){return new ym(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return vm(e).get("remoteDocumentGlobalKey").next(t=>(_n(!!t),t))}zn(e,t){return vm(e).put("remoteDocumentGlobalKey",t)}Wn(e,t){if(t){const s=function cm(i,e){let t;if(e.document)t=ht(i.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=pn.fromSegments(e.noDocument.path),c=du(e.noDocument.readTime);t=as.newNoDocument(s,c),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return zt();{const s=pn.fromSegments(e.unknownDocument.path),c=du(e.unknownDocument.version);t=as.newUnknownDocument(s,c)}}return e.readTime&&t.setReadTime(function(s){const c=new Si(s[0],s[1]);return qn.fromTimestamp(c)}(e.readTime)),t}(this.Tt,t);if(!s.isNoDocument()||!s.version.isEqual(qn.min()))return s}return as.newInvalidDocument(e)}}function mm(i){return new gu(i)}class ym extends gm{constructor(e,t){super(),this.Xn=e,this.trackRemovals=t,this.ts=new ts(s=>s.toString(),(s,c)=>s.isEqual(c))}applyChanges(e){const t=[];let s=0,c=new ji((m,C)=>mr(m.canonicalString(),C.canonicalString()));return this.changes.forEach((m,C)=>{const R=this.ts.get(m);if(t.push(this.Xn.removeEntry(e,m,R.readTime)),C.isValidDocument()){const H=th(this.Xn.Tt,C);c=c.add(m.path.popLast());const Z=Vn(H);s+=Z-R.size,t.push(this.Xn.addEntry(e,m,H))}else if(s-=R.size,this.trackRemovals){const H=th(this.Xn.Tt,C.convertToNoDocument(qn.min()));t.push(this.Xn.addEntry(e,m,H))}}),c.forEach(m=>{t.push(this.Xn.indexManager.addToCollectionParentIndex(e,m))}),t.push(this.Xn.updateMetadata(e,s)),bt.waitFor(t)}getFromCache(e,t){return this.Xn.Hn(e,t).next(s=>(this.ts.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.Xn.Yn(e,t).next(({documents:s,Zn:c})=>(c.forEach((m,C)=>{this.ts.set(m,{size:C,readTime:s.get(m).readTime})}),s))}}function vm(i){return No(i,"remoteDocumentGlobal")}function Cd(i){return No(i,"remoteDocumentsV14")}function Uh(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function _m(i,e){const t=e.documentKey.path.toArray();return[i,_d(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Hp(i,e){const t=i.path.toArray(),s=e.path.toArray();let c=0;for(let m=0;m<t.length-2&&m<s.length-2;++m)if(c=mr(t[m],s[m]),c)return c;return c=mr(t.length,s.length),c||(c=mr(t[t.length-2],s[s.length-2]),c||mr(t[t.length-1],s[s.length-1]))}class vv{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Em{constructor(e,t,s,c){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=c}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(c=>(s=c,this.remoteDocumentCache.getEntry(e,t))).next(c=>(null!==s&&Pu(s.mutation,c,os.empty(),Si.now()),c))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Kr()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Kr()){const c=oo();return this.populateOverlays(e,c,t).next(()=>this.computeViews(e,t,c,s).next(m=>{let C=go();return m.forEach((R,H)=>{C=C.insert(R,H.overlayedDocument)}),C}))}getOverlayedDocuments(e,t){const s=oo();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Kr()))}populateOverlays(e,t,s){const c=[];return s.forEach(m=>{t.has(m)||c.push(m)}),this.documentOverlayCache.getOverlays(e,c).next(m=>{m.forEach((C,R)=>{t.set(C,R)})})}computeViews(e,t,s,c){let m=bs();const C=Ga(),R=Ga();return t.forEach((H,Z)=>{const ue=s.get(Z.key);c.has(Z.key)&&(void 0===ue||ue.mutation instanceof Ha)?m=m.insert(Z.key,Z):void 0!==ue?(C.set(Z.key,ue.mutation.getFieldMask()),Pu(ue.mutation,Z,ue.mutation.getFieldMask(),Si.now())):C.set(Z.key,os.empty())}),this.recalculateAndSaveOverlays(e,m).next(H=>(H.forEach((Z,ue)=>C.set(Z,ue)),t.forEach((Z,ue)=>{var ze;return R.set(Z,new vv(ue,null!==(ze=C.get(Z))&&void 0!==ze?ze:null))}),R))}recalculateAndSaveOverlays(e,t){const s=Ga();let c=new Es((C,R)=>C-R),m=Kr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(C=>{for(const R of C)R.keys().forEach(H=>{const Z=t.get(H);if(null===Z)return;let ue=s.get(H)||os.empty();ue=R.applyToLocalView(Z,ue),s.set(H,ue);const ze=(c.get(R.batchId)||Kr()).add(H);c=c.insert(R.batchId,ze)})}).next(()=>{const C=[],R=c.getReverseIterator();for(;R.hasNext();){const H=R.getNext(),Z=H.key,ue=H.value,ze=xc();ue.forEach(wt=>{if(!m.has(wt)){const Kt=Tc(t.get(wt),s.get(wt));null!==Kt&&ze.set(wt,Kt),m=m.add(wt)}}),C.push(this.documentOverlayCache.saveOverlays(e,Z,ze))}return bt.waitFor(C)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return pn.isDocumentKey((c=t).path)&&null===c.collectionGroup&&0===c.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):zo(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var c}getNextDocuments(e,t,s,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,c).next(m=>{const C=c-m.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,c-m.size):bt.resolve(oo());let R=-1,H=m;return C.next(Z=>bt.forEach(Z,(ue,ze)=>(R<ze.largestBatchId&&(R=ze.largestBatchId),m.get(ue)?bt.resolve():this.remoteDocumentCache.getEntry(e,ue).next(wt=>{H=H.insert(ue,wt)}))).next(()=>this.populateOverlays(e,Z,m)).next(()=>this.computeViews(e,H,Z,Kr())).next(ue=>({batchId:R,changes:Ds(ue)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pn(t)).next(s=>{let c=go();return s.isFoundDocument()&&(c=c.insert(s.key,s)),c})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const c=t.collectionGroup;let m=go();return this.indexManager.getCollectionParents(e,c).next(C=>bt.forEach(C,R=>{const H=(Z=t,ue=R.child(c),new Is(ue,null,Z.explicitOrderBy.slice(),Z.filters.slice(),Z.limit,Z.limitType,Z.startAt,Z.endAt));var Z,ue;return this.getDocumentsMatchingCollectionQuery(e,H,s).next(Z=>{Z.forEach((ue,ze)=>{m=m.insert(ue,ze)})})}).next(()=>m))}getDocumentsMatchingCollectionQuery(e,t,s){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(m=>(c=m,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c))).next(m=>{c.forEach((R,H)=>{const Z=H.getKey();null===m.get(Z)&&(m=m.insert(Z,as.newInvalidDocument(Z)))});let C=go();return m.forEach((R,H)=>{const Z=c.get(R);void 0!==Z&&Pu(Z.mutation,H,os.empty(),Si.now()),Dl(t,H)&&(C=C.insert(R,H))}),C})}}class _v{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,t){return bt.resolve(this.es.get(t))}saveBundleMetadata(e,t){var s;return this.es.set(t.id,{id:(s=t).id,version:s.version,createTime:Ns(s.createTime)}),bt.resolve()}getNamedQuery(e,t){return bt.resolve(this.ns.get(t))}saveNamedQuery(e,t){return this.ns.set(t.name,{name:(s=t).name,query:Fc(s.bundledQuery),readTime:Ns(s.readTime)}),bt.resolve();var s}}class Jr{constructor(){this.overlays=new Es(pn.comparator),this.ss=new Map}getOverlay(e,t){return bt.resolve(this.overlays.get(t))}getOverlays(e,t){const s=oo();return bt.forEach(t,c=>this.getOverlay(e,c).next(m=>{null!==m&&s.set(c,m)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((c,m)=>{this.ce(e,t,m)}),bt.resolve()}removeOverlaysForBatchId(e,t,s){const c=this.ss.get(s);return void 0!==c&&(c.forEach(m=>this.overlays=this.overlays.remove(m)),this.ss.delete(s)),bt.resolve()}getOverlaysForCollection(e,t,s){const c=oo(),m=t.length+1,C=new pn(t.child("")),R=this.overlays.getIteratorFrom(C);for(;R.hasNext();){const H=R.getNext().value,Z=H.getKey();if(!t.isPrefixOf(Z.path))break;Z.path.length===m&&H.largestBatchId>s&&c.set(H.getKey(),H)}return bt.resolve(c)}getOverlaysForCollectionGroup(e,t,s,c){let m=new Es((Z,ue)=>Z-ue);const C=this.overlays.getIterator();for(;C.hasNext();){const Z=C.getNext().value;if(Z.getKey().getCollectionGroup()===t&&Z.largestBatchId>s){let ue=m.get(Z.largestBatchId);null===ue&&(ue=oo(),m=m.insert(Z.largestBatchId,ue)),ue.set(Z.getKey(),Z)}}const R=oo(),H=m.getIterator();for(;H.hasNext()&&(H.getNext().value.forEach((Z,ue)=>R.set(Z,ue)),!(R.size()>=c)););return bt.resolve(R)}ce(e,t,s){const c=this.overlays.get(s.key);if(null!==c){const C=this.ss.get(c.largestBatchId).delete(s.key);this.ss.set(c.largestBatchId,C)}this.overlays=this.overlays.insert(s.key,new Jd(t,s));let m=this.ss.get(t);void 0===m&&(m=Kr(),this.ss.set(t,m)),this.ss.set(t,m.add(s.key))}}class Lf{constructor(){this.rs=new ji(aa.os),this.us=new ji(aa.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,t){const s=new aa(e,t);this.rs=this.rs.add(s),this.us=this.us.add(s)}hs(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.ls(new aa(e,t))}fs(e,t){e.forEach(s=>this.removeReference(s,t))}ds(e){const t=new pn(new Ur([])),s=new aa(t,e),c=new aa(t,e+1),m=[];return this.us.forEachInRange([s,c],C=>{this.ls(C),m.push(C.key)}),m}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const t=new pn(new Ur([])),s=new aa(t,e),c=new aa(t,e+1);let m=Kr();return this.us.forEachInRange([s,c],C=>{m=m.add(C.key)}),m}containsKey(e){const t=new aa(e,0),s=this.rs.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class aa{constructor(e,t){this.key=e,this.gs=t}static os(e,t){return pn.comparator(e.key,t.key)||mr(e.gs,t.gs)}static cs(e,t){return mr(e.gs,t.gs)||pn.comparator(e.key,t.key)}}class Im{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ys=1,this.ps=new ji(aa.os)}checkEmpty(e){return bt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,c){const m=this.ys;this.ys++;const C=new Mf(m,t,s,c);this.mutationQueue.push(C);for(const R of c)this.ps=this.ps.add(new aa(R.key,m)),this.indexManager.addToCollectionParentIndex(e,R.key.path.popLast());return bt.resolve(C)}lookupMutationBatch(e,t){return bt.resolve(this.Is(t))}getNextMutationBatchAfterBatchId(e,t){const c=this.Ts(t+1),m=c<0?0:c;return bt.resolve(this.mutationQueue.length>m?this.mutationQueue[m]:null)}getHighestUnacknowledgedBatchId(){return bt.resolve(0===this.mutationQueue.length?-1:this.ys-1)}getAllMutationBatches(e){return bt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new aa(t,0),c=new aa(t,Number.POSITIVE_INFINITY),m=[];return this.ps.forEachInRange([s,c],C=>{const R=this.Is(C.gs);m.push(R)}),bt.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ji(mr);return t.forEach(c=>{const m=new aa(c,0),C=new aa(c,Number.POSITIVE_INFINITY);this.ps.forEachInRange([m,C],R=>{s=s.add(R.gs)})}),bt.resolve(this.Es(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,c=s.length+1;let m=s;pn.isDocumentKey(m)||(m=m.child(""));const C=new aa(new pn(m),0);let R=new ji(mr);return this.ps.forEachWhile(H=>{const Z=H.key.path;return!!s.isPrefixOf(Z)&&(Z.length===c&&(R=R.add(H.gs)),!0)},C),bt.resolve(this.Es(R))}Es(e){const t=[];return e.forEach(s=>{const c=this.Is(s);null!==c&&t.push(c)}),t}removeMutationBatch(e,t){_n(0===this.As(t.batchId,"removed")),this.mutationQueue.shift();let s=this.ps;return bt.forEach(t.mutations,c=>{const m=new aa(c.key,t.batchId);return s=s.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)}).next(()=>{this.ps=s})}bn(e){}containsKey(e,t){const s=new aa(t,0),c=this.ps.firstAfterOrEqual(s);return bt.resolve(t.isEqual(c&&c.key))}performConsistencyCheck(e){return bt.resolve()}As(e,t){return this.Ts(e)}Ts(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Is(e){const t=this.Ts(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ev{constructor(e){this.Rs=e,this.docs=new Es(pn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,c=this.docs.get(s),m=c?c.size:0,C=this.Rs(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:C}),this.size+=C-m,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return bt.resolve(s?s.document.mutableCopy():as.newInvalidDocument(t))}getEntries(e,t){let s=bs();return t.forEach(c=>{const m=this.docs.get(c);s=s.insert(c,m?m.document.mutableCopy():as.newInvalidDocument(c))}),bt.resolve(s)}getDocumentsMatchingQuery(e,t,s,c){let m=bs();const C=t.path,R=new pn(C.child("")),H=this.docs.getIteratorFrom(R);for(;H.hasNext();){const{key:Z,value:{document:ue}}=H.getNext();if(!C.isPrefixOf(Z.path))break;Z.path.length>C.length+1||ta(Cu(ue),s)<=0||(c.has(ue.key)||Dl(t,ue))&&(m=m.insert(ue.key,ue.mutableCopy()))}return bt.resolve(m)}getAllFromCollectionGroup(e,t,s,c){zt()}bs(e,t){return bt.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new Iv(this)}getSize(e){return bt.resolve(this.size)}}class Iv extends gm{constructor(e){super(),this.Xn=e}applyChanges(e){const t=[];return this.changes.forEach((s,c)=>{c.isValidDocument()?t.push(this.Xn.addEntry(e,c)):this.Xn.removeEntry(s)}),bt.waitFor(t)}getFromCache(e,t){return this.Xn.getEntry(e,t)}getAllFromCache(e,t){return this.Xn.getEntries(e,t)}}class wm{constructor(e){this.persistence=e,this.vs=new ts(t=>el(t),tu),this.lastRemoteSnapshotVersion=qn.min(),this.highestTargetId=0,this.Ps=0,this.Vs=new Lf,this.targetCount=0,this.Ss=fl.Vn()}forEachTarget(e,t){return this.vs.forEach((s,c)=>t(c)),bt.resolve()}getLastRemoteSnapshotVersion(e){return bt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return bt.resolve(this.Ps)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),bt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Ps&&(this.Ps=t),bt.resolve()}xn(e){this.vs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ss=new fl(t),this.highestTargetId=t),e.sequenceNumber>this.Ps&&(this.Ps=e.sequenceNumber)}addTargetData(e,t){return this.xn(t),this.targetCount+=1,bt.resolve()}updateTargetData(e,t){return this.xn(t),bt.resolve()}removeTargetData(e,t){return this.vs.delete(t.target),this.Vs.ds(t.targetId),this.targetCount-=1,bt.resolve()}removeTargets(e,t,s){let c=0;const m=[];return this.vs.forEach((C,R)=>{R.sequenceNumber<=t&&null===s.get(R.targetId)&&(this.vs.delete(C),m.push(this.removeMatchingKeysForTargetId(e,R.targetId)),c++)}),bt.waitFor(m).next(()=>c)}getTargetCount(e){return bt.resolve(this.targetCount)}getTargetData(e,t){const s=this.vs.get(t)||null;return bt.resolve(s)}addMatchingKeys(e,t,s){return this.Vs.hs(t,s),bt.resolve()}removeMatchingKeys(e,t,s){this.Vs.fs(t,s);const c=this.persistence.referenceDelegate,m=[];return c&&t.forEach(C=>{m.push(c.markPotentiallyOrphaned(e,C))}),bt.waitFor(m)}removeMatchingKeysForTargetId(e,t){return this.Vs.ds(t),bt.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Vs.ws(t);return bt.resolve(s)}containsKey(e,t){return bt.resolve(this.Vs.containsKey(t))}}class Cm{constructor(e,t){this.Ds={},this.overlays={},this.Cs=new no(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new wm(this),this.indexManager=new u,this.remoteDocumentCache=new Ev(s=>this.referenceDelegate.ks(s)),this.Tt=new eh(t),this.Os=new _v(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Jr,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Ds[e.toKey()];return s||(s=new Im(t,this.referenceDelegate),this.Ds[e.toKey()]=s),s}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Os}runTransaction(e,t,s){Ft("MemoryPersistence","Starting transaction:",e);const c=new bm(this.Cs.next());return this.referenceDelegate.Ms(),s(c).next(m=>this.referenceDelegate.Fs(c).next(()=>m)).toPromise().then(m=>(c.raiseOnCommittedEvent(),m))}$s(e,t){return bt.or(Object.values(this.Ds).map(s=>()=>s.containsKey(e,t)))}}class bm extends Zi{constructor(e){super(),this.currentSequenceNumber=e}}class Bf{constructor(e){this.persistence=e,this.Bs=new Lf,this.Ls=null}static qs(e){return new Bf(e)}get Us(){if(this.Ls)return this.Ls;throw zt()}addReference(e,t,s){return this.Bs.addReference(s,t),this.Us.delete(s.toString()),bt.resolve()}removeReference(e,t,s){return this.Bs.removeReference(s,t),this.Us.add(s.toString()),bt.resolve()}markPotentiallyOrphaned(e,t){return this.Us.add(t.toString()),bt.resolve()}removeTarget(e,t){this.Bs.ds(t.targetId).forEach(c=>this.Us.add(c.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(c=>{c.forEach(m=>this.Us.add(m.toString()))}).next(()=>s.removeTargetData(e,t))}Ms(){this.Ls=new Set}Fs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return bt.forEach(this.Us,s=>{const c=pn.fromPath(s);return this.Ks(e,c).next(m=>{m||t.removeEntry(c,qn.min())})}).next(()=>(this.Ls=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ks(e,t).next(s=>{s?this.Us.delete(t.toString()):this.Us.add(t.toString())})}ks(e){return 0}Ks(e,t){return bt.or([()=>bt.resolve(this.Bs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.$s(e,t)])}}class wv{constructor(e){this.Tt=e}$(e,t,s,c){const m=new yl("createOrUpgrade",t);var R;s<1&&c>=1&&(e.createObjectStore("owner"),(R=e).createObjectStore("mutationQueues",{keyPath:"userId"}),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Oh,{unique:!0}),R.createObjectStore("documentMutations"),Cv(e),function(R){R.createObjectStore("remoteDocuments")}(e));let C=bt.resolve();return s<3&&c>=3&&(0!==s&&(function(R){R.deleteObjectStore("targetDocuments"),R.deleteObjectStore("targets"),R.deleteObjectStore("targetGlobal")}(e),Cv(e)),C=C.next(()=>function(R){const H=R.store("targetGlobal"),Z={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:qn.min().toTimestamp(),targetCount:0};return H.put("targetGlobalKey",Z)}(m))),s<4&&c>=4&&(0!==s&&(C=C.next(()=>function(R,H){return H.store("mutations").W().next(Z=>{R.deleteObjectStore("mutations"),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Oh,{unique:!0});const ue=H.store("mutations"),ze=Z.map(wt=>ue.put(wt));return bt.waitFor(ze)})}(e,m))),C=C.next(()=>{!function(R){R.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&c>=5&&(C=C.next(()=>this.Gs(m))),s<6&&c>=6&&(C=C.next(()=>(function(R){R.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(m)))),s<7&&c>=7&&(C=C.next(()=>this.js(m))),s<8&&c>=8&&(C=C.next(()=>this.zs(e,m))),s<9&&c>=9&&(C=C.next(()=>{!function(R){R.objectStoreNames.contains("remoteDocumentChanges")&&R.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&c>=10&&(C=C.next(()=>this.Ws(m))),s<11&&c>=11&&(C=C.next(()=>{(function(R){R.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(R){R.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&c>=12&&(C=C.next(()=>{!function(R){const H=R.createObjectStore("documentOverlays",{keyPath:Af});H.createIndex("collectionPathOverlayIndex",Lp,{unique:!1}),H.createIndex("collectionGroupOverlayIndex",xf,{unique:!1})}(e)})),s<13&&c>=13&&(C=C.next(()=>function(R){const H=R.createObjectStore("remoteDocumentsV14",{keyPath:Xd});H.createIndex("documentKeyIndex",Rp),H.createIndex("collectionGroupIndex",Ph)}(e)).next(()=>this.Hs(e,m)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&c>=14&&(C=C.next(()=>this.Js(e,m))),s<15&&c>=15&&(C=C.next(()=>function(R){R.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),R.createObjectStore("indexState",{keyPath:Np}).createIndex("sequenceNumberIndex",Sf,{unique:!1}),R.createObjectStore("indexEntries",{keyPath:kp}).createIndex("documentKeyIndex",Fp,{unique:!1})}(e))),C}Qs(e){let t=0;return e.store("remoteDocuments").X((s,c)=>{t+=Vn(c)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Gs(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.W().next(c=>bt.forEach(c,m=>{const C=IDBKeyRange.bound([m.userId,-1],[m.userId,m.lastAcknowledgedBatchId]);return s.W("userMutationsIndex",C).next(R=>bt.forEach(R,H=>{_n(H.userId===m.userId);const Z=hu(this.Tt,H);return Zt(e,m.userId,Z).next(()=>{})}))}))}js(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(c=>{const m=[];return s.X((C,R)=>{const H=new Ur(C),Z=[0,Po(H)];m.push(t.get(Z).next(ue=>ue?bt.resolve():t.put({targetId:0,path:Po(H),sequenceNumber:c.highestListenSequenceNumber})))}).next(()=>bt.waitFor(m))})}zs(e,t){e.createObjectStore("collectionParents",{keyPath:lm});const s=t.store("collectionParents"),c=new d,m=C=>{if(c.add(C)){const R=C.lastSegment(),H=C.popLast();return s.put({collectionId:R,parent:Po(H)})}};return t.store("remoteDocuments").X({Z:!0},(C,R)=>{const H=new Ur(C);return m(H.popLast())}).next(()=>t.store("documentMutations").X({Z:!0},([C,R,H],Z)=>{const ue=uu(R);return m(ue.popLast())}))}Ws(e){const t=e.store("targets");return t.X((s,c)=>{const m=Ra(c),C=Rf(this.Tt,m);return t.put(C)})}Hs(e,t){const s=t.store("remoteDocuments"),c=[];return s.X((m,C)=>{const R=t.store("remoteDocumentsV14"),H=(Z=C,Z.document?new pn(Ur.fromString(Z.document.name).popFirst(5)):Z.noDocument?pn.fromSegments(Z.noDocument.path):Z.unknownDocument?pn.fromSegments(Z.unknownDocument.path):zt()).path.toArray();var Z;const ue={prefixPath:H.slice(0,H.length-2),collectionGroup:H[H.length-2],documentId:H[H.length-1],readTime:C.readTime||[0,0],unknownDocument:C.unknownDocument,noDocument:C.noDocument,document:C.document,hasCommittedMutations:!!C.hasCommittedMutations};c.push(R.put(ue))}).next(()=>bt.waitFor(c))}Js(e,t){const s=t.store("mutations"),c=mm(this.Tt),m=new Cm(Bf.qs,this.Tt.oe);return s.W().next(C=>{const R=new Map;return C.forEach(H=>{var Z;let ue=null!==(Z=R.get(H.userId))&&void 0!==Z?Z:Kr();hu(this.Tt,H).keys().forEach(ze=>ue=ue.add(ze)),R.set(H.userId,ue)}),bt.forEach(R,(H,Z)=>{const ue=new ye(Z),ze=Bc.ue(this.Tt,ue),wt=m.getIndexManager(ue),Kt=ur.ue(ue,this.Tt,wt,m.referenceDelegate);return new Em(c,Kt,ze,wt).recalculateAndSaveOverlaysForDocumentKeys(new Vu(t,no.at),H).next()})})}}function Cv(i){i.createObjectStore("targetDocuments",{keyPath:mo}).createIndex("documentTargetsIndex",Pp,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Op,{unique:!0}),i.createObjectStore("targetGlobal")}const $f="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Vf{constructor(e,t,s,c,m,C,R,H,Z,ue,ze=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Ys=m,this.window=C,this.document=R,this.Zs=Z,this.Xs=ue,this.ti=ze,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=wt=>Promise.resolve(),!Vf.C())throw new Wt(It.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new pm(this,c),this.oi=t+"main",this.Tt=new eh(H),this.ui=new Ms(this.oi,this.ti,new wv(this.Tt)),this.Ns=new jp(this.referenceDelegate,this.Tt),this.remoteDocumentCache=mm(this.Tt),this.Os=new Id,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===ue&&ir("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Wt(It.FAILED_PRECONDITION,$f);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new no(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){var t=this;return this.ri=function(){var s=(0,le.Z)(function*(c){if(t.started)return e(c)});return function(c){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(function(){var t=(0,le.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget((0,le.Z)(function*(){t.started&&(yield t.ai())})))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Uf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(t=>{t||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(t=>this.isPrimary&&!t?this.mi(e).next(()=>!1):!!t&&this.gi(e).next(()=>!0))).catch(e=>{if(Xa(e))return Ft("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ft("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return mu(e).get("owner").next(t=>bt.resolve(this.yi(t)))}pi(e){return Uf(e).delete(this.clientId)}Ii(){var e=this;return(0,le.Z)(function*(){if(e.isPrimary&&!e.Ti(e.ii,18e5)){e.ii=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const c=No(s,"clientMetadata");return c.W().next(m=>{const C=e.Ei(m,18e5),R=m.filter(H=>-1===C.indexOf(H));return bt.forEach(R,H=>c.delete(H.clientId)).next(()=>R)})}).catch(()=>[]);if(e.ci)for(const s of t)e.ci.removeItem(e.Ai(s.clientId))}})()}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?bt.resolve(!0):mu(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)){if(this.yi(t)&&this.networkEnabled)return!0;if(!this.yi(t)){if(!t.allowTabSynchronization)throw new Wt(It.FAILED_PRECONDITION,$f);return!1}}return!(!this.networkEnabled||!this.inForeground)||Uf(e).W().next(s=>void 0===this.Ei(s,5e3).find(c=>!(this.clientId===c.clientId||!(!this.networkEnabled&&c.networkEnabled||!this.inForeground&&c.inForeground&&this.networkEnabled===c.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ft("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,le.Z)(function*(){e.xs=!1,e.bi(),e.si&&(e.si.cancel(),e.si=null),e.vi(),e.Pi(),yield e.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new Vu(t,no.at);return e.mi(s).next(()=>e.pi(s))}),e.ui.close(),e.Vi()})()}Ei(e,t){return e.filter(s=>this.Ti(s.updateTimeMs,t)&&!this.Ri(s.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>Uf(e).W().next(t=>this.Ei(t,18e5).map(s=>s.clientId)))}get started(){return this.xs}getMutationQueue(e,t){return ur.ue(e,this.Tt,t,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new S(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return Bc.ue(this.Tt,e)}getBundleCache(){return this.Os}runTransaction(e,t,s){Ft("IndexedDbPersistence","Starting transaction:",e);const c="readonly"===t?"readonly":"readwrite",m=15===(C=this.ti)?za:14===C?yo:13===C?nl:12===C?um:11===C?Bp:void zt();var C;let R;return this.ui.runTransaction(e,c,m,H=>(R=new Vu(H,this.Cs?this.Cs.next():no.at),"readwrite-primary"===t?this._i(R).next(Z=>!!Z||this.wi(R)).next(Z=>{if(!Z)throw ir(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new Wt(It.FAILED_PRECONDITION,na);return s(R)}).next(Z=>this.gi(R).next(()=>Z)):this.Di(R).next(()=>s(R)))).then(H=>(R.raiseOnCommittedEvent(),H))}Di(e){return mu(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)&&!this.yi(t)&&!(this.Xs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Wt(It.FAILED_PRECONDITION,$f)})}gi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return mu(e).put("owner",t)}static C(){return Ms.C()}mi(e){const t=mu(e);return t.get("owner").next(s=>this.yi(s)?(Ft("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):bt.resolve())}Ti(e,t){const s=Date.now();return!(e<s-t||e>s&&(ir(`Detected an update time that is in the future: ${e} > ${s}`),1))}hi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=()=>{this.bi(),(0,Qe.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}Pi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var t;try{const s=null!==(null===(t=this.ci)||void 0===t?void 0:t.getItem(this.Ai(e)));return Ft("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return ir("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}bi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){ir("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch(e){}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function mu(i){return No(i,"owner")}function Uf(i){return No(i,"clientMetadata")}function jh(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Hh{constructor(e,t,s,c){this.targetId=e,this.fromCache=t,this.Ci=s,this.xi=c}static Ni(e,t){let s=Kr(),c=Kr();for(const m of t.docChanges)switch(m.type){case 0:s=s.add(m.doc.key);break;case 1:c=c.add(m.doc.key)}return new Hh(e,t.fromCache,s,c)}}class Dm{constructor(){this.ki=!1}initialize(e,t){this.Oi=e,this.indexManager=t,this.ki=!0}getDocumentsMatchingQuery(e,t,s,c){return this.Mi(e,t).next(m=>m||this.Fi(e,t,c,s)).next(m=>m||this.$i(e,t))}Mi(e,t){if(Zu(t))return bt.resolve(null);let s=sa(t);return this.indexManager.getIndexType(e,s).next(c=>0===c?null:(null!==t.limit&&1===c&&(t=Xu(t,null,"F"),s=sa(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(m=>{const C=Kr(...m);return this.Oi.getDocuments(e,C).next(R=>this.indexManager.getMinOffset(e,s).next(H=>{const Z=this.Bi(t,R);return this.Li(t,Z,C,H.readTime)?this.Mi(e,Xu(t,null,"F")):this.qi(e,Z,t,H)}))})))}Fi(e,t,s,c){return Zu(t)||c.isEqual(qn.min())?this.$i(e,t):this.Oi.getDocuments(e,s).next(m=>{const C=this.Bi(t,m);return this.Li(t,C,s,c)?this.$i(e,t):(un()<=et.in.DEBUG&&Ft("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),tl(t)),this.qi(e,C,t,wu(c,-1)))})}Bi(e,t){let s=new ji(ru(e));return t.forEach((c,m)=>{Dl(e,m)&&(s=s.add(m))}),s}Li(e,t,s,c){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const m="F"===e.limitType?t.last():t.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(c)>0)}$i(e,t){return un()<=et.in.DEBUG&&Ft("QueryEngine","Using full collection scan to execute query:",tl(t)),this.Oi.getDocumentsMatchingQuery(e,t,zs.min())}qi(e,t,s,c){return this.Oi.getDocumentsMatchingQuery(e,s,c).next(m=>(t.forEach(C=>{m=m.insert(C.key,C)}),m))}}class l0{constructor(e,t,s,c){this.persistence=e,this.Ui=t,this.Tt=c,this.Ki=new Es(mr),this.Gi=new ts(m=>el(m),tu),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.Os=e.getBundleCache(),this.zi(s)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Em(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ki))}}function bv(i,e,t,s){return new l0(i,e,t,s)}function Dv(i,e){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,le.Z)(function*(i,e){const t=dn(i);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let c;return t.mutationQueue.getAllMutationBatches(s).next(m=>(c=m,t.zi(e),t.mutationQueue.getAllMutationBatches(s))).next(m=>{const C=[],R=[];let H=Kr();for(const Z of c){C.push(Z.batchId);for(const ue of Z.mutations)H=H.add(ue.key)}for(const Z of m){R.push(Z.batchId);for(const ue of Z.mutations)H=H.add(ue.key)}return t.localDocuments.getDocuments(s,H).next(Z=>({Wi:Z,removedBatchIds:C,addedBatchIds:R}))})})}),Gp.apply(this,arguments)}function Tv(i){const e=dn(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ns.getLastRemoteSnapshotVersion(t))}function bd(i,e,t){let s=Kr(),c=Kr();return t.forEach(m=>s=s.add(m)),e.getEntries(i,s).next(m=>{let C=bs();return t.forEach((R,H)=>{const Z=m.get(R);H.isFoundDocument()!==Z.isFoundDocument()&&(c=c.add(R)),H.isNoDocument()&&H.version.isEqual(qn.min())?(e.removeEntry(R,H.readTime),C=C.insert(R,H)):!Z.isValidDocument()||H.version.compareTo(Z.version)>0||0===H.version.compareTo(Z.version)&&Z.hasPendingWrites?(e.addEntry(H),C=C.insert(R,H)):Ft("LocalStore","Ignoring outdated watch update for ",R,". Current version:",Z.version," Watch version:",H.version)}),{Hi:C,Ji:c}})}function Av(i,e){const t=dn(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Dd(i,e){const t=dn(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let c;return t.Ns.getTargetData(s,e).next(m=>m?(c=m,bt.resolve(c)):t.Ns.allocateTargetId(s).next(C=>(c=new cu(e,C,0,s.currentSequenceNumber),t.Ns.addTargetData(s,c).next(()=>c))))}).then(s=>{const c=t.Ki.get(s.targetId);return(null===c||s.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(t.Ki=t.Ki.insert(s.targetId,s),t.Gi.set(e,s.targetId)),s})}function pc(i,e,t){return zp.apply(this,arguments)}function zp(){return zp=(0,le.Z)(function*(i,e,t){const s=dn(i),c=s.Ki.get(e),m=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",m,C=>s.persistence.referenceDelegate.removeTarget(C,c)))}catch(C){if(!Xa(C))throw C;Ft("LocalStore",`Failed to update sequence numbers for target ${e}: ${C}`)}s.Ki=s.Ki.remove(e),s.Gi.delete(c.target)}),zp.apply(this,arguments)}function Gh(i,e,t){const s=dn(i);let c=qn.min(),m=Kr();return s.persistence.runTransaction("Execute query","readonly",C=>function(R,H,Z){const ue=dn(R),ze=ue.Gi.get(Z);return void 0!==ze?bt.resolve(ue.Ki.get(ze)):ue.Ns.getTargetData(H,Z)}(s,C,sa(e)).next(R=>{if(R)return c=R.lastLimboFreeSnapshotVersion,s.Ns.getMatchingKeysForTargetId(C,R.targetId).next(H=>{m=H})}).next(()=>s.Ui.getDocumentsMatchingQuery(C,e,t?c:qn.min(),t?m:Kr())).next(R=>(xm(s,ad(e),R),{documents:R,Yi:m})))}function Sm(i,e){const t=dn(i),s=dn(t.Ns),c=t.Ki.get(e);return c?Promise.resolve(c.target):t.persistence.runTransaction("Get target data","readonly",m=>s.ie(m,e).next(C=>C?C.target:null))}function Am(i,e){const t=dn(i),s=t.Qi.get(e)||qn.min();return t.persistence.runTransaction("Get new document changes","readonly",c=>t.ji.getAllFromCollectionGroup(c,e,wu(s,-1),Number.MAX_SAFE_INTEGER)).then(c=>(xm(t,e,c),c))}function xm(i,e,t){let s=i.Qi.get(e)||qn.min();t.forEach((c,m)=>{m.readTime.compareTo(s)>0&&(s=m.readTime)}),i.Qi.set(e,s)}function Wp(){return Wp=(0,le.Z)(function*(i,e,t,s){const c=dn(i);let m=Kr(),C=bs();for(const Z of t){const ue=e.Zi(Z.metadata.name);Z.document&&(m=m.add(ue));const ze=e.Xi(Z);ze.setReadTime(e.tr(Z.metadata.readTime)),C=C.insert(ue,ze)}const R=c.ji.newChangeBuffer({trackRemovals:!0}),H=yield Dd(c,(Z=s,sa(Bl(Ur.fromString(`__bundle__/docs/${Z}`)))));var Z;return c.persistence.runTransaction("Apply bundle documents","readwrite",Z=>bd(Z,R,C).next(ue=>(R.apply(Z),ue)).next(ue=>c.Ns.removeMatchingKeysForTargetId(Z,H.targetId).next(()=>c.Ns.addMatchingKeys(Z,m,H.targetId)).next(()=>c.localDocuments.getLocalViewOfDocuments(Z,ue.Hi,ue.Ji)).next(()=>ue.Hi)))}),Wp.apply(this,arguments)}function Mm(i,e){return Kp.apply(this,arguments)}function Kp(){return Kp=(0,le.Z)(function*(i,e,t=Kr()){const s=yield Dd(i,sa(Fc(e.bundledQuery))),c=dn(i);return c.persistence.runTransaction("Save named query","readwrite",m=>{const C=Ns(e.readTime);if(s.snapshotVersion.compareTo(C)>=0)return c.Os.saveNamedQuery(m,e);const R=s.withResumeToken(_s.EMPTY_BYTE_STRING,C);return c.Ki=c.Ki.insert(R.targetId,R),c.Ns.updateTargetData(m,R).next(()=>c.Ns.removeMatchingKeysForTargetId(m,s.targetId)).next(()=>c.Ns.addMatchingKeys(m,t,s.targetId)).next(()=>c.Os.saveNamedQuery(m,e))})}),Kp.apply(this,arguments)}function Yp(i,e){return`firestore_clients_${i}_${e}`}function qp(i,e,t){let s=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function zh(i,e){return`firestore_targets_${i}_${e}`}class Zp{constructor(e,t,s,c){this.user=e,this.batchId=t,this.state=s,this.error=c}static er(e,t,s){const c=JSON.parse(s);let m,C="object"==typeof c&&-1!==["pending","acknowledged","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return C&&c.error&&(C="string"==typeof c.error.message&&"string"==typeof c.error.code,C&&(m=new Wt(c.error.code,c.error.message))),C?new Zp(e,t,c.state,m):(ir("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Td{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static er(e,t){const s=JSON.parse(t);let c,m="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return m&&s.error&&(m="string"==typeof s.error.message&&"string"==typeof s.error.code,m&&(c=new Wt(s.error.code,s.error.message))),m?new Td(e,s.state,c):(ir("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static er(e,t){const s=JSON.parse(t);let c="object"==typeof s&&s.activeTargetIds instanceof Array,m=nc();for(let C=0;c&&C<s.activeTargetIds.length;++C)c=Fl(s.activeTargetIds[C]),m=m.add(s.activeTargetIds[C]);return c?new jf(e,m):(ir("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Rm{constructor(e,t){this.clientId=e,this.onlineState=t}static er(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Rm(t.clientId,t.onlineState):(ir("SharedClientState",`Failed to parse online state: ${e}`),null)}}class $c{constructor(){this.activeTargetIds=nc()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Hf{constructor(e,t,s,c,m){this.window=e,this.Ys=t,this.persistenceKey=s,this.rr=c,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new Es(mr),this.started=!1,this.hr=[];const C=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=m,this.lr=Yp(this.persistenceKey,this.rr),this.dr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.rr,new $c),this._r=new RegExp(`^firestore_clients_${C}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${C}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${C}_(\\d+)$`),this.gr=`firestore_online_state_${this.persistenceKey}`,this.yr=function(R){return`firestore_bundle_loaded_v2_${R}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,le.Z)(function*(){const t=yield e.syncEngine.Si();for(const c of t){if(c===e.rr)continue;const m=e.getItem(Yp(e.persistenceKey,c));if(m){const C=jf.er(c,m);C&&(e.ar=e.ar.insert(C.clientId,C))}}e.pr();const s=e.storage.getItem(e.gr);if(s){const c=e.Ir(s);c&&e.Tr(c)}for(const c of e.hr)e.cr(c);e.hr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((s,c)=>{c.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,t,s){this.Ar(e,t,s),this.Rr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(zh(this.persistenceKey,e));if(s){const c=Td.er(e,s);c&&(t=c.state)}}return this.br.sr(e),this.pr(),t}removeLocalQueryTarget(e){this.br.ir(e),this.pr()}isLocalQueryTarget(e){return this.br.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(zh(this.persistenceKey,e))}updateQueryState(e,t,s){this.vr(e,t,s)}handleUserChange(e,t,s){t.forEach(c=>{this.Rr(c)}),this.currentUser=e,s.forEach(c=>{this.addPendingMutation(c)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ft("SharedClientState","READ",e,t),t}setItem(e,t){Ft("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ft("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(Ft("SharedClientState","EVENT",s.key,s.newValue),s.key===this.lr)return void ir("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable((0,le.Z)(function*(){if(t.started){if(null!==s.key)if(t._r.test(s.key)){if(null==s.newValue){const c=t.Sr(s.key);return t.Dr(c,null)}{const c=t.Cr(s.key,s.newValue);if(c)return t.Dr(c.clientId,c)}}else if(t.wr.test(s.key)){if(null!==s.newValue){const c=t.Nr(s.key,s.newValue);if(c)return t.kr(c)}}else if(t.mr.test(s.key)){if(null!==s.newValue){const c=t.Or(s.key,s.newValue);if(c)return t.Mr(c)}}else if(s.key===t.gr){if(null!==s.newValue){const c=t.Ir(s.newValue);if(c)return t.Tr(c)}}else if(s.key===t.dr){const c=function(m){let C=no.at;if(null!=m)try{const R=JSON.parse(m);_n("number"==typeof R),C=R}catch(R){ir("SharedClientState","Failed to read sequence number from WebStorage",R)}return C}(s.newValue);c!==no.at&&t.sequenceNumberHandler(c)}else if(s.key===t.yr){const c=t.Fr(s.newValue);yield Promise.all(c.map(m=>t.syncEngine.$r(m)))}}else t.hr.push(s)}))}}get br(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.br.nr())}Ar(e,t,s){const c=new Zp(this.currentUser,e,t,s),m=qp(this.persistenceKey,this.currentUser,e);this.setItem(m,c.nr())}Rr(e){const t=qp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.gr,JSON.stringify({clientId:this.rr,onlineState:e}))}vr(e,t,s){const c=zh(this.persistenceKey,e),m=new Td(e,t,s);this.setItem(c,m.nr())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.yr,t)}Sr(e){const t=this._r.exec(e);return t?t[1]:null}Cr(e,t){const s=this.Sr(e);return jf.er(s,t)}Nr(e,t){const s=this.wr.exec(e),c=Number(s[1]);return Zp.er(new ye(void 0!==s[2]?s[2]:null),c,t)}Or(e,t){const s=this.mr.exec(e),c=Number(s[1]);return Td.er(c,t)}Ir(e){return Rm.er(e)}Fr(e){return JSON.parse(e)}kr(e){var t=this;return(0,le.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Br(e.batchId,e.state,e.error);Ft("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,t){const s=t?this.ar.insert(e,t):this.ar.remove(e),c=this.Er(this.ar),m=this.Er(s),C=[],R=[];return m.forEach(H=>{c.has(H)||C.push(H)}),c.forEach(H=>{m.has(H)||R.push(H)}),this.syncEngine.qr(C,R).then(()=>{this.ar=s})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let t=nc();return e.forEach((s,c)=>{t=t.unionWith(c.activeTargetIds)}),t}}class Om{constructor(){this.Ur=new $c,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,t,s){this.Kr[e]=t}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new $c,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Pm{Gr(e){}shutdown(){}}class Nm{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){Ft("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){Ft("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Mv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Gf{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}class nh extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.co=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,t,s,c,m){const C=this.fo(e,t);Ft("RestConnection","Sending: ",C,s);const R={};return this._o(R,c,m),this.wo(e,C,R,s).then(H=>(Ft("RestConnection","Received: ",H),H),H=>{throw ar("RestConnection",`${e} failed with error: `,H,"url: ",C,"request:",s),H})}mo(e,t,s,c,m,C){return this.lo(e,t,s,c,m)}_o(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+_t,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((c,m)=>e[m]=c),s&&s.headers.forEach((c,m)=>e[m]=c)}fo(e,t){return`${this.co}/v1/${t}:${Mv[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,t,s,c){return new Promise((m,C)=>{const R=new B;R.setWithCredentials(!0),R.listenOnce(ea.COMPLETE,()=>{try{switch(R.getLastErrorCode()){case ka.NO_ERROR:const Z=R.getResponseJson();Ft("Connection","XHR received:",JSON.stringify(Z)),m(Z);break;case ka.TIMEOUT:Ft("Connection",'RPC "'+e+'" timed out'),C(new Wt(It.DEADLINE_EXCEEDED,"Request time out"));break;case ka.HTTP_ERROR:const ue=R.getStatus();if(Ft("Connection",'RPC "'+e+'" failed with status:',ue,"response text:",R.getResponseText()),ue>0){let ze=R.getResponseJson();Array.isArray(ze)&&(ze=ze[0]);const wt=null==ze?void 0:ze.error;if(wt&&wt.status&&wt.message){const Kt=function(en){const Hn=en.toLowerCase().replace(/_/g,"-");return Object.values(It).indexOf(Hn)>=0?Hn:It.UNKNOWN}(wt.status);C(new Wt(Kt,wt.message))}else C(new Wt(It.UNKNOWN,"Server responded with status "+R.getStatus()))}else C(new Wt(It.UNAVAILABLE,"Connection failed."));break;default:zt()}}finally{Ft("Connection",'RPC "'+e+'" completed.')}});const H=JSON.stringify(c);R.send(t,"POST",H,s,15)})}yo(e,t,s){const c=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=da(),C=pl(),R={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(R.xmlHttpFactory=new N({})),this._o(R.initMessageHeaders,t,s),R.encodeInitMessageHeaders=!0;const H=c.join("");Ft("Connection","Creating WebChannel: "+H,R);const Z=m.createWebChannel(H,R);let ue=!1,ze=!1;const wt=new Gf({Yr:en=>{ze?Ft("Connection","Not sending because WebChannel is closed:",en):(ue||(Ft("Connection","Opening WebChannel transport."),Z.open(),ue=!0),Ft("Connection","WebChannel sending:",en),Z.send(en))},Zr:()=>Z.close()}),Kt=(en,Hn,cr)=>{en.listen(Hn,fs=>{try{cr(fs)}catch(ks){setTimeout(()=>{throw ks},0)}})};return Kt(Z,K.EventType.OPEN,()=>{ze||Ft("Connection","WebChannel transport opened.")}),Kt(Z,K.EventType.CLOSE,()=>{ze||(ze=!0,Ft("Connection","WebChannel transport closed"),wt.oo())}),Kt(Z,K.EventType.ERROR,en=>{ze||(ze=!0,ar("Connection","WebChannel transport errored:",en),wt.oo(new Wt(It.UNAVAILABLE,"The operation could not be completed")))}),Kt(Z,K.EventType.MESSAGE,en=>{var Hn;if(!ze){const cr=en.data[0];_n(!!cr);const ks=cr.error||(null===(Hn=cr[0])||void 0===Hn?void 0:Hn.error);if(ks){Ft("Connection","WebChannel received error:",ks);const Mi=ks.status;let ao=function(Hi){const qo=Cs[Hi];if(void 0!==qo)return Fu(qo)}(Mi),Vi=ks.message;void 0===ao&&(ao=It.INTERNAL,Vi="Unknown error status: "+Mi+" with message "+ks.message),ze=!0,wt.oo(new Wt(ao,Vi)),Z.close()}else Ft("Connection","WebChannel received:",cr),wt.uo(cr)}}),Kt(C,Fa.STAT_EVENT,en=>{en.stat===Pl.PROXY?Ft("Connection","Detected buffering proxy"):en.stat===Pl.NOPROXY&&Ft("Connection","Detected no buffering proxy")}),setTimeout(()=>{wt.ro()},0),wt}}function zf(){return typeof window<"u"?window:null}function Vc(){return typeof document<"u"?document:null}function Sd(i){return new xa(i,!0)}class rh{constructor(e,t,s=1e3,c=1.5,m=6e4){this.Ys=e,this.timerId=t,this.po=s,this.Io=c,this.To=m,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}bo(){this.Eo=this.To}vo(e){this.cancel();const t=Math.floor(this.Eo+this.Po()),s=Math.max(0,Date.now()-this.Ro),c=Math.max(0,t-s);c>0&&Ft("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.Eo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,c,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}Po(){return(Math.random()-.5)*this.Eo}}class Qp{constructor(e,t,s,c,m,C,R,H){this.Ys=e,this.So=s,this.Do=c,this.connection=m,this.authCredentialsProvider=C,this.appCheckCredentialsProvider=R,this.listener=H,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new rh(e,t)}Oo(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Fo()}stop(){var e=this;return(0,le.Z)(function*(){e.Oo()&&(yield e.close(0))})()}$o(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}Lo(){var e=this;return(0,le.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}close(e,t){var s=this;return(0,le.Z)(function*(){s.Uo(),s.Ko(),s.ko.cancel(),s.Co++,4!==e?s.ko.reset():t&&t.code===It.RESOURCE_EXHAUSTED?(ir(t.toString()),ir("Using maximum backoff delay to prevent overloading the backend."),s.ko.bo()):t&&t.code===It.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Go(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.no(t)})()}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),t=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,c])=>{this.Co===t&&this.jo(s,c)},s=>{e(()=>{const c=new Wt(It.UNKNOWN,"Fetching auth token failed: "+s.message);return this.zo(c)})})}jo(e,t){const s=this.Qo(this.Co);this.stream=this.Wo(e,t),this.stream.Xr(()=>{s(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(c=>{s(()=>this.zo(c))}),this.stream.onMessage(c=>{s(()=>this.onMessage(c))})}Fo(){var e=this;this.state=5,this.ko.vo((0,le.Z)(function*(){e.state=0,e.start()}))}zo(e){return Ft("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return t=>{this.Ys.enqueueAndForget(()=>this.Co===e?t():(Ft("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Xp extends Qp{constructor(e,t,s,c,m,C){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,c,C),this.Tt=m}Wo(e,t){return this.connection.yo("Listen",e,t)}onMessage(e){this.ko.reset();const t=function bn(i,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(H=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===H?1:"REMOVE"===H?2:"CURRENT"===H?3:"RESET"===H?4:zt(),c=e.targetChange.targetIds||[],m=function(H,Z){return H.yt?(_n(void 0===Z||"string"==typeof Z),_s.fromBase64String(Z||"")):(_n(void 0===Z||Z instanceof Uint8Array),_s.fromUint8Array(Z||new Uint8Array))}(i,e.targetChange.resumeToken),C=e.targetChange.cause,R=C&&function(H){const Z=void 0===H.code?It.UNKNOWN:Fu(H.code);return new Wt(Z,H.message||"")}(C);t=new rc(s,c,m,R||null)}else if("documentChange"in e){const s=e.documentChange,c=b(i,s.document.name),m=Ns(s.document.updateTime),C=s.document.createTime?Ns(s.document.createTime):qn.min(),R=new Ps({mapValue:{fields:s.document.fields}}),H=as.newFoundDocument(c,m,C,R);t=new xl(s.targetIds||[],s.removedTargetIds||[],H.key,H)}else if("documentDelete"in e){const s=e.documentDelete,c=b(i,s.document),m=s.readTime?Ns(s.readTime):qn.min(),C=as.newNoDocument(c,m);t=new xl([],s.removedTargetIds||[],C.key,C)}else if("documentRemove"in e){const s=e.documentRemove,c=b(i,s.document);t=new xl([],s.removedTargetIds||[],c,null)}else{if(!("filter"in e))return zt();{const s=e.filter,m=new Yd(s.count||0);t=new Lu(s.targetId,m)}}var H;return t}(this.Tt,e),s=function(c){if(!("targetChange"in c))return qn.min();const m=c.targetChange;return m.targetIds&&m.targetIds.length?qn.min():m.readTime?Ns(m.readTime):qn.min()}(e);return this.listener.Ho(t,s)}Jo(e){const t={};t.database=A(this.Tt),t.addTarget=function(c,m){let C;const R=m.target;return C=qu(R)?{documents:Ks(c,R)}:{query:Ma(c,R)},C.targetId=m.targetId,m.resumeToken.approximateByteSize()>0?C.resumeToken=yd(c,m.resumeToken):m.snapshotVersion.compareTo(qn.min())>0&&(C.readTime=Ml(c,m.snapshotVersion.toTimestamp())),C}(this.Tt,e);const s=function Ys(i,e){const t=function(s,c){switch(c){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return zt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.qo(t)}Yo(e){const t={};t.database=A(this.Tt),t.removeTarget=e,this.qo(t)}}class Jp extends Qp{constructor(e,t,s,c,m,C){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,c,C),this.Tt=m,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,t){return this.connection.yo("Write",e,t)}onMessage(e){if(_n(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const t=function yr(i,e){return i&&i.length>0?(_n(void 0!==e),i.map(t=>function(s,c){let m=Ns(s.updateTime?s.updateTime:c);return m.isEqual(qn.min())&&(m=Ns(c)),new ec(m,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Ns(e.commitTime);return this.listener.eu(s,t)}return _n(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=A(this.Tt),this.qo(e)}tu(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>$n(this.Tt,s))};this.qo(t)}}class eg extends class{}{constructor(e,t,s,c){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.Tt=c,this.iu=!1}ru(){if(this.iu)throw new Wt(It.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,t,s){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,m])=>this.connection.lo(e,t,s,c,m)).catch(c=>{throw"FirebaseError"===c.name?(c.code===It.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Wt(It.UNKNOWN,c.toString())})}mo(e,t,s,c){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([m,C])=>this.connection.mo(e,t,s,m,C,c)).catch(m=>{throw"FirebaseError"===m.name?(m.code===It.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new Wt(It.UNKNOWN,m.toString())})}terminate(){this.iu=!0}}class Rv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(ir(t),this.cu=!1):Ft("OnlineStateTracker",t)}du(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}class Ov{constructor(e,t,s,c,m){var C=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=m,this.yu.Gr(R=>{s.enqueueAndForget((0,le.Z)(function*(){var H;yu(C)&&(Ft("RemoteStore","Restarting streams for network reachability change."),yield(H=(0,le.Z)(function*(Z){const ue=dn(Z);ue.mu.add(4),yield Ad(ue),ue.pu.set("Unknown"),ue.mu.delete(4),yield ih(ue)}),function(Z){return H.apply(this,arguments)})(C))}))}),this.pu=new Rv(s,c)}}function ih(i){return tg.apply(this,arguments)}function tg(){return tg=(0,le.Z)(function*(i){if(yu(i))for(const e of i.gu)yield e(!0)}),tg.apply(this,arguments)}function Ad(i){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,le.Z)(function*(i){for(const e of i.gu)yield e(!1)}),Wf.apply(this,arguments)}function Kf(i,e){const t=dn(i);t.wu.has(e.targetId)||(t.wu.set(e.targetId,e),Fm(t)?rg(t):Uc(t).Mo()&&rl(t,e))}function Kh(i,e){const t=dn(i),s=Uc(t);t.wu.delete(e),s.Mo()&&ng(t,e),0===t.wu.size&&(s.Mo()?s.Bo():yu(t)&&t.pu.set("Unknown"))}function rl(i,e){i.Iu.Ft(e.targetId),Uc(i).Jo(e)}function ng(i,e){i.Iu.Ft(e),Uc(i).Yo(e)}function rg(i){i.Iu=new Wo({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>i.wu.get(e)||null}),Uc(i).start(),i.pu.au()}function Fm(i){return yu(i)&&!Uc(i).Oo()&&i.wu.size>0}function yu(i){return 0===dn(i).mu.size}function ig(i){i.Iu=void 0}function Pv(i){return sg.apply(this,arguments)}function sg(){return sg=(0,le.Z)(function*(i){i.wu.forEach((e,t)=>{rl(i,e)})}),sg.apply(this,arguments)}function Nv(i,e){return Yf.apply(this,arguments)}function Yf(){return Yf=(0,le.Z)(function*(i,e){ig(i),Fm(i)?(i.pu.fu(e),rg(i)):i.pu.set("Unknown")}),Yf.apply(this,arguments)}function kv(i,e,t){return og.apply(this,arguments)}function og(){return og=(0,le.Z)(function*(i,e,t){if(i.pu.set("Online"),e instanceof rc&&2===e.state&&e.cause)try{yield(s=(0,le.Z)(function*(c,m){const C=m.cause;for(const R of m.targetIds)c.wu.has(R)&&(yield c.remoteSyncer.rejectListen(R,C),c.wu.delete(R),c.Iu.removeTarget(R))}),function(c,m){return s.apply(this,arguments)})(i,e)}catch(s){Ft("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield sh(i,s)}else if(e instanceof xl?i.Iu.Qt(e):e instanceof Lu?i.Iu.Zt(e):i.Iu.Wt(e),!t.isEqual(qn.min()))try{const s=yield Tv(i.localStore);t.compareTo(s)>=0&&(yield function(c,m){const C=c.Iu.ee(m);return C.targetChanges.forEach((R,H)=>{if(R.resumeToken.approximateByteSize()>0){const Z=c.wu.get(H);Z&&c.wu.set(H,Z.withResumeToken(R.resumeToken,m))}}),C.targetMismatches.forEach(R=>{const H=c.wu.get(R);if(!H)return;c.wu.set(R,H.withResumeToken(_s.EMPTY_BYTE_STRING,H.snapshotVersion)),ng(c,R);const Z=new cu(H.target,R,1,H.sequenceNumber);rl(c,Z)}),c.remoteSyncer.applyRemoteEvent(C)}(i,t))}catch(s){Ft("RemoteStore","Failed to raise snapshot:",s),yield sh(i,s)}var s}),og.apply(this,arguments)}function sh(i,e,t){return ag.apply(this,arguments)}function ag(){return ag=(0,le.Z)(function*(i,e,t){if(!Xa(e))throw e;i.mu.add(1),yield Ad(i),i.pu.set("Offline"),t||(t=()=>Tv(i.localStore)),i.asyncQueue.enqueueRetryable((0,le.Z)(function*(){Ft("RemoteStore","Retrying IndexedDB access"),yield t(),i.mu.delete(1),yield ih(i)}))}),ag.apply(this,arguments)}function Lm(i,e){return e().catch(t=>sh(i,t,e))}function oh(i){return lg.apply(this,arguments)}function lg(){return lg=(0,le.Z)(function*(i){const e=dn(i),t=xd(e);let s=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;Fv(e);)try{const c=yield Av(e.localStore,s);if(null===c){0===e._u.length&&t.Bo();break}s=c.batchId,ju(e,c)}catch(c){yield sh(e,c)}qf(e)&&Bm(e)}),lg.apply(this,arguments)}function Fv(i){return yu(i)&&i._u.length<10}function ju(i,e){i._u.push(e);const t=xd(i);t.Mo()&&t.Xo&&t.tu(e.mutations)}function qf(i){return yu(i)&&!xd(i).Oo()&&i._u.length>0}function Bm(i){xd(i).start()}function Lv(i){return Zf.apply(this,arguments)}function Zf(){return Zf=(0,le.Z)(function*(i){xd(i).su()}),Zf.apply(this,arguments)}function Bv(i){return ug.apply(this,arguments)}function ug(){return ug=(0,le.Z)(function*(i){const e=xd(i);for(const t of i._u)e.tu(t.mutations)}),ug.apply(this,arguments)}function $v(i,e,t){return Yh.apply(this,arguments)}function Yh(){return Yh=(0,le.Z)(function*(i,e,t){const s=i._u.shift(),c=Nh.from(s,e,t);yield Lm(i,()=>i.remoteSyncer.applySuccessfulWrite(c)),yield oh(i)}),Yh.apply(this,arguments)}function Vv(i,e){return cg.apply(this,arguments)}function cg(){return cg=(0,le.Z)(function*(i,e){var t;e&&xd(i).Xo&&(yield(t=(0,le.Z)(function*(s,c){if(ou(m=c.code)&&m!==It.ABORTED){const C=s._u.shift();xd(s).$o(),yield Lm(s,()=>s.remoteSyncer.rejectFailedWrite(C.batchId,c)),yield oh(s)}var m}),function(s,c){return t.apply(this,arguments)})(i,e)),qf(i)&&Bm(i)}),cg.apply(this,arguments)}function qh(i,e){return Zh.apply(this,arguments)}function Zh(){return Zh=(0,le.Z)(function*(i,e){const t=dn(i);t.asyncQueue.verifyOperationInProgress(),Ft("RemoteStore","RemoteStore received new credentials");const s=yu(t);t.mu.add(3),yield Ad(t),s&&t.pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.mu.delete(3),yield ih(t)}),Zh.apply(this,arguments)}function ah(i,e){return $m.apply(this,arguments)}function $m(){return $m=(0,le.Z)(function*(i,e){const t=dn(i);e?(t.mu.delete(2),yield ih(t)):e||(t.mu.add(2),yield Ad(t),t.pu.set("Unknown"))}),$m.apply(this,arguments)}function Uc(i){return i.Tu||(i.Tu=function(e,t,s){const c=dn(e);return c.ru(),new Xp(t,c.connection,c.authCredentials,c.appCheckCredentials,c.Tt,s)}(i.datastore,i.asyncQueue,{Xr:Pv.bind(null,i),no:Nv.bind(null,i),Ho:kv.bind(null,i)}),i.gu.push(function(){var e=(0,le.Z)(function*(t){t?(i.Tu.$o(),Fm(i)?rg(i):i.pu.set("Unknown")):(yield i.Tu.stop(),ig(i))});return function(t){return e.apply(this,arguments)}}())),i.Tu}function xd(i){return i.Eu||(i.Eu=function(e,t,s){const c=dn(e);return c.ru(),new Jp(t,c.connection,c.authCredentials,c.appCheckCredentials,c.Tt,s)}(i.datastore,i.asyncQueue,{Xr:Lv.bind(null,i),no:Vv.bind(null,i),nu:Bv.bind(null,i),eu:$v.bind(null,i)}),i.gu.push(function(){var e=(0,le.Z)(function*(t){t?(i.Eu.$o(),yield oh(i)):(yield i.Eu.stop(),i._u.length>0&&(Ft("RemoteStore",`Stopping write stream with ${i._u.length} pending writes`),i._u=[]))});return function(t){return e.apply(this,arguments)}}())),i.Eu}class Qf{constructor(e,t,s,c,m){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=c,this.removalCallback=m,this.deferred=new Ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(C=>{})}static createAndSchedule(e,t,s,c,m){const C=Date.now()+s,R=new Qf(e,t,C,c,m);return R.start(s),R}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Wt(It.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Md(i,e){if(ir("AsyncQueue",`${e}: ${i}`),Xa(i))return new Wt(It.UNAVAILABLE,`${e}: ${i}`);throw i}class Rd{constructor(e){this.comparator=e?(t,s)=>e(t,s)||pn.comparator(t.key,s.key):(t,s)=>pn.comparator(t.key,s.key),this.keyedMap=go(),this.sortedSet=new Es(this.comparator)}static emptySet(e){return new Rd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Rd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const c=t.getNext().key,m=s.getNext().key;if(!c.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new Rd;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class dg{constructor(){this.Au=new Es(pn.comparator)}track(e){const t=e.doc.key,s=this.Au.get(t);s?0!==e.type&&3===s.type?this.Au=this.Au.insert(t,e):3===e.type&&1!==s.type?this.Au=this.Au.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Au=this.Au.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Au=this.Au.remove(t):1===e.type&&2===s.type?this.Au=this.Au.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):zt():this.Au=this.Au.insert(t,e)}Ru(){const e=[];return this.Au.inorderTraversal((t,s)=>{e.push(s)}),e}}class jc{constructor(e,t,s,c,m,C,R,H,Z){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=c,this.mutatedKeys=m,this.fromCache=C,this.syncStateChanged=R,this.excludesMetadataChanges=H,this.hasCachedResults=Z}static fromInitialDocuments(e,t,s,c,m){const C=[];return t.forEach(R=>{C.push({type:0,doc:R})}),new jc(e,t,Rd.emptySet(t),C,s,c,!0,!1,m)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let c=0;c<t.length;c++)if(t[c].type!==s[c].type||!t[c].doc.isEqual(s[c].doc))return!1;return!0}}class gc{constructor(){this.bu=void 0,this.listeners=[]}}class Xf{constructor(){this.queries=new ts(e=>Mh(e),xu),this.onlineState="Unknown",this.vu=new Set}}function lh(i,e){return Od.apply(this,arguments)}function Od(){return Od=(0,le.Z)(function*(i,e){const t=dn(i),s=e.query;let c=!1,m=t.queries.get(s);if(m||(c=!0,m=new gc),c)try{m.bu=yield t.onListen(s)}catch(C){const R=Md(C,`Initialization of query '${tl(e.query)}' failed`);return void e.onError(R)}t.queries.set(s,m),m.listeners.push(e),e.Pu(t.onlineState),m.bu&&e.Vu(m.bu)&&fg(t)}),Od.apply(this,arguments)}function hg(i,e){return Jf.apply(this,arguments)}function Jf(){return Jf=(0,le.Z)(function*(i,e){const t=dn(i),s=e.query;let c=!1;const m=t.queries.get(s);if(m){const C=m.listeners.indexOf(e);C>=0&&(m.listeners.splice(C,1),c=0===m.listeners.length)}if(c)return t.queries.delete(s),t.onUnlisten(s)}),Jf.apply(this,arguments)}function Vm(i,e){const t=dn(i);let s=!1;for(const c of e){const C=t.queries.get(c.query);if(C){for(const R of C.listeners)R.Vu(c)&&(s=!0);C.bu=c}}s&&fg(t)}function Uv(i,e,t){const s=dn(i),c=s.queries.get(e);if(c)for(const m of c.listeners)m.onError(t);s.queries.delete(e)}function fg(i){i.vu.forEach(e=>{e.next()})}class Pd{constructor(e,t,s){this.query=e,this.Su=t,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=s||{}}Vu(e){if(!this.options.includeMetadataChanges){const s=[];for(const c of e.docChanges)3!==c.type&&s.push(c);e=new jc(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Du?this.xu(e)&&(this.Su.next(e),t=!0):this.Nu(e,this.onlineState)&&(this.ku(e),t=!0),this.Cu=e,t}onError(e){this.Su.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),t=!0),t}Nu(e,t){return!e.fromCache||(!this.options.Ou||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}xu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ku(e){e=jc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}class jv{constructor(e,t){this.Mu=e,this.byteLength=t}Fu(){return"metadata"in this.Mu}}class Hv{constructor(e){this.Tt=e}Zi(e){return b(this.Tt,e)}Xi(e){return e.metadata.exists?ht(this.Tt,e.document,!1):as.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return Ns(e)}}class Gv{constructor(e,t,s){this.$u=e,this.localStore=t,this.Tt=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Um(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++t;const s=Ur.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Lu(e){const t=new Map,s=new Hv(this.Tt);for(const c of e)if(c.metadata.queries){const m=s.Zi(c.metadata.name);for(const C of c.metadata.queries){const R=(t.get(C)||Kr()).add(m);t.set(C,R)}}return t}complete(){var e=this;return(0,le.Z)(function*(){const t=yield function xv(i,e,t,s){return Wp.apply(this,arguments)}(e.localStore,new Hv(e.Tt),e.documents,e.$u.id),s=e.Lu(e.documents);for(const c of e.queries)yield Mm(e.localStore,c,s.get(c.name));return e.progress.taskState="Success",{progress:e.progress,qu:e.collectionGroups,Uu:t}})()}}function Um(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class jm{constructor(e){this.key=e}}class Hm{constructor(e){this.key=e}}class Gm{constructor(e,t){this.query=e,this.Ku=t,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=Kr(),this.mutatedKeys=Kr(),this.ju=ru(e),this.zu=new Rd(this.ju)}get Wu(){return this.Ku}Hu(e,t){const s=t?t.Ju:new dg,c=t?t.zu:this.zu;let m=t?t.mutatedKeys:this.mutatedKeys,C=c,R=!1;const H="F"===this.query.limitType&&c.size===this.query.limit?c.last():null,Z="L"===this.query.limitType&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal((ue,ze)=>{const wt=c.get(ue),Kt=Dl(this.query,ze)?ze:null,en=!!wt&&this.mutatedKeys.has(wt.key),Hn=!!Kt&&(Kt.hasLocalMutations||this.mutatedKeys.has(Kt.key)&&Kt.hasCommittedMutations);let cr=!1;wt&&Kt?wt.data.isEqual(Kt.data)?en!==Hn&&(s.track({type:3,doc:Kt}),cr=!0):this.Yu(wt,Kt)||(s.track({type:2,doc:Kt}),cr=!0,(H&&this.ju(Kt,H)>0||Z&&this.ju(Kt,Z)<0)&&(R=!0)):!wt&&Kt?(s.track({type:0,doc:Kt}),cr=!0):wt&&!Kt&&(s.track({type:1,doc:wt}),cr=!0,(H||Z)&&(R=!0)),cr&&(Kt?(C=C.add(Kt),m=Hn?m.add(ue):m.delete(ue)):(C=C.delete(ue),m=m.delete(ue)))}),null!==this.query.limit)for(;C.size>this.query.limit;){const ue="F"===this.query.limitType?C.last():C.first();C=C.delete(ue.key),m=m.delete(ue.key),s.track({type:1,doc:ue})}return{zu:C,Ju:s,Li:R,mutatedKeys:m}}Yu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const c=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const m=e.Ju.Ru();m.sort((Z,ue)=>function(ze,wt){const Kt=en=>{switch(en){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zt()}};return Kt(ze)-Kt(wt)}(Z.type,ue.type)||this.ju(Z.doc,ue.doc)),this.Zu(s);const C=t?this.Xu():[],R=0===this.Qu.size&&this.current?1:0,H=R!==this.Gu;return this.Gu=R,0!==m.length||H?{snapshot:new jc(this.query,e.zu,c,m,e.mutatedKeys,0===R,H,!1,!!s&&s.resumeToken.approximateByteSize()>0),tc:C}:{tc:C}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new dg,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(t=>this.Ku=this.Ku.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ku=this.Ku.delete(t)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=Kr(),this.zu.forEach(s=>{this.ec(s.key)&&(this.Qu=this.Qu.add(s.key))});const t=[];return e.forEach(s=>{this.Qu.has(s)||t.push(new Hm(s))}),this.Qu.forEach(s=>{e.has(s)||t.push(new jm(s))}),t}nc(e){this.Ku=e.Yi,this.Qu=Kr();const t=this.Hu(e.documents);return this.applyChanges(t,!0)}sc(){return jc.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}class zv{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Wv{constructor(e){this.key=e,this.ic=!1}}class zm{constructor(e,t,s,c,m,C){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=c,this.currentUser=m,this.maxConcurrentLimboResolutions=C,this.rc={},this.oc=new ts(R=>Mh(R),xu),this.uc=new Map,this.cc=new Set,this.ac=new Es(pn.comparator),this.hc=new Map,this.lc=new Lf,this.fc={},this.dc=new Map,this._c=fl.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return!0===this.wc}}function pg(i,e){return gg.apply(this,arguments)}function gg(){return gg=(0,le.Z)(function*(i,e){const t=Sg(i);let s,c;const m=t.oc.get(e);if(m)s=m.targetId,t.sharedClientState.addLocalQueryTarget(s),c=m.view.sc();else{const C=yield Dd(t.localStore,sa(e));t.isPrimaryClient&&Kf(t.remoteStore,C);const R=t.sharedClientState.addLocalQueryTarget(C.targetId);s=C.targetId,c=yield Qh(t,e,s,"current"===R,C.resumeToken)}return c}),gg.apply(this,arguments)}function Qh(i,e,t,s,c){return mg.apply(this,arguments)}function mg(){return mg=(0,le.Z)(function*(i,e,t,s,c){i.mc=(ze,wt,Kt)=>{return(en=(0,le.Z)(function*(Hn,cr,fs,ks){let Mi=cr.view.Hu(fs);Mi.Li&&(Mi=yield Gh(Hn.localStore,cr.query,!1).then(({documents:Hi})=>cr.view.Hu(Hi,Mi)));const ao=ks&&ks.targetChanges.get(cr.targetId),Vi=cr.view.applyChanges(Mi,Hn.isPrimaryClient,ao);return ya(Hn,cr.targetId,Vi.tc),Vi.snapshot}),function(Hn,cr,fs,ks){return en.apply(this,arguments)})(i,ze,wt,Kt);var en};const m=yield Gh(i.localStore,e,!0),C=new Gm(e,m.Yi),R=C.Hu(m.documents),H=jl.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==i.onlineState,c),Z=C.applyChanges(R,i.isPrimaryClient,H);ya(i,t,Z.tc);const ue=new zv(e,t,C);return i.oc.set(e,ue),i.uc.has(t)?i.uc.get(t).push(e):i.uc.set(t,[e]),Z.snapshot}),mg.apply(this,arguments)}function Kv(i,e){return yg.apply(this,arguments)}function yg(){return yg=(0,le.Z)(function*(i,e){const t=dn(i),s=t.oc.get(e),c=t.uc.get(s.targetId);if(c.length>1)return t.uc.set(s.targetId,c.filter(m=>!xu(m,e))),void t.oc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield pc(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),Kh(t.remoteStore,s.targetId),il(t,s.targetId)}).catch(wa))):(il(t,s.targetId),yield pc(t.localStore,s.targetId,!0))}),yg.apply(this,arguments)}function vg(){return vg=(0,le.Z)(function*(i,e,t){const s=ip(i);try{const c=yield function(m,C){const R=dn(m),H=Si.now(),Z=C.reduce((wt,Kt)=>wt.add(Kt.key),Kr());let ue,ze;return R.persistence.runTransaction("Locally write mutations","readwrite",wt=>{let Kt=bs(),en=Kr();return R.ji.getEntries(wt,Z).next(Hn=>{Kt=Hn,Kt.forEach((cr,fs)=>{fs.isValidDocument()||(en=en.add(cr))})}).next(()=>R.localDocuments.getOverlayedDocuments(wt,Kt)).next(Hn=>{ue=Hn;const cr=[];for(const fs of C){const ks=Sc(fs,ue.get(fs.key).overlayedDocument);null!=ks&&cr.push(new Ha(fs.key,ks,bc(ks.value.mapValue),Ki.exists(!0)))}return R.mutationQueue.addMutationBatch(wt,H,cr,C)}).next(Hn=>{ze=Hn;const cr=Hn.applyToLocalDocumentSet(ue,en);return R.documentOverlayCache.saveOverlays(wt,Hn.batchId,cr)})}).then(()=>({batchId:ze.batchId,changes:Ds(ue)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(c.batchId),function(m,C,R){let H=m.fc[m.currentUser.toKey()];H||(H=new Es(mr)),H=H.insert(C,R),m.fc[m.currentUser.toKey()]=H}(s,c.batchId,t),yield Yo(s,c.changes),yield oh(s.remoteStore)}catch(c){const m=Md(c,"Failed to persist write");t.reject(m)}}),vg.apply(this,arguments)}function Wm(i,e){return _g.apply(this,arguments)}function _g(){return _g=(0,le.Z)(function*(i,e){const t=dn(i);try{const s=yield function Sv(i,e){const t=dn(i),s=e.snapshotVersion;let c=t.Ki;return t.persistence.runTransaction("Apply remote event","readwrite-primary",m=>{const C=t.ji.newChangeBuffer({trackRemovals:!0});c=t.Ki;const R=[];e.targetChanges.forEach((ue,ze)=>{const wt=c.get(ze);if(!wt)return;R.push(t.Ns.removeMatchingKeys(m,ue.removedDocuments,ze).next(()=>t.Ns.addMatchingKeys(m,ue.addedDocuments,ze)));let Kt=wt.withSequenceNumber(m.currentSequenceNumber);var en,Hn,cr;e.targetMismatches.has(ze)?Kt=Kt.withResumeToken(_s.EMPTY_BYTE_STRING,qn.min()).withLastLimboFreeSnapshotVersion(qn.min()):ue.resumeToken.approximateByteSize()>0&&(Kt=Kt.withResumeToken(ue.resumeToken,s)),c=c.insert(ze,Kt),Hn=Kt,cr=ue,(0===(en=wt).resumeToken.approximateByteSize()||Hn.snapshotVersion.toMicroseconds()-en.snapshotVersion.toMicroseconds()>=3e8||cr.addedDocuments.size+cr.modifiedDocuments.size+cr.removedDocuments.size>0)&&R.push(t.Ns.updateTargetData(m,Kt))});let H=bs(),Z=Kr();if(e.documentUpdates.forEach(ue=>{e.resolvedLimboDocuments.has(ue)&&R.push(t.persistence.referenceDelegate.updateLimboDocument(m,ue))}),R.push(bd(m,C,e.documentUpdates).next(ue=>{H=ue.Hi,Z=ue.Ji})),!s.isEqual(qn.min())){const ue=t.Ns.getLastRemoteSnapshotVersion(m).next(ze=>t.Ns.setTargetsMetadata(m,m.currentSequenceNumber,s));R.push(ue)}return bt.waitFor(R).next(()=>C.apply(m)).next(()=>t.localDocuments.getLocalViewOfDocuments(m,H,Z)).next(()=>H)}).then(m=>(t.Ki=c,m))}(t.localStore,e);e.targetChanges.forEach((c,m)=>{const C=t.hc.get(m);C&&(_n(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?C.ic=!0:c.modifiedDocuments.size>0?_n(C.ic):c.removedDocuments.size>0&&(_n(C.ic),C.ic=!1))}),yield Yo(t,s,e)}catch(s){yield wa(s)}}),_g.apply(this,arguments)}function Eg(i,e,t){const s=dn(i);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const c=[];s.oc.forEach((m,C)=>{const R=C.view.Pu(e);R.snapshot&&c.push(R.snapshot)}),function(m,C){const R=dn(m);R.onlineState=C;let H=!1;R.queries.forEach((Z,ue)=>{for(const ze of ue.listeners)ze.Pu(C)&&(H=!0)}),H&&fg(R)}(s.eventManager,e),c.length&&s.rc.Ho(c),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function Km(i,e,t){return Ig.apply(this,arguments)}function Ig(){return Ig=(0,le.Z)(function*(i,e,t){const s=dn(i);s.sharedClientState.updateQueryState(e,"rejected",t);const c=s.hc.get(e),m=c&&c.key;if(m){let C=new Es(pn.comparator);C=C.insert(m,as.newNoDocument(m,qn.min()));const R=Kr().add(m),H=new oa(qn.min(),new Map,new ji(mr),C,R);yield Wm(s,H),s.ac=s.ac.remove(m),s.hc.delete(e),dh(s)}else yield pc(s.localStore,e,!1).then(()=>il(s,e,t)).catch(wa)}),Ig.apply(this,arguments)}function u0(i,e){return ep.apply(this,arguments)}function ep(){return ep=(0,le.Z)(function*(i,e){const t=dn(i),s=e.batch.batchId;try{const c=yield function Tm(i,e){const t=dn(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const c=e.batch.keys(),m=t.ji.newChangeBuffer({trackRemovals:!0});return function(C,R,H,Z){const ue=H.batch,ze=ue.keys();let wt=bt.resolve();return ze.forEach(Kt=>{wt=wt.next(()=>Z.getEntry(R,Kt)).next(en=>{const Hn=H.docVersions.get(Kt);_n(null!==Hn),en.version.compareTo(Hn)<0&&(ue.applyToRemoteDocument(en,H),en.isValidDocument()&&(en.setReadTime(H.commitVersion),Z.addEntry(en)))})}),wt.next(()=>C.mutationQueue.removeMutationBatch(R,ue))}(t,s,e,m).next(()=>m.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,c,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(C){let R=Kr();for(let H=0;H<C.mutationResults.length;++H)C.mutationResults[H].transformResults.length>0&&(R=R.add(C.batch.mutations[H].key));return R}(e))).next(()=>t.localDocuments.getDocuments(s,c))})}(t.localStore,e);Cg(t,s,null),Xh(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield Yo(t,c)}catch(c){yield wa(c)}}),ep.apply(this,arguments)}function c0(i,e,t){return uh.apply(this,arguments)}function uh(){return uh=(0,le.Z)(function*(i,e,t){const s=dn(i);try{const c=yield function(m,C){const R=dn(m);return R.persistence.runTransaction("Reject batch","readwrite-primary",H=>{let Z;return R.mutationQueue.lookupMutationBatch(H,C).next(ue=>(_n(null!==ue),Z=ue.keys(),R.mutationQueue.removeMutationBatch(H,ue))).next(()=>R.mutationQueue.performConsistencyCheck(H)).next(()=>R.documentOverlayCache.removeOverlaysForBatchId(H,Z,C)).next(()=>R.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(H,Z)).next(()=>R.localDocuments.getDocuments(H,Z))})}(s.localStore,e);Cg(s,e,t),Xh(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield Yo(s,c)}catch(c){yield wa(c)}}),uh.apply(this,arguments)}function wg(){return wg=(0,le.Z)(function*(i,e){const t=dn(i);yu(t.remoteStore)||Ft("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(m){const C=dn(m);return C.persistence.runTransaction("Get highest unacknowledged batch id","readonly",R=>C.mutationQueue.getHighestUnacknowledgedBatchId(R))}(t.localStore);if(-1===s)return void e.resolve();const c=t.dc.get(s)||[];c.push(e),t.dc.set(s,c)}catch(s){const c=Md(s,"Initialization of waitForPendingWrites() operation failed");e.reject(c)}}),wg.apply(this,arguments)}function Xh(i,e){(i.dc.get(e)||[]).forEach(t=>{t.resolve()}),i.dc.delete(e)}function Cg(i,e,t){const s=dn(i);let c=s.fc[s.currentUser.toKey()];if(c){const m=c.get(e);m&&(t?m.reject(t):m.resolve(),c=c.remove(e)),s.fc[s.currentUser.toKey()]=c}}function il(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.uc.get(e))i.oc.delete(s),t&&i.rc.gc(s,t);i.uc.delete(e),i.isPrimaryClient&&i.lc.ds(e).forEach(s=>{i.lc.containsKey(s)||ch(i,s)})}function ch(i,e){i.cc.delete(e.path.canonicalString());const t=i.ac.get(e);null!==t&&(Kh(i.remoteStore,t),i.ac=i.ac.remove(e),i.hc.delete(t),dh(i))}function ya(i,e,t){for(const s of t)s instanceof jm?(i.lc.addReference(s.key,e),Nd(i,s)):s instanceof Hm?(Ft("SyncEngine","Document no longer in limbo: "+s.key),i.lc.removeReference(s.key,e),i.lc.containsKey(s.key)||ch(i,s.key)):zt()}function Nd(i,e){const t=e.key,s=t.path.canonicalString();i.ac.get(t)||i.cc.has(s)||(Ft("SyncEngine","New document in limbo: "+t),i.cc.add(s),dh(i))}function dh(i){for(;i.cc.size>0&&i.ac.size<i.maxConcurrentLimboResolutions;){const e=i.cc.values().next().value;i.cc.delete(e);const t=new pn(Ur.fromString(e)),s=i._c.next();i.hc.set(s,new Wv(t)),i.ac=i.ac.insert(t,s),Kf(i.remoteStore,new cu(sa(Bl(t.path)),s,2,no.at))}}function Yo(i,e,t){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,le.Z)(function*(i,e,t){const s=dn(i),c=[],m=[],C=[];var R;s.oc.isEmpty()||(s.oc.forEach((R,H)=>{C.push(s.mc(H,e,t).then(Z=>{if((Z||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(H.targetId,null!=Z&&Z.fromCache?"not-current":"current"),Z){c.push(Z);const ue=Hh.Ni(H.targetId,Z);m.push(ue)}}))}),yield Promise.all(C),s.rc.Ho(c),yield(R=(0,le.Z)(function*(H,Z){const ue=dn(H);try{yield ue.persistence.runTransaction("notifyLocalViewChanges","readwrite",ze=>bt.forEach(Z,wt=>bt.forEach(wt.Ci,Kt=>ue.persistence.referenceDelegate.addReference(ze,wt.targetId,Kt)).next(()=>bt.forEach(wt.xi,Kt=>ue.persistence.referenceDelegate.removeReference(ze,wt.targetId,Kt)))))}catch(ze){if(!Xa(ze))throw ze;Ft("LocalStore","Failed to update sequence numbers: "+ze)}for(const ze of Z){const wt=ze.targetId;if(!ze.fromCache){const Kt=ue.Ki.get(wt),Hn=Kt.withLastLimboFreeSnapshotVersion(Kt.snapshotVersion);ue.Ki=ue.Ki.insert(wt,Hn)}}}),function(H,Z){return R.apply(this,arguments)})(s.localStore,m))}),Jh.apply(this,arguments)}function hh(i,e){return Hc.apply(this,arguments)}function Hc(){return Hc=(0,le.Z)(function*(i,e){const t=dn(i);if(!t.currentUser.isEqual(e)){Ft("SyncEngine","User change. New user:",e.toKey());const s=yield Dv(t.localStore,e);t.currentUser=e,(c=t).dc.forEach(C=>{C.forEach(R=>{R.reject(new Wt(It.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.dc.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Yo(t,s.Wi)}var c}),Hc.apply(this,arguments)}function fh(i,e){const t=dn(i),s=t.hc.get(e);if(s&&s.ic)return Kr().add(s.key);{let c=Kr();const m=t.uc.get(e);if(!m)return c;for(const C of m){const R=t.oc.get(C);c=c.unionWith(R.view.Wu)}return c}}function ph(i,e){return Gc.apply(this,arguments)}function Gc(){return Gc=(0,le.Z)(function*(i,e){const t=dn(i),s=yield Gh(t.localStore,e.query,!0),c=e.view.nc(s);return t.isPrimaryClient&&ya(t,e.targetId,c.tc),c}),Gc.apply(this,arguments)}function gh(i,e){return zc.apply(this,arguments)}function zc(){return zc=(0,le.Z)(function*(i,e){const t=dn(i);return Am(t.localStore,e).then(s=>Yo(t,s))}),zc.apply(this,arguments)}function mh(i,e,t,s){return Wc.apply(this,arguments)}function Wc(){return Wc=(0,le.Z)(function*(i,e,t,s){const c=dn(i),m=yield function(C,R){const H=dn(C),Z=dn(H.mutationQueue);return H.persistence.runTransaction("Lookup mutation documents","readonly",ue=>Z.An(ue,R).next(ze=>ze?H.localDocuments.getDocuments(ue,ze):bt.resolve(null)))}(c.localStore,e);var R;null!==m?("pending"===t?yield oh(c.remoteStore):"acknowledged"===t||"rejected"===t?(Cg(c,e,s||null),Xh(c,e),R=e,dn(dn(c.localStore).mutationQueue).bn(R)):zt(),yield Yo(c,m)):Ft("SyncEngine","Cannot apply mutation batch with id: "+e)}),Wc.apply(this,arguments)}function tp(){return tp=(0,le.Z)(function*(i,e){const t=dn(i);if(Sg(t),ip(t),!0===e&&!0!==t.wc){const s=t.sharedClientState.getAllActiveQueryTargets(),c=yield bg(t,s.toArray());t.wc=!0,yield ah(t.remoteStore,!0);for(const m of c)Kf(t.remoteStore,m)}else if(!1===e&&!1!==t.wc){const s=[];let c=Promise.resolve();t.uc.forEach((m,C)=>{t.sharedClientState.isLocalQueryTarget(C)?s.push(C):c=c.then(()=>(il(t,C),pc(t.localStore,C,!0))),Kh(t.remoteStore,C)}),yield c,yield bg(t,s),function(m){const C=dn(m);C.hc.forEach((R,H)=>{Kh(C.remoteStore,H)}),C.lc._s(),C.hc=new Map,C.ac=new Es(pn.comparator)}(t),t.wc=!1,yield ah(t.remoteStore,!1)}}),tp.apply(this,arguments)}function bg(i,e,t){return np.apply(this,arguments)}function np(){return np=(0,le.Z)(function*(i,e,t){const s=dn(i),c=[],m=[];for(const C of e){let R;const H=s.uc.get(C);if(H&&0!==H.length){R=yield Dd(s.localStore,sa(H[0]));for(const Z of H){const ue=s.oc.get(Z),ze=yield ph(s,ue);ze.snapshot&&m.push(ze.snapshot)}}else{const Z=yield Sm(s.localStore,C);R=yield Dd(s.localStore,Z),yield Qh(s,Dg(Z),C,!1,R.resumeToken)}c.push(R)}return s.rc.Ho(m),c}),np.apply(this,arguments)}function Dg(i){return Oo(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function qm(i){const e=dn(i);return dn(dn(e.localStore).persistence).Si()}function Zm(i,e,t,s){return rp.apply(this,arguments)}function rp(){return rp=(0,le.Z)(function*(i,e,t,s){const c=dn(i);if(c.wc)return void Ft("SyncEngine","Ignoring unexpected query state notification.");const m=c.uc.get(e);if(m&&m.length>0)switch(t){case"current":case"not-current":{const C=yield Am(c.localStore,ad(m[0])),R=oa.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,_s.EMPTY_BYTE_STRING);yield Yo(c,C,R);break}case"rejected":yield pc(c.localStore,e,!0),il(c,e,s);break;default:zt()}}),rp.apply(this,arguments)}function Qm(i,e,t){return Tg.apply(this,arguments)}function Tg(){return Tg=(0,le.Z)(function*(i,e,t){const s=Sg(i);if(s.wc){for(const c of e){if(s.uc.has(c)){Ft("SyncEngine","Adding an already active target "+c);continue}const m=yield Sm(s.localStore,c),C=yield Dd(s.localStore,m);yield Qh(s,Dg(m),C.targetId,!1,C.resumeToken),Kf(s.remoteStore,C)}for(const c of t)s.uc.has(c)&&(yield pc(s.localStore,c,!1).then(()=>{Kh(s.remoteStore,c),il(s,c)}).catch(wa))}}),Tg.apply(this,arguments)}function Sg(i){const e=dn(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Wm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fh.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Km.bind(null,e),e.rc.Ho=Vm.bind(null,e.eventManager),e.rc.gc=Uv.bind(null,e.eventManager),e}function ip(i){const e=dn(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=u0.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=c0.bind(null,e),e}class Xm{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,le.Z)(function*(){t.Tt=Sd(e.databaseInfo.databaseId),t.sharedClientState=t.Ic(e),t.persistence=t.Tc(e),yield t.persistence.start(),t.localStore=t.Ec(e),t.gcScheduler=t.Ac(e,t.localStore),t.indexBackfillerScheduler=t.Rc(e,t.localStore)})()}Ac(e,t){return null}Rc(e,t){return null}Ec(e){return bv(this.persistence,new Dm,e.initialUser,this.Tt)}Tc(e){return new Cm(Bf.qs,this.Tt)}Ic(e){return new Om}terminate(){var e=this;return(0,le.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class sp extends Xm{constructor(e,t,s){super(),this.bc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,le.Z)(function*(){yield t().call(s,e),yield s.bc.initialize(s,e),yield ip(s.bc.syncEngine),yield oh(s.bc.remoteStore),yield s.persistence.di(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ec(e){return bv(this.persistence,new Dm,e.initialUser,this.Tt)}Ac(e,t){return new fm(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Rc(e,t){const s=new ba(t,this.persistence);return new Du(e.asyncQueue,s)}Tc(e){const t=jh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?kt.withCacheSize(this.cacheSizeBytes):kt.DEFAULT;return new Vf(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,zf(),Vc(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new Om}}class Ag extends sp{constructor(e,t){super(e,t,!1),this.bc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,le.Z)(function*(){yield t().call(s,e);const c=s.bc.syncEngine;s.sharedClientState instanceof Hf&&(s.sharedClientState.syncEngine={Br:mh.bind(null,c),Lr:Zm.bind(null,c),qr:Qm.bind(null,c),Si:qm.bind(null,c),$r:gh.bind(null,c)},yield s.sharedClientState.start()),yield s.persistence.di(function(){var m=(0,le.Z)(function*(C){yield function Ym(i,e){return tp.apply(this,arguments)}(s.bc.syncEngine,C),s.gcScheduler&&(C&&!s.gcScheduler.started?s.gcScheduler.start():C||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(C&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():C||s.indexBackfillerScheduler.stop())});return function(C){return m.apply(this,arguments)}}())})()}Ic(e){const t=zf();if(!Hf.C(t))throw new Wt(It.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=jh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Hf(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class xg{initialize(e,t){var s=this;return(0,le.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=c=>Eg(s.syncEngine,c,1),s.remoteStore.remoteSyncer.handleCredentialChange=hh.bind(null,s.syncEngine),yield ah(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Xf}createDatastore(e){const t=Sd(e.databaseInfo.databaseId),s=new nh(e.databaseInfo);return new eg(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,c=e.asyncQueue,m=R=>Eg(this.syncEngine,R,0),C=Nm.C()?new Nm:new Pm,new Ov(t,s,c,m,C);var t,s,c,m,C}createSyncEngine(e,t){return function(s,c,m,C,R,H,Z){const ue=new zm(s,c,m,C,R,H);return Z&&(ue.wc=!0),ue}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,le.Z)(function*(t){const s=dn(t);Ft("RemoteStore","RemoteStore shutting down."),s.mu.add(5),yield Ad(s),s.yu.shutdown(),s.pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function ef(i,e=10240){let t=0;return{read:()=>(0,le.Z)(function*(){if(t<i.byteLength){const s={value:i.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,le.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class kd{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):ir("Uncaught Error in snapshot listener:",e.toString())}Pc(){this.muted=!0}vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Mg{constructor(e,t){this.Vc=e,this.Tt=t,this.metadata=new Ii,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(s=>{s&&s.Fu()?this.metadata.resolve(s.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.Mu)}`))},s=>this.metadata.reject(s))}close(){return this.Vc.cancel()}getMetadata(){var e=this;return(0,le.Z)(function*(){return e.metadata.promise})()}yc(){var e=this;return(0,le.Z)(function*(){return yield e.getMetadata(),e.Dc()})()}Dc(){var e=this;return(0,le.Z)(function*(){const t=yield e.Cc();if(null===t)return null;const s=e.Sc.decode(t),c=Number(s);isNaN(c)&&e.xc(`length string (${s}) is not valid number`);const m=yield e.Nc(c);return new jv(JSON.parse(m),t.length+c)})()}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Cc(){var e=this;return(0,le.Z)(function*(){for(;e.kc()<0&&!(yield e.Oc()););if(0===e.buffer.length)return null;const t=e.kc();t<0&&e.xc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}Nc(e){var t=this;return(0,le.Z)(function*(){for(;t.buffer.length<e;)(yield t.Oc())&&t.xc("Reached the end of bundle when more is expected.");const s=t.Sc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}Oc(){var e=this;return(0,le.Z)(function*(){const t=yield e.Vc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class Qv{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,le.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Wt(It.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(c=(0,le.Z)(function*(m,C){const R=dn(m),H=A(R.Tt)+"/documents",Z={documents:C.map(Kt=>sc(R.Tt,Kt))},ue=yield R.mo("BatchGetDocuments",H,Z,C.length),ze=new Map;ue.forEach(Kt=>{const en=function jt(i,e){return"found"in e?function(t,s){_n(!!s.found);const c=b(t,s.found.name),m=Ns(s.found.updateTime),C=s.found.createTime?Ns(s.found.createTime):qn.min(),R=new Ps({mapValue:{fields:s.found.fields}});return as.newFoundDocument(c,m,C,R)}(i,e):"missing"in e?function(t,s){_n(!!s.missing),_n(!!s.readTime);const c=b(t,s.missing),m=Ns(s.readTime);return as.newNoDocument(c,m)}(i,e):zt()}(R.Tt,Kt);ze.set(en.key.toString(),en)});const wt=[];return C.forEach(Kt=>{const en=ze.get(Kt.toString());_n(!!en),wt.push(en)}),wt}),function(m,C){return c.apply(this,arguments)})(t.datastore,e);var c;return s.forEach(c=>t.recordVersion(c)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new hl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,le.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,c)=>{const m=pn.fromPath(c);e.mutations.push(new Ac(m,e.precondition(m)))}),yield(s=(0,le.Z)(function*(c,m){const C=dn(c),R=A(C.Tt)+"/documents",H={writes:m.map(Z=>$n(C.Tt,Z))};yield C.lo("Commit",R,H)}),function(c,m){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw zt();t=qn.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new Wt(It.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(qn.min())?Ki.exists(!1):Ki.updateTime(t):Ki.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(qn.min()))throw new Wt(It.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ki.updateTime(t)}return Ki.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Rg{constructor(e,t,s,c,m){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=c,this.deferred=m,this.Mc=s.maxAttempts,this.ko=new rh(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Fc()}Fc(){var e=this;this.ko.vo((0,le.Z)(function*(){const t=new Qv(e.datastore),s=e.$c(t);s&&s.then(c=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(c)}).catch(m=>{e.Bc(m)}))}).catch(c=>{e.Bc(c)})}))}$c(e){try{const t=this.updateFunction(e);return!Ro(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Fc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!ou(t)}return!1}}class Og{constructor(e,t,s,c){var m=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=c,this.user=ye.UNAUTHENTICATED,this.clientId=ul.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var C=(0,le.Z)(function*(R){Ft("FirestoreClient","Received user=",R.uid),yield m.authCredentialListener(R),m.user=R});return function(R){return C.apply(this,arguments)}}()),this.appCheckCredentials.start(s,C=>(Ft("FirestoreClient","Received new app check token=",C),this.appCheckCredentialListener(C,this.user)))}getConfiguration(){var e=this;return(0,le.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Wt(It.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,le.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const c=Md(s,"Failed to shutdown persistence");t.reject(c)}})),t.promise}}function op(i,e){return ap.apply(this,arguments)}function ap(){return ap=(0,le.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Ft("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(function(){var c=(0,le.Z)(function*(m){s.isEqual(m)||(yield Dv(e.localStore,m),s=m)});return function(m){return c.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),ap.apply(this,arguments)}function lp(i,e){return up.apply(this,arguments)}function up(){return up=(0,le.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield cp(i);Ft("FirestoreClient","Initializing OnlineComponentProvider");const s=yield i.getConfiguration();yield e.initialize(t,s),i.setCredentialChangeListener(c=>qh(e.remoteStore,c)),i.setAppCheckTokenChangeListener((c,m)=>qh(e.remoteStore,m)),i.onlineComponents=e}),up.apply(this,arguments)}function cp(i){return tf.apply(this,arguments)}function tf(){return tf=(0,le.Z)(function*(i){return i.offlineComponents||(Ft("FirestoreClient","Using default OfflineComponentProvider"),yield op(i,new Xm)),i.offlineComponents}),tf.apply(this,arguments)}function nf(i){return Pg.apply(this,arguments)}function Pg(){return Pg=(0,le.Z)(function*(i){return i.onlineComponents||(Ft("FirestoreClient","Using default OnlineComponentProvider"),yield lp(i,new xg)),i.onlineComponents}),Pg.apply(this,arguments)}function Ng(i){return cp(i).then(e=>e.persistence)}function rf(i){return cp(i).then(e=>e.localStore)}function dp(i){return nf(i).then(e=>e.remoteStore)}function hp(i){return nf(i).then(e=>e.syncEngine)}function Fd(i){return fp.apply(this,arguments)}function fp(){return fp=(0,le.Z)(function*(i){const e=yield nf(i),t=e.eventManager;return t.onListen=pg.bind(null,e.syncEngine),t.onUnlisten=Kv.bind(null,e.syncEngine),t}),fp.apply(this,arguments)}function Fg(i,e,t={}){const s=new Ii;return i.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function(c,m,C,R,H){const Z=new kd({next:ze=>{m.enqueueAndForget(()=>hg(c,ue));const wt=ze.docs.has(C);!wt&&ze.fromCache?H.reject(new Wt(It.UNAVAILABLE,"Failed to get document because the client is offline.")):wt&&ze.fromCache&&R&&"server"===R.source?H.reject(new Wt(It.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):H.resolve(ze)},error:ze=>H.reject(ze)}),ue=new Pd(Bl(C.path),Z,{includeMetadataChanges:!0,Ou:!0});return lh(c,ue)}(yield Fd(i),i.asyncQueue,e,t,s)})),s.promise}function Lg(i,e,t={}){const s=new Ii;return i.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function(c,m,C,R,H){const Z=new kd({next:ze=>{m.enqueueAndForget(()=>hg(c,ue)),ze.fromCache&&"server"===R.source?H.reject(new Wt(It.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):H.resolve(ze)},error:ze=>H.reject(ze)}),ue=new Pd(C,Z,{includeMetadataChanges:!0,Ou:!0});return lh(c,ue)}(yield Fd(i),i.asyncQueue,e,t,s)})),s.promise}const Bg=new Map;function yh(i,e,t){if(!t)throw new Wt(It.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function mc(i,e,t,s){if(!0===e&&!0===s)throw new Wt(It.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function oy(i){if(!pn.isDocumentKey(i))throw new Wt(It.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function ay(i){if(pn.isDocumentKey(i))throw new Wt(It.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function vh(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":zt()}function oi(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Wt(It.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vh(i);throw new Wt(It.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function pp(i,e){if(e<=0)throw new Wt(It.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class ly{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Wt(It.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Wt(It.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,mc("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ld{constructor(e,t,s,c){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ly({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Wt(It.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Wt(It.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ly(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Uo;switch(t.type){case"gapi":return new Za(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Wt(It.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Bg.get(e);t&&(Ft("ComponentProvider","Removing Datastore"),Bg.delete(e),t.terminate())}(this),Promise.resolve()}}class qs{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qs(this.firestore,e,this._key)}}class Oa{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Oa(this.firestore,e,this._query)}}class Hu extends Oa{constructor(e,t,s){super(e,t,Bl(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qs(this.firestore,null,new pn(e))}withConverter(e){return new Hu(this.firestore,e,this._path)}}function $g(i,e,...t){if(i=(0,Qe.m9)(i),yh("collection","path",e),i instanceof Ld){const s=Ur.fromString(e,...t);return ay(s),new Hu(i,null,s)}{if(!(i instanceof qs||i instanceof Hu))throw new Wt(It.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Ur.fromString(e,...t));return ay(s),new Hu(i.firestore,null,s)}}function _o(i,e,...t){if(i=(0,Qe.m9)(i),1===arguments.length&&(e=ul.R()),yh("doc","path",e),i instanceof Ld){const s=Ur.fromString(e,...t);return oy(s),new qs(i,null,new pn(s))}{if(!(i instanceof qs||i instanceof Hu))throw new Wt(It.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Ur.fromString(e,...t));return oy(s),new qs(i.firestore,i instanceof Hu?i.converter:null,new pn(s))}}function Vg(i,e){return i=(0,Qe.m9)(i),e=(0,Qe.m9)(e),(i instanceof qs||i instanceof Hu)&&(e instanceof qs||e instanceof Hu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Ug(i,e){return i=(0,Qe.m9)(i),e=(0,Qe.m9)(e),i instanceof Oa&&e instanceof Oa&&i.firestore===e.firestore&&xu(i._query,e._query)&&i.converter===e.converter}class e_{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new rh(this,"async_queue_retry"),this.Hc=()=>{const t=Vc();t&&Ft("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ko.Vo()};const e=Vc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const t=Vc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const t=new Ii;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}Zc(){var e=this;return(0,le.Z)(function*(){if(0!==e.Uc.length){try{yield e.Uc[0](),e.Uc.shift(),e.ko.reset()}catch(t){if(!Xa(t))throw t;Ft("AsyncQueue","Operation failed with retryable error: "+t)}e.Uc.length>0&&e.ko.vo(()=>e.Zc())}})()}Yc(e){const t=this.qc.then(()=>(this.jc=!0,e().catch(s=>{throw this.Qc=s,this.jc=!1,ir("INTERNAL UNHANDLED ERROR: ",function(m){let C=m.message||"";return m.stack&&(C=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),C}(s)),s}).then(s=>(this.jc=!1,s))));return this.qc=t,t}enqueueAfterDelay(e,t,s){this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);const c=Qf.createAndSchedule(this,e,t,s,m=>this.Xc(m));return this.Gc.push(c),c}Jc(){this.Qc&&zt()}verifyOperationInProgress(){}ta(){var e=this;return(0,le.Z)(function*(){let t;do{t=e.qc,yield t}while(t!==e.qc)})()}ea(e){for(const t of this.Gc)if(t.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Gc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}function gp(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const c of["next","error","complete"])if(c in s&&"function"==typeof s[c])return!0;return!1}(i)}class t_{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ii,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ts extends Ld{constructor(e,t,s,c){super(e,t,s,c),this.type="firestore",this._queue=new e_,this._persistenceKey=(null==c?void 0:c.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||jg(this),this._firestoreClient.terminate()}}function ko(i){return i._firestoreClient||jg(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function jg(i){var e;const t=i._freezeSettings(),s=(m=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new ra(i._databaseId,m,i._persistenceKey,(R=t).host,R.ssl,R.experimentalForceLongPolling,R.experimentalAutoDetectLongPolling,R.useFetchStreams));var m,R;i._firestoreClient=new Og(i._authCredentials,i._appCheckCredentials,i._queue,s)}function r_(i,e,t){const s=new Ii;return i.asyncQueue.enqueue((0,le.Z)(function*(){try{yield op(i,t),yield lp(i,e),s.resolve()}catch(c){const m=c;if(!("FirebaseError"===(C=m).name?C.code===It.FAILED_PRECONDITION||C.code===It.UNIMPLEMENTED:!(typeof DOMException<"u"&&C instanceof DOMException)||22===C.code||20===C.code||11===C.code))throw m;ar("Error enabling offline persistence. Falling back to persistence disabled: "+m),s.reject(m)}var C})).then(()=>s.promise)}function Wl(i){if(i._initialized||i._terminated)throw new Wt(It.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Wu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wu(_s.fromBase64String(e))}catch(t){throw new Wt(It.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wu(_s.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class yc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Wt(It.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ai(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Bd{constructor(e){this._methodName=e}}class Eh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Wt(It.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Wt(It.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return mr(this._lat,e._lat)||mr(this._long,e._long)}}const af=/^__.*__$/;class s_{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Ha(e,this.data,this.fieldMask,t,this.fieldTransforms):new ma(e,this.data,t,this.fieldTransforms)}}class Gg{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ha(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fy(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zt()}}class lf{constructor(e,t,s,c,m,C){this.settings=e,this.databaseId=t,this.Tt=s,this.ignoreUndefinedProperties=c,void 0===m&&this.ia(),this.fieldTransforms=m||[],this.fieldMask=C||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new lf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.oa({path:s,ca:!1});return c.aa(e),c}ha(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.oa({path:s,ca:!1});return c.ia(),c}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return Ip(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(fy(this.ra)&&af.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class py{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.Tt=s||Sd(e)}wa(e,t,s,c=!1){return new lf({ra:e,methodName:t,_a:s,path:ai.emptyPath(),ca:!1,da:c},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function Ku(i){const e=i._freezeSettings(),t=Sd(i._databaseId);return new py(i._databaseId,!!e.ignoreUndefinedProperties,t)}function mp(i,e,t,s,c,m={}){const C=i.wa(m.merge||m.mergeFields?2:0,e,t,c);Zg("Data must be an object, but it was:",C,s);const R=Yg(s,C);let H,Z;if(m.merge)H=new os(C.fieldMask),Z=C.fieldTransforms;else if(m.mergeFields){const ue=[];for(const ze of m.mergeFields){const wt=cf(e,ze,t);if(!C.contains(wt))throw new Wt(It.INVALID_ARGUMENT,`Field '${wt}' is specified in your field mask but missing from your input data.`);my(ue,wt)||ue.push(wt)}H=new os(ue),Z=C.fieldTransforms.filter(ze=>H.covers(ze.field))}else H=null,Z=C.fieldTransforms;return new s_(new Ps(R),H,Z)}class Ih extends Bd{_toFieldTransform(e){if(2!==e.ra)throw e.fa(1===e.ra?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ih}}function zg(i,e,t){return new lf({ra:3,_a:e.settings._a,methodName:i._methodName,ca:t},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class uf extends Bd{_toFieldTransform(e){return new ja(e.path,new Ua)}isEqual(e){return e instanceof uf}}class yp extends Bd{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=zg(this,e,!0),s=this.ma.map(m=>Kc(m,t)),c=new Sl(s);return new ja(e.path,c)}isEqual(e){return this===e}}class Wg extends Bd{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=zg(this,e,!0),s=this.ma.map(m=>Kc(m,t)),c=new iu(s);return new ja(e.path,c)}isEqual(e){return this===e}}class gy extends Bd{constructor(e,t){super(e),this.ga=t}_toFieldTransform(e){const t=new Vl(e.Tt,Wd(e.Tt,this.ga));return new ja(e.path,t)}isEqual(e){return this===e}}function vp(i,e,t,s){const c=i.wa(1,e,t);Zg("Data must be an object, but it was:",c,s);const m=[],C=Ps.empty();po(s,(H,Z)=>{const ue=Ep(e,H,t);Z=(0,Qe.m9)(Z);const ze=c.ha(ue);if(Z instanceof Ih)m.push(ue);else{const wt=Kc(Z,ze);null!=wt&&(m.push(ue),C.set(ue,wt))}});const R=new os(m);return new Gg(C,R,c.fieldTransforms)}function _p(i,e,t,s,c,m){const C=i.wa(1,e,t),R=[cf(e,s,t)],H=[c];if(m.length%2!=0)throw new Wt(It.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let wt=0;wt<m.length;wt+=2)R.push(cf(e,m[wt])),H.push(m[wt+1]);const Z=[],ue=Ps.empty();for(let wt=R.length-1;wt>=0;--wt)if(!my(Z,R[wt])){const Kt=R[wt];let en=H[wt];en=(0,Qe.m9)(en);const Hn=C.ha(Kt);if(en instanceof Ih)Z.push(Kt);else{const cr=Kc(en,Hn);null!=cr&&(Z.push(Kt),ue.set(Kt,cr))}}const ze=new os(Z);return new Gg(ue,ze,C.fieldTransforms)}function Kg(i,e,t,s=!1){return Kc(t,i.wa(s?4:3,e))}function Kc(i,e){if(qg(i=(0,Qe.m9)(i)))return Zg("Unsupported field value:",e,i),Yg(i,e);if(i instanceof Bd)return function(t,s){if(!fy(s.ra))throw s.fa(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.fa(`${t._methodName}() is not currently supported inside arrays`);const c=t._toFieldTransform(s);c&&s.fieldTransforms.push(c)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.ca&&4!==e.ra)throw e.fa("Nested arrays are not supported");return function(t,s){const c=[];let m=0;for(const C of t){let R=Kc(C,s.la(m));null==R&&(R={nullValue:"NULL_VALUE"}),c.push(R),m++}return{arrayValue:{values:c}}}(i,e)}return function(t,s){if(null===(t=(0,Qe.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Wd(s.Tt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const c=Si.fromDate(t);return{timestampValue:Ml(s.Tt,c)}}if(t instanceof Si){const c=new Si(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ml(s.Tt,c)}}if(t instanceof Eh)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Wu)return{bytesValue:yd(s.Tt,t._byteString)};if(t instanceof qs){const c=s.databaseId,m=t.firestore._databaseId;if(!m.isEqual(c))throw s.fa(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Rc(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.fa(`Unsupported field value: ${vh(t)}`)}(i,e)}function Yg(i,e){const t={};return Ba(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):po(i,(s,c)=>{const m=Kc(c,e.ua(s));null!=m&&(t[s]=m)}),{mapValue:{fields:t}}}function qg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Si||i instanceof Eh||i instanceof Wu||i instanceof qs||i instanceof Bd)}function Zg(i,e,t){if(!qg(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=vh(t);throw e.fa("an object"===s?i+" a custom object":i+" "+s)}var s}function cf(i,e,t){if((e=(0,Qe.m9)(e))instanceof yc)return e._internalPath;if("string"==typeof e)return Ep(i,e);throw Ip("Field path arguments must be of type string or ",i,!1,void 0,t)}const o_=new RegExp("[~\\*/\\[\\]]");function Ep(i,e,t){if(e.search(o_)>=0)throw Ip(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new yc(...e.split("."))._internalPath}catch(s){throw Ip(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Ip(i,e,t,s,c){const m=s&&!s.isEmpty(),C=void 0!==c;let R=`Function ${e}() called with invalid data`;t&&(R+=" (via `toFirestore()`)"),R+=". ";let H="";return(m||C)&&(H+=" (found",m&&(H+=` in field ${s}`),C&&(H+=` in document ${c}`),H+=")"),new Wt(It.INVALID_ARGUMENT,R+i+H)}function my(i,e){return i.some(t=>t.isEqual(e))}class df{constructor(e,t,s,c,m){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=c,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new qs(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new a_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(wp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class a_ extends df{data(){return super.data()}}function wp(i,e){return"string"==typeof e?Ep(i,e):e instanceof yc?e._internalPath:e._delegate._internalPath}function yy(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Wt(It.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qg{}class hf extends Qg{}function Yc(i,e,...t){let s=[];e instanceof Qg&&s.push(e),s=s.concat(t),function(c){const m=c.filter(R=>R instanceof wh).length,C=c.filter(R=>R instanceof ff).length;if(m>1||m>0&&C>0)throw new Wt(It.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const c of s)i=c._apply(i);return i}class ff extends hf{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new ff(e,t,s)}_apply(e){const t=this._parse(e);return $d(e._query,t),new Oa(e.firestore,e.converter,Qu(e._query,t))}_parse(e){const t=Ku(e.firestore);return function(c,m,C,R,H,Z,ue){let ze;if(H.isKeyField()){if("array-contains"===Z||"array-contains-any"===Z)throw new Wt(It.INVALID_ARGUMENT,`Invalid Query. You can't perform '${Z}' queries on documentId().`);if("in"===Z||"not-in"===Z){Ty(ue,Z);const wt=[];for(const Kt of ue)wt.push(Dy(R,c,Kt));ze={arrayValue:{values:wt}}}else ze=Dy(R,c,ue)}else"in"!==Z&&"not-in"!==Z&&"array-contains-any"!==Z||Ty(ue,Z),ze=Kg(C,"where",ue,"in"===Z||"not-in"===Z);return Yr.create(H,Z,ze)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class wh extends Qg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new wh(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:ci.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,c){let m=s;const C=c.getFlattenedFilters();for(const R of C)$d(m,R),m=Qu(m,R)}(e._query,t),new Oa(e.firestore,e.converter,Qu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Cp extends hf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Cp(e,t)}_apply(e){const t=function(s,c,m){if(null!==s.startAt)throw new Wt(It.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Wt(It.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const C=new Ll(c,m);return function(R,H){if(null===ws(R)){const Z=Cl(R);null!==Z&&u_(0,Z,H.field)}}(s,C),C}(e._query,this._field,this._direction);return new Oa(e.firestore,e.converter,function(s,c){const m=s.explicitOrderBy.concat([c]);return new Is(s.path,s.collectionGroup,m,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class pf extends hf{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new pf(e,t,s)}_apply(e){return new Oa(e.firestore,e.converter,Xu(e._query,this._limit,this._limitType))}}class gf extends hf{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new gf(e,t,s)}_apply(e){const t=qc(e,this.type,this._docOrFields,this._inclusive);return new Oa(e.firestore,e.converter,(c=t,new Is((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,c,s.endAt)));var s,c}}class mf extends hf{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new mf(e,t,s)}_apply(e){const t=qc(e,this.type,this._docOrFields,this._inclusive);return new Oa(e.firestore,e.converter,(c=t,new Is((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,c)));var s,c}}function qc(i,e,t,s){if(t[0]=(0,Qe.m9)(t[0]),t[0]instanceof df)return function(c,m,C,R,H){if(!R)throw new Wt(It.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${C}().`);const Z=[];for(const ue of bl(c))if(ue.field.isKeyField())Z.push(wn(m,R.key));else{const ze=R.data.field(ue.field);if($a(ze))throw new Wt(It.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ue.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ze){const wt=ue.field.canonicalString();throw new Wt(It.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${wt}' (used as the orderBy) does not exist.`)}Z.push(ze)}return new lr(Z,H)}(i._query,i.firestore._databaseId,e,t[0]._document,s);{const c=Ku(i.firestore);return function(m,C,R,H,Z,ue){const ze=m.explicitOrderBy;if(Z.length>ze.length)throw new Wt(It.INVALID_ARGUMENT,`Too many arguments provided to ${H}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const wt=[];for(let Kt=0;Kt<Z.length;Kt++){const en=Z[Kt];if(ze[Kt].field.isKeyField()){if("string"!=typeof en)throw new Wt(It.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${H}(), but got a ${typeof en}`);if(!zo(m)&&-1!==en.indexOf("/"))throw new Wt(It.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${H}() must be a plain document ID, but '${en}' contains a slash.`);const Hn=m.path.child(Ur.fromString(en));if(!pn.isDocumentKey(Hn))throw new Wt(It.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${H}() must result in a valid document path, but '${Hn}' is not because it contains an odd number of segments.`);const cr=new pn(Hn);wt.push(wn(C,cr))}else{const Hn=Kg(R,H,en);wt.push(Hn)}}return new lr(wt,ue)}(i._query,i.firestore._databaseId,c,e,t,s)}}function Dy(i,e,t){if("string"==typeof(t=(0,Qe.m9)(t))){if(""===t)throw new Wt(It.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zo(e)&&-1!==t.indexOf("/"))throw new Wt(It.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Ur.fromString(t));if(!pn.isDocumentKey(s))throw new Wt(It.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return wn(i,new pn(s))}if(t instanceof qs)return wn(i,t._key);throw new Wt(It.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vh(t)}.`)}function Ty(i,e){if(!Array.isArray(i)||0===i.length)throw new Wt(It.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $d(i,e){if(e.isInequality()){const s=Cl(i),c=e.field;if(null!==s&&!s.isEqual(c))throw new Wt(It.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${c.toString()}'`);const m=ws(i);null!==m&&u_(0,c,m)}const t=function(s,c){for(const m of s)for(const C of m.getFlattenedFilters())if(c.indexOf(C.op)>=0)return C.op;return null}(i.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Wt(It.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function u_(i,e,t){if(!t.isEqual(e))throw new Wt(It.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Sy{convertValue(e,t="none"){switch(V(e)){case 0:return null;case 1:return e.booleanValue;case 2:return li(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ia(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw zt()}}convertObject(e,t){const s={};return po(e.fields,(c,m)=>{s[c]=this.convertValue(m,t)}),s}convertGeoPoint(e){return new Eh(li(e.latitude),li(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=T(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(x(e));default:return null}}convertTimestamp(e){const t=Ws(e);return new Si(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ur.fromString(e);_n(kc(s));const c=new Ta(s.get(1),s.get(3)),m=new pn(s.popFirst(5));return c.isEqual(t)||ir(`Document ${m} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),m}}function yf(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class Ay extends Sy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qs(this.firestore,null,t)}}class Kl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vc extends df{constructor(e,t,s,c,m,C){super(e,t,s,c,C),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Zc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(wp("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Zc extends vc{data(e={}){return super.data(e)}}class _u{constructor(e,t,s,c){this._firestore=e,this._userDataWriter=t,this._snapshot=c,this.metadata=new Kl(c.hasPendingWrites,c.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Zc(this._firestore,this._userDataWriter,s.key,s,new Kl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Wt(It.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,c){if(s._snapshot.oldDocs.isEmpty()){let m=0;return s._snapshot.docChanges.map(C=>({type:"added",doc:new Zc(s._firestore,s._userDataWriter,C.doc.key,C.doc,new Kl(s._snapshot.mutatedKeys.has(C.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:m++}))}{let m=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(C=>c||3!==C.type).map(C=>{const R=new Zc(s._firestore,s._userDataWriter,C.doc.key,C.doc,new Kl(s._snapshot.mutatedKeys.has(C.doc.key),s._snapshot.fromCache),s.query.converter);let H=-1,Z=-1;return 0!==C.type&&(H=m.indexOf(C.doc.key),m=m.delete(C.doc.key)),1!==C.type&&(m=m.add(C.doc),Z=m.indexOf(C.doc.key)),{type:Eo(C.type),doc:R,oldIndex:H,newIndex:Z}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Eo(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zt()}}function d_(i,e){return i instanceof vc&&e instanceof vc?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof _u&&e instanceof _u&&i._firestore===e._firestore&&Ug(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class _c extends Sy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qs(this.firestore,null,t)}}function Ny(i,e,t){i=oi(i,qs);const s=oi(i.firestore,Ts),c=yf(i.converter,e,t);return Ch(s,[mp(Ku(s),"setDoc",i._key,c,null!==i.converter,t).toMutation(i._key,Ki.none())])}function ky(i,e,t,...s){i=oi(i,qs);const c=oi(i.firestore,Ts),m=Ku(c);let C;return C="string"==typeof(e=(0,Qe.m9)(e))||e instanceof yc?_p(m,"updateDoc",i._key,e,t,s):vp(m,"updateDoc",i._key,e),Ch(c,[C.toMutation(i._key,Ki.exists(!0))])}function Fy(i,...e){var t,s,c;i=(0,Qe.m9)(i);let m={includeMetadataChanges:!1},C=0;"object"!=typeof e[C]||gp(e[C])||(m=e[C],C++);const R={includeMetadataChanges:m.includeMetadataChanges};if(gp(e[C])){const ze=e[C];e[C]=null===(t=ze.next)||void 0===t?void 0:t.bind(ze),e[C+1]=null===(s=ze.error)||void 0===s?void 0:s.bind(ze),e[C+2]=null===(c=ze.complete)||void 0===c?void 0:c.bind(ze)}let H,Z,ue;if(i instanceof qs)Z=oi(i.firestore,Ts),ue=Bl(i._key.path),H={next:ze=>{e[C]&&e[C](bh(Z,i,ze))},error:e[C+1],complete:e[C+2]};else{const ze=oi(i,Oa);Z=oi(ze.firestore,Ts),ue=ze._query;const wt=new _c(Z);H={next:Kt=>{e[C]&&e[C](new _u(Z,wt,ze,Kt))},error:e[C+1],complete:e[C+2]},yy(i._query)}return function(ze,wt,Kt,en){const Hn=new kd(en),cr=new Pd(wt,Hn,Kt);return ze.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return lh(yield Fd(ze),cr)})),()=>{Hn.Pc(),ze.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return hg(yield Fd(ze),cr)}))}}(ko(Z),ue,R,H)}function Ch(i,e){return function(t,s){const c=new Ii;return t.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function Yv(i,e,t){return vg.apply(this,arguments)}(yield hp(t),s,c)})),c.promise}(ko(i),e)}function bh(i,e,t){const s=t.docs.get(e._key),c=new _c(i);return new vc(i,c,e._key,s,new Kl(t.hasPendingWrites,t.fromCache),e.converter)}const By={maxAttempts:5};class $y{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ku(e)}set(e,t,s){this._verifyNotCommitted();const c=Yl(e,this._firestore),m=yf(c.converter,t,s),C=mp(this._dataReader,"WriteBatch.set",c._key,m,null!==c.converter,s);return this._mutations.push(C.toMutation(c._key,Ki.none())),this}update(e,t,s,...c){this._verifyNotCommitted();const m=Yl(e,this._firestore);let C;return C="string"==typeof(t=(0,Qe.m9)(t))||t instanceof yc?_p(this._dataReader,"WriteBatch.update",m._key,t,s,c):vp(this._dataReader,"WriteBatch.update",m._key,t),this._mutations.push(C.toMutation(m._key,Ki.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Yl(e,this._firestore);return this._mutations=this._mutations.concat(new hl(t._key,Ki.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Wt(It.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Yl(i,e){if((i=(0,Qe.m9)(i)).firestore!==e)throw new Wt(It.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class _f extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ku(e)}get(e){const t=Yl(e,this._firestore),s=new Ay(this._firestore);return this._transaction.lookup([t._key]).then(c=>{if(!c||1!==c.length)return zt();const m=c[0];if(m.isFoundDocument())return new df(this._firestore,s,m.key,m,t.converter);if(m.isNoDocument())return new df(this._firestore,s,t._key,null,t.converter);throw zt()})}set(e,t,s){const c=Yl(e,this._firestore),m=yf(c.converter,t,s),C=mp(this._dataReader,"Transaction.set",c._key,m,null!==c.converter,s);return this._transaction.set(c._key,C),this}update(e,t,s,...c){const m=Yl(e,this._firestore);let C;return C="string"==typeof(t=(0,Qe.m9)(t))||t instanceof yc?_p(this._dataReader,"Transaction.update",m._key,t,s,c):vp(this._dataReader,"Transaction.update",m._key,t),this._transaction.update(m._key,C),this}delete(e){const t=Yl(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Yl(e,this._firestore),s=new _c(this._firestore);return super.get(e).then(c=>new vc(this._firestore,s,t._key,c._document,new Kl(!1,!1),t.converter))}}!function(i,e=!0){_t=at.SDK_VERSION,(0,at._registerComponent)(new st.wA("firestore",(t,{instanceIdentifier:s,options:c})=>{const m=t.getProvider("app").getImmediate(),C=new Ts(new Zl(t.getProvider("auth-internal")),new gl(t.getProvider("app-check-internal")),function(R,H){if(!Object.prototype.hasOwnProperty.apply(R.options,["projectId"]))throw new Wt(It.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ta(R.options.projectId,H)}(m,s),m);return c=Object.assign({useFetchStreams:e},c),C._setSettings(c),C},"PUBLIC").setMultipleInstances(!0)),(0,at.registerVersion)(re,"3.8.4",i),(0,at.registerVersion)(re,"3.8.4","esm2017")}();function Gy(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Wt("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function I_(){if(typeof Uint8Array>"u")throw new Wt("unimplemented","Uint8Arrays are not available in this environment.")}function w_(){if(!function Ho(){return typeof atob<"u"}())throw new Wt("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Dh{constructor(e){this._delegate=e}static fromBase64String(e){return w_(),new Dh(Wu.fromBase64String(e))}static fromUint8Array(e){return I_(),new Dh(Wu.fromUint8Array(e))}toBase64(){return w_(),this._delegate.toBase64()}toUint8Array(){return I_(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Th(i){return function C_(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(i,["next","error","complete"])}class b_{enableIndexedDbPersistence(e,t){return function n_(i,e){Wl(i=oi(i,Ts));const t=ko(i),s=i._freezeSettings(),c=new xg;return r_(t,c,new sp(c,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function cy(i){Wl(i=oi(i,Ts));const e=ko(i),t=i._freezeSettings(),s=new xg;return r_(e,s,new Ag(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function dy(i){if(i._initialized&&!i._terminated)throw new Wt(It.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ii;return i._queue.enqueueAndForgetEvenWhileRestricted((0,le.Z)(function*(){try{yield(t=(0,le.Z)(function*(s){if(!Ms.C())return Promise.resolve();const c=s+"main";yield Ms.delete(c)}),function(s){return t.apply(this,arguments)})(jh(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Xg{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ta||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ar("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function Xv(i,e,t,s={}){var c;const m=(i=oi(i,Ld))._getSettings();if("firestore.googleapis.com"!==m.host&&m.host!==e&&ar("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},m),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let C,R;if("string"==typeof s.mockUserToken)C=s.mockUserToken,R=ye.MOCK_USER;else{C=(0,Qe.Sg)(s.mockUserToken,null===(c=i._app)||void 0===c?void 0:c.options.projectId);const H=s.mockUserToken.sub||s.mockUserToken.user_id;if(!H)throw new Wt(It.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");R=new ye(H)}i._authCredentials=new qa(new Vo(C,R))}}(this._delegate,e,t,s)}enableNetwork(){return function Gu(i){return function ey(i){return i.asyncQueue.enqueue((0,le.Z)(function*(){const e=yield Ng(i),t=yield dp(i);return e.setNetworkEnabled(!0),function(s){const c=dn(s);return c.mu.delete(0),ih(c)}(t)}))}(ko(i=oi(i,Ts)))}(this._delegate)}disableNetwork(){return function i_(i){return function kg(i){return i.asyncQueue.enqueue((0,le.Z)(function*(){const e=yield Ng(i),t=yield dp(i);return e.setNetworkEnabled(!1),(s=(0,le.Z)(function*(c){const m=dn(c);m.mu.add(0),yield Ad(m),m.pu.set("Offline")}),function(c){return s.apply(this,arguments)})(t);var s}))}(ko(i=oi(i,Ts)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,mc("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Hg(i){return function(e){const t=new Ii;return e.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function qv(i,e){return wg.apply(this,arguments)}(yield hp(e),t)})),t.promise}(ko(i=oi(i,Ts)))}(this._delegate)}onSnapshotsInSync(e){return function p_(i,e){return function ry(i,e){const t=new kd(e);return i.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return s=yield Fd(i),c=t,dn(s).vu.add(c),void c.next();var s,c})),()=>{t.Pc(),i.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return s=yield Fd(i),c=t,void dn(s).vu.delete(c);var s,c}))}}(ko(i=oi(i,Ts)),gp(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Wt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ud(this,$g(this._delegate,e))}catch(t){throw sl(t,"collection()","Firestore.collection()")}}doc(e){try{return new Eu(this,_o(this._delegate,e))}catch(t){throw sl(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ol(this,function Jv(i,e){if(i=oi(i,Ld),yh("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Wt(It.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Oa(i,null,(t=e,new Is(Ur.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw sl(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function m_(i,e,t){i=oi(i,Ts);const s=Object.assign(Object.assign({},By),t);return function(c){if(c.maxAttempts<1)throw new Wt(It.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(c,m,C){const R=new Ii;return c.asyncQueue.enqueueAndForget((0,le.Z)(function*(){const H=yield function Jm(i){return nf(i).then(e=>e.datastore)}(c);new Rg(c.asyncQueue,H,C,m,R).run()})),R.promise}(ko(i),c=>e(new _f(i,c)),s)}(this._delegate,t=>e(new zy(this,t)))}batch(){return ko(this._delegate),new Wy(new $y(this._delegate,e=>Ch(this._delegate,e)))}loadBundle(e){return function zu(i,e){const t=ko(i=oi(i,Ts)),s=new t_;return function iy(i,e,t,s){const c=function(m,C){let R;return R="string"==typeof m?(new TextEncoder).encode(m):m,H=function(H,Z){if(H instanceof Uint8Array)return ef(H,Z);if(H instanceof ArrayBuffer)return ef(new Uint8Array(H),Z);if(H instanceof ReadableStream)return H.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(R),new Mg(H,C);var H}(t,Sd(e));i.asyncQueue.enqueueAndForget((0,le.Z)(function*(){!function Zv(i,e,t){const s=dn(i);var c;(c=(0,le.Z)(function*(m,C,R){try{const H=yield C.getMetadata();if(yield function(wt,Kt){const en=dn(wt),Hn=Ns(Kt.createTime);return en.persistence.runTransaction("hasNewerBundle","readonly",cr=>en.Os.getBundleMetadata(cr,Kt.id)).then(cr=>!!cr&&cr.createTime.compareTo(Hn)>=0)}(m.localStore,H))return yield C.close(),R._completeWith({taskState:"Success",documentsLoaded:(wt=H).totalDocuments,bytesLoaded:wt.totalBytes,totalDocuments:wt.totalDocuments,totalBytes:wt.totalBytes}),Promise.resolve(new Set);R._updateProgress(Um(H));const Z=new Gv(H,m.localStore,C.Tt);let ue=yield C.yc();for(;ue;){const wt=yield Z.Bu(ue);wt&&R._updateProgress(wt),ue=yield C.yc()}const ze=yield Z.complete();return yield Yo(m,ze.Uu,void 0),yield function(wt,Kt){const en=dn(wt);return en.persistence.runTransaction("Save bundle","readwrite",Hn=>en.Os.saveBundleMetadata(Hn,Kt))}(m.localStore,H),R._completeWith(ze.progress),Promise.resolve(ze.qu)}catch(H){return ar("SyncEngine",`Loading bundle failed with ${H}`),R._failWith(H),Promise.resolve(new Set)}var wt}),function(m,C,R){return c.apply(this,arguments)})(s,e,t).then(c=>{s.sharedClientState.notifyBundleLoaded(c)})}(yield hp(i),c,s)}))}(t,i._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function vu(i,e){return function sy(i,e){return i.asyncQueue.enqueue((0,le.Z)(function*(){return function(t,s){const c=dn(t);return c.persistence.runTransaction("Get named query","readonly",m=>c.Os.getNamedQuery(m,s))}(yield rf(i),e)}))}(ko(i=oi(i,Ts)),e).then(t=>t?new Oa(i,null,t.query):null)}(this._delegate,e).then(t=>t?new ol(this,t):null)}}class Qc extends Sy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dh(new Wu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Eu.forKey(t,this.firestore,null)}}class zy{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Qc(e)}get(e){const t=jd(e);return this._delegate.get(t).then(s=>new Ef(this._firestore,new vc(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const c=jd(e);return s?(Gy("Transaction.set",s),this._delegate.set(c,t,s)):this._delegate.set(c,t),this}update(e,t,s,...c){const m=jd(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,s,...c),this}delete(e){const t=jd(e);return this._delegate.delete(t),this}}class Wy{constructor(e){this._delegate=e}set(e,t,s){const c=jd(e);return s?(Gy("WriteBatch.set",s),this._delegate.set(c,t,s)):this._delegate.set(c,t),this}update(e,t,s,...c){const m=jd(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,s,...c),this}delete(e){const t=jd(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Vd{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new Zc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ec(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=Vd.INSTANCES;let c=s.get(e);c||(c=new WeakMap,s.set(e,c));let m=c.get(t);return m||(m=new Vd(e,new Qc(e),t),c.set(t,m)),m}}Vd.INSTANCES=new WeakMap;class Eu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Qc(e)}static forPath(e,t,s){if(e.length%2!=0)throw new Wt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Eu(t,new qs(t._delegate,s,new pn(e)))}static forKey(e,t,s){return new Eu(t,new qs(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Ud(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ud(this.firestore,$g(this._delegate,e))}catch(t){throw sl(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Qe.m9)(e))instanceof qs&&Vg(this._delegate,e)}set(e,t){t=Gy("DocumentReference.set",t);try{return t?Ny(this._delegate,e,t):Ny(this._delegate,e)}catch(s){throw sl(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?ky(this._delegate,e):ky(this._delegate,e,t,...s)}catch(c){throw sl(c,"updateDoc()","DocumentReference.update()")}}delete(){return function f_(i){return Ch(oi(i.firestore,Ts),[new hl(i._key,Ki.none())])}(this._delegate)}onSnapshot(...e){const t=Jg(e),s=Ky(e,c=>new Ef(this.firestore,new vc(this.firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,this._delegate.converter)));return Fy(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function h_(i){i=oi(i,qs);const e=oi(i.firestore,Ts),t=ko(e),s=new _c(e);return function ty(i,e){const t=new Ii;return i.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return(s=(0,le.Z)(function*(c,m,C){try{const R=yield function(H,Z){const ue=dn(H);return ue.persistence.runTransaction("read document","readonly",ze=>ue.localDocuments.getDocument(ze,Z))}(c,m);R.isFoundDocument()?C.resolve(R):R.isNoDocument()?C.resolve(null):C.reject(new Wt(It.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(R){const H=Md(R,`Failed to get document '${m} from cache`);C.reject(H)}}),function(c,m,C){return s.apply(this,arguments)})(yield rf(i),e,t);var s})),t.promise}(t,i._key).then(c=>new vc(e,s,i._key,c,new Kl(null!==c&&c.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function My(i){i=oi(i,qs);const e=oi(i.firestore,Ts);return Fg(ko(e),i._key,{source:"server"}).then(t=>bh(e,i,t))}(this._delegate):function xy(i){i=oi(i,qs);const e=oi(i.firestore,Ts);return Fg(ko(e),i._key).then(t=>bh(e,i,t))}(this._delegate),t.then(s=>new Ef(this.firestore,new vc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new Eu(this.firestore,this._delegate.withConverter(e?Vd.getInstance(this.firestore,e):null))}}function sl(i,e,t){return i.message=i.message.replace(e,t),i}function Jg(i){for(const e of i)if("object"==typeof e&&!Th(e))return e;return{}}function Ky(i,e){var t,s;let c;return c=Th(i[0])?i[0]:Th(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:m=>{c.next&&c.next(e(m))},error:null===(t=c.error)||void 0===t?void 0:t.bind(c),complete:null===(s=c.complete)||void 0===s?void 0:s.bind(c)}}class Ef{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Eu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return d_(this._delegate,e._delegate)}}class Ec extends Ef{data(e){const t=this._delegate.data(e);return function hs(i,e){i||zt()}(void 0!==t),t}}class ol{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Qc(e)}where(e,t,s){try{return new ol(this.firestore,Yc(this._delegate,function l_(i,e,t){const s=e,c=wp("where",i);return ff._create(c,s,t)}(e,t,s)))}catch(c){throw sl(c,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ol(this.firestore,Yc(this._delegate,function vy(i,e="asc"){const t=e,s=wp("orderBy",i);return Cp._create(s,t)}(e,t)))}catch(s){throw sl(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ol(this.firestore,Yc(this._delegate,function _y(i){return pp("limit",i),pf._create("limit",i,"F")}(e)))}catch(t){throw sl(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ol(this.firestore,Yc(this._delegate,function Ey(i){return pp("limitToLast",i),pf._create("limitToLast",i,"L")}(e)))}catch(t){throw sl(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ol(this.firestore,Yc(this._delegate,function Iy(...i){return gf._create("startAt",i,!0)}(...e)))}catch(t){throw sl(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ol(this.firestore,Yc(this._delegate,function wy(...i){return gf._create("startAfter",i,!1)}(...e)))}catch(t){throw sl(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ol(this.firestore,Yc(this._delegate,function Cy(...i){return mf._create("endBefore",i,!1)}(...e)))}catch(t){throw sl(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ol(this.firestore,Yc(this._delegate,function by(...i){return mf._create("endAt",i,!0)}(...e)))}catch(t){throw sl(t,"endAt()","Query.endAt()")}}isEqual(e){return Ug(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Oy(i){i=oi(i,Oa);const e=oi(i.firestore,Ts),t=ko(e),s=new _c(e);return function ny(i,e){const t=new Ii;return i.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return(s=(0,le.Z)(function*(c,m,C){try{const R=yield Gh(c,m,!0),H=new Gm(m,R.Yi),Z=H.Hu(R.documents),ue=H.applyChanges(Z,!1);C.resolve(ue.snapshot)}catch(R){const H=Md(R,`Failed to execute query '${m} against cache`);C.reject(H)}}),function(c,m,C){return s.apply(this,arguments)})(yield rf(i),e,t);var s})),t.promise}(t,i._query).then(c=>new _u(e,s,i,c))}(this._delegate):"server"===(null==e?void 0:e.source)?function Py(i){i=oi(i,Oa);const e=oi(i.firestore,Ts),t=ko(e),s=new _c(e);return Lg(t,i._query,{source:"server"}).then(c=>new _u(e,s,i,c))}(this._delegate):function Ry(i){i=oi(i,Oa);const e=oi(i.firestore,Ts),t=ko(e),s=new _c(e);return yy(i._query),Lg(t,i._query).then(c=>new _u(e,s,i,c))}(this._delegate),t.then(s=>new em(this.firestore,new _u(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=Jg(e),s=Ky(e,c=>new em(this.firestore,new _u(this.firestore._delegate,this._userDataWriter,this._delegate,c._snapshot)));return Fy(this._delegate,t,s)}withConverter(e){return new ol(this.firestore,this._delegate.withConverter(e?Vd.getInstance(this.firestore,e):null))}}class Yy{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ec(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class em{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ol(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ec(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Yy(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new Ec(this._firestore,s))})}isEqual(e){return d_(this._delegate,e._delegate)}}class Ud extends ol{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Eu(this.firestore,e):null}doc(e){try{return new Eu(this.firestore,void 0===e?_o(this._delegate):_o(this._delegate,e))}catch(t){throw sl(t,"doc()","CollectionReference.doc()")}}add(e){return function vf(i,e){const t=oi(i.firestore,Ts),s=_o(i),c=yf(i.converter,e);return Ch(t,[mp(Ku(i.firestore),"addDoc",s._key,c,null!==i.converter,{}).toMutation(s._key,Ki.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new Eu(this.firestore,t))}isEqual(e){return Vg(this._delegate,e._delegate)}withConverter(e){return new Ud(this.firestore,this._delegate.withConverter(e?Vd.getInstance(this.firestore,e):null))}}function jd(i){return oi(i,qs)}class Dp{constructor(...e){this._delegate=new yc(...e)}static documentId(){return new Dp(ai.keyField().canonicalString())}isEqual(e){return(e=(0,Qe.m9)(e))instanceof yc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Hd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function v_(){return new uf("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Hd(e)}static delete(){const e=function y_(){return new Ih("deleteField")}();return e._methodName="FieldValue.delete",new Hd(e)}static arrayUnion(...e){const t=function Vy(...i){return new yp("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new Hd(t)}static arrayRemove(...e){const t=function Uy(...i){return new Wg("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new Hd(t)}static increment(e){const t=function jy(i){return new gy("increment",i)}(e);return t._methodName="FieldValue.increment",new Hd(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const tm={Firestore:Xg,GeoPoint:Eh,Timestamp:Si,Blob:Dh,Transaction:zy,WriteBatch:Wy,DocumentReference:Eu,DocumentSnapshot:Ef,Query:ol,QueryDocumentSnapshot:Ec,QuerySnapshot:em,CollectionReference:Ud,FieldPath:Dp,FieldValue:Hd,setLogLevel:function D_(i){!function hr(i){Vt.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function qy(i){(function T_(i,e){i.INTERNAL.registerComponent(new st.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),c=t.getProvider("firestore").getImmediate();return e(s,c)},"PUBLIC").setServiceProps(Object.assign({},tm)))})(i,(e,t)=>new Xg(e,t,new b_)),i.registerVersion("@firebase/firestore-compat","0.3.4")}(ve.Z);var Ic=$(1205),S_=$(6217),A_=$(9260);function Tp(i,e){return function x_(i,e=te.z){return new z.y(t=>{let s;return null!=e?e.schedule(()=>{s=i.onSnapshot({includeMetadataChanges:!0},t)}):s=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(i,e)}function Sp(i,e){return Tp(i,e).pipe((0,fe.U)(t=>({payload:t,type:"query"})))}function Ap(i,e){return Sp(i,e).pipe((0,de.O)(void 0),me(),(0,fe.U)(([t,s])=>{const c=s.payload.docChanges(),m=c.map(C=>({type:C.type,payload:C}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((C,R)=>{const H=c.find(ue=>ue.doc.ref.isEqual(C.ref)),Z=null==t?void 0:t.payload.docs.find(ue=>ue.ref.isEqual(C.ref));H&&JSON.stringify(H.doc.metadata)===JSON.stringify(C.metadata)||!H&&Z&&JSON.stringify(Z.metadata)===JSON.stringify(C.metadata)||m.push({type:"modified",payload:{oldIndex:R,newIndex:R,type:"modified",doc:C}})}),m}))}function Zy(i,e,t){return Ap(i,t).pipe((0,pe.R)((s,c)=>function R_(i,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(i=function O_(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return nm(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return nm(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return nm(i,e.oldIndex,1)}return i}(i,s))}),i}(s,c.map(m=>m.payload),e),[]),(0,ke.x)(),(0,fe.U)(s=>s.map(c=>({type:c.type,payload:c}))))}function nm(i,e,t,...s){const c=i.slice();return c.splice(e,t,...s),c}function Qy(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Xy{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=Ap(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,fe.U)(s=>s.filter(c=>e.indexOf(c.type)>-1)))),t.pipe((0,de.O)(void 0),me(),(0,Ge.h)(([s,c])=>c.length>0||!s),(0,fe.U)(([s,c])=>c),Se.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,pe.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Qy(e);return Zy(this.query,t,this.afs.schedulers.outsideAngular).pipe(Se.iC)}valueChanges(e={}){return Sp(this.query,this.afs.schedulers.outsideAngular).pipe((0,fe.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),Se.iC)}get(e){return(0,Te.D)(this.query.get(e)).pipe(Se.iC)}add(e){return this.ref.add(e)}doc(e){return new Jy(this.ref.doc(e),this.afs)}}class Jy{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:c,query:m}=rv(s,t);return new Xy(c,m,this.afs)}snapshotChanges(){return function M_(i,e){return Tp(i,e).pipe((0,de.O)(void 0),me(),(0,fe.U)(([t,s])=>s.exists?null!=t&&t.exists?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Se.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,fe.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Te.D)(this.ref.get(e)).pipe(Se.iC)}}class ev{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Ap(this.query,this.afs.schedulers.outsideAngular).pipe((0,fe.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,Ge.h)(t=>t.length>0),Se.iC):Ap(this.query,this.afs.schedulers.outsideAngular).pipe(Se.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,pe.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Qy(e);return Zy(this.query,t,this.afs.schedulers.outsideAngular).pipe(Se.iC)}valueChanges(e={}){return Sp(this.query,this.afs.schedulers.outsideAngular).pipe((0,fe.U)(s=>s.payload.docs.map(c=>e.idField?Object.assign({[e.idField]:c.id},c.data()):c.data())),Se.iC)}get(e){return(0,Te.D)(this.query.get(e)).pipe(Se.iC)}}const rm=new a.OlP("angularfire2.enableFirestorePersistence"),tv=new a.OlP("angularfire2.firestore.persistenceSettings"),P_=new a.OlP("angularfire2.firestore.settings"),nv=new a.OlP("angularfire2.firestore.use-emulator");function rv(i,e=(t=>t)){return{query:e(i),ref:i}}let iv=(()=>{class i{constructor(t,s,c,m,C,R,H,Z,ue,ze,wt,Kt,en,Hn,cr,fs,ks){this.schedulers=H;const Mi=(0,ut.on)(t,R,s),ao=ue;ze&&(0,Ic.nw)(Mi,R,wt,en,Hn,cr,Kt,fs),[this.firestore,this.persistenceEnabled$]=(0,ut.cc)(`${Mi.name}.firestore`,"AngularFirestore",Mi.name,()=>{const Vi=R.runOutsideAngular(()=>Mi.firestore());if(m&&Vi.settings(m),ao&&Vi.useEmulator(...ao),c&&!(0,Dt.PM)(C)){const Hi=()=>{try{return(0,Te.D)(Vi.enablePersistence(Z||void 0).then(()=>!0,()=>!1))}catch(qo){return typeof console<"u"&&console.warn(qo),(0,xe.of)(!1)}};return[Vi,R.runOutsideAngular(Hi)]}return[Vi,(0,xe.of)(!1)]},[m,ao,c])}collection(t,s){let c;c="string"==typeof t?this.firestore.collection(t):t;const{ref:m,query:C}=rv(c,s),R=this.schedulers.ngZone.run(()=>m);return new Xy(R,C,this)}collectionGroup(t,s){const c=s||(C=>C),m=this.firestore.collectionGroup(t);return new ev(c(m),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const c=this.schedulers.ngZone.run(()=>s);return new Jy(c,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(a.LFG(ut.Dh),a.LFG(ut.xv,8),a.LFG(rm,8),a.LFG(P_,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(Se.HU),a.LFG(tv,8),a.LFG(nv,8),a.LFG(Ic.zQ,8),a.LFG(Ic.Qv,8),a.LFG(Ic.L6,8),a.LFG(Ic._Q,8),a.LFG(Ic.rT,8),a.LFG(Ic.lh,8),a.LFG(Ic.f7,8),a.LFG(S_.nm,8))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),N_=(()=>{class i{constructor(){A_.Z.registerVersion("angularfire",Se.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:rm,useValue:!0},{provide:tv,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[iv]}),i})()},2011:(ln,ft,$)=>{"use strict";$.d(ft,{Dh:()=>Ae,GT:()=>Se,cc:()=>Ge,hO:()=>ke,on:()=>me,pX:()=>xe,xv:()=>Ue});var a=$(4650),te=$(9260),z=$(2122);ln=$.hmd(ln);const Te=["ngOnDestroy"],xe=(ve,le,at,st={})=>new Proxy(ve,{get:(et,Qe)=>at.runOutsideAngular(()=>{var Pe;if(ve[Qe])return!(null===(Pe=null==st?void 0:st.spy)||void 0===Pe)&&Pe.get&&st.spy.get(Qe,ve[Qe]),ve[Qe];if(Te.indexOf(Qe)>-1)return()=>{};const Oe=le.toPromise().then(J=>{const Xe=J&&J[Qe];return"function"==typeof Xe?Xe.bind(J):Xe&&Xe.then?Xe.then(Fe=>at.run(()=>Fe)):at.run(()=>Xe)});return new Proxy(()=>{},{get:(J,Xe)=>Oe[Xe],apply:(J,Xe,Fe)=>Oe.then(je=>{var Ke;const tt=je&&je(...Fe);return!(null===(Ke=null==st?void 0:st.spy)||void 0===Ke)&&Ke.apply&&st.spy.apply(Qe,Fe,tt),tt})})})}),Se=(ve,le)=>{le.forEach(at=>{Object.getOwnPropertyNames(at.prototype||at).forEach(st=>{Object.defineProperty(ve.prototype,st,Object.getOwnPropertyDescriptor(at.prototype||at,st))})})};class de{constructor(le){return le}}const Ae=new a.OlP("angularfire2.app.options"),Ue=new a.OlP("angularfire2.app.name");function me(ve,le,at){const et="object"==typeof at&&at||{};et.name=et.name||"string"==typeof at&&at||"[DEFAULT]";const Pe=te.Z.apps.filter(Oe=>Oe&&Oe.name===et.name)[0]||le.runOutsideAngular(()=>te.Z.initializeApp(ve,et));try{JSON.stringify(ve)!==JSON.stringify(Pe.options)&&fe("error",`${Pe.name} Firebase App already initialized with different options${ln.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Oe){}return new de(Pe)}const fe=(ve,...le)=>{(0,a.X6Q)()&&typeof console<"u"&&console[ve](...le)},pe={provide:de,useFactory:me,deps:[Ae,a.R0b,[new a.FiY,Ue]]};let ke=(()=>{class ve{constructor(at){te.Z.registerVersion("angularfire",z.q4.full,"core"),te.Z.registerVersion("angularfire",z.q4.full,"app-compat"),te.Z.registerVersion("angular",a.q4F.full,at.toString())}static initializeApp(at,st){return{ngModule:ve,providers:[{provide:Ae,useValue:at},{provide:Ue,useValue:st}]}}}return ve.\u0275fac=function(at){return new(at||ve)(a.LFG(a.Lbi))},ve.\u0275mod=a.oAB({type:ve}),ve.\u0275inj=a.cJS({providers:[pe]}),ve})();function Ge(ve,le,at,st,et){const[,Qe,Pe]=globalThis.\u0275AngularfireInstanceCache.find(Oe=>Oe[0]===ve)||[];if(Qe)return function ut(ve,le){try{return ve.toString()===le.toString()}catch(at){return ve===le}}(et,Pe)||(Me("error",`${le} was already initialized on the ${at} Firebase App with different settings.${Dt?" You may need to reload as Firebase is not HMR aware.":""}`),Me("warn",{is:et,was:Pe})),Qe;{const Oe=st();return globalThis.\u0275AngularfireInstanceCache.push([ve,Oe,et]),Oe}}const Dt=!!ln.hot,Me=(ve,...le)=>{(0,a.X6Q)()&&typeof console<"u"&&console[ve](...le)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(ln,ft,$)=>{"use strict";$.d(ft,{q4:()=>Rs,iC:()=>At,HU:()=>w,vb:()=>ia,JM:()=>li});var a=$(4650),te=$(259),z=$(5861),Te=$(9681),xe=$(2090),Se=$(4859),de=$(1877),Ae=$(8766);const Ue="@firebase/installations",me="0.6.4",fe=1e4,pe=`w:${me}`,ke="FIS_v2",Ge="https://firebaseinstallations.googleapis.com/v1",ut=36e5,le=new xe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function at(F){return F instanceof xe.ZR&&F.code.includes("request-failed")}function st({projectId:F}){return`${Ge}/projects/${F}/installations`}function et(F){return{token:F.token,requestStatus:2,expiresIn:je(F.expiresIn),creationTime:Date.now()}}function Qe(F,U){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,z.Z)(function*(F,U){const De=(yield U.json()).error;return le.create("request-failed",{requestName:F,serverCode:De.code,serverMessage:De.message,serverStatus:De.status})})).apply(this,arguments)}function Oe({apiKey:F}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":F})}function Xe(F){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,z.Z)(function*(F){const U=yield F();return U.status>=500&&U.status<600?F():U})).apply(this,arguments)}function je(F){return Number(F.replace("s","000"))}function W(){return(W=(0,z.Z)(function*({appConfig:F,heartbeatServiceProvider:U},{fid:ee}){const De=st(F),ot=Oe(F),Et=U.getImmediate({optional:!0});if(Et){const er=yield Et.getHeartbeatsHeader();er&&ot.append("x-firebase-client",er)}const Nn={method:"POST",headers:ot,body:JSON.stringify({fid:ee,authVersion:ke,appId:F.appId,sdkVersion:pe})},An=yield Xe(()=>fetch(De,Nn));if(An.ok){const er=yield An.json();return{fid:er.fid||ee,registrationStatus:2,refreshToken:er.refreshToken,authToken:et(er.authToken)}}throw yield Qe("Create Installation",An)})).apply(this,arguments)}function pt(F){return new Promise(U=>{setTimeout(U,F)})}const Ie=/^[cdef][\w-]{21}$/,we="";function be(){try{const F=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(F),F[0]=112+F[0]%16;const ee=function Je(F){return function nt(F){return btoa(String.fromCharCode(...F)).replace(/\+/g,"-").replace(/\//g,"_")}(F).substr(0,22)}(F);return Ie.test(ee)?ee:we}catch(F){return we}}function Le(F){return`${F.appName}!${F.appId}`}const rt=new Map;function He(F,U){const ee=Le(F);Nt(ee,U),function cn(F,U){const ee=function Dn(){return!xt&&"BroadcastChannel"in self&&(xt=new BroadcastChannel("[Firebase] FID Change"),xt.onmessage=F=>{Nt(F.data.key,F.data.fid)}),xt}();ee&&ee.postMessage({key:F,fid:U}),function Ln(){0===rt.size&&xt&&(xt.close(),xt=null)}()}(ee,U)}function Nt(F,U){const ee=rt.get(F);if(ee)for(const De of ee)De(U)}let xt=null;const Un="firebase-installations-database",Qt=1,nr="firebase-installations-store";let Cr=null;function _r(){return Cr||(Cr=(0,Ae.X3)(Un,Qt,{upgrade:(F,U)=>{0===U&&F.createObjectStore(nr)}})),Cr}function gn(F,U){return dr.apply(this,arguments)}function dr(){return(dr=(0,z.Z)(function*(F,U){const ee=Le(F),ot=(yield _r()).transaction(nr,"readwrite"),Et=ot.objectStore(nr),Jt=yield Et.get(ee);return yield Et.put(U,ee),yield ot.done,(!Jt||Jt.fid!==U.fid)&&He(F,U.fid),U})).apply(this,arguments)}function Yt(F){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,z.Z)(function*(F){const U=Le(F),De=(yield _r()).transaction(nr,"readwrite");yield De.objectStore(nr).delete(U),yield De.done})).apply(this,arguments)}function Tr(F,U){return br.apply(this,arguments)}function br(){return(br=(0,z.Z)(function*(F,U){const ee=Le(F),ot=(yield _r()).transaction(nr,"readwrite"),Et=ot.objectStore(nr),Jt=yield Et.get(ee),Nn=U(Jt);return void 0===Nn?yield Et.delete(ee):yield Et.put(Nn,ee),yield ot.done,Nn&&(!Jt||Jt.fid!==Nn.fid)&&He(F,Nn.fid),Nn})).apply(this,arguments)}function ei(F){return Ar.apply(this,arguments)}function Ar(){return Ar=(0,z.Z)(function*(F){let U;const ee=yield Tr(F.appConfig,De=>{const ot=function xn(F){return yi(F||{fid:be(),registrationStatus:0})}(De),Et=function En(F,U){if(0===U.registrationStatus){if(!navigator.onLine)return{installationEntry:U,registrationPromise:Promise.reject(le.create("app-offline"))};const ee={fid:U.fid,registrationStatus:1,registrationTime:Date.now()},De=function Tn(F,U){return xr.apply(this,arguments)}(F,ee);return{installationEntry:ee,registrationPromise:De}}return 1===U.registrationStatus?{installationEntry:U,registrationPromise:Cn(F)}:{installationEntry:U}}(F,ot);return U=Et.registrationPromise,Et.installationEntry});return ee.fid===we?{installationEntry:yield U}:{installationEntry:ee,registrationPromise:U}}),Ar.apply(this,arguments)}function xr(){return xr=(0,z.Z)(function*(F,U){try{const ee=yield function tt(F,U){return W.apply(this,arguments)}(F,U);return gn(F.appConfig,ee)}catch(ee){throw at(ee)&&409===ee.customData.serverCode?yield Yt(F.appConfig):yield gn(F.appConfig,{fid:U.fid,registrationStatus:0}),ee}}),xr.apply(this,arguments)}function Cn(F){return jr.apply(this,arguments)}function jr(){return(jr=(0,z.Z)(function*(F){let U=yield Gt(F.appConfig);for(;1===U.registrationStatus;)yield pt(100),U=yield Gt(F.appConfig);if(0===U.registrationStatus){const{installationEntry:ee,registrationPromise:De}=yield ei(F);return De||ee}return U})).apply(this,arguments)}function Gt(F){return Tr(F,U=>{if(!U)throw le.create("installation-not-found");return yi(U)})}function yi(F){return function Gi(F){return 1===F.registrationStatus&&F.registrationTime+fe<Date.now()}(F)?{fid:F.fid,registrationStatus:0}:F}function ui(){return(ui=(0,z.Z)(function*({appConfig:F,heartbeatServiceProvider:U},ee){const De=function sr(F,{fid:U}){return`${st(F)}/${U}/authTokens:generate`}(F,ee),ot=function J(F,{refreshToken:U}){const ee=Oe(F);return ee.append("Authorization",function Ke(F){return`${ke} ${F}`}(U)),ee}(F,ee),Et=U.getImmediate({optional:!0});if(Et){const er=yield Et.getHeartbeatsHeader();er&&ot.append("x-firebase-client",er)}const Nn={method:"POST",headers:ot,body:JSON.stringify({installation:{sdkVersion:pe,appId:F.appId}})},An=yield Xe(()=>fetch(De,Nn));if(An.ok)return et(yield An.json());throw yield Qe("Generate Auth Token",An)})).apply(this,arguments)}function kn(F){return hi.apply(this,arguments)}function hi(){return hi=(0,z.Z)(function*(F,U=!1){let ee;const De=yield Tr(F.appConfig,Et=>{if(!jn(Et))throw le.create("not-registered");const Jt=Et.authToken;if(!U&&function Or(F){return 2===F.requestStatus&&!function Re(F){const U=Date.now();return U<F.creationTime||F.creationTime+F.expiresIn<U+ut}(F)}(Jt))return Et;if(1===Jt.requestStatus)return ee=function rn(F,U){return $t.apply(this,arguments)}(F,U),Et;{if(!navigator.onLine)throw le.create("app-offline");const Nn=function Ee(F){const U={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},F),{authToken:U})}(Et);return ee=function Mn(F,U){return Pn.apply(this,arguments)}(F,Nn),Nn}});return ee?yield ee:De.authToken}),hi.apply(this,arguments)}function $t(){return($t=(0,z.Z)(function*(F,U){let ee=yield yn(F.appConfig);for(;1===ee.authToken.requestStatus;)yield pt(100),ee=yield yn(F.appConfig);const De=ee.authToken;return 0===De.requestStatus?kn(F,U):De})).apply(this,arguments)}function yn(F){return Tr(F,U=>{if(!jn(U))throw le.create("not-registered");return function We(F){return 1===F.requestStatus&&F.requestTime+fe<Date.now()}(U.authToken)?Object.assign(Object.assign({},U),{authToken:{requestStatus:0}}):U})}function Pn(){return Pn=(0,z.Z)(function*(F,U){try{const ee=yield function Sr(F,U){return ui.apply(this,arguments)}(F,U),De=Object.assign(Object.assign({},U),{authToken:ee});return yield gn(F.appConfig,De),ee}catch(ee){if(!at(ee)||401!==ee.customData.serverCode&&404!==ee.customData.serverCode){const De=Object.assign(Object.assign({},U),{authToken:{requestStatus:0}});yield gn(F.appConfig,De)}else yield Yt(F.appConfig);throw ee}}),Pn.apply(this,arguments)}function jn(F){return void 0!==F&&2===F.registrationStatus}function vt(){return(vt=(0,z.Z)(function*(F){const U=F,{installationEntry:ee,registrationPromise:De}=yield ei(U);return De?De.catch(console.error):kn(U).catch(console.error),ee.fid})).apply(this,arguments)}function Be(){return Be=(0,z.Z)(function*(F,U=!1){const ee=F;return yield function $e(F){return ge.apply(this,arguments)}(ee),(yield kn(ee,U)).token}),Be.apply(this,arguments)}function ge(){return(ge=(0,z.Z)(function*(F){const{registrationPromise:U}=yield ei(F);U&&(yield U)})).apply(this,arguments)}function Yi(F){return le.create("missing-app-config-values",{valueName:F})}const fi="installations",Pr=F=>{const U=F.getProvider("app").getImmediate(),ee=function Li(F){if(!F||!F.options)throw Yi("App Configuration");if(!F.name)throw Yi("App Name");const U=["projectId","apiKey","appId"];for(const ee of U)if(!F.options[ee])throw Yi(ee);return{appName:F.name,projectId:F.options.projectId,apiKey:F.options.apiKey,appId:F.options.appId}}(U);return{app:U,appConfig:ee,heartbeatServiceProvider:(0,Te._getProvider)(U,"heartbeat"),_delete:()=>Promise.resolve()}},ls=F=>{const U=F.getProvider("app").getImmediate(),ee=(0,Te._getProvider)(U,fi).getImmediate();return{getId:()=>function Rt(F){return vt.apply(this,arguments)}(ee),getToken:ot=>function hn(F){return Be.apply(this,arguments)}(ee,ot)}};(function zi(){(0,Te._registerComponent)(new Se.wA(fi,Pr,"PUBLIC")),(0,Te._registerComponent)(new Se.wA("installations-internal",ls,"PRIVATE"))})(),(0,Te.registerVersion)(Ue,me),(0,Te.registerVersion)(Ue,me,"esm2017");const Qn="@firebase/remote-config",Mr=new xe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Sn{constructor(U,ee,De,ot){this.client=U,this.storage=ee,this.storageCache=De,this.logger=ot}isCachedDataFresh(U,ee){if(!ee)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const De=Date.now()-ee,ot=De<=U;return this.logger.debug(`Config fetch cache check. Cache age millis: ${De}. Cache max age millis (minimumFetchIntervalMillis setting): ${U}. Is cache hit: ${ot}.`),ot}fetch(U){var ee=this;return(0,z.Z)(function*(){const[De,ot]=yield Promise.all([ee.storage.getLastSuccessfulFetchTimestampMillis(),ee.storage.getLastSuccessfulFetchResponse()]);if(ot&&ee.isCachedDataFresh(U.cacheMaxAgeMillis,De))return ot;U.eTag=ot&&ot.eTag;const Et=yield ee.client.fetch(U),Jt=[ee.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Et.status&&Jt.push(ee.storage.setLastSuccessfulFetchResponse(Et)),yield Promise.all(Jt),Et})()}}function Bn(F=navigator){return F.languages&&F.languages[0]||F.language}class Yn{constructor(U,ee,De,ot,Et,Jt){this.firebaseInstallations=U,this.sdkVersion=ee,this.namespace=De,this.projectId=ot,this.apiKey=Et,this.appId=Jt}fetch(U){var ee=this;return(0,z.Z)(function*(){const[De,ot]=yield Promise.all([ee.firebaseInstallations.getId(),ee.firebaseInstallations.getToken()]),Jt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${ee.projectId}/namespaces/${ee.namespace}:fetch?key=${ee.apiKey}`,Nn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":U.eTag||"*"},An={sdk_version:ee.sdkVersion,app_instance_id:De,app_instance_id_token:ot,app_id:ee.appId,language_code:Bn()},er={method:"POST",headers:Nn,body:JSON.stringify(An)},Wr=fetch(Jt,er),lr=new Promise((Os,Go)=>{U.signal.addEventListener(()=>{const dl=new Error("The operation was aborted.");dl.name="AbortError",Go(dl)})});let io;try{yield Promise.race([Wr,lr]),io=yield Wr}catch(Os){let Go="fetch-client-network";throw"AbortError"===(null==Os?void 0:Os.name)&&(Go="fetch-timeout"),Mr.create(Go,{originalErrorMessage:null==Os?void 0:Os.message})}let so=io.status;const Va=io.headers.get("ETag")||void 0;let Yr,ci;if(200===io.status){let Os;try{Os=yield io.json()}catch(Go){throw Mr.create("fetch-client-parse",{originalErrorMessage:null==Go?void 0:Go.message})}Yr=Os.entries,ci=Os.state}if("INSTANCE_STATE_UNSPECIFIED"===ci?so=500:"NO_CHANGE"===ci?so=304:("NO_TEMPLATE"===ci||"EMPTY_CONFIG"===ci)&&(Yr={}),304!==so&&200!==so)throw Mr.create("fetch-status",{httpStatus:so});return{status:so,eTag:Va,config:Yr}})()}}class qe{constructor(U,ee){this.client=U,this.storage=ee}fetch(U){var ee=this;return(0,z.Z)(function*(){const De=(yield ee.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return ee.attemptFetch(U,De)})()}attemptFetch(U,{throttleEndTimeMillis:ee,backoffCount:De}){var ot=this;return(0,z.Z)(function*(){yield function pi(F,U){return new Promise((ee,De)=>{const ot=Math.max(U-Date.now(),0),Et=setTimeout(ee,ot);F.addEventListener(()=>{clearTimeout(Et),De(Mr.create("fetch-throttle",{throttleEndTimeMillis:U}))})})}(U.signal,ee);try{const Et=yield ot.client.fetch(U);return yield ot.storage.deleteThrottleMetadata(),Et}catch(Et){if(!function it(F){if(!(F instanceof xe.ZR&&F.customData))return!1;const U=Number(F.customData.httpStatus);return 429===U||500===U||503===U||504===U}(Et))throw Et;const Jt={throttleEndTimeMillis:Date.now()+(0,xe.$s)(De),backoffCount:De+1};return yield ot.storage.setThrottleMetadata(Jt),ot.attemptFetch(U,Jt)}})()}}class nn{constructor(U,ee,De,ot,Et){this.app=U,this._client=ee,this._storageCache=De,this._storage=ot,this._logger=Et,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function In(F,U){const ee=F.target.error||void 0;return Mr.create(U,{originalErrorMessage:ee&&(null==ee?void 0:ee.message)})}const rr="app_namespace_store";class pr{constructor(U,ee,De,ot=function Ir(){return new Promise((F,U)=>{try{const ee=indexedDB.open("firebase_remote_config",1);ee.onerror=De=>{U(In(De,"storage-open"))},ee.onsuccess=De=>{F(De.target.result)},ee.onupgradeneeded=De=>{0===De.oldVersion&&De.target.result.createObjectStore(rr,{keyPath:"compositeKey"})}}catch(ee){U(Mr.create("storage-open",{originalErrorMessage:null==ee?void 0:ee.message}))}})}()){this.appId=U,this.appName=ee,this.namespace=De,this.openDbPromise=ot}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(U){return this.set("last_fetch_status",U)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(U){return this.set("last_successful_fetch_timestamp_millis",U)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(U){return this.set("last_successful_fetch_response",U)}getActiveConfig(){return this.get("active_config")}setActiveConfig(U){return this.set("active_config",U)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(U){return this.set("active_config_etag",U)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(U){return this.set("throttle_metadata",U)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(U){var ee=this;return(0,z.Z)(function*(){const De=yield ee.openDbPromise;return new Promise((ot,Et)=>{const Nn=De.transaction([rr],"readonly").objectStore(rr),An=ee.createCompositeKey(U);try{const er=Nn.get(An);er.onerror=Wr=>{Et(In(Wr,"storage-get"))},er.onsuccess=Wr=>{const lr=Wr.target.result;ot(lr?lr.value:void 0)}}catch(er){Et(Mr.create("storage-get",{originalErrorMessage:null==er?void 0:er.message}))}})})()}set(U,ee){var De=this;return(0,z.Z)(function*(){const ot=yield De.openDbPromise;return new Promise((Et,Jt)=>{const An=ot.transaction([rr],"readwrite").objectStore(rr),er=De.createCompositeKey(U);try{const Wr=An.put({compositeKey:er,value:ee});Wr.onerror=lr=>{Jt(In(lr,"storage-set"))},Wr.onsuccess=()=>{Et()}}catch(Wr){Jt(Mr.create("storage-set",{originalErrorMessage:null==Wr?void 0:Wr.message}))}})})()}delete(U){var ee=this;return(0,z.Z)(function*(){const De=yield ee.openDbPromise;return new Promise((ot,Et)=>{const Nn=De.transaction([rr],"readwrite").objectStore(rr),An=ee.createCompositeKey(U);try{const er=Nn.delete(An);er.onerror=Wr=>{Et(In(Wr,"storage-delete"))},er.onsuccess=()=>{ot()}}catch(er){Et(Mr.create("storage-delete",{originalErrorMessage:null==er?void 0:er.message}))}})})()}createCompositeKey(U){return[this.appId,this.appName,this.namespace,U].join()}}class Kn{constructor(U){this.storage=U}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var U=this;return(0,z.Z)(function*(){const ee=U.storage.getLastFetchStatus(),De=U.storage.getLastSuccessfulFetchTimestampMillis(),ot=U.storage.getActiveConfig(),Et=yield ee;Et&&(U.lastFetchStatus=Et);const Jt=yield De;Jt&&(U.lastSuccessfulFetchTimestampMillis=Jt);const Nn=yield ot;Nn&&(U.activeConfig=Nn)})()}setLastFetchStatus(U){return this.lastFetchStatus=U,this.storage.setLastFetchStatus(U)}setLastSuccessfulFetchTimestampMillis(U){return this.lastSuccessfulFetchTimestampMillis=U,this.storage.setLastSuccessfulFetchTimestampMillis(U)}setActiveConfig(U){return this.activeConfig=U,this.storage.setActiveConfig(U)}}function uo(){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,z.Z)(function*(){if(!(0,xe.hl)())return!1;try{return yield(0,xe.eu)()}catch(F){return!1}})).apply(this,arguments)}!function gi(){(0,Te._registerComponent)(new Se.wA("remote-config",function F(U,{instanceIdentifier:ee}){const De=U.getProvider("app").getImmediate(),ot=U.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Mr.create("registration-window");if(!(0,xe.hl)())throw Mr.create("indexed-db-unavailable");const{projectId:Et,apiKey:Jt,appId:Nn}=De.options;if(!Et)throw Mr.create("registration-project-id");if(!Jt)throw Mr.create("registration-api-key");if(!Nn)throw Mr.create("registration-app-id");const An=new pr(Nn,De.name,ee=ee||"firebase"),er=new Kn(An),Wr=new de.Yd(Qn);Wr.logLevel=de.in.ERROR;const lr=new Yn(ot,Te.SDK_VERSION,ee,Et,Jt,Nn),io=new qe(lr,An),so=new Sn(io,An,er,Wr),Va=new nn(De,so,er,An,Wr);return function he(F){const U=(0,xe.m9)(F);U._initializePromise||(U._initializePromise=U._storageCache.loadFromStorage().then(()=>{U._isInitializationComplete=!0}))}(Va),Va},"PUBLIC").setMultipleInstances(!0)),(0,Te.registerVersion)(Qn,"0.4.4"),(0,Te.registerVersion)(Qn,"0.4.4","esm2017")}();const Io="/firebase-messaging-sw.js",Vr="/firebase-cloud-messaging-push-scope",Jn="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ni="https://fcmregistrations.googleapis.com/v1",wo="google.c.a.c_id",Co="google.c.a.c_l",Bi="google.c.a.ts",ms="google.c.a.e";var Zs=(()=>{return(F=Zs||(Zs={})).PUSH_RECEIVED="push-received",F.NOTIFICATION_CLICKED="notification-clicked",Zs;var F})();function ns(F){const U=new Uint8Array(F);return btoa(String.fromCharCode(...U)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Qs(F){const ee=(F+"=".repeat((4-F.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),De=atob(ee),ot=new Uint8Array(De.length);for(let Et=0;Et<De.length;++Et)ot[Et]=De.charCodeAt(Et);return ot}const Bs="fcm_token_details_db",ys=5,Pi="fcm_token_object_Store";function bo(){return bo=(0,z.Z)(function*(F){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Et=>Et.name).includes(Bs))return null;let U=null;return(yield(0,Ae.X3)(Bs,ys,{upgrade:(De=(0,z.Z)(function*(ot,Et,Jt,Nn){var An;if(Et<2||!ot.objectStoreNames.contains(Pi))return;const er=Nn.objectStore(Pi),Wr=yield er.index("fcmSenderId").get(F);if(yield er.clear(),Wr)if(2===Et){const lr=Wr;if(!lr.auth||!lr.p256dh||!lr.endpoint)return;U={token:lr.fcmToken,createTime:null!==(An=lr.createTime)&&void 0!==An?An:Date.now(),subscriptionOptions:{auth:lr.auth,p256dh:lr.p256dh,endpoint:lr.endpoint,swScope:lr.swScope,vapidKey:"string"==typeof lr.vapidKey?lr.vapidKey:ns(lr.vapidKey)}}}else if(3===Et){const lr=Wr;U={token:lr.fcmToken,createTime:lr.createTime,subscriptionOptions:{auth:ns(lr.auth),p256dh:ns(lr.p256dh),endpoint:lr.endpoint,swScope:lr.swScope,vapidKey:ns(lr.vapidKey)}}}else if(4===Et){const lr=Wr;U={token:lr.fcmToken,createTime:lr.createTime,subscriptionOptions:{auth:ns(lr.auth),p256dh:ns(lr.p256dh),endpoint:lr.endpoint,swScope:lr.swScope,vapidKey:ns(lr.vapidKey)}}}}),function(Et,Jt,Nn,An){return De.apply(this,arguments)})})).close(),yield(0,Ae.Lj)(Bs),yield(0,Ae.Lj)("fcm_vapid_details_db"),yield(0,Ae.Lj)("undefined"),function is(F){if(!F||!F.subscriptionOptions)return!1;const{subscriptionOptions:U}=F;return"number"==typeof F.createTime&&F.createTime>0&&"string"==typeof F.token&&F.token.length>0&&"string"==typeof U.auth&&U.auth.length>0&&"string"==typeof U.p256dh&&U.p256dh.length>0&&"string"==typeof U.endpoint&&U.endpoint.length>0&&"string"==typeof U.swScope&&U.swScope.length>0&&"string"==typeof U.vapidKey&&U.vapidKey.length>0}(U)?U:null;var De}),bo.apply(this,arguments)}const Lo="firebase-messaging-database",zr=1,bi="firebase-messaging-store";let gr=null;function us(){return gr||(gr=(0,Ae.X3)(Lo,zr,{upgrade:(F,U)=>{0===U&&F.createObjectStore(bi)}})),gr}function As(F){return ss.apply(this,arguments)}function ss(){return ss=(0,z.Z)(function*(F){const U=mi(F),De=yield(yield us()).transaction(bi).objectStore(bi).get(U);if(De)return De;{const ot=yield function rs(F){return bo.apply(this,arguments)}(F.appConfig.senderId);if(ot)return yield Ni(F,ot),ot}}),ss.apply(this,arguments)}function Ni(F,U){return cs.apply(this,arguments)}function cs(){return(cs=(0,z.Z)(function*(F,U){const ee=mi(F),ot=(yield us()).transaction(bi,"readwrite");return yield ot.objectStore(bi).put(U,ee),yield ot.done,U})).apply(this,arguments)}function Xi(){return(Xi=(0,z.Z)(function*(F){const U=mi(F),De=(yield us()).transaction(bi,"readwrite");yield De.objectStore(bi).delete(U),yield De.done})).apply(this,arguments)}function mi({appConfig:F}){return F.appId}const Dr=new xe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Vs(F,U){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,z.Z)(function*(F,U){const ee=yield Qo(F),De=Js(U),ot={method:"POST",headers:ee,body:JSON.stringify(De)};let Et;try{Et=yield(yield fetch($i(F.appConfig),ot)).json()}catch(Jt){throw Dr.create("token-subscribe-failed",{errorInfo:null==Jt?void 0:Jt.toString()})}if(Et.error)throw Dr.create("token-subscribe-failed",{errorInfo:Et.error.message});if(!Et.token)throw Dr.create("token-subscribe-no-token");return Et.token})).apply(this,arguments)}function Zo(){return(Zo=(0,z.Z)(function*(F,U){const ee=yield Qo(F),De=Js(U.subscriptionOptions),ot={method:"PATCH",headers:ee,body:JSON.stringify(De)};let Et;try{Et=yield(yield fetch(`${$i(F.appConfig)}/${U.token}`,ot)).json()}catch(Jt){throw Dr.create("token-update-failed",{errorInfo:null==Jt?void 0:Jt.toString()})}if(Et.error)throw Dr.create("token-update-failed",{errorInfo:Et.error.message});if(!Et.token)throw Dr.create("token-update-no-token");return Et.token})).apply(this,arguments)}function co(F,U){return qi.apply(this,arguments)}function qi(){return(qi=(0,z.Z)(function*(F,U){const De={method:"DELETE",headers:yield Qo(F)};try{const Et=yield(yield fetch(`${$i(F.appConfig)}/${U}`,De)).json();if(Et.error)throw Dr.create("token-unsubscribe-failed",{errorInfo:Et.error.message})}catch(ot){throw Dr.create("token-unsubscribe-failed",{errorInfo:null==ot?void 0:ot.toString()})}})).apply(this,arguments)}function $i({projectId:F}){return`${ni}/projects/${F}/registrations`}function Qo(F){return ho.apply(this,arguments)}function ho(){return(ho=(0,z.Z)(function*({appConfig:F,installations:U}){const ee=yield U.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":F.apiKey,"x-goog-firebase-installations-auth":`FIS ${ee}`})})).apply(this,arguments)}function Js({p256dh:F,auth:U,endpoint:ee,vapidKey:De}){const ot={web:{endpoint:ee,auth:U,p256dh:F}};return De!==Jn&&(ot.web.applicationPubKey=De),ot}const ki=6048e5;function eo(){return eo=(0,z.Z)(function*(F){const U=yield function tr(F,U){return fo.apply(this,arguments)}(F.swRegistration,F.vapidKey),ee={vapidKey:F.vapidKey,swScope:F.swRegistration.scope,endpoint:U.endpoint,auth:ns(U.getKey("auth")),p256dh:ns(U.getKey("p256dh"))},De=yield As(F.firebaseDependencies);if(De){if(function To(F,U){return U.vapidKey===F.vapidKey&&U.endpoint===F.endpoint&&U.auth===F.auth&&U.p256dh===F.p256dh}(De.subscriptionOptions,ee))return Date.now()>=De.createTime+ki?function va(F,U){return to.apply(this,arguments)}(F,{token:De.token,createTime:Date.now(),subscriptionOptions:ee}):De.token;try{yield co(F.firebaseDependencies,De.token)}catch(ot){console.warn(ot)}return vs(F.firebaseDependencies,ee)}return vs(F.firebaseDependencies,ee)}),eo.apply(this,arguments)}function Do(){return Do=(0,z.Z)(function*(F){const U=yield As(F.firebaseDependencies);U&&(yield co(F.firebaseDependencies,U.token),yield function Qi(F){return Xi.apply(this,arguments)}(F.firebaseDependencies));const ee=yield F.swRegistration.pushManager.getSubscription();return!ee||ee.unsubscribe()}),Do.apply(this,arguments)}function to(){return to=(0,z.Z)(function*(F,U){try{const ee=yield function Ci(F,U){return Zo.apply(this,arguments)}(F.firebaseDependencies,U),De=Object.assign(Object.assign({},U),{token:ee,createTime:Date.now()});return yield Ni(F.firebaseDependencies,De),ee}catch(ee){throw yield function or(F){return Do.apply(this,arguments)}(F),ee}}),to.apply(this,arguments)}function vs(F,U){return Us.apply(this,arguments)}function Us(){return(Us=(0,z.Z)(function*(F,U){const De={token:yield Vs(F,U),createTime:Date.now(),subscriptionOptions:U};return yield Ni(F,De),De.token})).apply(this,arguments)}function fo(){return(fo=(0,z.Z)(function*(F,U){return(yield F.pushManager.getSubscription())||F.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Qs(U)})})).apply(this,arguments)}function qt(F){const U={from:F.from,collapseKey:F.collapse_key,messageId:F.fcmMessageId};return function Fn(F,U){if(!U.notification)return;F.notification={};const ee=U.notification.title;ee&&(F.notification.title=ee);const De=U.notification.body;De&&(F.notification.body=De);const ot=U.notification.image;ot&&(F.notification.image=ot);const Et=U.notification.icon;Et&&(F.notification.icon=Et)}(U,F),function j(F,U){U.data&&(F.data=U.data)}(U,F),function f(F,U){var ee,De,ot,Et,Jt;if(!(U.fcmOptions||null!==(ee=U.notification)&&void 0!==ee&&ee.click_action))return;F.fcmOptions={};const Nn=null!==(ot=null===(De=U.fcmOptions)||void 0===De?void 0:De.link)&&void 0!==ot?ot:null===(Et=U.notification)||void 0===Et?void 0:Et.click_action;Nn&&(F.fcmOptions.link=Nn);const An=null===(Jt=U.fcmOptions)||void 0===Jt?void 0:Jt.analytics_label;An&&(F.fcmOptions.analyticsLabel=An)}(U,F),U}function y(F,U){const ee=[];for(let De=0;De<F.length;De++)ee.push(F.charAt(De)),De<U.length&&ee.push(U.charAt(De));return ee.join("")}function Q(F){return Dr.create("missing-app-config-values",{valueName:F})}y("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),y("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class gt{constructor(U,ee,De){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ot=function P(F){if(!F||!F.options)throw Q("App Configuration Object");if(!F.name)throw Q("App Name");const U=["projectId","apiKey","appId","messagingSenderId"],{options:ee}=F;for(const De of U)if(!ee[De])throw Q(De);return{appName:F.name,projectId:ee.projectId,apiKey:ee.apiKey,appId:ee.appId,senderId:ee.messagingSenderId}}(U);this.firebaseDependencies={app:U,appConfig:ot,installations:ee,analyticsProvider:De}}_delete(){return Promise.resolve()}}function tn(F){return vn.apply(this,arguments)}function vn(){return(vn=(0,z.Z)(function*(F){try{F.swRegistration=yield navigator.serviceWorker.register(Io,{scope:Vr}),F.swRegistration.update().catch(()=>{})}catch(U){throw Dr.create("failed-service-worker-registration",{browserErrorMessage:null==U?void 0:U.message})}})).apply(this,arguments)}function Rr(){return(Rr=(0,z.Z)(function*(F,U){if(!U&&!F.swRegistration&&(yield tn(F)),U||!F.swRegistration){if(!(U instanceof ServiceWorkerRegistration))throw Dr.create("invalid-sw-registration");F.swRegistration=U}})).apply(this,arguments)}function Br(){return(Br=(0,z.Z)(function*(F,U){U?F.vapidKey=U:F.vapidKey||(F.vapidKey=Jn)})).apply(this,arguments)}function Ui(){return Ui=(0,z.Z)(function*(F,U){if(!navigator)throw Dr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Dr.create("permission-blocked");return yield function Zn(F,U){return Br.apply(this,arguments)}(F,null==U?void 0:U.vapidKey),yield function Gn(F,U){return Rr.apply(this,arguments)}(F,null==U?void 0:U.serviceWorkerRegistration),function Xr(F){return eo.apply(this,arguments)}(F)}),Ui.apply(this,arguments)}function la(){return(la=(0,z.Z)(function*(F,U,ee){const De=function js(F){switch(F){case Zs.NOTIFICATION_CLICKED:return"notification_open";case Zs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(U);(yield F.firebaseDependencies.analyticsProvider.get()).logEvent(De,{message_id:ee[wo],message_name:ee[Co],message_time:ee[Bi],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ua(){return ua=(0,z.Z)(function*(F,U){const ee=U.data;if(!ee.isFirebaseMessaging)return;F.onMessageHandler&&ee.messageType===Zs.PUSH_RECEIVED&&("function"==typeof F.onMessageHandler?F.onMessageHandler(qt(ee)):F.onMessageHandler.next(qt(ee)));const De=ee.data;(function I(F){return"object"==typeof F&&!!F&&wo in F})(De)&&"1"===De[ms]&&(yield function si(F,U,ee){return la.apply(this,arguments)}(F,ee.messageType,De))}),ua.apply(this,arguments)}const ca="@firebase/messaging",Pa=F=>{const U=new gt(F.getProvider("app").getImmediate(),F.getProvider("installations-internal").getImmediate(),F.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",ee=>function Wa(F,U){return ua.apply(this,arguments)}(U,ee)),U},xs=F=>{const U=F.getProvider("messaging").getImmediate();return{getToken:De=>function Ji(F,U){return Ui.apply(this,arguments)}(U,De)}};function Bo(){return So.apply(this,arguments)}function So(){return(So=(0,z.Z)(function*(){try{yield(0,xe.eu)()}catch(F){return!1}return typeof window<"u"&&(0,xe.hl)()&&(0,xe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Na(){(0,Te._registerComponent)(new Se.wA("messaging",Pa,"PUBLIC")),(0,Te._registerComponent)(new Se.wA("messaging-internal",xs,"PRIVATE")),(0,Te.registerVersion)(ca,"0.12.4"),(0,Te.registerVersion)(ca,"0.12.4","esm2017")}();const Hs="analytics",Di="firebase_id",Jo="origin",ds=6e4,Ao="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$o="https://www.googletagmanager.com/gtag/js",Ti=new de.Yd("@firebase/analytics");function da(F){return Promise.all(F.map(U=>U.catch(ee=>ee)))}function Fa(){return(Fa=(0,z.Z)(function*(F,U,ee,De,ot,Et){const Jt=De[ot];try{if(Jt)yield U[Jt];else{const An=(yield da(ee)).find(er=>er.measurementId===ot);An&&(yield U[An.appId])}}catch(Nn){Ti.error(Nn)}F("config",ot,Et)})).apply(this,arguments)}function N(){return(N=(0,z.Z)(function*(F,U,ee,De,ot){try{let Et=[];if(ot&&ot.send_to){let Jt=ot.send_to;Array.isArray(Jt)||(Jt=[Jt]);const Nn=yield da(ee);for(const An of Jt){const er=Nn.find(lr=>lr.measurementId===An),Wr=er&&U[er.appId];if(!Wr){Et=[];break}Et.push(Wr)}}0===Et.length&&(Et=Object.values(U)),yield Promise.all(Et),F("event",De,ot||{})}catch(Et){Ti.error(Et)}})).apply(this,arguments)}const _t=new xe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Vt=30,Ft=new class hr{constructor(U={},ee=1e3){this.throttleMetadata=U,this.intervalMillis=ee}getThrottleMetadata(U){return this.throttleMetadata[U]}setThrottleMetadata(U,ee){this.throttleMetadata[U]=ee}deleteThrottleMetadata(U){delete this.throttleMetadata[U]}};function ir(F){return new Headers({Accept:"application/json","x-goog-api-key":F})}function Ei(){return(Ei=(0,z.Z)(function*(F){var U;const{appId:ee,apiKey:De}=F,ot={method:"GET",headers:ir(De)},Et=Ao.replace("{app-id}",ee),Jt=yield fetch(Et,ot);if(200!==Jt.status&&304!==Jt.status){let Nn="";try{const An=yield Jt.json();null!==(U=An.error)&&void 0!==U&&U.message&&(Nn=An.error.message)}catch(An){}throw _t.create("config-fetch-failed",{httpStatus:Jt.status,responseMessage:Nn})}return Jt.json()})).apply(this,arguments)}function _n(){return(_n=(0,z.Z)(function*(F,U=Ft,ee){const{appId:De,apiKey:ot,measurementId:Et}=F.options;if(!De)throw _t.create("no-app-id");if(!ot){if(Et)return{measurementId:Et,appId:De};throw _t.create("no-api-key")}const Jt=U.getThrottleMetadata(De)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Nn=new Ii;return setTimeout((0,z.Z)(function*(){Nn.abort()}),void 0!==ee?ee:ds),hs({appId:De,apiKey:ot,measurementId:Et},Jt,Nn,U)})).apply(this,arguments)}function hs(F,U,ee){return dn.apply(this,arguments)}function dn(){return dn=(0,z.Z)(function*(F,{throttleEndTimeMillis:U,backoffCount:ee},De,ot=Ft){var Et;const{appId:Jt,measurementId:Nn}=F;try{yield function It(F,U){return new Promise((ee,De)=>{const ot=Math.max(U-Date.now(),0),Et=setTimeout(ee,ot);F.addEventListener(()=>{clearTimeout(Et),De(_t.create("fetch-throttle",{throttleEndTimeMillis:U}))})})}(De,U)}catch(An){if(Nn)return Ti.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Nn} provided in the "measurementId" field in the local Firebase config. [${null==An?void 0:An.message}]`),{appId:Jt,measurementId:Nn};throw An}try{const An=yield function ar(F){return Ei.apply(this,arguments)}(F);return ot.deleteThrottleMetadata(Jt),An}catch(An){const er=An;if(!function Wt(F){if(!(F instanceof xe.ZR&&F.customData))return!1;const U=Number(F.customData.httpStatus);return 429===U||500===U||503===U||504===U}(er)){if(ot.deleteThrottleMetadata(Jt),Nn)return Ti.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Nn} provided in the "measurementId" field in the local Firebase config. [${null==er?void 0:er.message}]`),{appId:Jt,measurementId:Nn};throw An}const Wr=503===Number(null===(Et=null==er?void 0:er.customData)||void 0===Et?void 0:Et.httpStatus)?(0,xe.$s)(ee,ot.intervalMillis,Vt):(0,xe.$s)(ee,ot.intervalMillis),lr={throttleEndTimeMillis:Date.now()+Wr,backoffCount:ee+1};return ot.setThrottleMetadata(Jt,lr),Ti.debug(`Calling attemptFetch again in ${Wr} millis`),hs(F,lr,De,ot)}}),dn.apply(this,arguments)}class Ii{constructor(){this.listeners=[]}addEventListener(U){this.listeners.push(U)}abort(){this.listeners.forEach(U=>U())}}let Vo,mr;function qa(){return(qa=(0,z.Z)(function*(F,U,ee,De,ot){if(ot&&ot.global)F("event",ee,De);else{const Et=yield U;F("event",ee,Object.assign(Object.assign({},De),{send_to:Et}))}})).apply(this,arguments)}function qn(){return(qn=(0,z.Z)(function*(){if(!(0,xe.hl)())return Ti.warn(_t.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,xe.eu)()}catch(F){return Ti.warn(_t.create("indexeddb-unavailable",{errorInfo:null==F?void 0:F.toString()}).message),!1}return!0})).apply(this,arguments)}function Ur(){return Ur=(0,z.Z)(function*(F,U,ee,De,ot,Et,Jt){var Nn;const An=function zt(F){return _n.apply(this,arguments)}(F);An.then(so=>{ee[so.measurementId]=so.appId,F.options.measurementId&&so.measurementId!==F.options.measurementId&&Ti.warn(`The measurement ID in the local Firebase config (${F.options.measurementId}) does not match the measurement ID fetched from the server (${so.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(so=>Ti.error(so)),U.push(An);const er=function Si(){return qn.apply(this,arguments)}().then(so=>{if(so)return De.getId()}),[Wr,lr]=yield Promise.all([An,er]);(function re(F){const U=window.document.getElementsByTagName("script");for(const ee of Object.values(U))if(ee.src&&ee.src.includes($o)&&ee.src.includes(F))return ee;return null})(Et)||function pl(F,U){const ee=document.createElement("script");ee.src=`${$o}?l=${F}&id=${U}`,ee.async=!0,document.head.appendChild(ee)}(Et,Wr.measurementId),mr&&(ot("consent","default",mr),function ha(F){mr=F}(void 0)),ot("js",new Date);const io=null!==(Nn=null==Jt?void 0:Jt.config)&&void 0!==Nn?Nn:{};return io[Jo]="firebase",io.update=!0,null!=lr&&(io[Di]=lr),ot("config",Wr.measurementId,io),Vo&&(ot("set",Vo),function Ql(F){Vo=F}(void 0)),Wr.measurementId}),Ur.apply(this,arguments)}class Nl{constructor(U){this.app=U}_delete(){return delete ai[this.app.options.appId],Promise.resolve()}}let ai={},pn=[];const cl={};let pa,Mo,es="dataLayer",fa="gtag",Ia=!1;function Cu(F,U,ee){!function wu(){const F=[];if((0,xe.ru)()&&F.push("This is a browser extension environment."),(0,xe.zI)()||F.push("Cookies are not available."),F.length>0){const U=F.map((De,ot)=>`(${ot+1}) ${De}`).join(" "),ee=_t.create("invalid-analytics-context",{errorInfo:U});Ti.warn(ee.message)}}();const De=F.options.appId;if(!De)throw _t.create("no-app-id");if(!F.options.apiKey){if(!F.options.measurementId)throw _t.create("no-api-key");Ti.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${F.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ai[De])throw _t.create("already-exists",{id:De});if(!Ia){!function ka(F){let U=[];Array.isArray(window[F])?U=window[F]:window[F]=U}(es);const{wrappedGtag:Et,gtagCore:Jt}=function B(F,U,ee,De,ot){let Et=function(...Jt){window[De].push(arguments)};return window[ot]&&"function"==typeof window[ot]&&(Et=window[ot]),window[ot]=function K(F,U,ee,De){function Et(){return Et=(0,z.Z)(function*(Jt,Nn,An){try{"event"===Jt?yield function Pl(F,U,ee,De,ot){return N.apply(this,arguments)}(F,U,ee,Nn,An):"config"===Jt?yield function ea(F,U,ee,De,ot,Et){return Fa.apply(this,arguments)}(F,U,ee,De,Nn,An):"consent"===Jt?F("consent","update",An):F("set",Nn)}catch(er){Ti.error(er)}}),Et.apply(this,arguments)}return function ot(Jt,Nn,An){return Et.apply(this,arguments)}}(Et,F,U,ee),{gtagCore:Et,wrappedGtag:window[ot]}}(ai,pn,cl,es,fa);Mo=Et,pa=Jt,Ia=!0}return ai[De]=function xo(F,U,ee,De,ot,Et,Jt){return Ur.apply(this,arguments)}(F,pn,cl,U,pa,es,ee),new Nl(F)}function na(){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,z.Z)(function*(){if((0,xe.ru)()||!(0,xe.zI)()||!(0,xe.hl)())return!1;try{return yield(0,xe.eu)()}catch(F){return!1}})).apply(this,arguments)}const Xa="@firebase/analytics";!function Ja(){(0,Te._registerComponent)(new Se.wA(Hs,(U,{options:ee})=>Cu(U.getProvider("app").getImmediate(),U.getProvider("installations-internal").getImmediate(),ee),"PUBLIC")),(0,Te._registerComponent)(new Se.wA("analytics-internal",function F(U){try{const ee=U.getProvider(Hs).getImmediate();return{logEvent:(De,ot,Et)=>function Ai(F,U,ee,De){F=(0,xe.m9)(F),function Uo(F,U,ee,De,ot){return qa.apply(this,arguments)}(Mo,ai[F.app.options.appId],U,ee,De).catch(ot=>Ti.error(ot))}(ee,De,ot,Et)}}catch(ee){throw _t.create("interop-component-reg-failed",{reason:ee})}},"PRIVATE")),(0,Te.registerVersion)(Xa,"0.9.4"),(0,Te.registerVersion)(Xa,"0.9.4","esm2017")}();var kl=$(4408),Du=$(7565);const no=new class ba extends Du.v{}(class _l extends kl.o{constructor(U,ee){super(U,ee),this.scheduler=U,this.work=ee}schedule(U,ee=0){return ee>0?super.schedule(U,ee):(this.delay=ee,this.state=U,this.scheduler.flush(this),this)}execute(U,ee){return ee>0||this.closed?super.execute(U,ee):this._execute(U,ee)}requestAsyncId(U,ee,De=0){return null!=De&&De>0||null==De&&this.delay>0?super.requestAsyncId(U,ee,De):(U.flush(this),0)}});var Wi=$(4986),Da=$(8505),ra=$(9468),Ta=$(5363);const Rs=new a.GfV("7.5.0"),po="__angularfire_symbol__analyticsIsSupportedValue",Ba="__angularfire_symbol__analyticsIsSupported",Ro="__angularfire_symbol__remoteConfigIsSupportedValue",jo="__angularfire_symbol__remoteConfigIsSupported",Fl="__angularfire_symbol__messagingIsSupportedValue",Xl="__angularfire_symbol__messagingIsSupported";function li(F,U,ee){if(U){if(1===U.length)return U[0];const Et=U.filter(Jt=>Jt.app===ee);if(1===Et.length)return Et[0]}return ee.container.getProvider(F).getImmediate({optional:!0})}globalThis[Ba]||(globalThis[Ba]=na().then(F=>globalThis[po]=F).catch(()=>globalThis[po]=!1)),globalThis[Xl]||(globalThis[Xl]=Bo().then(F=>globalThis[Fl]=F).catch(()=>globalThis[Fl]=!1)),globalThis[jo]||(globalThis[jo]=uo().then(F=>globalThis[Ro]=F).catch(()=>globalThis[Ro]=!1));const ia=(F,U)=>{const ee=U?[U]:(0,te.C6)(),De=[];return ee.forEach(ot=>{ot.container.getProvider(F).instances.forEach(Jt=>{De.includes(Jt)||De.push(Jt)})}),De};function $a(){}class T{constructor(U,ee=no){this.zone=U,this.delegate=ee}now(){return this.delegate.now()}schedule(U,ee,De){const ot=this.zone;return this.delegate.schedule(function(Jt){ot.runGuarded(()=>{U.apply(this,[Jt])})},ee,De)}}class x{constructor(U){this.zone=U,this.task=null}call(U,ee){const De=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",$a,{},$a,$a)),ee.pipe((0,Da.b)({next:De,complete:De,error:De})).subscribe(U).add(De)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let w=(()=>{class F{constructor(ee){this.ngZone=ee,this.outsideAngular=ee.runOutsideAngular(()=>new T(Zone.current)),this.insideAngular=ee.run(()=>new T(Zone.current,Wi.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return F.\u0275fac=function(ee){return new(ee||F)(a.LFG(a.R0b))},F.\u0275prov=a.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})();function M(){const F=globalThis.\u0275AngularFireScheduler;if(!F)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return F}function At(F){return M(),function on(F){return function(ee){return(ee=ee.lift(new x(F.ngZone))).pipe((0,ra.R)(F.outsideAngular),(0,Ta.Q)(F.insideAngular))}}(M())(F)}},2090:(ln,ft,$)=>{"use strict";$.d(ft,{$s:()=>Mn,BH:()=>Qe,DV:()=>Cr,Dv:()=>jr,G6:()=>Ie,GJ:()=>Qt,L:()=>Ue,LL:()=>He,Pz:()=>et,Sg:()=>Pe,UG:()=>Xe,UI:()=>gn,US:()=>Se,Wj:()=>Gi,Wl:()=>cn,Yr:()=>nt,ZB:()=>pe,ZR:()=>rt,aH:()=>st,b$:()=>Ke,cI:()=>Nt,dS:()=>ui,eu:()=>be,g5:()=>z,gK:()=>Gt,gQ:()=>Ar,h$:()=>Ae,hl:()=>we,hu:()=>te,jU:()=>Fe,lb:()=>Sr,m9:()=>Or,ne:()=>xn,p$:()=>fe,pd:()=>ei,r3:()=>nr,ru:()=>je,tV:()=>me,uI:()=>J,ug:()=>sr,vZ:()=>dr,w1:()=>W,w9:()=>Un,xO:()=>Tr,xb:()=>_r,z$:()=>Oe,zI:()=>Je,zd:()=>br});const a={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},te=function(Re,Ee){if(!Re)throw z(Ee)},z=function(Re){return new Error("Firebase Database ("+a.SDK_VERSION+") INTERNAL ASSERT FAILED: "+Re)},Te=function(Re){const Ee=[];let We=0;for(let Rt=0;Rt<Re.length;Rt++){let vt=Re.charCodeAt(Rt);vt<128?Ee[We++]=vt:vt<2048?(Ee[We++]=vt>>6|192,Ee[We++]=63&vt|128):55296==(64512&vt)&&Rt+1<Re.length&&56320==(64512&Re.charCodeAt(Rt+1))?(vt=65536+((1023&vt)<<10)+(1023&Re.charCodeAt(++Rt)),Ee[We++]=vt>>18|240,Ee[We++]=vt>>12&63|128,Ee[We++]=vt>>6&63|128,Ee[We++]=63&vt|128):(Ee[We++]=vt>>12|224,Ee[We++]=vt>>6&63|128,Ee[We++]=63&vt|128)}return Ee},Se={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Re,Ee){if(!Array.isArray(Re))throw Error("encodeByteArray takes an array as a parameter");this.init_();const We=Ee?this.byteToCharMapWebSafe_:this.byteToCharMap_,Rt=[];for(let vt=0;vt<Re.length;vt+=3){const hn=Re[vt],Be=vt+1<Re.length,$e=Be?Re[vt+1]:0,ge=vt+2<Re.length,yt=ge?Re[vt+2]:0;let On=(15&$e)<<2|yt>>6,Wn=63&yt;ge||(Wn=64,Be||(On=64)),Rt.push(We[hn>>2],We[(3&hn)<<4|$e>>4],We[On],We[Wn])}return Rt.join("")},encodeString(Re,Ee){return this.HAS_NATIVE_SUPPORT&&!Ee?btoa(Re):this.encodeByteArray(Te(Re),Ee)},decodeString(Re,Ee){return this.HAS_NATIVE_SUPPORT&&!Ee?atob(Re):function(Re){const Ee=[];let We=0,Rt=0;for(;We<Re.length;){const vt=Re[We++];if(vt<128)Ee[Rt++]=String.fromCharCode(vt);else if(vt>191&&vt<224){const hn=Re[We++];Ee[Rt++]=String.fromCharCode((31&vt)<<6|63&hn)}else if(vt>239&&vt<365){const ge=((7&vt)<<18|(63&Re[We++])<<12|(63&Re[We++])<<6|63&Re[We++])-65536;Ee[Rt++]=String.fromCharCode(55296+(ge>>10)),Ee[Rt++]=String.fromCharCode(56320+(1023&ge))}else{const hn=Re[We++],Be=Re[We++];Ee[Rt++]=String.fromCharCode((15&vt)<<12|(63&hn)<<6|63&Be)}}return Ee.join("")}(this.decodeStringToByteArray(Re,Ee))},decodeStringToByteArray(Re,Ee){this.init_();const We=Ee?this.charToByteMapWebSafe_:this.charToByteMap_,Rt=[];for(let vt=0;vt<Re.length;){const hn=We[Re.charAt(vt++)],$e=vt<Re.length?We[Re.charAt(vt)]:0;++vt;const yt=vt<Re.length?We[Re.charAt(vt)]:64;++vt;const Ht=vt<Re.length?We[Re.charAt(vt)]:64;if(++vt,null==hn||null==$e||null==yt||null==Ht)throw new de;Rt.push(hn<<2|$e>>4),64!==yt&&(Rt.push($e<<4&240|yt>>2),64!==Ht&&Rt.push(yt<<6&192|Ht))}return Rt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Re=0;Re<this.ENCODED_VALS.length;Re++)this.byteToCharMap_[Re]=this.ENCODED_VALS.charAt(Re),this.charToByteMap_[this.byteToCharMap_[Re]]=Re,this.byteToCharMapWebSafe_[Re]=this.ENCODED_VALS_WEBSAFE.charAt(Re),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Re]]=Re,Re>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Re)]=Re,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Re)]=Re)}}};class de extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ae=function(Re){const Ee=Te(Re);return Se.encodeByteArray(Ee,!0)},Ue=function(Re){return Ae(Re).replace(/\./g,"")},me=function(Re){try{return Se.decodeString(Re,!0)}catch(Ee){console.error("base64Decode failed: ",Ee)}return null};function fe(Re){return pe(void 0,Re)}function pe(Re,Ee){if(!(Ee instanceof Object))return Ee;switch(Ee.constructor){case Date:return new Date(Ee.getTime());case Object:void 0===Re&&(Re={});break;case Array:Re=[];break;default:return Ee}for(const We in Ee)!Ee.hasOwnProperty(We)||!ke(We)||(Re[We]=pe(Re[We],Ee[We]));return Re}function ke(Re){return"__proto__"!==Re}const ve=()=>{try{return function Ge(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Re=process.env.__FIREBASE_DEFAULTS__;return Re?JSON.parse(Re):void 0})()||(()=>{if(typeof document>"u")return;let Re;try{Re=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(We){return}const Ee=Re&&me(Re[1]);return Ee&&JSON.parse(Ee)})()}catch(Re){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Re}`)}},st=()=>{var Re;return null===(Re=ve())||void 0===Re?void 0:Re.config},et=Re=>{var Ee;return null===(Ee=ve())||void 0===Ee?void 0:Ee[`_${Re}`]};class Qe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ee,We)=>{this.resolve=Ee,this.reject=We})}wrapCallback(Ee){return(We,Rt)=>{We?this.reject(We):this.resolve(Rt),"function"==typeof Ee&&(this.promise.catch(()=>{}),1===Ee.length?Ee(We):Ee(We,Rt))}}}function Pe(Re,Ee){if(Re.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Rt=Ee||"demo-project",vt=Re.iat||0,hn=Re.sub||Re.user_id;if(!hn)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Be=Object.assign({iss:`https://securetoken.google.com/${Rt}`,aud:Rt,iat:vt,exp:vt+3600,auth_time:vt,sub:hn,user_id:hn,firebase:{sign_in_provider:"custom",identities:{}}},Re);return[Ue(JSON.stringify({alg:"none",type:"JWT"})),Ue(JSON.stringify(Be)),""].join(".")}function Oe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function J(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oe())}function Xe(){var Re;const Ee=null===(Re=ve())||void 0===Re?void 0:Re.forceEnvironment;if("node"===Ee)return!0;if("browser"===Ee)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(We){return!1}}function Fe(){return"object"==typeof self&&self.self===self}function je(){const Re="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Re&&void 0!==Re.id}function Ke(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function W(){const Re=Oe();return Re.indexOf("MSIE ")>=0||Re.indexOf("Trident/")>=0}function nt(){return!0===a.NODE_CLIENT||!0===a.NODE_ADMIN}function Ie(){return!Xe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function we(){try{return"object"==typeof indexedDB}catch(Re){return!1}}function be(){return new Promise((Re,Ee)=>{try{let We=!0;const Rt="validate-browser-context-for-indexeddb-analytics-module",vt=self.indexedDB.open(Rt);vt.onsuccess=()=>{vt.result.close(),We||self.indexedDB.deleteDatabase(Rt),Re(!0)},vt.onupgradeneeded=()=>{We=!1},vt.onerror=()=>{var hn;Ee((null===(hn=vt.error)||void 0===hn?void 0:hn.message)||"")}}catch(We){Ee(We)}})}function Je(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class rt extends Error{constructor(Ee,We,Rt){super(We),this.code=Ee,this.customData=Rt,this.name="FirebaseError",Object.setPrototypeOf(this,rt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,He.prototype.create)}}class He{constructor(Ee,We,Rt){this.service=Ee,this.serviceName=We,this.errors=Rt}create(Ee,...We){const Rt=We[0]||{},vt=`${this.service}/${Ee}`,hn=this.errors[Ee],Be=hn?function Pt(Re,Ee){return Re.replace(St,(We,Rt)=>{const vt=Ee[Rt];return null!=vt?String(vt):`<${Rt}?>`})}(hn,Rt):"Error";return new rt(vt,`${this.serviceName}: ${Be} (${vt}).`,Rt)}}const St=/\{\$([^}]+)}/g;function Nt(Re){return JSON.parse(Re)}function cn(Re){return JSON.stringify(Re)}const xt=function(Re){let Ee={},We={},Rt={},vt="";try{const hn=Re.split(".");Ee=Nt(me(hn[0])||""),We=Nt(me(hn[1])||""),vt=hn[2],Rt=We.d||{},delete We.d}catch(hn){}return{header:Ee,claims:We,data:Rt,signature:vt}},Un=function(Re){const We=xt(Re).claims;return!!We&&"object"==typeof We&&We.hasOwnProperty("iat")},Qt=function(Re){const Ee=xt(Re).claims;return"object"==typeof Ee&&!0===Ee.admin};function nr(Re,Ee){return Object.prototype.hasOwnProperty.call(Re,Ee)}function Cr(Re,Ee){if(Object.prototype.hasOwnProperty.call(Re,Ee))return Re[Ee]}function _r(Re){for(const Ee in Re)if(Object.prototype.hasOwnProperty.call(Re,Ee))return!1;return!0}function gn(Re,Ee,We){const Rt={};for(const vt in Re)Object.prototype.hasOwnProperty.call(Re,vt)&&(Rt[vt]=Ee.call(We,Re[vt],vt,Re));return Rt}function dr(Re,Ee){if(Re===Ee)return!0;const We=Object.keys(Re),Rt=Object.keys(Ee);for(const vt of We){if(!Rt.includes(vt))return!1;const hn=Re[vt],Be=Ee[vt];if(Yt(hn)&&Yt(Be)){if(!dr(hn,Be))return!1}else if(hn!==Be)return!1}for(const vt of Rt)if(!We.includes(vt))return!1;return!0}function Yt(Re){return null!==Re&&"object"==typeof Re}function Tr(Re){const Ee=[];for(const[We,Rt]of Object.entries(Re))Array.isArray(Rt)?Rt.forEach(vt=>{Ee.push(encodeURIComponent(We)+"="+encodeURIComponent(vt))}):Ee.push(encodeURIComponent(We)+"="+encodeURIComponent(Rt));return Ee.length?"&"+Ee.join("&"):""}function br(Re){const Ee={};return Re.replace(/^\?/,"").split("&").forEach(Rt=>{if(Rt){const[vt,hn]=Rt.split("=");Ee[decodeURIComponent(vt)]=decodeURIComponent(hn)}}),Ee}function ei(Re){const Ee=Re.indexOf("?");if(!Ee)return"";const We=Re.indexOf("#",Ee);return Re.substring(Ee,We>0?We:void 0)}class Ar{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Ee=1;Ee<this.blockSize;++Ee)this.pad_[Ee]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Ee,We){We||(We=0);const Rt=this.W_;if("string"==typeof Ee)for(let Ht=0;Ht<16;Ht++)Rt[Ht]=Ee.charCodeAt(We)<<24|Ee.charCodeAt(We+1)<<16|Ee.charCodeAt(We+2)<<8|Ee.charCodeAt(We+3),We+=4;else for(let Ht=0;Ht<16;Ht++)Rt[Ht]=Ee[We]<<24|Ee[We+1]<<16|Ee[We+2]<<8|Ee[We+3],We+=4;for(let Ht=16;Ht<80;Ht++){const On=Rt[Ht-3]^Rt[Ht-8]^Rt[Ht-14]^Rt[Ht-16];Rt[Ht]=4294967295&(On<<1|On>>>31)}let yt,Ot,vt=this.chain_[0],hn=this.chain_[1],Be=this.chain_[2],$e=this.chain_[3],ge=this.chain_[4];for(let Ht=0;Ht<80;Ht++){Ht<40?Ht<20?(yt=$e^hn&(Be^$e),Ot=1518500249):(yt=hn^Be^$e,Ot=1859775393):Ht<60?(yt=hn&Be|$e&(hn|Be),Ot=2400959708):(yt=hn^Be^$e,Ot=3395469782);const On=(vt<<5|vt>>>27)+yt+ge+Ot+Rt[Ht]&4294967295;ge=$e,$e=Be,Be=4294967295&(hn<<30|hn>>>2),hn=vt,vt=On}this.chain_[0]=this.chain_[0]+vt&4294967295,this.chain_[1]=this.chain_[1]+hn&4294967295,this.chain_[2]=this.chain_[2]+Be&4294967295,this.chain_[3]=this.chain_[3]+$e&4294967295,this.chain_[4]=this.chain_[4]+ge&4294967295}update(Ee,We){if(null==Ee)return;void 0===We&&(We=Ee.length);const Rt=We-this.blockSize;let vt=0;const hn=this.buf_;let Be=this.inbuf_;for(;vt<We;){if(0===Be)for(;vt<=Rt;)this.compress_(Ee,vt),vt+=this.blockSize;if("string"==typeof Ee){for(;vt<We;)if(hn[Be]=Ee.charCodeAt(vt),++Be,++vt,Be===this.blockSize){this.compress_(hn),Be=0;break}}else for(;vt<We;)if(hn[Be]=Ee[vt],++Be,++vt,Be===this.blockSize){this.compress_(hn),Be=0;break}}this.inbuf_=Be,this.total_+=We}digest(){const Ee=[];let We=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let vt=this.blockSize-1;vt>=56;vt--)this.buf_[vt]=255&We,We/=256;this.compress_(this.buf_);let Rt=0;for(let vt=0;vt<5;vt++)for(let hn=24;hn>=0;hn-=8)Ee[Rt]=this.chain_[vt]>>hn&255,++Rt;return Ee}}function xn(Re,Ee){const We=new En(Re,Ee);return We.subscribe.bind(We)}class En{constructor(Ee,We){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=We,this.task.then(()=>{Ee(this)}).catch(Rt=>{this.error(Rt)})}next(Ee){this.forEachObserver(We=>{We.next(Ee)})}error(Ee){this.forEachObserver(We=>{We.error(Ee)}),this.close(Ee)}complete(){this.forEachObserver(Ee=>{Ee.complete()}),this.close()}subscribe(Ee,We,Rt){let vt;if(void 0===Ee&&void 0===We&&void 0===Rt)throw new Error("Missing Observer.");vt=function xr(Re,Ee){if("object"!=typeof Re||null===Re)return!1;for(const We of Ee)if(We in Re&&"function"==typeof Re[We])return!0;return!1}(Ee,["next","error","complete"])?Ee:{next:Ee,error:We,complete:Rt},void 0===vt.next&&(vt.next=Cn),void 0===vt.error&&(vt.error=Cn),void 0===vt.complete&&(vt.complete=Cn);const hn=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?vt.error(this.finalError):vt.complete()}catch(Be){}}),this.observers.push(vt),hn}unsubscribeOne(Ee){void 0===this.observers||void 0===this.observers[Ee]||(delete this.observers[Ee],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ee){if(!this.finalized)for(let We=0;We<this.observers.length;We++)this.sendOne(We,Ee)}sendOne(Ee,We){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ee])try{We(this.observers[Ee])}catch(Rt){typeof console<"u"&&console.error&&console.error(Rt)}})}close(Ee){this.finalized||(this.finalized=!0,void 0!==Ee&&(this.finalError=Ee),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Cn(){}const jr=function(Re,Ee,We,Rt){let vt;if(Rt<Ee?vt="at least "+Ee:Rt>We&&(vt=0===We?"none":"no more than "+We),vt)throw new Error(Re+" failed: Was called with "+Rt+(1===Rt?" argument.":" arguments.")+" Expects "+vt+".")};function Gt(Re,Ee){return`${Re} failed: ${Ee} argument `}function Gi(Re,Ee,We,Rt){if((!Rt||We)&&"function"!=typeof We)throw new Error(Gt(Re,Ee)+"must be a valid function.")}function Sr(Re,Ee,We,Rt){if((!Rt||We)&&("object"!=typeof We||null===We))throw new Error(Gt(Re,Ee)+"must be a valid context object.")}const ui=function(Re){const Ee=[];let We=0;for(let Rt=0;Rt<Re.length;Rt++){let vt=Re.charCodeAt(Rt);if(vt>=55296&&vt<=56319){const hn=vt-55296;Rt++,te(Rt<Re.length,"Surrogate pair missing trail surrogate."),vt=65536+(hn<<10)+(Re.charCodeAt(Rt)-56320)}vt<128?Ee[We++]=vt:vt<2048?(Ee[We++]=vt>>6|192,Ee[We++]=63&vt|128):vt<65536?(Ee[We++]=vt>>12|224,Ee[We++]=vt>>6&63|128,Ee[We++]=63&vt|128):(Ee[We++]=vt>>18|240,Ee[We++]=vt>>12&63|128,Ee[We++]=vt>>6&63|128,Ee[We++]=63&vt|128)}return Ee},sr=function(Re){let Ee=0;for(let We=0;We<Re.length;We++){const Rt=Re.charCodeAt(We);Rt<128?Ee++:Rt<2048?Ee+=2:Rt>=55296&&Rt<=56319?(Ee+=4,We++):Ee+=3}return Ee},hi=1e3,rn=2,$t=144e5,yn=.5;function Mn(Re,Ee=hi,We=rn){const Rt=Ee*Math.pow(We,Re),vt=Math.round(yn*Rt*(Math.random()-.5)*2);return Math.min($t,Rt+vt)}function Or(Re){return Re&&Re._delegate?Re._delegate:Re}},2078:(ln,ft,$)=>{"use strict";$.d(ft,{BX:()=>Qo,dr:()=>Sr,BJ:()=>ui,YG:()=>yn,PM:()=>Pn,FN:()=>jn,tO:()=>Re,W2:()=>hn,fr:()=>Ht,Gu:()=>Wn,gu:()=>fr,Xz:()=>Fi,pK:()=>fi,Ie:()=>Ri,Q$:()=>Nr,q_:()=>vi,jP:()=>ss,g2:()=>In,wd:()=>kr,sr:()=>Ir,Pc:()=>j,r4:()=>fo,IN:()=>or,X1:()=>pr,j9:()=>En});var a=$(4650),te=$(433),z=$(655),Te=$(8421),xe=$(9751),Se=$(5577),de=$(1144),Ae=$(576),Ue=$(3268);const me=["addListener","removeListener"],fe=["addEventListener","removeEventListener"],pe=["on","off"];function ke(f,I,y,P){if((0,Ae.m)(y)&&(P=y,y=void 0),P)return ke(f,I,y).pipe((0,Ue.Z)(P));const[Q,gt]=function Me(f){return(0,Ae.m)(f.addEventListener)&&(0,Ae.m)(f.removeEventListener)}(f)?fe.map(tn=>vn=>f[tn](I,vn,y)):function ut(f){return(0,Ae.m)(f.addListener)&&(0,Ae.m)(f.removeListener)}(f)?me.map(Ge(f,I)):function Dt(f){return(0,Ae.m)(f.on)&&(0,Ae.m)(f.off)}(f)?pe.map(Ge(f,I)):[];if(!Q&&(0,de.z)(f))return(0,Se.z)(tn=>ke(tn,I,y))((0,Te.Xf)(f));if(!Q)throw new TypeError("Invalid event target");return new xe.y(tn=>{const vn=(...Gn)=>tn.next(1<Gn.length?Gn:Gn[0]);return Q(vn),()=>gt(vn)})}function Ge(f,I){return y=>P=>f[y](I,P)}var ve=$(7579),le=$(1135),at=$(2435),Oe=($(181),$(6439),$(7838),$(1898),$(5179)),J=$(5730),Xe=$(1843),je=($(6369),$(3539)),W=($(3457),$(4349),$(1308)),Je=$(9300),Le=$(3900),rt=$(1884),He=$(6895);const St=Oe.i,xt=["*"],Cr=f=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(f):"function"==typeof requestAnimationFrame?requestAnimationFrame(f):setTimeout(f),_r=f=>!!f.resolveComponentFactory;let gn=(()=>{class f{constructor(y,P){this.injector=y,this.el=P,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(y){this.el.nativeElement.value=this.lastValue=null==y?"":y,dr(this.el)}handleChangeEvent(y,P){y===this.el.nativeElement&&(P!==this.lastValue&&(this.lastValue=P,this.onChange(P)),dr(this.el))}_handleBlurEvent(y){y===this.el.nativeElement&&(this.onTouched(),dr(this.el))}registerOnChange(y){this.onChange=y}registerOnTouched(y){this.onTouched=y}setDisabledState(y){this.el.nativeElement.disabled=y}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let y;try{y=this.injector.get(te.a5)}catch(Q){}if(!y)return;y.statusChanges&&(this.statusChanges=y.statusChanges.subscribe(()=>dr(this.el)));const P=y.control;P&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(gt=>{if(typeof P[gt]<"u"){const tn=P[gt].bind(P);P[gt]=(...vn)=>{tn(...vn),dr(this.el)}}})}}return f.\u0275fac=function(y){return new(y||f)(a.Y36(a.zs3),a.Y36(a.SBq))},f.\u0275dir=a.lG2({type:f,hostBindings:function(y,P){1&y&&a.NdJ("ionBlur",function(gt){return P._handleBlurEvent(gt.target)})}}),f})();const dr=f=>{Cr(()=>{const I=f.nativeElement,y=null!=I.value&&I.value.toString().length>0,P=Yt(I);Zr(I,P);const Q=I.closest("ion-item");Q&&Zr(Q,y?[...P,"item-has-value"]:P)})},Yt=f=>{const I=f.classList,y=[];for(let P=0;P<I.length;P++){const Q=I.item(P);null!==Q&&Tr(Q,"ng-")&&y.push(`ion-${Q.substring(3)}`)}return y},Zr=(f,I)=>{const y=f.classList;y.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),y.add(...I)},Tr=(f,I)=>f.substring(0,I.length)===I;let En=(()=>{class f extends gn{constructor(y,P){super(y,P)}_handleInputEvent(y){this.handleChangeEvent(y,y.value)}}return f.\u0275fac=function(y){return new(y||f)(a.Y36(a.zs3),a.Y36(a.SBq))},f.\u0275dir=a.lG2({type:f,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(y,P){1&y&&a.NdJ("ionChange",function(gt){return P._handleInputEvent(gt.target)})},features:[a._Bn([{provide:te.JU,useExisting:f,multi:!0}]),a.qOj]}),f})();const Tn=(f,I)=>{const y=f.prototype;I.forEach(P=>{Object.defineProperty(y,P,{get(){return this.el[P]},set(Q){this.z.runOutsideAngular(()=>this.el[P]=Q)}})})},xr=(f,I)=>{const y=f.prototype;I.forEach(P=>{y[P]=function(){const Q=arguments;return this.z.runOutsideAngular(()=>this.el[P].apply(this.el,Q))}})},Cn=(f,I,y)=>{y.forEach(P=>f[P]=ke(I,P))};function Gt(f){return function(y){const{defineCustomElementFn:P,inputs:Q,methods:gt}=f;return void 0!==P&&P(),Q&&Tn(y,Q),gt&&xr(y,gt),y}}let Sr=(()=>{let f=class{constructor(y,P,Q){this.z=Q,y.detach(),this.el=P.nativeElement}};return f.\u0275fac=function(y){return new(y||f)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},f.\u0275cmp=a.Xpm({type:f,selectors:[["ion-app"]],ngContentSelectors:xt,decls:1,vars:0,template:function(y,P){1&y&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),f=(0,z.gn)([Gt({defineCustomElementFn:void 0})],f),f})(),ui=(()=>{let f=class{constructor(y,P,Q){this.z=Q,y.detach(),this.el=P.nativeElement}};return f.\u0275fac=function(y){return new(y||f)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},f.\u0275cmp=a.Xpm({type:f,selectors:[["ion-avatar"]],ngContentSelectors:xt,decls:1,vars:0,template:function(y,P){1&y&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),f=(0,z.gn)([Gt({defineCustomElementFn:void 0})],f),f})(),yn=(()=>{let f=class{constructor(y,P,Q){this.z=Q,y.detach(),this.el=P.nativeElement,Cn(this,this.el,["ionFocus","ionBlur"])}};return f.\u0275fac=function(y){return new(y||f)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},f.\u0275cmp=a.Xpm({type:f,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:xt,decls:1,vars:0,template:function(y,P){1&y&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),f=(0,z.gn)([Gt({defineCustomElementFn:void 0,inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],f),f})(),Pn=(()=>{let f=class{constructor(y,P,Q){this.z=Q,y.detach(),this.el=P.nativeElement}};return f.\u0275fac=function(y){return new(y||f)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},f.\u0275cmp=a.Xpm({type:f,selectors:[["ion-card"]],inputs:{button:"button",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:xt,decls:1,vars:0,template:function(y,P){1&y&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),f=(0,z.gn)([Gt({defineCustomElementFn:void 0,inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]})],f),f})(),jn=(()=>{let f=class{constructor(y,P,Q){this.z=Q,y.detach(),this.el=P.nativeElement}};return f.\u0275fac=function(y){return new(y||f)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},f.\u0275cmp=a.Xpm({type:f,selectors:[["ion-card-content"]],inputs:{mode:"mode"},ngContentSelectors:xt,decls:1,vars:0,template:function(y,P){1&y&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),f=(0,z.gn)([Gt({defineCustomElementFn:void 0,inputs:["mode"]})],f),f})(),Re=(()=>{let f=class{constructor(y,P,Q){this.z=Q,y.detach(),this.el=P.nativeElement}};return f.\u0275fac=function(y){return new(y||f)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},f.\u0275cmp=a.Xpm({type:f,selectors:[["ion-card-subtitle"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:xt,decls:1,vars:0,template:function(y,P){1&y&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),f=(0,z.gn)([Gt({defineCustomElementFn:void 0,inputs:["color","mode"]})],f),f})(),hn=(()=>{let f=class{constructor(y,P,Q){this.z=Q,y.detach(),this.el=P.nativeElement,Cn(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return f.\u0275fac=function(y){return new(y||f)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},f.\u0275cmp=a.Xpm({type:f,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:xt,decls:1,vars:0,template:function(y,P){1&y&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),f=(0,z.gn)([Gt({defineCustomElementFn:void 0,inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],f),f})(),Ht=(()=>{let f=class{constructor(y,P,Q){this.z=Q,y.detach(),this.el=P.nativeElement}};return f.\u0275fac=function(y){return new(y||f)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},f.\u0275cmp=a.Xpm({type:f,selectors:[["ion-footer"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:xt,decls:1,vars:0,template:function(y,P){1&y&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),f=(0,z.gn)([Gt({defineCustomElementFn:void 0,inputs:["collapse","mode","translucent"]})],f),f})(),Wn=(()=>{let f=class{constructor(y,P,Q){this.z=Q,y.detach(),this.el=P.nativeElement}};return f.\u0275fac=function(y){return new(y||f)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},f.\u0275cmp=a.Xpm({type:f,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:xt,decls:1,vars:0,template:function(y,P){1&y&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),f=(0,z.gn)([Gt({defineCustomElementFn:void 0,inputs:["collapse","mode","translucent"]})],f),f})(),fr=(()=>{let f=class{constructor(y,P,Q){this.z=Q,y.detach(),this.el=P.nativeElement}};return f.\u0275fac=function(y){return new(y||f)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},f.\u0275cmp=a.Xpm({type:f,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:xt,decls:1,vars:0,template:function(y,P){1&y&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),f=(0,z.gn)([Gt({defineCustomElementFn:void 0,inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],f),f})(),Fi=(()=>{let f=class{constructor(y,P,Q){this.z=Q,y.detach(),this.el=P.nativeElement,Cn(this,this.el,["ionImgWillLoad","ionImgDidLoad","ionError"])}};return f.\u0275fac=function(y){return new(y||f)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},f.\u0275cmp=a.Xpm({type:f,selectors:[["ion-img"]],inputs:{alt:"alt",src:"src"},ngContentSelectors:xt,decls:1,vars:0,template:function(y,P){1&y&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),f=(0,z.gn)([Gt({defineCustomElementFn:void 0,inputs:["alt","src"]})],f),f})(),fi=(()=>{let f=class{constructor(y,P,Q){this.z=Q,y.detach(),this.el=P.nativeElement,Cn(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return f.\u0275fac=function(y){return new(y||f)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},f.\u0275cmp=a.Xpm({type:f,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:xt,decls:1,vars:0,template:function(y,P){1&y&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),f=(0,z.gn)([Gt({defineCustomElementFn:void 0,inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","debounce","disabled","enterkeyhint","inputmode","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],f),f})(),Ri=(()=>{let f=class{constructor(y,P,Q){this.z=Q,y.detach(),this.el=P.nativeElement}};return f.\u0275fac=function(y){return new(y||f)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},f.\u0275cmp=a.Xpm({type:f,selectors:[["ion-item"]],inputs:{button:"button",color:"color",counter:"counter",counterFormatter:"counterFormatter",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",fill:"fill",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",target:"target",type:"type"},ngContentSelectors:xt,decls:1,vars:0,template:function(y,P){1&y&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),f=(0,z.gn)([Gt({defineCustomElementFn:void 0,inputs:["button","color","counter","counterFormatter","detail","detailIcon","disabled","download","fill","href","lines","mode","rel","routerAnimation","routerDirection","shape","target","type"]})],f),f})(),Nr=(()=>{let f=class{constructor(y,P,Q){this.z=Q,y.detach(),this.el=P.nativeElement}};return f.\u0275fac=function(y){return new(y||f)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},f.\u0275cmp=a.Xpm({type:f,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:xt,decls:1,vars:0,template:function(y,P){1&y&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),f=(0,z.gn)([Gt({defineCustomElementFn:void 0,inputs:["color","mode","position"]})],f),f})(),vi=(()=>{let f=class{constructor(y,P,Q){this.z=Q,y.detach(),this.el=P.nativeElement}};return f.\u0275fac=function(y){return new(y||f)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},f.\u0275cmp=a.Xpm({type:f,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:xt,decls:1,vars:0,template:function(y,P){1&y&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),f=(0,z.gn)([Gt({defineCustomElementFn:void 0,inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],f),f})(),In=(()=>{let f=class{constructor(y,P,Q){this.z=Q,y.detach(),this.el=P.nativeElement,Cn(this,this.el,["ionChange","ionInput","ionBlur","ionFocus"])}};return f.\u0275fac=function(y){return new(y||f)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},f.\u0275cmp=a.Xpm({type:f,selectors:[["ion-textarea"]],inputs:{autoGrow:"autoGrow",autocapitalize:"autocapitalize",autofocus:"autofocus",clearOnEdit:"clearOnEdit",color:"color",cols:"cols",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",maxlength:"maxlength",minlength:"minlength",mode:"mode",name:"name",placeholder:"placeholder",readonly:"readonly",required:"required",rows:"rows",spellcheck:"spellcheck",value:"value",wrap:"wrap"},ngContentSelectors:xt,decls:1,vars:0,template:function(y,P){1&y&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),f=(0,z.gn)([Gt({defineCustomElementFn:void 0,inputs:["autoGrow","autocapitalize","autofocus","clearOnEdit","color","cols","debounce","disabled","enterkeyhint","inputmode","maxlength","minlength","mode","name","placeholder","readonly","required","rows","spellcheck","value","wrap"],methods:["setFocus","getInputElement"]})],f),f})(),kr=(()=>{let f=class{constructor(y,P,Q){this.z=Q,y.detach(),this.el=P.nativeElement}};return f.\u0275fac=function(y){return new(y||f)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},f.\u0275cmp=a.Xpm({type:f,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:xt,decls:1,vars:0,template:function(y,P){1&y&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),f=(0,z.gn)([Gt({defineCustomElementFn:void 0,inputs:["color","size"]})],f),f})(),Ir=(()=>{let f=class{constructor(y,P,Q){this.z=Q,y.detach(),this.el=P.nativeElement}};return f.\u0275fac=function(y){return new(y||f)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},f.\u0275cmp=a.Xpm({type:f,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:xt,decls:1,vars:0,template:function(y,P){1&y&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),f=(0,z.gn)([Gt({defineCustomElementFn:void 0,inputs:["color","mode"]})],f),f})();class pr{constructor(I={}){this.data=I}get(I){return this.data[I]}}let Kn=(()=>{class f{constructor(y,P){this.zone=y,this.appRef=P}create(y,P,Q,gt){return new gi(y,P,Q,this.appRef,this.zone,gt)}}return f.\u0275fac=function(y){return new(y||f)(a.LFG(a.R0b),a.LFG(a.z2F))},f.\u0275prov=a.Yz7({token:f,factory:f.\u0275fac}),f})();class gi{constructor(I,y,P,Q,gt,tn){this.resolverOrInjector=I,this.injector=y,this.location=P,this.appRef=Q,this.zone=gt,this.elementReferenceKey=tn,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(I,y,P,Q){return this.zone.run(()=>new Promise(gt=>{const tn=Object.assign({},P);void 0!==this.elementReferenceKey&&(tn[this.elementReferenceKey]=I),gt(ii(this.zone,this.resolverOrInjector,this.injector,this.location,this.appRef,this.elRefMap,this.elEventsMap,I,y,tn,Q))}))}removeViewFromDom(I,y){return this.zone.run(()=>new Promise(P=>{const Q=this.elRefMap.get(y);if(Q){Q.destroy(),this.elRefMap.delete(y);const gt=this.elEventsMap.get(y);gt&&(gt(),this.elEventsMap.delete(y))}P()}))}}const ii=(f,I,y,P,Q,gt,tn,vn,Gn,Rr,Zn)=>{let Br;const Ji=a.zs3.create({providers:Io(Rr),parent:y});if(I&&_r(I)){const js=I.resolveComponentFactory(Gn);Br=P?P.createComponent(js,P.length,Ji):js.create(Ji)}else{if(!P)return null;Br=P.createComponent(Gn,{index:P.indexOf,injector:Ji,environmentInjector:I})}const Ui=Br.instance,si=Br.location.nativeElement;if(Rr&&Object.assign(Ui,Rr),Zn)for(const js of Zn)si.classList.add(js);const la=uo(f,Ui,si);return vn.appendChild(si),P||Q.attachView(Br.hostView),Br.changeDetectorRef.reattach(),gt.set(si,Br),tn.set(si,la),si},lo=[Xe.L,Xe.a,Xe.b,Xe.c,Xe.d],uo=(f,I,y)=>f.run(()=>{const P=lo.filter(Q=>"function"==typeof I[Q]).map(Q=>{const gt=tn=>I[Q](tn.detail);return y.addEventListener(Q,gt),()=>y.removeEventListener(Q,gt)});return()=>P.forEach(Q=>Q())}),Ls=new a.OlP("NavParamsToken"),Io=f=>[{provide:Ls,useValue:f},{provide:pr,useFactory:Vr,deps:[Ls]}],Vr=f=>new pr(f),ni=(f,I)=>((f=f.filter(y=>y.stackId!==I.stackId)).push(I),f),Bi=(f,I)=>{const y=f.createUrlTree(["."],{relativeTo:I});return f.serializeUrl(y)},Ss=(f,I)=>{if(!f)return;const y=Zs(I);for(let P=0;P<y.length;P++){if(P>=f.length)return y[P];if(y[P]!==f[P])return}},Zs=f=>f.split("/").map(I=>I.trim()).filter(I=>""!==I),ns=f=>{f&&(f.ref.destroy(),f.unlistenEvents())};class Qs{constructor(I,y,P,Q,gt,tn){this.containerEl=y,this.router=P,this.navCtrl=Q,this.zone=gt,this.location=tn,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==I?Zs(I):void 0}createView(I,y){var P;const Q=Bi(this.router,y),gt=null===(P=null==I?void 0:I.location)||void 0===P?void 0:P.nativeElement,tn=uo(this.zone,I.instance,gt);return{id:this.nextId++,stackId:Ss(this.tabsPrefix,Q),unlistenEvents:tn,element:gt,ref:I,url:Q}}getExistingView(I){const y=Bi(this.router,I),P=this.views.find(Q=>Q.url===y);return P&&P.ref.changeDetectorRef.reattach(),P}setActive(I){var y,P;const Q=this.navCtrl.consumeTransition();let{direction:gt,animation:tn,animationBuilder:vn}=Q;const Gn=this.activeView,Rr=((f,I)=>!I||f.stackId!==I.stackId)(I,Gn);Rr&&(gt="back",tn=void 0);const Zn=this.views.slice();let Br;const Ji=this.router;Ji.getCurrentNavigation?Br=Ji.getCurrentNavigation():!(null===(y=Ji.navigations)||void 0===y)&&y.value&&(Br=Ji.navigations.value),null!==(P=null==Br?void 0:Br.extras)&&void 0!==P&&P.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const Ui=this.views.includes(I),si=this.insertView(I,gt);Ui||I.ref.changeDetectorRef.detectChanges();const la=I.animationBuilder;return void 0===vn&&"back"===gt&&!Rr&&void 0!==la&&(vn=la),Gn&&(Gn.animationBuilder=vn),this.zone.runOutsideAngular(()=>this.wait(()=>(Gn&&Gn.ref.changeDetectorRef.detach(),I.ref.changeDetectorRef.reattach(),this.transition(I,Gn,tn,this.canGoBack(1),!1,vn).then(()=>Bs(I,si,Zn,this.location,this.zone)).then(()=>({enteringView:I,direction:gt,animation:tn,tabSwitch:Rr})))))}canGoBack(I,y=this.getActiveStackId()){return this.getStack(y).length>I}pop(I,y=this.getActiveStackId()){return this.zone.run(()=>{var P,Q;const gt=this.getStack(y);if(gt.length<=I)return Promise.resolve(!1);const tn=gt[gt.length-I-1];let vn=tn.url;const Gn=tn.savedData;if(Gn){const Zn=Gn.get("primary");null!==(Q=null===(P=null==Zn?void 0:Zn.route)||void 0===P?void 0:P._routerState)&&void 0!==Q&&Q.snapshot.url&&(vn=Zn.route._routerState.snapshot.url)}const{animationBuilder:Rr}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(vn,Object.assign(Object.assign({},tn.savedExtras),{animation:Rr})).then(()=>!0)})}startBackTransition(){const I=this.activeView;if(I){const y=this.getStack(I.stackId),P=y[y.length-2],Q=P.animationBuilder;return this.wait(()=>this.transition(P,I,"back",this.canGoBack(2),!0,Q))}return Promise.resolve()}endBackTransition(I){I?(this.skipTransition=!0,this.pop(1)):this.activeView&&ys(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(I){const y=this.getStack(I);return y.length>0?y[y.length-1]:void 0}getRootUrl(I){const y=this.getStack(I);return y.length>0?y[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(ns),this.activeView=void 0,this.views=[]}getStack(I){return this.views.filter(y=>y.stackId===I)}insertView(I,y){return this.activeView=I,this.views=((f,I,y)=>"root"===y?ni(f,I):"forward"===y?((f,I)=>(f.indexOf(I)>=0?f=f.filter(P=>P.stackId!==I.stackId||P.id<=I.id):f.push(I),f))(f,I):((f,I)=>f.indexOf(I)>=0?f.filter(P=>P.stackId!==I.stackId||P.id<=I.id):ni(f,I))(f,I))(this.views,I,y),this.views.slice()}transition(I,y,P,Q,gt,tn){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(y===I)return Promise.resolve(!1);const vn=I?I.element:void 0,Gn=y?y.element:void 0,Rr=this.containerEl;return vn&&vn!==Gn&&(vn.classList.add("ion-page"),vn.classList.add("ion-page-invisible"),vn.parentElement!==Rr&&Rr.appendChild(vn),Rr.commit)?Rr.commit(vn,Gn,{deepWait:!0,duration:void 0===P?0:void 0,direction:P,showGoBack:Q,progressAnimation:gt,animationBuilder:tn}):Promise.resolve(!1)}wait(I){return(0,z.mG)(this,void 0,void 0,function*(){void 0!==this.runningTask&&(yield this.runningTask,this.runningTask=void 0);const y=this.runningTask=I();return y.finally(()=>this.runningTask=void 0),y})}}const Bs=(f,I,y,P,Q)=>"function"==typeof requestAnimationFrame?new Promise(gt=>{requestAnimationFrame(()=>{ys(f,I,y,P,Q),gt()})}):Promise.resolve(),ys=(f,I,y,P,Q)=>{Q.run(()=>y.filter(gt=>!I.includes(gt)).forEach(ns)),I.forEach(gt=>{const vn=P.path().split("?")[0].split("#")[0];if(gt!==f&&gt.url!==vn){const Gn=gt.element;Gn.setAttribute("aria-hidden","true"),Gn.classList.add("ion-page-hidden"),gt.ref.changeDetectorRef.detach()}})};let Pi=(()=>{class f{get(y,P){const Q=bo();return Q?Q.get(y,P):null}getBoolean(y,P){const Q=bo();return!!Q&&Q.getBoolean(y,P)}getNumber(y,P){const Q=bo();return Q?Q.getNumber(y,P):0}}return f.\u0275fac=function(y){return new(y||f)},f.\u0275prov=a.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})();const rs=new a.OlP("USERCONFIG"),bo=()=>{if(typeof window<"u"){const f=window.Ionic;if(null!=f&&f.config)return f.config}return null};let is=(()=>{class f{constructor(y,P){this.doc=y,this.backButton=new ve.x,this.keyboardDidShow=new ve.x,this.keyboardDidHide=new ve.x,this.pause=new ve.x,this.resume=new ve.x,this.resize=new ve.x,P.run(()=>{var Q;let gt;this.win=y.defaultView,this.backButton.subscribeWithPriority=function(tn,vn){return this.subscribe(Gn=>Gn.register(tn,Rr=>P.run(()=>vn(Rr))))},zr(this.pause,y,"pause"),zr(this.resume,y,"resume"),zr(this.backButton,y,"ionBackButton"),zr(this.resize,this.win,"resize"),zr(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),zr(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(tn=>{gt=tn}),null!==(Q=this.win)&&void 0!==Q&&Q.cordova?y.addEventListener("deviceready",()=>{gt("cordova")},{once:!0}):gt("dom")})}is(y){return(0,Oe.a)(this.win,y)}platforms(){return(0,Oe.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(y){return Lo(this.win.location.href,y)}isLandscape(){return!this.isPortrait()}isPortrait(){var y,P;return null===(P=(y=this.win).matchMedia)||void 0===P?void 0:P.call(y,"(orientation: portrait)").matches}testUserAgent(y){const P=this.win.navigator;return!!(null!=P&&P.userAgent&&P.userAgent.indexOf(y)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return f.\u0275fac=function(y){return new(y||f)(a.LFG(He.K0),a.LFG(a.R0b))},f.\u0275prov=a.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})();const Lo=(f,I)=>{I=I.replace(/[[\]\\]/g,"\\$&");const P=new RegExp("[\\?&]"+I+"=([^&#]*)").exec(f);return P?decodeURIComponent(P[1].replace(/\+/g," ")):null},zr=(f,I,y)=>{I&&I.addEventListener(y,P=>{f.next(null!=P?P.detail:void 0)})};let bi=(()=>{class f{constructor(y,P,Q,gt){this.location=P,this.serializer=Q,this.router=gt,this.direction=us,this.animated=As,this.guessDirection="forward",this.lastNavId=-1,gt&&gt.events.subscribe(tn=>{if(tn instanceof at.OD){const vn=tn.restoredState?tn.restoredState.navigationId:tn.id;this.guessDirection=vn<this.lastNavId?"back":"forward",this.guessAnimation=tn.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?tn.id:vn}}),y.backButton.subscribeWithPriority(0,tn=>{this.pop(),tn()})}navigateForward(y,P={}){return this.setDirection("forward",P.animated,P.animationDirection,P.animation),this.navigate(y,P)}navigateBack(y,P={}){return this.setDirection("back",P.animated,P.animationDirection,P.animation),this.navigate(y,P)}navigateRoot(y,P={}){return this.setDirection("root",P.animated,P.animationDirection,P.animation),this.navigate(y,P)}back(y={animated:!0,animationDirection:"back"}){return this.setDirection("back",y.animated,y.animationDirection,y.animation),this.location.back()}pop(){return(0,z.mG)(this,void 0,void 0,function*(){let y=this.topOutlet;for(;y&&!(yield y.pop());)y=y.parentOutlet})}setDirection(y,P,Q,gt){this.direction=y,this.animated=gr(y,P,Q),this.animationBuilder=gt}setTopOutlet(y){this.topOutlet=y}consumeTransition(){let P,y="root";const Q=this.animationBuilder;return"auto"===this.direction?(y=this.guessDirection,P=this.guessAnimation):(P=this.animated,y=this.direction),this.direction=us,this.animated=As,this.animationBuilder=void 0,{direction:y,animation:P,animationBuilder:Q}}navigate(y,P){if(Array.isArray(y))return this.router.navigate(y,P);{const Q=this.serializer.parse(y.toString());return void 0!==P.queryParams&&(Q.queryParams=Object.assign({},P.queryParams)),void 0!==P.fragment&&(Q.fragment=P.fragment),this.router.navigateByUrl(Q,P)}}}return f.\u0275fac=function(y){return new(y||f)(a.LFG(is),a.LFG(He.Ye),a.LFG(at.Hx),a.LFG(at.F0,8))},f.\u0275prov=a.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})();const gr=(f,I,y)=>{if(!1!==I){if(void 0!==y)return y;if("forward"===f||"back"===f)return f;if("root"===f&&!0===I)return"forward"}},us="auto",As=void 0;let ss=(()=>{class f{constructor(y,P,Q,gt,tn,vn,Gn,Rr,Zn,Br,Ji,Ui,si){this.parentContexts=y,this.location=P,this.config=tn,this.navCtrl=vn,this.componentFactoryResolver=Gn,this.parentOutlet=si,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new le.X(null),this.stackEvents=new a.vpe,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.nativeEl=Zn.nativeElement,this.name=Q||at.eC,this.tabsPrefix="true"===gt?Bi(Br,Ui):void 0,this.stackCtrl=new Qs(this.tabsPrefix,this.nativeEl,Br,vn,Ji,Rr),y.onChildOutletCreated(this.name,this)}set animation(y){this.nativeEl.animation=y}set animated(y){this.nativeEl.animated=y}set swipeGesture(y){this._swipeGesture=y,this.nativeEl.swipeHandler=y?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:P=>this.stackCtrl.endBackTransition(P)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){if(!this.activated){const y=this.getContext();null!=y&&y.route&&this.activateWith(y.route,y.resolver||null)}new Promise(y=>(0,J.c)(this.nativeEl,y)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(y,P){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const P=this.getContext();this.activatedView.savedData=new Map(P.children.contexts);const Q=this.activatedView.savedData.get("primary");if(Q&&P.route&&(Q.route=Object.assign({},P.route)),this.activatedView.savedExtras={},P.route){const gt=P.route.snapshot;this.activatedView.savedExtras.queryParams=gt.queryParams,this.activatedView.savedExtras.fragment=gt.fragment}}const y=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(y)}}activateWith(y,P){var Q;if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=y;let gt,tn=this.stackCtrl.getExistingView(y);if(tn){gt=this.activated=tn.ref;const vn=tn.savedData;vn&&(this.getContext().children.contexts=vn),this.updateActivatedRouteProxy(gt.instance,y)}else{const vn=y._futureSnapshot;if(null==vn.routeConfig.component&&null==this.environmentInjector)return void console.warn('[Ionic Warning]: You must supply an environmentInjector to use standalone components with routing:\n\nIn your component class, add:\n\n   import { EnvironmentInjector } from \'@angular/core\';\n   constructor(public environmentInjector: EnvironmentInjector) {}\n\nIn your router outlet template, add:\n\n   <ion-router-outlet [environmentInjector]="environmentInjector"></ion-router-outlet>\n\nAlternatively, if you are routing within ion-tabs:\n\n   <ion-tabs [environmentInjector]="environmentInjector"></ion-tabs>');const Gn=this.parentContexts.getOrCreateContext(this.name).children,Rr=new le.X(null),Zn=this.createActivatedRouteProxy(Rr,y),Br=new Ni(Zn,Gn,this.location.injector),Ji=null!==(Q=vn.routeConfig.component)&&void 0!==Q?Q:vn.component;if((P=P||this.componentFactoryResolver)&&_r(P)){const Ui=P.resolveComponentFactory(Ji);gt=this.activated=this.location.createComponent(Ui,this.location.length,Br)}else gt=this.activated=this.location.createComponent(Ji,{index:this.location.length,injector:Br,environmentInjector:null!=P?P:this.environmentInjector});Rr.next(gt.instance),tn=this.stackCtrl.createView(this.activated,y),this.proxyMap.set(gt.instance,Zn),this.currentActivatedRoute$.next({component:gt.instance,activatedRoute:y})}this.activatedView=tn,this.navCtrl.setTopOutlet(this),this.stackCtrl.setActive(tn).then(vn=>{this.activateEvents.emit(gt.instance),this.stackEvents.emit(vn)})}canGoBack(y=1,P){return this.stackCtrl.canGoBack(y,P)}pop(y=1,P){return this.stackCtrl.pop(y,P)}getLastUrl(y){const P=this.stackCtrl.getLastUrl(y);return P?P.url:void 0}getLastRouteView(y){return this.stackCtrl.getLastUrl(y)}getRootView(y){return this.stackCtrl.getRootUrl(y)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(y,P){const Q=new at.gz;return Q._futureSnapshot=P._futureSnapshot,Q._routerState=P._routerState,Q.snapshot=P.snapshot,Q.outlet=P.outlet,Q.component=P.component,Q._paramMap=this.proxyObservable(y,"paramMap"),Q._queryParamMap=this.proxyObservable(y,"queryParamMap"),Q.url=this.proxyObservable(y,"url"),Q.params=this.proxyObservable(y,"params"),Q.queryParams=this.proxyObservable(y,"queryParams"),Q.fragment=this.proxyObservable(y,"fragment"),Q.data=this.proxyObservable(y,"data"),Q}proxyObservable(y,P){return y.pipe((0,Je.h)(Q=>!!Q),(0,Le.w)(Q=>this.currentActivatedRoute$.pipe((0,Je.h)(gt=>null!==gt&&gt.component===Q),(0,Le.w)(gt=>gt&&gt.activatedRoute[P]),(0,rt.x)())))}updateActivatedRouteProxy(y,P){const Q=this.proxyMap.get(y);if(!Q)throw new Error("Could not find activated route proxy for view");Q._futureSnapshot=P._futureSnapshot,Q._routerState=P._routerState,Q.snapshot=P.snapshot,Q.outlet=P.outlet,Q.component=P.component,this.currentActivatedRoute$.next({component:y,activatedRoute:P})}}return f.\u0275fac=function(y){return new(y||f)(a.Y36(at.y6),a.Y36(a.s_b),a.$8M("name"),a.$8M("tabs"),a.Y36(Pi),a.Y36(bi),a.Y36(a._Vd,8),a.Y36(He.Ye),a.Y36(a.SBq),a.Y36(at.F0),a.Y36(a.R0b),a.Y36(at.gz),a.Y36(f,12))},f.\u0275dir=a.lG2({type:f,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture",environmentInjector:"environmentInjector"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),f})();class Ni{constructor(I,y,P){this.route=I,this.childContexts=y,this.parent=P}get(I,y){return I===at.gz?this.route:I===at.y6?this.childContexts:this.parent.get(I,y)}}class $i{constructor(I){this.ctrl=I}create(I){return this.ctrl.create(I||{})}dismiss(I,y,P){return this.ctrl.dismiss(I,y,P)}getTop(){return this.ctrl.getTop()}}let Qo=(()=>{class f extends $i{constructor(){super(je.b)}}return f.\u0275fac=function(y){return new(y||f)},f.\u0275prov=a.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})();class eo{}let or=(()=>{class f extends $i{constructor(y,P,Q,gt){super(je.m),this.angularDelegate=y,this.resolver=P,this.injector=Q,this.environmentInjector=gt}create(y){var P;return super.create(Object.assign(Object.assign({},y),{delegate:this.angularDelegate.create(null!==(P=this.resolver)&&void 0!==P?P:this.environmentInjector,this.injector,void 0,"modal")}))}}return f.\u0275fac=function(y){return new(y||f)(a.LFG(Kn),a.LFG(a._Vd),a.LFG(a.zs3),a.LFG(eo,8))},f.\u0275prov=a.Yz7({token:f,factory:f.\u0275fac}),f})(),Do=(()=>{class f extends $i{constructor(y,P,Q,gt){super(je.c),this.angularDelegate=y,this.resolver=P,this.injector=Q,this.environmentInjector=gt}create(y){var P;return super.create(Object.assign(Object.assign({},y),{delegate:this.angularDelegate.create(null!==(P=this.resolver)&&void 0!==P?P:this.environmentInjector,this.injector,void 0,"popover")}))}}return f.\u0275fac=function(y){return new(y||f)(a.LFG(Kn),a.LFG(a._Vd),a.LFG(a.zs3),a.LFG(eo,8))},f.\u0275prov=a.Yz7({token:f,factory:f.\u0275fac}),f})();class fo{shouldDetach(I){return!1}shouldAttach(I){return!1}store(I,y){}retrieve(I){return null}shouldReuseRoute(I,y){if(I.routeConfig!==y.routeConfig)return!1;const P=I.params,Q=y.params,gt=Object.keys(P),tn=Object.keys(Q);if(gt.length!==tn.length)return!1;for(const vn of gt)if(Q[vn]!==P[vn])return!1;return!0}}const To=(f,I,y)=>()=>{if(I.defaultView&&typeof window<"u"){(f=>{const I=window,y=I.Ionic;y&&y.config&&"Object"!==y.config.constructor.name||(I.Ionic=I.Ionic||{},I.Ionic.config=Object.assign(Object.assign({},I.Ionic.config),f))})(Object.assign(Object.assign({},f),{_zoneGate:gt=>y.run(gt)}));const Q="__zone_symbol__addEventListener"in I.body?"__zone_symbol__addEventListener":"addEventListener";return function Pt(){var f=[];if(typeof window<"u"){var I=window;(!I.customElements||I.Element&&(!I.Element.prototype.closest||!I.Element.prototype.matches||!I.Element.prototype.remove||!I.Element.prototype.getRootNode))&&f.push($.e(6748).then($.t.bind($,723,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||I.NodeList&&!I.NodeList.prototype.forEach||!I.fetch||!function(){try{var P=new URL("b","http://a");return P.pathname="c%20d","http://a/c%20d"===P.href&&P.searchParams}catch(Q){return!1}}()||typeof WeakMap>"u")&&f.push($.e(2214).then($.t.bind($,4144,23)))}return Promise.all(f)}().then(()=>((f,I)=>typeof window>"u"?Promise.resolve():(0,W.p)().then(()=>(St(),(0,W.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[1],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[4],"layout":[1],"type":[1],"value":[1],"checked":[32],"setFocus":[64]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[1,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[34,"ion-input",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"inputmode":[1],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"activated":[32]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-textarea",[[34,"ion-textarea",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[1028,"clear-on-edit"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"swipeToClose":[4,"swipe-to-close"],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-slide_2",[[0,"ion-slide"],[36,"ion-slides",{"options":[8],"pager":[4],"scrollbar":[4],"update":[64],"updateAutoHeight":[64],"slideTo":[64],"slideNext":[64],"slidePrev":[64],"getActiveIndex":[64],"getPreviousIndex":[64],"length":[64],"isEnd":[64],"isBeginning":[64],"startAutoplay":[64],"stopAutoplay":[64],"lockSwipeToNext":[64],"lockSwipeToPrev":[64],"lockSwipes":[64],"getSwiper":[64]}]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-virtual-scroll",[[0,"ion-virtual-scroll",{"approxItemHeight":[2,"approx-item-height"],"approxHeaderHeight":[2,"approx-header-height"],"approxFooterHeight":[2,"approx-footer-height"],"headerFn":[16],"footerFn":[16],"items":[16],"itemHeight":[16],"headerHeight":[16],"footerHeight":[16],"renderItem":[16],"renderHeader":[16],"renderFooter":[16],"nodeRender":[16],"domRender":[16],"totalHeight":[32],"positionForItem":[64],"checkRange":[64],"checkEnd":[64]},[[9,"resize","onResize"]]]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]}]]],["ion-picker-internal",[[33,"ion-picker-internal",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32],"ariaLabel":[32]}]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isPresented":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8]}]]],["ion-select_3",[[33,"ion-select",{"disabled":[4],"cancelText":[1,"cancel-text"],"okText":[1,"ok-text"],"placeholder":[1],"name":[1],"selectedText":[1,"selected-text"],"multiple":[4],"interface":[1],"interfaceOptions":[8,"interface-options"],"compareWith":[1,"compare-with"],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]},[[0,"ionChange","onSelect"]]]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"],[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionChange","handleIonChange"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]]]'),I))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:Cr,jmp:gt=>y.runOutsideAngular(gt),ael(gt,tn,vn,Gn){gt[Q](tn,vn,Gn)},rel(gt,tn,vn,Gn){gt.removeEventListener(tn,vn,Gn)}}))}};let j=(()=>{class f{static forRoot(y){return{ngModule:f,providers:[{provide:rs,useValue:y},{provide:a.ip1,useFactory:To,multi:!0,deps:[rs,He.K0,a.R0b]}]}}}return f.\u0275fac=function(y){return new(y||f)},f.\u0275mod=a.oAB({type:f}),f.\u0275inj=a.cJS({providers:[Kn,or,Do],imports:[[He.ez]]}),f})()},181:(ln,ft,$)=>{"use strict";$.d(ft,{c:()=>Dt});var a=$(5730),te=$(3457);let z;const xe=Me=>Me.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Se=Me=>(void 0===z&&(z=void 0===Me.style.animationName&&void 0!==Me.style.webkitAnimationName?"-webkit-":""),z),de=(Me,ve,le)=>{const at=ve.startsWith("animation")?Se(Me):"";Me.style.setProperty(at+ve,le)},Ae=(Me,ve)=>{const le=ve.startsWith("animation")?Se(Me):"";Me.style.removeProperty(le+ve)},fe=[],ut=(Me=[],ve)=>{if(void 0!==ve){const le=Array.isArray(ve)?ve:[ve];return[...Me,...le]}return Me},Dt=Me=>{let ve,le,at,st,et,Qe,Fe,we,be,Je,Le,St,Nt,Pe=[],Oe=[],J=[],Xe=!1,je={},Ke=[],tt=[],W={},pt=0,nt=!1,Ie=!1,rt=!0,He=!1,Pt=!0,cn=!1;const xt=Me,Dn=[],Ln=[],Un=[],Qt=[],nr=[],Cr=[],_r=[],gn=[],dr=[],Yt=[],Zr="function"==typeof AnimationEffect||void 0!==te.w&&"function"==typeof te.w.AnimationEffect,Tr="function"==typeof Element&&"function"==typeof Element.prototype.animate&&Zr,ei=()=>Yt,xr=(ce,Ye)=>((null!=Ye&&Ye.oneTimeCallback?Ln:Dn).push({c:ce,o:Ye}),Nt),jr=()=>{if(Tr)Yt.forEach(ce=>{ce.cancel()}),Yt.length=0;else{const ce=Un.slice();(0,a.r)(()=>{ce.forEach(Ye=>{Ae(Ye,"animation-name"),Ae(Ye,"animation-duration"),Ae(Ye,"animation-timing-function"),Ae(Ye,"animation-iteration-count"),Ae(Ye,"animation-delay"),Ae(Ye,"animation-play-state"),Ae(Ye,"animation-fill-mode"),Ae(Ye,"animation-direction")})})}},Gt=()=>{nr.forEach(ce=>{null!=ce&&ce.parentNode&&ce.parentNode.removeChild(ce)}),nr.length=0},jn=()=>void 0!==et?et:Fe?Fe.getFill():"both",Or=()=>void 0!==be?be:void 0!==Qe?Qe:Fe?Fe.getDirection():"normal",Re=()=>nt?"linear":void 0!==at?at:Fe?Fe.getEasing():"linear",Ee=()=>Ie?0:void 0!==Je?Je:void 0!==le?le:Fe?Fe.getDuration():0,We=()=>void 0!==st?st:Fe?Fe.getIterations():1,Rt=()=>void 0!==Le?Le:void 0!==ve?ve:Fe?Fe.getDelay():0,fi=()=>{0!==pt&&(pt--,0===pt&&((()=>{Qr(),gn.forEach(Lt=>Lt()),dr.forEach(Lt=>Lt());const ce=rt?1:0,Ye=Ke,dt=tt,Ct=W;Un.forEach(Lt=>{const sn=Lt.classList;Ye.forEach(Sn=>sn.add(Sn)),dt.forEach(Sn=>sn.remove(Sn));for(const Sn in Ct)Ct.hasOwnProperty(Sn)&&de(Lt,Sn,Ct[Sn])}),Dn.forEach(Lt=>Lt.c(ce,Nt)),Ln.forEach(Lt=>Lt.c(ce,Nt)),Ln.length=0,Pt=!0,rt&&(He=!0),rt=!0})(),Fe&&Fe.animationFinish()))},Ri=(ce=!0)=>{Gt();const Ye=(Me=>(Me.forEach(ve=>{for(const le in ve)if(ve.hasOwnProperty(le)){const at=ve[le];if("easing"===le)ve["animation-timing-function"]=at,delete ve[le];else{const st=xe(le);st!==le&&(ve[st]=at,delete ve[le])}}}),Me))(Pe);Un.forEach(dt=>{if(Ye.length>0){const Ct=((Me=[])=>Me.map(ve=>{const le=ve.offset,at=[];for(const st in ve)ve.hasOwnProperty(st)&&"offset"!==st&&at.push(`${st}: ${ve[st]};`);return`${100*le}% { ${at.join(" ")} }`}).join(" "))(Ye);St=void 0!==Me?Me:(Me=>{let ve=fe.indexOf(Me);return ve<0&&(ve=fe.push(Me)-1),`ion-animation-${ve}`})(Ct);const Lt=((Me,ve,le)=>{var at;const st=(Me=>{const ve=void 0!==Me.getRootNode?Me.getRootNode():Me;return ve.head||ve})(le),et=Se(le),Qe=st.querySelector("#"+Me);if(Qe)return Qe;const Pe=(null!==(at=le.ownerDocument)&&void 0!==at?at:document).createElement("style");return Pe.id=Me,Pe.textContent=`@${et}keyframes ${Me} { ${ve} } @${et}keyframes ${Me}-alt { ${ve} }`,st.appendChild(Pe),Pe})(St,Ct,dt);nr.push(Lt),de(dt,"animation-duration",`${Ee()}ms`),de(dt,"animation-timing-function",Re()),de(dt,"animation-delay",`${Rt()}ms`),de(dt,"animation-fill-mode",jn()),de(dt,"animation-direction",Or());const sn=We()===1/0?"infinite":We().toString();de(dt,"animation-iteration-count",sn),de(dt,"animation-play-state","paused"),ce&&de(dt,"animation-name",`${Lt.id}-alt`),(0,a.r)(()=>{de(dt,"animation-name",Lt.id||null)})}})},ls=(ce=!0)=>{(()=>{Cr.forEach(Ct=>Ct()),_r.forEach(Ct=>Ct());const ce=Oe,Ye=J,dt=je;Un.forEach(Ct=>{const Lt=Ct.classList;ce.forEach(sn=>Lt.add(sn)),Ye.forEach(sn=>Lt.remove(sn));for(const sn in dt)dt.hasOwnProperty(sn)&&de(Ct,sn,dt[sn])})})(),Pe.length>0&&(Tr?(Un.forEach(ce=>{const Ye=ce.animate(Pe,{id:xt,delay:Rt(),duration:Ee(),easing:Re(),iterations:We(),fill:jn(),direction:Or()});Ye.pause(),Yt.push(Ye)}),Yt.length>0&&(Yt[0].onfinish=()=>{fi()})):Ri(ce)),Xe=!0},zi=ce=>{if(ce=Math.min(Math.max(ce,0),.9999),Tr)Yt.forEach(Ye=>{Ye.currentTime=Ye.effect.getComputedTiming().delay+Ee()*ce,Ye.pause()});else{const Ye=`-${Ee()*ce}ms`;Un.forEach(dt=>{Pe.length>0&&(de(dt,"animation-delay",Ye),de(dt,"animation-play-state","paused"))})}},Qn=ce=>{Yt.forEach(Ye=>{Ye.effect.updateTiming({delay:Rt(),duration:Ee(),easing:Re(),iterations:We(),fill:jn(),direction:Or()})}),void 0!==ce&&zi(ce)},ti=(ce=!0,Ye)=>{(0,a.r)(()=>{Un.forEach(dt=>{de(dt,"animation-name",St||null),de(dt,"animation-duration",`${Ee()}ms`),de(dt,"animation-timing-function",Re()),de(dt,"animation-delay",void 0!==Ye?`-${Ye*Ee()}ms`:`${Rt()}ms`),de(dt,"animation-fill-mode",jn()||null),de(dt,"animation-direction",Or()||null);const Ct=We()===1/0?"infinite":We().toString();de(dt,"animation-iteration-count",Ct),ce&&de(dt,"animation-name",`${St}-alt`),(0,a.r)(()=>{de(dt,"animation-name",St||null)})})})},Nr=(ce=!1,Ye=!0,dt)=>(ce&&Qt.forEach(Ct=>{Ct.update(ce,Ye,dt)}),Tr?Qn(dt):ti(Ye,dt),Nt),fn=()=>{Xe&&(Tr?Yt.forEach(ce=>{ce.pause()}):Un.forEach(ce=>{de(ce,"animation-play-state","paused")}),cn=!0)},$r=()=>{we=void 0,fi()},Qr=()=>{we&&clearTimeout(we)},ne=ce=>new Promise(Ye=>{null!=ce&&ce.sync&&(Ie=!0,xr(()=>Ie=!1,{oneTimeCallback:!0})),Xe||ls(),He&&(Tr?(zi(0),Qn()):ti(),He=!1),Pt&&(pt=Qt.length+1,Pt=!1),xr(()=>Ye(),{oneTimeCallback:!0}),Qt.forEach(dt=>{dt.play()}),Tr?(Yt.forEach(ce=>{ce.play()}),(0===Pe.length||0===Un.length)&&fi()):(()=>{if(Qr(),(0,a.r)(()=>{Un.forEach(ce=>{Pe.length>0&&de(ce,"animation-play-state","running")})}),0===Pe.length||0===Un.length)fi();else{const ce=Rt()||0,Ye=Ee()||0,dt=We()||1;isFinite(dt)&&(we=setTimeout($r,ce+Ye*dt+100)),((Me,ve)=>{let le;const at={passive:!0},et=Qe=>{Me===Qe.target&&(le&&le(),Qr(),(0,a.r)(()=>{Un.forEach(ce=>{Ae(ce,"animation-duration"),Ae(ce,"animation-delay"),Ae(ce,"animation-play-state")}),(0,a.r)(fi)}))};Me&&(Me.addEventListener("webkitAnimationEnd",et,at),Me.addEventListener("animationend",et,at),le=()=>{Me.removeEventListener("webkitAnimationEnd",et,at),Me.removeEventListener("animationend",et,at)})})(Un[0])}})(),cn=!1}),Ne=(ce,Ye)=>{const dt=Pe[0];return void 0===dt||void 0!==dt.offset&&0!==dt.offset?Pe=[{offset:0,[ce]:Ye},...Pe]:dt[ce]=Ye,Nt};return Nt={parentAnimation:Fe,elements:Un,childAnimations:Qt,id:xt,animationFinish:fi,from:Ne,to:(ce,Ye)=>{const dt=Pe[Pe.length-1];return void 0===dt||void 0!==dt.offset&&1!==dt.offset?Pe=[...Pe,{offset:1,[ce]:Ye}]:dt[ce]=Ye,Nt},fromTo:(ce,Ye,dt)=>Ne(ce,Ye).to(ce,dt),parent:ce=>(Fe=ce,Nt),play:ne,pause:()=>(Qt.forEach(ce=>{ce.pause()}),fn(),Nt),stop:()=>{Qt.forEach(ce=>{ce.stop()}),Xe&&(jr(),Xe=!1),nt=!1,Ie=!1,Pt=!0,be=void 0,Je=void 0,Le=void 0,pt=0,He=!1,rt=!0,cn=!1},destroy:ce=>(Qt.forEach(Ye=>{Ye.destroy(ce)}),(ce=>{jr(),ce&&Gt()})(ce),Un.length=0,Qt.length=0,Pe.length=0,Dn.length=0,Ln.length=0,Xe=!1,Pt=!0,Nt),keyframes:ce=>{const Ye=Pe!==ce;return Pe=ce,Ye&&(ce=>{Tr?ei().forEach(Ye=>{if(Ye.effect.setKeyframes)Ye.effect.setKeyframes(ce);else{const dt=new KeyframeEffect(Ye.effect.target,ce,Ye.effect.getTiming());Ye.effect=dt}}):Ri()})(Pe),Nt},addAnimation:ce=>{if(null!=ce)if(Array.isArray(ce))for(const Ye of ce)Ye.parent(Nt),Qt.push(Ye);else ce.parent(Nt),Qt.push(ce);return Nt},addElement:ce=>{if(null!=ce)if(1===ce.nodeType)Un.push(ce);else if(ce.length>=0)for(let Ye=0;Ye<ce.length;Ye++)Un.push(ce[Ye]);else console.error("Invalid addElement value");return Nt},update:Nr,fill:ce=>(et=ce,Nr(!0),Nt),direction:ce=>(Qe=ce,Nr(!0),Nt),iterations:ce=>(st=ce,Nr(!0),Nt),duration:ce=>(!Tr&&0===ce&&(ce=1),le=ce,Nr(!0),Nt),easing:ce=>(at=ce,Nr(!0),Nt),delay:ce=>(ve=ce,Nr(!0),Nt),getWebAnimations:ei,getKeyframes:()=>Pe,getFill:jn,getDirection:Or,getDelay:Rt,getIterations:We,getEasing:Re,getDuration:Ee,afterAddRead:ce=>(gn.push(ce),Nt),afterAddWrite:ce=>(dr.push(ce),Nt),afterClearStyles:(ce=[])=>{for(const Ye of ce)W[Ye]="";return Nt},afterStyles:(ce={})=>(W=ce,Nt),afterRemoveClass:ce=>(tt=ut(tt,ce),Nt),afterAddClass:ce=>(Ke=ut(Ke,ce),Nt),beforeAddRead:ce=>(Cr.push(ce),Nt),beforeAddWrite:ce=>(_r.push(ce),Nt),beforeClearStyles:(ce=[])=>{for(const Ye of ce)je[Ye]="";return Nt},beforeStyles:(ce={})=>(je=ce,Nt),beforeRemoveClass:ce=>(J=ut(J,ce),Nt),beforeAddClass:ce=>(Oe=ut(Oe,ce),Nt),onFinish:xr,isRunning:()=>0!==pt&&!cn,progressStart:(ce=!1,Ye)=>(Qt.forEach(dt=>{dt.progressStart(ce,Ye)}),fn(),nt=ce,Xe||ls(),Nr(!1,!0,Ye),Nt),progressStep:ce=>(Qt.forEach(Ye=>{Ye.progressStep(ce)}),zi(ce),Nt),progressEnd:(ce,Ye,dt)=>(nt=!1,Qt.forEach(Ct=>{Ct.progressEnd(ce,Ye,dt)}),void 0!==dt&&(Je=dt),He=!1,rt=!0,0===ce?(be="reverse"===Or()?"normal":"reverse","reverse"===be&&(rt=!1),Tr?(Nr(),zi(1-Ye)):(Le=(1-Ye)*Ee()*-1,Nr(!1,!1))):1===ce&&(Tr?(Nr(),zi(Ye)):(Le=Ye*Ee()*-1,Nr(!1,!1))),void 0!==ce&&(xr(()=>{Je=void 0,be=void 0,Le=void 0},{oneTimeCallback:!0}),Fe||ne()),Nt)}}},4349:(ln,ft,$)=>{"use strict";$.d(ft,{G:()=>xe});class te{constructor(de,Ae,Ue,me,fe){this.id=Ae,this.name=Ue,this.disableScroll=fe,this.priority=1e6*me+Ae,this.ctrl=de}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const de=this.ctrl.capture(this.name,this.id,this.priority);return de&&this.disableScroll&&this.ctrl.disableScroll(this.id),de}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class z{constructor(de,Ae,Ue,me){this.id=Ae,this.disable=Ue,this.disableScroll=me,this.ctrl=de}block(){if(this.ctrl){if(this.disable)for(const de of this.disable)this.ctrl.disableGesture(de,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const de of this.disable)this.ctrl.enableGesture(de,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const Te="backdrop-no-scroll",xe=new class a{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(de){var Ae;return new te(this,this.newID(),de.name,null!==(Ae=de.priority)&&void 0!==Ae?Ae:0,!!de.disableScroll)}createBlocker(de={}){return new z(this,this.newID(),de.disable,!!de.disableScroll)}start(de,Ae,Ue){return this.canStart(de)?(this.requestedStart.set(Ae,Ue),!0):(this.requestedStart.delete(Ae),!1)}capture(de,Ae,Ue){if(!this.start(de,Ae,Ue))return!1;const me=this.requestedStart;let fe=-1e4;if(me.forEach(pe=>{fe=Math.max(fe,pe)}),fe===Ue){this.capturedId=Ae,me.clear();const pe=new CustomEvent("ionGestureCaptured",{detail:{gestureName:de}});return document.dispatchEvent(pe),!0}return me.delete(Ae),!1}release(de){this.requestedStart.delete(de),this.capturedId===de&&(this.capturedId=void 0)}disableGesture(de,Ae){let Ue=this.disabledGestures.get(de);void 0===Ue&&(Ue=new Set,this.disabledGestures.set(de,Ue)),Ue.add(Ae)}enableGesture(de,Ae){const Ue=this.disabledGestures.get(de);void 0!==Ue&&Ue.delete(Ae)}disableScroll(de){this.disabledScroll.add(de),1===this.disabledScroll.size&&document.body.classList.add(Te)}enableScroll(de){this.disabledScroll.delete(de),0===this.disabledScroll.size&&document.body.classList.remove(Te)}canStart(de){return!(void 0!==this.capturedId||this.isDisabled(de))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(de){const Ae=this.disabledGestures.get(de);return!!(Ae&&Ae.size>0)}newID(){return this.gestureId++,this.gestureId}}},7593:(ln,ft,$)=>{"use strict";$.r(ft),$.d(ft,{MENU_BACK_BUTTON_PRIORITY:()=>xe,OVERLAY_BACK_BUTTON_PRIORITY:()=>Te,blockHardwareBackButton:()=>te,startHardwareBackButton:()=>z});var a=$(5861);const te=()=>{document.addEventListener("backbutton",()=>{})},z=()=>{const Se=document;let de=!1;Se.addEventListener("backbutton",()=>{if(de)return;let Ae=0,Ue=[];const me=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(ke,Ge){Ue.push({priority:ke,handler:Ge,id:Ae++})}}});Se.dispatchEvent(me);const fe=function(){var ke=(0,a.Z)(function*(Ge){try{if(null!=Ge&&Ge.handler){const ut=Ge.handler(pe);null!=ut&&(yield ut)}}catch(ut){console.error(ut)}});return function(ut){return ke.apply(this,arguments)}}(),pe=()=>{if(Ue.length>0){let ke={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};Ue.forEach(Ge=>{Ge.priority>=ke.priority&&(ke=Ge)}),de=!0,Ue=Ue.filter(Ge=>Ge.id!==ke.id),fe(ke).then(()=>de=!1)}};pe()})},Te=100,xe=99},5730:(ln,ft,$)=>{"use strict";$.d(ft,{a:()=>de,b:()=>Ae,c:()=>z,d:()=>Ge,e:()=>ut,f:()=>ke,g:()=>Ue,h:()=>st,i:()=>Se,j:()=>Te,k:()=>pe,l:()=>Dt,m:()=>fe,n:()=>Me,o:()=>at,p:()=>le,q:()=>et,r:()=>me,s:()=>Qe,t:()=>a,u:()=>ve});const a=(Pe,Oe=0)=>new Promise(J=>{te(Pe,Oe,J)}),te=(Pe,Oe=0,J)=>{let Xe,Fe;const je={passive:!0},tt=()=>{Xe&&Xe()},W=pt=>{(void 0===pt||Pe===pt.target)&&(tt(),J(pt))};return Pe&&(Pe.addEventListener("webkitTransitionEnd",W,je),Pe.addEventListener("transitionend",W,je),Fe=setTimeout(W,Oe+500),Xe=()=>{Fe&&(clearTimeout(Fe),Fe=void 0),Pe.removeEventListener("webkitTransitionEnd",W,je),Pe.removeEventListener("transitionend",W,je)}),tt},z=(Pe,Oe)=>{Pe.componentOnReady?Pe.componentOnReady().then(J=>Oe(J)):me(()=>Oe(Pe))},Te=(Pe,Oe=[])=>{const J={};return Oe.forEach(Xe=>{Pe.hasAttribute(Xe)&&(null!==Pe.getAttribute(Xe)&&(J[Xe]=Pe.getAttribute(Xe)),Pe.removeAttribute(Xe))}),J},xe=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],Se=(Pe,Oe)=>{let J=xe;return Oe&&Oe.length>0&&(J=J.filter(Xe=>!Oe.includes(Xe))),Te(Pe,J)},de=(Pe,Oe,J,Xe)=>{var Fe;if(typeof window<"u"){const je=window,Ke=null===(Fe=null==je?void 0:je.Ionic)||void 0===Fe?void 0:Fe.config;if(Ke){const tt=Ke.get("_ael");if(tt)return tt(Pe,Oe,J,Xe);if(Ke._ael)return Ke._ael(Pe,Oe,J,Xe)}}return Pe.addEventListener(Oe,J,Xe)},Ae=(Pe,Oe,J,Xe)=>{var Fe;if(typeof window<"u"){const je=window,Ke=null===(Fe=null==je?void 0:je.Ionic)||void 0===Fe?void 0:Fe.config;if(Ke){const tt=Ke.get("_rel");if(tt)return tt(Pe,Oe,J,Xe);if(Ke._rel)return Ke._rel(Pe,Oe,J,Xe)}}return Pe.removeEventListener(Oe,J,Xe)},Ue=(Pe,Oe=Pe)=>Pe.shadowRoot||Oe,me=Pe=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Pe):"function"==typeof requestAnimationFrame?requestAnimationFrame(Pe):setTimeout(Pe),fe=Pe=>!!Pe.shadowRoot&&!!Pe.attachShadow,pe=Pe=>{const Oe=Pe.closest("ion-item");return Oe?Oe.querySelector("ion-label"):null},ke=Pe=>{if(Pe.focus(),Pe.classList.contains("ion-focusable")){const Oe=Pe.closest("ion-app");Oe&&Oe.setFocus([Pe])}},Ge=(Pe,Oe)=>{let J;const Xe=Pe.getAttribute("aria-labelledby"),Fe=Pe.id;let je=null!==Xe&&""!==Xe.trim()?Xe:Oe+"-lbl",Ke=null!==Xe&&""!==Xe.trim()?document.getElementById(Xe):pe(Pe);return Ke?(null===Xe&&(Ke.id=je),J=Ke.textContent,Ke.setAttribute("aria-hidden","true")):""!==Fe.trim()&&(Ke=document.querySelector(`label[for="${Fe}"]`),Ke&&(""!==Ke.id?je=Ke.id:Ke.id=je=`${Fe}-lbl`,J=Ke.textContent)),{label:Ke,labelId:je,labelText:J}},ut=(Pe,Oe,J,Xe,Fe)=>{if(Pe||fe(Oe)){let je=Oe.querySelector("input.aux-input");je||(je=Oe.ownerDocument.createElement("input"),je.type="hidden",je.classList.add("aux-input"),Oe.appendChild(je)),je.disabled=Fe,je.name=J,je.value=Xe||""}},Dt=(Pe,Oe,J)=>Math.max(Pe,Math.min(Oe,J)),Me=(Pe,Oe)=>{if(!Pe){const J="ASSERT: "+Oe;throw console.error(J),new Error(J)}},ve=Pe=>Pe.timeStamp||Date.now(),le=Pe=>{if(Pe){const Oe=Pe.changedTouches;if(Oe&&Oe.length>0){const J=Oe[0];return{x:J.clientX,y:J.clientY}}if(void 0!==Pe.pageX)return{x:Pe.pageX,y:Pe.pageY}}return{x:0,y:0}},at=Pe=>{const Oe="rtl"===document.dir;switch(Pe){case"start":return Oe;case"end":return!Oe;default:throw new Error(`"${Pe}" is not a valid value for [side]. Use "start" or "end" instead.`)}},st=(Pe,Oe)=>{const J=Pe._original||Pe;return{_original:Pe,emit:et(J.emit.bind(J),Oe)}},et=(Pe,Oe=0)=>{let J;return(...Xe)=>{clearTimeout(J),J=setTimeout(Pe,Oe,...Xe)}},Qe=(Pe,Oe)=>{if(null!=Pe||(Pe={}),null!=Oe||(Oe={}),Pe===Oe)return!0;const J=Object.keys(Pe);if(J.length!==Object.keys(Oe).length)return!1;for(const Xe of J)if(!(Xe in Oe)||Pe[Xe]!==Oe[Xe])return!1;return!0}},1843:(ln,ft,$)=>{"use strict";$.d(ft,{L:()=>Te,a:()=>xe,b:()=>Se,c:()=>de,d:()=>Ae,e:()=>Oe,g:()=>Fe,l:()=>Qe,s:()=>J,t:()=>fe});var a=$(5861),te=$(1308),z=$(5730);const Te="ionViewWillEnter",xe="ionViewDidEnter",Se="ionViewWillLeave",de="ionViewDidLeave",Ae="ionViewWillUnload",fe=je=>new Promise((Ke,tt)=>{(0,te.c)(()=>{pe(je),ke(je).then(W=>{W.animation&&W.animation.destroy(),Ge(je),Ke(W)},W=>{Ge(je),tt(W)})})}),pe=je=>{const Ke=je.enteringEl,tt=je.leavingEl;Xe(Ke,tt,je.direction),je.showGoBack?Ke.classList.add("can-go-back"):Ke.classList.remove("can-go-back"),J(Ke,!1),Ke.style.setProperty("pointer-events","none"),tt&&(J(tt,!1),tt.style.setProperty("pointer-events","none"))},ke=function(){var je=(0,a.Z)(function*(Ke){const tt=yield ut(Ke);return tt&&te.B.isBrowser?Dt(tt,Ke):Me(Ke)});return function(tt){return je.apply(this,arguments)}}(),Ge=je=>{const Ke=je.enteringEl,tt=je.leavingEl;Ke.classList.remove("ion-page-invisible"),Ke.style.removeProperty("pointer-events"),void 0!==tt&&(tt.classList.remove("ion-page-invisible"),tt.style.removeProperty("pointer-events"))},ut=function(){var je=(0,a.Z)(function*(Ke){return Ke.leavingEl&&Ke.animated&&0!==Ke.duration?Ke.animationBuilder?Ke.animationBuilder:"ios"===Ke.mode?(yield Promise.resolve().then($.bind($,6439))).iosTransitionAnimation:(yield Promise.resolve().then($.bind($,7838))).mdTransitionAnimation:void 0});return function(tt){return je.apply(this,arguments)}}(),Dt=function(){var je=(0,a.Z)(function*(Ke,tt){yield ve(tt,!0);const W=Ke(tt.baseEl,tt);st(tt.enteringEl,tt.leavingEl);const pt=yield at(W,tt);return tt.progressCallback&&tt.progressCallback(void 0),pt&&et(tt.enteringEl,tt.leavingEl),{hasCompleted:pt,animation:W}});return function(tt,W){return je.apply(this,arguments)}}(),Me=function(){var je=(0,a.Z)(function*(Ke){const tt=Ke.enteringEl,W=Ke.leavingEl;return yield ve(Ke,!1),st(tt,W),et(tt,W),{hasCompleted:!0}});return function(tt){return je.apply(this,arguments)}}(),ve=function(){var je=(0,a.Z)(function*(Ke,tt){const pt=(void 0!==Ke.deepWait?Ke.deepWait:tt)?[Oe(Ke.enteringEl),Oe(Ke.leavingEl)]:[Pe(Ke.enteringEl),Pe(Ke.leavingEl)];yield Promise.all(pt),yield le(Ke.viewIsReady,Ke.enteringEl)});return function(tt,W){return je.apply(this,arguments)}}(),le=function(){var je=(0,a.Z)(function*(Ke,tt){Ke&&(yield Ke(tt))});return function(tt,W){return je.apply(this,arguments)}}(),at=(je,Ke)=>{const tt=Ke.progressCallback,W=new Promise(pt=>{je.onFinish(nt=>pt(1===nt))});return tt?(je.progressStart(!0),tt(je)):je.play(),W},st=(je,Ke)=>{Qe(Ke,Se),Qe(je,Te)},et=(je,Ke)=>{Qe(je,xe),Qe(Ke,de)},Qe=(je,Ke)=>{if(je){const tt=new CustomEvent(Ke,{bubbles:!1,cancelable:!1});je.dispatchEvent(tt)}},Pe=je=>je?new Promise(Ke=>(0,z.c)(je,Ke)):Promise.resolve(),Oe=function(){var je=(0,a.Z)(function*(Ke){const tt=Ke;if(tt){if(null!=tt.componentOnReady){if(null!=(yield tt.componentOnReady()))return}else if(null!=tt.__registerHost)return void(yield new Promise(pt=>(0,z.r)(pt)));yield Promise.all(Array.from(tt.children).map(Oe))}});return function(tt){return je.apply(this,arguments)}}(),J=(je,Ke)=>{Ke?(je.setAttribute("aria-hidden","true"),je.classList.add("ion-page-hidden")):(je.hidden=!1,je.removeAttribute("aria-hidden"),je.classList.remove("ion-page-hidden"))},Xe=(je,Ke,tt)=>{void 0!==je&&(je.style.zIndex="back"===tt?"99":"101"),void 0!==Ke&&(Ke.style.zIndex="100")},Fe=je=>je.classList.contains("ion-page")?je:je.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||je},6369:(ln,ft,$)=>{"use strict";$.d(ft,{m:()=>fe});var a=$(5861),te=$(7593),z=$(5730),Te=$(5179),xe=$(181);const Se=pe=>(0,xe.c)().duration(pe?400:300),de=pe=>{let ke,Ge;const ut=pe.width+8,Dt=(0,xe.c)(),Me=(0,xe.c)();pe.isEndSide?(ke=ut+"px",Ge="0px"):(ke=-ut+"px",Ge="0px"),Dt.addElement(pe.menuInnerEl).fromTo("transform",`translateX(${ke})`,`translateX(${Ge})`);const le="ios"===(0,Te.b)(pe),at=le?.2:.25;return Me.addElement(pe.backdropEl).fromTo("opacity",.01,at),Se(le).addAnimation([Dt,Me])},Ae=pe=>{let ke,Ge;const ut=(0,Te.b)(pe),Dt=pe.width;pe.isEndSide?(ke=-Dt+"px",Ge=Dt+"px"):(ke=Dt+"px",Ge=-Dt+"px");const Me=(0,xe.c)().addElement(pe.menuInnerEl).fromTo("transform",`translateX(${Ge})`,"translateX(0px)"),ve=(0,xe.c)().addElement(pe.contentEl).fromTo("transform","translateX(0px)",`translateX(${ke})`),le=(0,xe.c)().addElement(pe.backdropEl).fromTo("opacity",.01,.32);return Se("ios"===ut).addAnimation([Me,ve,le])},Ue=pe=>{const ke=(0,Te.b)(pe),Ge=pe.width*(pe.isEndSide?-1:1)+"px",ut=(0,xe.c)().addElement(pe.contentEl).fromTo("transform","translateX(0px)",`translateX(${Ge})`);return Se("ios"===ke).addAnimation(ut)},fe=(()=>{const pe=new Map,ke=[],Ge=function(){var we=(0,a.Z)(function*(be){const Je=yield st(be);return!!Je&&Je.open()});return function(Je){return we.apply(this,arguments)}}(),ut=function(){var we=(0,a.Z)(function*(be){const Je=yield void 0!==be?st(be):et();return void 0!==Je&&Je.close()});return function(Je){return we.apply(this,arguments)}}(),Dt=function(){var we=(0,a.Z)(function*(be){const Je=yield st(be);return!!Je&&Je.toggle()});return function(Je){return we.apply(this,arguments)}}(),Me=function(){var we=(0,a.Z)(function*(be,Je){const Le=yield st(Je);return Le&&(Le.disabled=!be),Le});return function(Je,Le){return we.apply(this,arguments)}}(),ve=function(){var we=(0,a.Z)(function*(be,Je){const Le=yield st(Je);return Le&&(Le.swipeGesture=be),Le});return function(Je,Le){return we.apply(this,arguments)}}(),le=function(){var we=(0,a.Z)(function*(be){if(null!=be){const Je=yield st(be);return void 0!==Je&&Je.isOpen()}return void 0!==(yield et())});return function(Je){return we.apply(this,arguments)}}(),at=function(){var we=(0,a.Z)(function*(be){const Je=yield st(be);return!!Je&&!Je.disabled});return function(Je){return we.apply(this,arguments)}}(),st=function(){var we=(0,a.Z)(function*(be){return yield Ie(),"start"===be||"end"===be?nt(rt=>rt.side===be&&!rt.disabled)||nt(rt=>rt.side===be):null!=be?nt(Le=>Le.menuId===be):nt(Le=>!Le.disabled)||(ke.length>0?ke[0].el:void 0)});return function(Je){return we.apply(this,arguments)}}(),et=function(){var we=(0,a.Z)(function*(){return yield Ie(),tt()});return function(){return we.apply(this,arguments)}}(),Qe=function(){var we=(0,a.Z)(function*(){return yield Ie(),W()});return function(){return we.apply(this,arguments)}}(),Pe=function(){var we=(0,a.Z)(function*(){return yield Ie(),pt()});return function(){return we.apply(this,arguments)}}(),Oe=(we,be)=>{pe.set(we,be)},Fe=we=>{const be=we.side;ke.filter(Je=>Je.side===be&&Je!==we).forEach(Je=>Je.disabled=!0)},je=function(){var we=(0,a.Z)(function*(be,Je,Le){if(pt())return!1;if(Je){const rt=yield et();rt&&be.el!==rt&&(yield rt.setOpen(!1,!1))}return be._setOpen(Je,Le)});return function(Je,Le,rt){return we.apply(this,arguments)}}(),tt=()=>nt(we=>we._isOpen),W=()=>ke.map(we=>we.el),pt=()=>ke.some(we=>we.isAnimating),nt=we=>{const be=ke.find(we);if(void 0!==be)return be.el},Ie=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(we=>new Promise(be=>(0,z.c)(we,be))));return Oe("reveal",Ue),Oe("push",Ae),Oe("overlay",de),typeof document<"u"&&document.addEventListener("ionBackButton",we=>{const be=tt();be&&we.detail.register(te.MENU_BACK_BUTTON_PRIORITY,()=>be.close())}),{registerAnimation:Oe,get:st,getMenus:Qe,getOpen:et,isEnabled:at,swipeGesture:ve,isAnimating:Pe,isOpen:le,enable:Me,toggle:Dt,close:ut,open:Ge,_getOpenSync:tt,_createAnimation:(we,be)=>{const Je=pe.get(we);if(!Je)throw new Error("animation not registered");return Je(be)},_register:we=>{ke.indexOf(we)<0&&(we.disabled||Fe(we),ke.push(we))},_unregister:we=>{const be=ke.indexOf(we);be>-1&&ke.splice(be,1)},_setOpen:je,_setActiveMenu:Fe}})()},3457:(ln,ft,$)=>{"use strict";$.d(ft,{w:()=>a});const a=typeof window<"u"?window:void 0},1898:(ln,ft,$)=>{"use strict";$.r(ft),$.d(ft,{GESTURE_CONTROLLER:()=>a.G,createGesture:()=>Ue});var a=$(4349);const te=(ke,Ge,ut,Dt)=>{const Me=z(ke)?{capture:!!Dt.capture,passive:!!Dt.passive}:!!Dt.capture;let ve,le;return ke.__zone_symbol__addEventListener?(ve="__zone_symbol__addEventListener",le="__zone_symbol__removeEventListener"):(ve="addEventListener",le="removeEventListener"),ke[ve](Ge,ut,Me),()=>{ke[le](Ge,ut,Me)}},z=ke=>{if(void 0===Te)try{const Ge=Object.defineProperty({},"passive",{get:()=>{Te=!0}});ke.addEventListener("optsTest",()=>{},Ge)}catch(Ge){Te=!1}return!!Te};let Te;const de=ke=>ke instanceof Document?ke:ke.ownerDocument,Ue=ke=>{let Ge=!1,ut=!1,Dt=!0,Me=!1;const ve=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},ke),le=ve.canStart,at=ve.onWillStart,st=ve.onStart,et=ve.onEnd,Qe=ve.notCaptured,Pe=ve.onMove,Oe=ve.threshold,J=ve.passive,Xe=ve.blurOnStart,Fe={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},je=((ke,Ge,ut)=>{const Dt=ut*(Math.PI/180),Me="x"===ke,ve=Math.cos(Dt),le=Ge*Ge;let at=0,st=0,et=!1,Qe=0;return{start(Pe,Oe){at=Pe,st=Oe,Qe=0,et=!0},detect(Pe,Oe){if(!et)return!1;const J=Pe-at,Xe=Oe-st,Fe=J*J+Xe*Xe;if(Fe<le)return!1;const je=Math.sqrt(Fe),Ke=(Me?J:Xe)/je;return Qe=Ke>ve?1:Ke<-ve?-1:0,et=!1,!0},isGesture:()=>0!==Qe,getDirection:()=>Qe}})(ve.direction,ve.threshold,ve.maxAngle),Ke=a.G.createGesture({name:ke.gestureName,priority:ke.gesturePriority,disableScroll:ke.disableScroll}),pt=()=>{Ge&&(Me=!1,Pe&&Pe(Fe))},nt=()=>!!Ke.capture()&&(Ge=!0,Dt=!1,Fe.startX=Fe.currentX,Fe.startY=Fe.currentY,Fe.startTime=Fe.currentTime,at?at(Fe).then(we):we(),!0),we=()=>{Xe&&(()=>{if(typeof document<"u"){const He=document.activeElement;null!=He&&He.blur&&He.blur()}})(),st&&st(Fe),Dt=!0},be=()=>{Ge=!1,ut=!1,Me=!1,Dt=!0,Ke.release()},Je=He=>{const Pt=Ge,St=Dt;if(be(),St){if(me(Fe,He),Pt)return void(et&&et(Fe));Qe&&Qe(Fe)}},Le=((ke,Ge,ut,Dt,Me)=>{let ve,le,at,st,et,Qe,Pe,Oe=0;const J=Ie=>{Oe=Date.now()+2e3,Ge(Ie)&&(!le&&ut&&(le=te(ke,"touchmove",ut,Me)),at||(at=te(Ie.target,"touchend",Fe,Me)),st||(st=te(Ie.target,"touchcancel",Fe,Me)))},Xe=Ie=>{Oe>Date.now()||Ge(Ie)&&(!Qe&&ut&&(Qe=te(de(ke),"mousemove",ut,Me)),Pe||(Pe=te(de(ke),"mouseup",je,Me)))},Fe=Ie=>{Ke(),Dt&&Dt(Ie)},je=Ie=>{tt(),Dt&&Dt(Ie)},Ke=()=>{le&&le(),at&&at(),st&&st(),le=at=st=void 0},tt=()=>{Qe&&Qe(),Pe&&Pe(),Qe=Pe=void 0},W=()=>{Ke(),tt()},pt=(Ie=!0)=>{Ie?(ve||(ve=te(ke,"touchstart",J,Me)),et||(et=te(ke,"mousedown",Xe,Me))):(ve&&ve(),et&&et(),ve=et=void 0,W())};return{enable:pt,stop:W,destroy:()=>{pt(!1),Dt=ut=Ge=void 0}}})(ve.el,He=>{const Pt=pe(He);return!(ut||!Dt||(fe(He,Fe),Fe.startX=Fe.currentX,Fe.startY=Fe.currentY,Fe.startTime=Fe.currentTime=Pt,Fe.velocityX=Fe.velocityY=Fe.deltaX=Fe.deltaY=0,Fe.event=He,le&&!1===le(Fe))||(Ke.release(),!Ke.start()))&&(ut=!0,0===Oe?nt():(je.start(Fe.startX,Fe.startY),!0))},He=>{Ge?!Me&&Dt&&(Me=!0,me(Fe,He),requestAnimationFrame(pt)):(me(Fe,He),je.detect(Fe.currentX,Fe.currentY)&&(!je.isGesture()||!nt())&&rt())},Je,{capture:!1,passive:J}),rt=()=>{be(),Le.stop(),Qe&&Qe(Fe)};return{enable(He=!0){He||(Ge&&Je(void 0),be()),Le.enable(He)},destroy(){Ke.destroy(),Le.destroy()}}},me=(ke,Ge)=>{if(!Ge)return;const ut=ke.currentX,Dt=ke.currentY,Me=ke.currentTime;fe(Ge,ke);const ve=ke.currentX,le=ke.currentY,st=(ke.currentTime=pe(Ge))-Me;if(st>0&&st<100){const Qe=(le-Dt)/st;ke.velocityX=(ve-ut)/st*.7+.3*ke.velocityX,ke.velocityY=.7*Qe+.3*ke.velocityY}ke.deltaX=ve-ke.startX,ke.deltaY=le-ke.startY,ke.event=Ge},fe=(ke,Ge)=>{let ut=0,Dt=0;if(ke){const Me=ke.changedTouches;if(Me&&Me.length>0){const ve=Me[0];ut=ve.clientX,Dt=ve.clientY}else void 0!==ke.pageX&&(ut=ke.pageX,Dt=ke.pageY)}Ge.currentX=ut,Ge.currentY=Dt},pe=ke=>ke.timeStamp||Date.now()},1308:(ln,ft,$)=>{"use strict";$.d(ft,{B:()=>Gr,H:()=>Un,a:()=>rt,b:()=>Li,c:()=>wi,e:()=>kn,f:()=>Hr,g:()=>He,h:()=>Dn,i:()=>sr,j:()=>Or,k:()=>Yi,p:()=>Dt,r:()=>Pr,s:()=>Ge});var a=$(5861);let z,Te,xe,Se=!1,de=!1,Ae=!1,Ue=!1,me=!1;const fe=typeof window<"u"?window:{},pe=fe.document||{head:{}},ke={$flags$:0,$resourcesUrl$:"",jmp:ne=>ne(),raf:ne=>requestAnimationFrame(ne),ael:(ne,he,Ne,lt)=>ne.addEventListener(he,Ne,lt),rel:(ne,he,Ne,lt)=>ne.removeEventListener(he,Ne,lt),ce:(ne,he)=>new CustomEvent(ne,he)},Ge=ne=>{Object.assign(ke,ne)},Dt=ne=>Promise.resolve(ne),Me=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(ne){}return!1})(),ve=(ne,he,Ne,lt)=>{Ne&&Ne.map(([Mt,ce,Ye])=>{const dt=at(ne,Mt),Ct=le(he,Ye),Lt=st(Mt);ke.ael(dt,ce,Ct,Lt),(he.$rmListeners$=he.$rmListeners$||[]).push(()=>ke.rel(dt,ce,Ct,Lt))})},le=(ne,he)=>Ne=>{try{256&ne.$flags$?ne.$lazyInstance$[he](Ne):(ne.$queuedListeners$=ne.$queuedListeners$||[]).push([he,Ne])}catch(lt){Qn(lt)}},at=(ne,he)=>4&he?pe:8&he?fe:16&he?pe.body:ne,st=ne=>0!=(2&ne),J="s-id",Xe="sty-id",Ke="http://www.w3.org/1999/xlink",pt=new WeakMap,nt=(ne,he,Ne)=>{let lt=vi.get(ne);Me&&Ne?(lt=lt||new CSSStyleSheet,"string"==typeof lt?lt=he:lt.replaceSync(he)):lt=he,vi.set(ne,lt)},Ie=(ne,he,Ne,lt)=>{let Mt=be(he,Ne);const ce=vi.get(Mt);if(ne=11===ne.nodeType?ne:pe,ce)if("string"==typeof ce){let dt,Ye=pt.get(ne=ne.head||ne);Ye||pt.set(ne,Ye=new Set),Ye.has(Mt)||(ne.host&&(dt=ne.querySelector(`[${Xe}="${Mt}"]`))?dt.innerHTML=ce:(dt=pe.createElement("style"),dt.innerHTML=ce,ne.insertBefore(dt,ne.querySelector("link"))),Ye&&Ye.add(Mt))}else ne.adoptedStyleSheets.includes(ce)||(ne.adoptedStyleSheets=[...ne.adoptedStyleSheets,ce]);return Mt},be=(ne,he)=>"sc-"+(he&&32&ne.$flags$?ne.$tagName$+"-"+he:ne.$tagName$),Je=ne=>ne.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),rt=ne=>ri.push(ne),He=ne=>Ri(ne).$modeName$,Pt={},xt=ne=>"object"==(ne=typeof ne)||"function"===ne,Dn=(ne,he,...Ne)=>{let lt=null,Mt=null,ce=null,Ye=!1,dt=!1;const Ct=[],Lt=Sn=>{for(let Bn=0;Bn<Sn.length;Bn++)lt=Sn[Bn],Array.isArray(lt)?Lt(lt):null!=lt&&"boolean"!=typeof lt&&((Ye="function"!=typeof ne&&!xt(lt))&&(lt=String(lt)),Ye&&dt?Ct[Ct.length-1].$text$+=lt:Ct.push(Ye?Ln(null,lt):lt),dt=Ye)};if(Lt(Ne),he){he.key&&(Mt=he.key),he.name&&(ce=he.name);{const Sn=he.className||he.class;Sn&&(he.class="object"!=typeof Sn?Sn:Object.keys(Sn).filter(Bn=>Sn[Bn]).join(" "))}}if("function"==typeof ne)return ne(null===he?{}:he,Ct,nr);const sn=Ln(ne,null);return sn.$attrs$=he,Ct.length>0&&(sn.$children$=Ct),sn.$key$=Mt,sn.$name$=ce,sn},Ln=(ne,he)=>({$flags$:0,$tag$:ne,$text$:he,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),Un={},nr={forEach:(ne,he)=>ne.map(Cr).forEach(he),map:(ne,he)=>ne.map(Cr).map(he).map(_r)},Cr=ne=>({vattrs:ne.$attrs$,vchildren:ne.$children$,vkey:ne.$key$,vname:ne.$name$,vtag:ne.$tag$,vtext:ne.$text$}),_r=ne=>{if("function"==typeof ne.vtag){const Ne=Object.assign({},ne.vattrs);return ne.vkey&&(Ne.key=ne.vkey),ne.vname&&(Ne.name=ne.vname),Dn(ne.vtag,Ne,...ne.vchildren||[])}const he=Ln(ne.vtag,ne.vtext);return he.$attrs$=ne.vattrs,he.$children$=ne.vchildren,he.$key$=ne.vkey,he.$name$=ne.vname,he},gn=(ne,he,Ne,lt,Mt,ce)=>{if(Ne!==lt){let Ye=zi(ne,he),dt=he.toLowerCase();if("class"===he){const Ct=ne.classList,Lt=Yt(Ne),sn=Yt(lt);Ct.remove(...Lt.filter(Sn=>Sn&&!sn.includes(Sn))),Ct.add(...sn.filter(Sn=>Sn&&!Lt.includes(Sn)))}else if("style"===he){for(const Ct in Ne)(!lt||null==lt[Ct])&&(Ct.includes("-")?ne.style.removeProperty(Ct):ne.style[Ct]="");for(const Ct in lt)(!Ne||lt[Ct]!==Ne[Ct])&&(Ct.includes("-")?ne.style.setProperty(Ct,lt[Ct]):ne.style[Ct]=lt[Ct])}else if("key"!==he)if("ref"===he)lt&&lt(ne);else if(Ye||"o"!==he[0]||"n"!==he[1]){const Ct=xt(lt);if((Ye||Ct&&null!==lt)&&!Mt)try{if(ne.tagName.includes("-"))ne[he]=lt;else{const sn=null==lt?"":lt;"list"===he?Ye=!1:(null==Ne||ne[he]!=sn)&&(ne[he]=sn)}}catch(sn){}let Lt=!1;dt!==(dt=dt.replace(/^xlink\:?/,""))&&(he=dt,Lt=!0),null==lt||!1===lt?(!1!==lt||""===ne.getAttribute(he))&&(Lt?ne.removeAttributeNS(Ke,he):ne.removeAttribute(he)):(!Ye||4&ce||Mt)&&!Ct&&(lt=!0===lt?"":lt,Lt?ne.setAttributeNS(Ke,he,lt):ne.setAttribute(he,lt))}else he="-"===he[2]?he.slice(3):zi(fe,dt)?dt.slice(2):dt[2]+he.slice(3),Ne&&ke.rel(ne,he,Ne,!1),lt&&ke.ael(ne,he,lt,!1)}},dr=/\s/,Yt=ne=>ne?ne.split(dr):[],Zr=(ne,he,Ne,lt)=>{const Mt=11===he.$elm$.nodeType&&he.$elm$.host?he.$elm$.host:he.$elm$,ce=ne&&ne.$attrs$||Pt,Ye=he.$attrs$||Pt;for(lt in ce)lt in Ye||gn(Mt,lt,ce[lt],void 0,Ne,he.$flags$);for(lt in Ye)gn(Mt,lt,ce[lt],Ye[lt],Ne,he.$flags$)},Tr=(ne,he,Ne,lt)=>{const Mt=he.$children$[Ne];let Ye,dt,Ct,ce=0;if(Se||(Ae=!0,"slot"===Mt.$tag$&&(z&&lt.classList.add(z+"-s"),Mt.$flags$|=Mt.$children$?2:1)),null!==Mt.$text$)Ye=Mt.$elm$=pe.createTextNode(Mt.$text$);else if(1&Mt.$flags$)Ye=Mt.$elm$=pe.createTextNode("");else{if(Ue||(Ue="svg"===Mt.$tag$),Ye=Mt.$elm$=pe.createElementNS(Ue?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&Mt.$flags$?"slot-fb":Mt.$tag$),Ue&&"foreignObject"===Mt.$tag$&&(Ue=!1),Zr(null,Mt,Ue),(ne=>null!=ne)(z)&&Ye["s-si"]!==z&&Ye.classList.add(Ye["s-si"]=z),Mt.$children$)for(ce=0;ce<Mt.$children$.length;++ce)dt=Tr(ne,Mt,ce,Ye),dt&&Ye.appendChild(dt);"svg"===Mt.$tag$?Ue=!1:"foreignObject"===Ye.tagName&&(Ue=!0)}return Ye["s-hn"]=xe,3&Mt.$flags$&&(Ye["s-sr"]=!0,Ye["s-cr"]=Te,Ye["s-sn"]=Mt.$name$||"",Ct=ne&&ne.$children$&&ne.$children$[Ne],Ct&&Ct.$tag$===Mt.$tag$&&ne.$elm$&&br(ne.$elm$,!1)),Ye},br=(ne,he)=>{ke.$flags$|=1;const Ne=ne.childNodes;for(let lt=Ne.length-1;lt>=0;lt--){const Mt=Ne[lt];Mt["s-hn"]!==xe&&Mt["s-ol"]&&(xr(Mt).insertBefore(Mt,Tn(Mt)),Mt["s-ol"].remove(),Mt["s-ol"]=void 0,Ae=!0),he&&br(Mt,he)}ke.$flags$&=-2},ei=(ne,he,Ne,lt,Mt,ce)=>{let dt,Ye=ne["s-cr"]&&ne["s-cr"].parentNode||ne;for(Ye.shadowRoot&&Ye.tagName===xe&&(Ye=Ye.shadowRoot);Mt<=ce;++Mt)lt[Mt]&&(dt=Tr(null,Ne,Mt,ne),dt&&(lt[Mt].$elm$=dt,Ye.insertBefore(dt,Tn(he))))},Ar=(ne,he,Ne,lt,Mt)=>{for(;he<=Ne;++he)(lt=ne[he])&&(Mt=lt.$elm$,Sr(lt),de=!0,Mt["s-ol"]?Mt["s-ol"].remove():br(Mt,!0),Mt.remove())},En=(ne,he)=>ne.$tag$===he.$tag$&&("slot"===ne.$tag$?ne.$name$===he.$name$:ne.$key$===he.$key$),Tn=ne=>ne&&ne["s-ol"]||ne,xr=ne=>(ne["s-ol"]?ne["s-ol"]:ne).parentNode,Cn=(ne,he)=>{const Ne=he.$elm$=ne.$elm$,lt=ne.$children$,Mt=he.$children$,ce=he.$tag$,Ye=he.$text$;let dt;null===Ye?(Ue="svg"===ce||"foreignObject"!==ce&&Ue,"slot"===ce||Zr(ne,he,Ue),null!==lt&&null!==Mt?((ne,he,Ne,lt)=>{let pi,it,Mt=0,ce=0,Ye=0,dt=0,Ct=he.length-1,Lt=he[0],sn=he[Ct],Sn=lt.length-1,Bn=lt[0],Yn=lt[Sn];for(;Mt<=Ct&&ce<=Sn;)if(null==Lt)Lt=he[++Mt];else if(null==sn)sn=he[--Ct];else if(null==Bn)Bn=lt[++ce];else if(null==Yn)Yn=lt[--Sn];else if(En(Lt,Bn))Cn(Lt,Bn),Lt=he[++Mt],Bn=lt[++ce];else if(En(sn,Yn))Cn(sn,Yn),sn=he[--Ct],Yn=lt[--Sn];else if(En(Lt,Yn))("slot"===Lt.$tag$||"slot"===Yn.$tag$)&&br(Lt.$elm$.parentNode,!1),Cn(Lt,Yn),ne.insertBefore(Lt.$elm$,sn.$elm$.nextSibling),Lt=he[++Mt],Yn=lt[--Sn];else if(En(sn,Bn))("slot"===Lt.$tag$||"slot"===Yn.$tag$)&&br(sn.$elm$.parentNode,!1),Cn(sn,Bn),ne.insertBefore(sn.$elm$,Lt.$elm$),sn=he[--Ct],Bn=lt[++ce];else{for(Ye=-1,dt=Mt;dt<=Ct;++dt)if(he[dt]&&null!==he[dt].$key$&&he[dt].$key$===Bn.$key$){Ye=dt;break}Ye>=0?(it=he[Ye],it.$tag$!==Bn.$tag$?pi=Tr(he&&he[ce],Ne,Ye,ne):(Cn(it,Bn),he[Ye]=void 0,pi=it.$elm$),Bn=lt[++ce]):(pi=Tr(he&&he[ce],Ne,ce,ne),Bn=lt[++ce]),pi&&xr(Lt.$elm$).insertBefore(pi,Tn(Lt.$elm$))}Mt>Ct?ei(ne,null==lt[Sn+1]?null:lt[Sn+1].$elm$,Ne,lt,ce,Sn):ce>Sn&&Ar(he,Mt,Ct)})(Ne,lt,he,Mt):null!==Mt?(null!==ne.$text$&&(Ne.textContent=""),ei(Ne,null,he,Mt,0,Mt.length-1)):null!==lt&&Ar(lt,0,lt.length-1),Ue&&"svg"===ce&&(Ue=!1)):(dt=Ne["s-cr"])?dt.parentNode.textContent=Ye:ne.$text$!==Ye&&(Ne.data=Ye)},jr=ne=>{const he=ne.childNodes;let Ne,lt,Mt,ce,Ye,dt;for(lt=0,Mt=he.length;lt<Mt;lt++)if(Ne=he[lt],1===Ne.nodeType){if(Ne["s-sr"])for(Ye=Ne["s-sn"],Ne.hidden=!1,ce=0;ce<Mt;ce++)if(dt=he[ce].nodeType,he[ce]["s-hn"]!==Ne["s-hn"]||""!==Ye){if(1===dt&&Ye===he[ce].getAttribute("slot")){Ne.hidden=!0;break}}else if(1===dt||3===dt&&""!==he[ce].textContent.trim()){Ne.hidden=!0;break}jr(Ne)}},Gt=[],yi=ne=>{let he,Ne,lt,Mt,ce,Ye,dt=0;const Ct=ne.childNodes,Lt=Ct.length;for(;dt<Lt;dt++){if(he=Ct[dt],he["s-sr"]&&(Ne=he["s-cr"])&&Ne.parentNode)for(lt=Ne.parentNode.childNodes,Mt=he["s-sn"],Ye=lt.length-1;Ye>=0;Ye--)Ne=lt[Ye],!Ne["s-cn"]&&!Ne["s-nr"]&&Ne["s-hn"]!==he["s-hn"]&&(Gi(Ne,Mt)?(ce=Gt.find(sn=>sn.$nodeToRelocate$===Ne),de=!0,Ne["s-sn"]=Ne["s-sn"]||Mt,ce?ce.$slotRefNode$=he:Gt.push({$slotRefNode$:he,$nodeToRelocate$:Ne}),Ne["s-sr"]&&Gt.map(sn=>{Gi(sn.$nodeToRelocate$,Ne["s-sn"])&&(ce=Gt.find(Sn=>Sn.$nodeToRelocate$===Ne),ce&&!sn.$slotRefNode$&&(sn.$slotRefNode$=ce.$slotRefNode$))})):Gt.some(sn=>sn.$nodeToRelocate$===Ne)||Gt.push({$nodeToRelocate$:Ne}));1===he.nodeType&&yi(he)}},Gi=(ne,he)=>1===ne.nodeType?null===ne.getAttribute("slot")&&""===he||ne.getAttribute("slot")===he:ne["s-sn"]===he||""===he,Sr=ne=>{ne.$attrs$&&ne.$attrs$.ref&&ne.$attrs$.ref(null),ne.$children$&&ne.$children$.map(Sr)},sr=ne=>Ri(ne).$hostElement$,kn=(ne,he,Ne)=>{const lt=sr(ne);return{emit:Mt=>hi(lt,he,{bubbles:!!(4&Ne),composed:!!(2&Ne),cancelable:!!(1&Ne),detail:Mt})}},hi=(ne,he,Ne)=>{const lt=ke.ce(he,Ne);return ne.dispatchEvent(lt),lt},rn=(ne,he)=>{he&&!ne.$onRenderResolve$&&he["s-p"]&&he["s-p"].push(new Promise(Ne=>ne.$onRenderResolve$=Ne))},$t=(ne,he)=>{if(ne.$flags$|=16,!(4&ne.$flags$))return rn(ne,ne.$ancestorComponent$),wi(()=>yn(ne,he));ne.$flags$|=512},yn=(ne,he)=>{const lt=ne.$lazyInstance$;let Mt;return he&&(ne.$flags$|=256,ne.$queuedListeners$&&(ne.$queuedListeners$.map(([ce,Ye])=>Ee(lt,ce,Ye)),ne.$queuedListeners$=null),Mt=Ee(lt,"componentWillLoad")),Mt=We(Mt,()=>Ee(lt,"componentWillRender")),We(Mt,()=>Mn(ne,lt,he))},Mn=function(){var ne=(0,a.Z)(function*(he,Ne,lt){const Mt=he.$hostElement$,Ye=Mt["s-rc"];lt&&(ne=>{const he=ne.$cmpMeta$,Ne=ne.$hostElement$,lt=he.$flags$,ce=Ie(Ne.shadowRoot?Ne.shadowRoot:Ne.getRootNode(),he,ne.$modeName$);10&lt&&(Ne["s-sc"]=ce,Ne.classList.add(ce+"-h"),2&lt&&Ne.classList.add(ce+"-s"))})(he);Pn(he,Ne),Ye&&(Ye.map(Ct=>Ct()),Mt["s-rc"]=void 0);{const Ct=Mt["s-p"],Lt=()=>jn(he);0===Ct.length?Lt():(Promise.all(Ct).then(Lt),he.$flags$|=4,Ct.length=0)}});return function(Ne,lt,Mt){return ne.apply(this,arguments)}}(),Pn=(ne,he,Ne)=>{try{he=he.render&&he.render(),ne.$flags$&=-17,ne.$flags$|=2,((ne,he)=>{const Ne=ne.$hostElement$,lt=ne.$cmpMeta$,Mt=ne.$vnode$||Ln(null,null),ce=(ne=>ne&&ne.$tag$===Un)(he)?he:Dn(null,null,he);if(xe=Ne.tagName,lt.$attrsToReflect$&&(ce.$attrs$=ce.$attrs$||{},lt.$attrsToReflect$.map(([Ye,dt])=>ce.$attrs$[dt]=Ne[Ye])),ce.$tag$=null,ce.$flags$|=4,ne.$vnode$=ce,ce.$elm$=Mt.$elm$=Ne.shadowRoot||Ne,z=Ne["s-sc"],Te=Ne["s-cr"],Se=0!=(1&lt.$flags$),de=!1,Cn(Mt,ce),ke.$flags$|=1,Ae){yi(ce.$elm$);let Ye,dt,Ct,Lt,sn,Sn,Bn=0;for(;Bn<Gt.length;Bn++)Ye=Gt[Bn],dt=Ye.$nodeToRelocate$,dt["s-ol"]||(Ct=pe.createTextNode(""),Ct["s-nr"]=dt,dt.parentNode.insertBefore(dt["s-ol"]=Ct,dt));for(Bn=0;Bn<Gt.length;Bn++)if(Ye=Gt[Bn],dt=Ye.$nodeToRelocate$,Ye.$slotRefNode$){for(Lt=Ye.$slotRefNode$.parentNode,sn=Ye.$slotRefNode$.nextSibling,Ct=dt["s-ol"];Ct=Ct.previousSibling;)if(Sn=Ct["s-nr"],Sn&&Sn["s-sn"]===dt["s-sn"]&&Lt===Sn.parentNode&&(Sn=Sn.nextSibling,!Sn||!Sn["s-nr"])){sn=Sn;break}(!sn&&Lt!==dt.parentNode||dt.nextSibling!==sn)&&dt!==sn&&(!dt["s-hn"]&&dt["s-ol"]&&(dt["s-hn"]=dt["s-ol"].parentNode.nodeName),Lt.insertBefore(dt,sn))}else 1===dt.nodeType&&(dt.hidden=!0)}de&&jr(ce.$elm$),ke.$flags$&=-2,Gt.length=0})(ne,he)}catch(lt){Qn(lt,ne.$hostElement$)}return null},jn=ne=>{const Ne=ne.$hostElement$,Mt=ne.$lazyInstance$,ce=ne.$ancestorComponent$;Ee(Mt,"componentDidRender"),64&ne.$flags$?Ee(Mt,"componentDidUpdate"):(ne.$flags$|=64,Rt(Ne),Ee(Mt,"componentDidLoad"),ne.$onReadyResolve$(Ne),ce||Re()),ne.$onInstanceResolve$(Ne),ne.$onRenderResolve$&&(ne.$onRenderResolve$(),ne.$onRenderResolve$=void 0),512&ne.$flags$&&Oi(()=>$t(ne,!1)),ne.$flags$&=-517},Or=ne=>{{const he=Ri(ne),Ne=he.$hostElement$.isConnected;return Ne&&2==(18&he.$flags$)&&$t(he,!1),Ne}},Re=ne=>{Rt(pe.documentElement),Oi(()=>hi(fe,"appload",{detail:{namespace:"ionic"}}))},Ee=(ne,he,Ne)=>{if(ne&&ne[he])try{return ne[he](Ne)}catch(lt){Qn(lt)}},We=(ne,he)=>ne&&ne.then?ne.then(he):he(),Rt=ne=>ne.classList.add("hydrated"),hn=(ne,he,Ne,lt,Mt,ce,Ye)=>{let dt,Ct,Lt,sn;if(1===ce.nodeType){for(dt=ce.getAttribute("c-id"),dt&&(Ct=dt.split("."),(Ct[0]===Ye||"0"===Ct[0])&&(Lt={$flags$:0,$hostId$:Ct[0],$nodeId$:Ct[1],$depth$:Ct[2],$index$:Ct[3],$tag$:ce.tagName.toLowerCase(),$elm$:ce,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},he.push(Lt),ce.removeAttribute("c-id"),ne.$children$||(ne.$children$=[]),ne.$children$[Lt.$index$]=Lt,ne=Lt,lt&&"0"===Lt.$depth$&&(lt[Lt.$index$]=Lt.$elm$))),sn=ce.childNodes.length-1;sn>=0;sn--)hn(ne,he,Ne,lt,Mt,ce.childNodes[sn],Ye);if(ce.shadowRoot)for(sn=ce.shadowRoot.childNodes.length-1;sn>=0;sn--)hn(ne,he,Ne,lt,Mt,ce.shadowRoot.childNodes[sn],Ye)}else if(8===ce.nodeType)Ct=ce.nodeValue.split("."),(Ct[1]===Ye||"0"===Ct[1])&&(dt=Ct[0],Lt={$flags$:0,$hostId$:Ct[1],$nodeId$:Ct[2],$depth$:Ct[3],$index$:Ct[4],$elm$:ce,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===dt?(Lt.$elm$=ce.nextSibling,Lt.$elm$&&3===Lt.$elm$.nodeType&&(Lt.$text$=Lt.$elm$.textContent,he.push(Lt),ce.remove(),ne.$children$||(ne.$children$=[]),ne.$children$[Lt.$index$]=Lt,lt&&"0"===Lt.$depth$&&(lt[Lt.$index$]=Lt.$elm$))):Lt.$hostId$===Ye&&("s"===dt?(Lt.$tag$="slot",ce["s-sn"]=Ct[5]?Lt.$name$=Ct[5]:"",ce["s-sr"]=!0,lt&&(Lt.$elm$=pe.createElement(Lt.$tag$),Lt.$name$&&Lt.$elm$.setAttribute("name",Lt.$name$),ce.parentNode.insertBefore(Lt.$elm$,ce),ce.remove(),"0"===Lt.$depth$&&(lt[Lt.$index$]=Lt.$elm$)),Ne.push(Lt),ne.$children$||(ne.$children$=[]),ne.$children$[Lt.$index$]=Lt):"r"===dt&&(lt?ce.remove():(Mt["s-cr"]=ce,ce["s-cn"]=!0))));else if(ne&&"style"===ne.$tag$){const Sn=Ln(null,ce.textContent);Sn.$elm$=ce,Sn.$index$="0",ne.$children$=[Sn]}},Be=(ne,he)=>{if(1===ne.nodeType){let Ne=0;for(;Ne<ne.childNodes.length;Ne++)Be(ne.childNodes[Ne],he);if(ne.shadowRoot)for(Ne=0;Ne<ne.shadowRoot.childNodes.length;Ne++)Be(ne.shadowRoot.childNodes[Ne],he)}else if(8===ne.nodeType){const Ne=ne.nodeValue.split(".");"o"===Ne[0]&&(he.set(Ne[1]+"."+Ne[2],ne),ne.nodeValue="",ne["s-en"]=Ne[3])}},Ot=(ne,he,Ne)=>{if(he.$members$){ne.watchers&&(he.$watchers$=ne.watchers);const lt=Object.entries(he.$members$),Mt=ne.prototype;if(lt.map(([ce,[Ye]])=>{31&Ye||2&Ne&&32&Ye?Object.defineProperty(Mt,ce,{get(){return((ne,he)=>Ri(this).$instanceValues$.get(he))(0,ce)},set(dt){((ne,he,Ne,lt)=>{const Mt=Ri(ne),ce=Mt.$hostElement$,Ye=Mt.$instanceValues$.get(he),dt=Mt.$flags$,Ct=Mt.$lazyInstance$;Ne=((ne,he)=>null==ne||xt(ne)?ne:4&he?"false"!==ne&&(""===ne||!!ne):2&he?parseFloat(ne):1&he?String(ne):ne)(Ne,lt.$members$[he][0]);const Lt=Number.isNaN(Ye)&&Number.isNaN(Ne);if((!(8&dt)||void 0===Ye)&&Ne!==Ye&&!Lt&&(Mt.$instanceValues$.set(he,Ne),Ct)){if(lt.$watchers$&&128&dt){const Sn=lt.$watchers$[he];Sn&&Sn.map(Bn=>{try{Ct[Bn](Ne,Ye,he)}catch(Yn){Qn(Yn,ce)}})}2==(18&dt)&&$t(Mt,!1)}})(this,ce,dt,he)},configurable:!0,enumerable:!0}):1&Ne&&64&Ye&&Object.defineProperty(Mt,ce,{value(...dt){const Ct=Ri(this);return Ct.$onInstancePromise$.then(()=>Ct.$lazyInstance$[ce](...dt))}})}),1&Ne){const ce=new Map;Mt.attributeChangedCallback=function(Ye,dt,Ct){ke.jmp(()=>{const Lt=ce.get(Ye);if(this.hasOwnProperty(Lt))Ct=this[Lt],delete this[Lt];else if(Mt.hasOwnProperty(Lt)&&"number"==typeof this[Lt]&&this[Lt]==Ct)return;this[Lt]=(null!==Ct||"boolean"!=typeof this[Lt])&&Ct})},ne.observedAttributes=lt.filter(([Ye,dt])=>15&dt[0]).map(([Ye,dt])=>{const Ct=dt[1]||Ye;return ce.set(Ct,Ye),512&dt[0]&&he.$attrsToReflect$.push([Ye,Ct]),Ct})}}return ne},Ht=function(){var ne=(0,a.Z)(function*(he,Ne,lt,Mt,ce){if(!(32&Ne.$flags$)){{if(Ne.$flags$|=32,(ce=Nr(lt)).then){const Lt=()=>{};ce=yield ce,Lt()}ce.isProxied||(lt.$watchers$=ce.watchers,Ot(ce,lt,2),ce.isProxied=!0);const Ct=()=>{};Ne.$flags$|=8;try{new ce(Ne)}catch(Lt){Qn(Lt)}Ne.$flags$&=-9,Ne.$flags$|=128,Ct(),On(Ne.$lazyInstance$)}if(ce.style){let Ct=ce.style;"string"!=typeof Ct&&(Ct=Ct[Ne.$modeName$=(ne=>ri.map(he=>he(ne)).find(he=>!!he))(he)]);const Lt=be(lt,Ne.$modeName$);if(!vi.has(Lt)){const sn=()=>{};nt(Lt,Ct,!!(1&lt.$flags$)),sn()}}}const Ye=Ne.$ancestorComponent$,dt=()=>$t(Ne,!0);Ye&&Ye["s-rc"]?Ye["s-rc"].push(dt):dt()});return function(Ne,lt,Mt,ce,Ye){return ne.apply(this,arguments)}}(),On=ne=>{Ee(ne,"connectedCallback")},fr=ne=>{const he=ne["s-cr"]=pe.createComment("");he["s-cn"]=!0,ne.insertBefore(he,ne.firstChild)},Li=(ne,he={})=>{const lt=[],Mt=he.exclude||[],ce=fe.customElements,Ye=pe.head,dt=Ye.querySelector("meta[charset]"),Ct=pe.createElement("style"),Lt=[],sn=pe.querySelectorAll(`[${Xe}]`);let Sn,Bn=!0,Yn=0;for(Object.assign(ke,he),ke.$resourcesUrl$=new URL(he.resourcesUrl||"./",pe.baseURI).href,ke.$flags$|=2;Yn<sn.length;Yn++)nt(sn[Yn].getAttribute(Xe),Je(sn[Yn].innerHTML),!0);ne.map(pi=>{pi[1].map(it=>{const qe={$flags$:it[0],$tagName$:it[1],$members$:it[2],$listeners$:it[3]};qe.$members$=it[2],qe.$listeners$=it[3],qe.$attrsToReflect$=[],qe.$watchers$={};const mt=qe.$tagName$,Ut=class extends HTMLElement{constructor(nn){super(nn),ls(nn=this,qe),1&qe.$flags$&&nn.attachShadow({mode:"open",delegatesFocus:!!(16&qe.$flags$)})}connectedCallback(){Sn&&(clearTimeout(Sn),Sn=null),Bn?Lt.push(this):ke.jmp(()=>(ne=>{if(!(1&ke.$flags$)){const he=Ri(ne),Ne=he.$cmpMeta$,lt=()=>{};if(1&he.$flags$)ve(ne,he,Ne.$listeners$),On(he.$lazyInstance$);else{let Mt;if(he.$flags$|=1,Mt=ne.getAttribute(J),Mt){if(1&Ne.$flags$){const ce=Ie(ne.shadowRoot,Ne,ne.getAttribute("s-mode"));ne.classList.remove(ce+"-h",ce+"-s")}((ne,he,Ne,lt)=>{const ce=ne.shadowRoot,Ye=[],Ct=ce?[]:null,Lt=lt.$vnode$=Ln(he,null);ke.$orgLocNodes$||Be(pe.body,ke.$orgLocNodes$=new Map),ne[J]=Ne,ne.removeAttribute(J),hn(Lt,Ye,[],Ct,ne,ne,Ne),Ye.map(sn=>{const Sn=sn.$hostId$+"."+sn.$nodeId$,Bn=ke.$orgLocNodes$.get(Sn),Yn=sn.$elm$;Bn&&""===Bn["s-en"]&&Bn.parentNode.insertBefore(Yn,Bn.nextSibling),ce||(Yn["s-hn"]=he,Bn&&(Yn["s-ol"]=Bn,Yn["s-ol"]["s-nr"]=Yn)),ke.$orgLocNodes$.delete(Sn)}),ce&&Ct.map(sn=>{sn&&ce.appendChild(sn)})})(ne,Ne.$tagName$,Mt,he)}Mt||12&Ne.$flags$&&fr(ne);{let ce=ne;for(;ce=ce.parentNode||ce.host;)if(1===ce.nodeType&&ce.hasAttribute("s-id")&&ce["s-p"]||ce["s-p"]){rn(he,he.$ancestorComponent$=ce);break}}Ne.$members$&&Object.entries(Ne.$members$).map(([ce,[Ye]])=>{if(31&Ye&&ne.hasOwnProperty(ce)){const dt=ne[ce];delete ne[ce],ne[ce]=dt}}),Oi(()=>Ht(ne,he,Ne))}lt()}})(this))}disconnectedCallback(){ke.jmp(()=>(ne=>{if(!(1&ke.$flags$)){const he=Ri(this),Ne=he.$lazyInstance$;he.$rmListeners$&&(he.$rmListeners$.map(lt=>lt()),he.$rmListeners$=void 0),Ee(Ne,"disconnectedCallback")}})())}componentOnReady(){return Ri(this).$onReadyPromise$}};qe.$lazyBundleId$=pi[0],!Mt.includes(mt)&&!ce.get(mt)&&(lt.push(mt),ce.define(mt,Ot(Ut,qe,1)))})}),Ct.innerHTML=lt+"{visibility:hidden}.hydrated{visibility:inherit}",Ct.setAttribute("data-styles",""),Ye.insertBefore(Ct,dt?dt.nextSibling:Ye.firstChild),Bn=!1,Lt.length?Lt.map(pi=>pi.connectedCallback()):ke.jmp(()=>Sn=setTimeout(Re,30))},Yi=ne=>{const he=new URL(ne,ke.$resourcesUrl$);return he.origin!==fe.location.origin?he.href:he.pathname},fi=new WeakMap,Ri=ne=>fi.get(ne),Pr=(ne,he)=>fi.set(he.$lazyInstance$=ne,he),ls=(ne,he)=>{const Ne={$flags$:0,$hostElement$:ne,$cmpMeta$:he,$instanceValues$:new Map};return Ne.$onInstancePromise$=new Promise(lt=>Ne.$onInstanceResolve$=lt),Ne.$onReadyPromise$=new Promise(lt=>Ne.$onReadyResolve$=lt),ne["s-p"]=[],ne["s-rc"]=[],ve(ne,Ne,he.$listeners$),fi.set(ne,Ne)},zi=(ne,he)=>he in ne,Qn=(ne,he)=>(0,console.error)(ne,he),ti=new Map,Nr=(ne,he,Ne)=>{const lt=ne.$tagName$.replace(/-/g,"_"),Mt=ne.$lazyBundleId$,ce=ti.get(Mt);return ce?ce[lt]:$(863)(`./${Mt}.entry.js`).then(Ye=>(ti.set(Mt,Ye),Ye[lt]),Qn)},vi=new Map,ri=[],Mr=[],fn=[],Xn=(ne,he)=>Ne=>{ne.push(Ne),me||(me=!0,he&&4&ke.$flags$?Oi(Qr):ke.raf(Qr))},$r=ne=>{for(let he=0;he<ne.length;he++)try{ne[he](performance.now())}catch(Ne){Qn(Ne)}ne.length=0},Qr=()=>{$r(Mr),$r(fn),(me=Mr.length>0)&&ke.raf(Qr)},Oi=ne=>Dt().then(ne),Hr=Xn(Mr,!1),wi=Xn(fn,!0),Gr={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1}},5179:(ln,ft,$)=>{"use strict";$.d(ft,{a:()=>fe,b:()=>pt,c:()=>z,g:()=>me,i:()=>nt});var a=$(1308);class te{constructor(){this.m=new Map}reset(we){this.m=new Map(Object.entries(we))}get(we,be){const Je=this.m.get(we);return void 0!==Je?Je:be}getBoolean(we,be=!1){const Je=this.m.get(we);return void 0===Je?be:"string"==typeof Je?"true"===Je:!!Je}getNumber(we,be){const Je=parseFloat(this.m.get(we));return isNaN(Je)?void 0!==be?be:NaN:Je}set(we,be){this.m.set(we,be)}}const z=new te,Ue="ionic-persist-config",me=Ie=>pe(Ie),fe=(Ie,we)=>("string"==typeof Ie&&(we=Ie,Ie=void 0),me(Ie).includes(we)),pe=(Ie=window)=>{if(typeof Ie>"u")return[];Ie.Ionic=Ie.Ionic||{};let we=Ie.Ionic.platforms;return null==we&&(we=Ie.Ionic.platforms=ke(Ie),we.forEach(be=>Ie.document.documentElement.classList.add(`plt-${be}`))),we},ke=Ie=>{const we=z.get("platform");return Object.keys(tt).filter(be=>{const Je=null==we?void 0:we[be];return"function"==typeof Je?Je(Ie):tt[be](Ie)})},ut=Ie=>!!(je(Ie,/iPad/i)||je(Ie,/Macintosh/i)&&et(Ie)),ve=Ie=>je(Ie,/android|sink/i),et=Ie=>Ke(Ie,"(any-pointer:coarse)"),Pe=Ie=>Oe(Ie)||J(Ie),Oe=Ie=>!!(Ie.cordova||Ie.phonegap||Ie.PhoneGap),J=Ie=>{const we=Ie.Capacitor;return!(null==we||!we.isNative)},je=(Ie,we)=>we.test(Ie.navigator.userAgent),Ke=(Ie,we)=>{var be;return null===(be=Ie.matchMedia)||void 0===be?void 0:be.call(Ie,we).matches},tt={ipad:ut,iphone:Ie=>je(Ie,/iPhone/i),ios:Ie=>je(Ie,/iPhone|iPod/i)||ut(Ie),android:ve,phablet:Ie=>{const we=Ie.innerWidth,be=Ie.innerHeight,Je=Math.min(we,be),Le=Math.max(we,be);return Je>390&&Je<520&&Le>620&&Le<800},tablet:Ie=>{const we=Ie.innerWidth,be=Ie.innerHeight,Je=Math.min(we,be),Le=Math.max(we,be);return ut(Ie)||(Ie=>ve(Ie)&&!je(Ie,/mobile/i))(Ie)||Je>460&&Je<820&&Le>780&&Le<1400},cordova:Oe,capacitor:J,electron:Ie=>je(Ie,/electron/i),pwa:Ie=>{var we;return!!(null!==(we=Ie.matchMedia)&&void 0!==we&&we.call(Ie,"(display-mode: standalone)").matches||Ie.navigator.standalone)},mobile:et,mobileweb:Ie=>et(Ie)&&!Pe(Ie),desktop:Ie=>!et(Ie),hybrid:Pe};let W;const pt=Ie=>Ie&&(0,a.g)(Ie)||W,nt=(Ie={})=>{if(typeof window>"u")return;const we=window.document,be=window,Je=be.Ionic=be.Ionic||{},Le={};Ie._ael&&(Le.ael=Ie._ael),Ie._rel&&(Le.rel=Ie._rel),Ie._ce&&(Le.ce=Ie._ce),(0,a.s)(Le);const rt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(Ie=>{try{const we=Ie.sessionStorage.getItem(Ue);return null!==we?JSON.parse(we):{}}catch(we){return{}}})(be)),{persistConfig:!1}),Je.config),(Ie=>{const we={};return Ie.location.search.slice(1).split("&").map(be=>be.split("=")).map(([be,Je])=>[decodeURIComponent(be),decodeURIComponent(Je)]).filter(([be])=>((Ie,we)=>Ie.substr(0,we.length)===we)(be,"ionic:")).map(([be,Je])=>[be.slice("ionic:".length),Je]).forEach(([be,Je])=>{we[be]=Je}),we})(be)),Ie);z.reset(rt),z.getBoolean("persistConfig")&&((Ie,we)=>{try{Ie.sessionStorage.setItem(Ue,JSON.stringify(we))}catch(be){return}})(be,rt),pe(be),Je.config=z,Je.mode=W=z.get("mode",we.documentElement.getAttribute("mode")||(fe(be,"ios")?"ios":"md")),z.set("mode",W),we.documentElement.setAttribute("mode",W),we.documentElement.classList.add(W),z.getBoolean("_testing")&&z.set("animated",!1);const He=St=>{var Nt;return null===(Nt=St.tagName)||void 0===Nt?void 0:Nt.startsWith("ION-")},Pt=St=>["ios","md"].includes(St);(0,a.a)(St=>{for(;St;){const Nt=St.mode||St.getAttribute("mode");if(Nt){if(Pt(Nt))return Nt;He(St)&&console.warn('Invalid ionic mode: "'+Nt+'", expected: "ios" or "md"')}St=St.parentElement}return W})}},6439:(ln,ft,$)=>{"use strict";$.r(ft),$.d(ft,{iosTransitionAnimation:()=>ke,shadow:()=>de});var a=$(181),te=$(1843);$(3457),$(1308);const Se=Ge=>document.querySelector(`${Ge}.ion-cloned-element`),de=Ge=>Ge.shadowRoot||Ge,Ae=Ge=>{const ut="ION-TABS"===Ge.tagName?Ge:Ge.querySelector("ion-tabs"),Dt="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=ut){const Me=ut.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=Me?Me.querySelector(Dt):null}return Ge.querySelector(Dt)},Ue=(Ge,ut)=>{const Dt="ION-TABS"===Ge.tagName?Ge:Ge.querySelector("ion-tabs");let Me=[];if(null!=Dt){const ve=Dt.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=ve&&(Me=ve.querySelectorAll("ion-buttons"))}else Me=Ge.querySelectorAll("ion-buttons");for(const ve of Me){const le=ve.closest("ion-header"),at=le&&!le.classList.contains("header-collapse-condense-inactive"),st=ve.querySelector("ion-back-button"),et=ve.classList.contains("buttons-collapse");if(null!==st&&("start"===ve.slot||""===ve.slot)&&(et&&at&&ut||!et))return st}return null},fe=(Ge,ut,Dt,Me,ve,le)=>{const at=ut?`calc(100% - ${le.right+4}px)`:le.left-4+"px",st=ut?"7px":"-7px",et=ut?"-4px":"4px",Qe=ut?"-4px":"4px",Pe=ut?"right":"left",Oe=ut?"left":"right",Fe=Dt?[{offset:0,opacity:1,transform:`translate3d(${et}, ${le.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${st}, ${ve.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${st}, ${ve.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${et}, ${le.top-46}px, 0) scale(1)`}],tt=Dt?[{offset:0,opacity:1,transform:`translate3d(${Qe}, ${le.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${Qe}, ${le.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${Qe}, ${le.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${Qe}, ${le.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${Qe}, ${le.top-46}px, 0) scale(1)`}],W=(0,a.c)(),pt=(0,a.c)(),nt=Se("ion-back-button"),Ie=de(nt).querySelector(".button-text"),we=de(nt).querySelector("ion-icon");nt.text=Me.text,nt.mode=Me.mode,nt.icon=Me.icon,nt.color=Me.color,nt.disabled=Me.disabled,nt.style.setProperty("display","block"),nt.style.setProperty("position","fixed"),pt.addElement(we),W.addElement(Ie),W.beforeStyles({"transform-origin":`${Pe} center`}).beforeAddWrite(()=>{Me.style.setProperty("display","none"),nt.style.setProperty(Pe,at)}).afterAddWrite(()=>{Me.style.setProperty("display",""),nt.style.setProperty("display","none"),nt.style.removeProperty(Pe)}).keyframes(Fe),pt.beforeStyles({"transform-origin":`${Oe} center`}).keyframes(tt),Ge.addAnimation([W,pt])},pe=(Ge,ut,Dt,Me,ve,le)=>{const at=ut?`calc(100% - ${ve.right}px)`:`${ve.left}px`,st=ut?"-18px":"18px",et=ut?"right":"left",Oe=Dt?[{offset:0,opacity:0,transform:`translate3d(${st}, ${le.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${ve.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${ve.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${st}, ${le.top-4}px, 0) scale(0.5)`}],J=Se("ion-title"),Xe=(0,a.c)();J.innerText=Me.innerText,J.size=Me.size,J.color=Me.color,Xe.addElement(J),Xe.beforeStyles({"transform-origin":`${et} center`,height:"46px",display:"",position:"relative",[et]:at}).beforeAddWrite(()=>{Me.style.setProperty("display","none")}).afterAddWrite(()=>{Me.style.setProperty("display",""),J.style.setProperty("display","none")}).keyframes(Oe),Ge.addAnimation(Xe)},ke=(Ge,ut)=>{var Dt;try{const Me="cubic-bezier(0.32,0.72,0,1)",ve="opacity",le="transform",at="0%",et="rtl"===Ge.ownerDocument.dir,Qe=et?"-99.5%":"99.5%",Pe=et?"33%":"-33%",Oe=ut.enteringEl,J=ut.leavingEl,Xe="back"===ut.direction,Fe=Oe.querySelector(":scope > ion-content"),je=Oe.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),Ke=Oe.querySelectorAll(":scope > ion-header > ion-toolbar"),tt=(0,a.c)(),W=(0,a.c)();if(tt.addElement(Oe).duration((null!==(Dt=ut.duration)&&void 0!==Dt?Dt:0)||540).easing(ut.easing||Me).fill("both").beforeRemoveClass("ion-page-invisible"),J&&null!=Ge){const we=(0,a.c)();we.addElement(Ge),tt.addAnimation(we)}if(Fe||0!==Ke.length||0!==je.length?(W.addElement(Fe),W.addElement(je)):W.addElement(Oe.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),tt.addAnimation(W),Xe?W.beforeClearStyles([ve]).fromTo("transform",`translateX(${Pe})`,`translateX(${at})`).fromTo(ve,.8,1):W.beforeClearStyles([ve]).fromTo("transform",`translateX(${Qe})`,`translateX(${at})`),Fe){const we=de(Fe).querySelector(".transition-effect");if(we){const be=we.querySelector(".transition-cover"),Je=we.querySelector(".transition-shadow"),Le=(0,a.c)(),rt=(0,a.c)(),He=(0,a.c)();Le.addElement(we).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),rt.addElement(be).beforeClearStyles([ve]).fromTo(ve,0,.1),He.addElement(Je).beforeClearStyles([ve]).fromTo(ve,.03,.7),Le.addAnimation([rt,He]),W.addAnimation([Le])}}const pt=Oe.querySelector("ion-header.header-collapse-condense"),{forward:nt,backward:Ie}=((Ge,ut,Dt,Me,ve)=>{const le=Ue(Me,Dt),at=Ae(ve),st=Ae(Me),et=Ue(ve,Dt),Qe=null!==le&&null!==at&&!Dt,Pe=null!==st&&null!==et&&Dt;if(Qe){const Oe=at.getBoundingClientRect(),J=le.getBoundingClientRect();pe(Ge,ut,Dt,at,Oe,J),fe(Ge,ut,Dt,le,Oe,J)}else if(Pe){const Oe=st.getBoundingClientRect(),J=et.getBoundingClientRect();pe(Ge,ut,Dt,st,Oe,J),fe(Ge,ut,Dt,et,Oe,J)}return{forward:Qe,backward:Pe}})(tt,et,Xe,Oe,J);if(Ke.forEach(we=>{const be=(0,a.c)();be.addElement(we),tt.addAnimation(be);const Je=(0,a.c)();Je.addElement(we.querySelector("ion-title"));const Le=(0,a.c)(),rt=Array.from(we.querySelectorAll("ion-buttons,[menuToggle]")),He=we.closest("ion-header"),Pt=null==He?void 0:He.classList.contains("header-collapse-condense-inactive");let St;St=rt.filter(Xe?Ln=>{const Un=Ln.classList.contains("buttons-collapse");return Un&&!Pt||!Un}:Ln=>!Ln.classList.contains("buttons-collapse")),Le.addElement(St);const Nt=(0,a.c)();Nt.addElement(we.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const cn=(0,a.c)();cn.addElement(de(we).querySelector(".toolbar-background"));const xt=(0,a.c)(),Dn=we.querySelector("ion-back-button");if(Dn&&xt.addElement(Dn),be.addAnimation([Je,Le,Nt,cn,xt]),Le.fromTo(ve,.01,1),Nt.fromTo(ve,.01,1),Xe)Pt||Je.fromTo("transform",`translateX(${Pe})`,`translateX(${at})`).fromTo(ve,.01,1),Nt.fromTo("transform",`translateX(${Pe})`,`translateX(${at})`),xt.fromTo(ve,.01,1);else if(pt||Je.fromTo("transform",`translateX(${Qe})`,`translateX(${at})`).fromTo(ve,.01,1),Nt.fromTo("transform",`translateX(${Qe})`,`translateX(${at})`),cn.beforeClearStyles([ve,"transform"]),(null==He?void 0:He.translucent)?cn.fromTo("transform",et?"translateX(-100%)":"translateX(100%)","translateX(0px)"):cn.fromTo(ve,.01,"var(--opacity)"),nt||xt.fromTo(ve,.01,1),Dn&&!nt){const Un=(0,a.c)();Un.addElement(de(Dn).querySelector(".button-text")).fromTo("transform",et?"translateX(-100px)":"translateX(100px)","translateX(0px)"),be.addAnimation(Un)}}),J){const we=(0,a.c)(),be=J.querySelector(":scope > ion-content"),Je=J.querySelectorAll(":scope > ion-header > ion-toolbar"),Le=J.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(be||0!==Je.length||0!==Le.length?(we.addElement(be),we.addElement(Le)):we.addElement(J.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),tt.addAnimation(we),Xe){we.beforeClearStyles([ve]).fromTo("transform",`translateX(${at})`,et?"translateX(-100%)":"translateX(100%)");const rt=(0,te.g)(J);tt.afterAddWrite(()=>{"normal"===tt.getDirection()&&rt.style.setProperty("display","none")})}else we.fromTo("transform",`translateX(${at})`,`translateX(${Pe})`).fromTo(ve,1,.8);if(be){const rt=de(be).querySelector(".transition-effect");if(rt){const He=rt.querySelector(".transition-cover"),Pt=rt.querySelector(".transition-shadow"),St=(0,a.c)(),Nt=(0,a.c)(),cn=(0,a.c)();St.addElement(rt).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Nt.addElement(He).beforeClearStyles([ve]).fromTo(ve,.1,0),cn.addElement(Pt).beforeClearStyles([ve]).fromTo(ve,.7,.03),St.addAnimation([Nt,cn]),we.addAnimation([St])}}Je.forEach(rt=>{const He=(0,a.c)();He.addElement(rt);const Pt=(0,a.c)();Pt.addElement(rt.querySelector("ion-title"));const St=(0,a.c)(),Nt=rt.querySelectorAll("ion-buttons,[menuToggle]"),cn=rt.closest("ion-header"),xt=null==cn?void 0:cn.classList.contains("header-collapse-condense-inactive"),Dn=Array.from(Nt).filter(_r=>{const gn=_r.classList.contains("buttons-collapse");return gn&&!xt||!gn});St.addElement(Dn);const Ln=(0,a.c)(),Un=rt.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");Un.length>0&&Ln.addElement(Un);const Qt=(0,a.c)();Qt.addElement(de(rt).querySelector(".toolbar-background"));const nr=(0,a.c)(),Cr=rt.querySelector("ion-back-button");if(Cr&&nr.addElement(Cr),He.addAnimation([Pt,St,Ln,nr,Qt]),tt.addAnimation(He),nr.fromTo(ve,.99,0),St.fromTo(ve,.99,0),Ln.fromTo(ve,.99,0),Xe){if(xt||Pt.fromTo("transform",`translateX(${at})`,et?"translateX(-100%)":"translateX(100%)").fromTo(ve,.99,0),Ln.fromTo("transform",`translateX(${at})`,et?"translateX(-100%)":"translateX(100%)"),Qt.beforeClearStyles([ve,"transform"]),(null==cn?void 0:cn.translucent)?Qt.fromTo("transform","translateX(0px)",et?"translateX(-100%)":"translateX(100%)"):Qt.fromTo(ve,"var(--opacity)",0),Cr&&!Ie){const gn=(0,a.c)();gn.addElement(de(Cr).querySelector(".button-text")).fromTo("transform",`translateX(${at})`,`translateX(${(et?-124:124)+"px"})`),He.addAnimation(gn)}}else xt||Pt.fromTo("transform",`translateX(${at})`,`translateX(${Pe})`).fromTo(ve,.99,0).afterClearStyles([le,ve]),Ln.fromTo("transform",`translateX(${at})`,`translateX(${Pe})`).afterClearStyles([le,ve]),nr.afterClearStyles([ve]),Pt.afterClearStyles([ve]),St.afterClearStyles([ve])})}return tt}catch(Me){throw Me}}},7838:(ln,ft,$)=>{"use strict";$.r(ft),$.d(ft,{mdTransitionAnimation:()=>xe});var a=$(181),te=$(1843);$(3457),$(1308);const xe=(Se,de)=>{var Ae,Ue,me;const ke="back"===de.direction,ut=de.leavingEl,Dt=(0,te.g)(de.enteringEl),Me=Dt.querySelector("ion-toolbar"),ve=(0,a.c)();if(ve.addElement(Dt).fill("both").beforeRemoveClass("ion-page-invisible"),ke?ve.duration((null!==(Ae=de.duration)&&void 0!==Ae?Ae:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):ve.duration((null!==(Ue=de.duration)&&void 0!==Ue?Ue:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),Me){const le=(0,a.c)();le.addElement(Me),ve.addAnimation(le)}if(ut&&ke){ve.duration((null!==(me=de.duration)&&void 0!==me?me:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const le=(0,a.c)();le.addElement((0,te.g)(ut)).onFinish(at=>{1===at&&le.elements.length>0&&le.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),ve.addAnimation(le)}return ve}},3539:(ln,ft,$)=>{"use strict";$.d(ft,{B:()=>be,G:()=>Je,a:()=>Ae,b:()=>Ue,c:()=>ke,d:()=>Xe,e:()=>ut,f:()=>je,g:()=>W,h:()=>Se,i:()=>nt,j:()=>ve,k:()=>Oe,m:()=>fe,s:()=>we});var a=$(5861),te=$(5179),z=$(7593),Te=$(5730);let xe=0;const Se=new WeakMap,de=Le=>({create:rt=>Dt(Le,rt),dismiss:(rt,He,Pt)=>Qe(document,rt,He,Le,Pt),getTop:()=>(0,a.Z)(function*(){return Oe(document,Le)})()}),Ae=de("ion-alert"),Ue=de("ion-action-sheet"),fe=de("ion-modal"),ke=de("ion-popover"),ut=Le=>{typeof document<"u"&&et(document);const rt=xe++;Le.overlayIndex=rt,Le.hasAttribute("id")||(Le.id=`ion-overlay-${rt}`)},Dt=(Le,rt)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(Le).then(()=>{const He=document.createElement(Le);return He.classList.add("overlay-hidden"),Object.assign(He,Object.assign(Object.assign({},rt),{hasController:!0})),Ke(document).appendChild(He),new Promise(Pt=>(0,Te.c)(He,Pt))}):Promise.resolve(),Me='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',ve=(Le,rt)=>{let He=Le.querySelector(Me);const Pt=null==He?void 0:He.shadowRoot;Pt&&(He=Pt.querySelector(Me)||He),He?(0,Te.f)(He):rt.focus()},at=(Le,rt)=>{const He=Array.from(Le.querySelectorAll(Me));let Pt=He.length>0?He[He.length-1]:null;const St=null==Pt?void 0:Pt.shadowRoot;St&&(Pt=St.querySelector(Me)||Pt),Pt?Pt.focus():rt.focus()},et=Le=>{0===xe&&(xe=1,Le.addEventListener("focus",rt=>{((Le,rt)=>{const He=Oe(rt,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),Pt=Le.target;He&&Pt&&!He.classList.contains("ion-disable-focus-trap")&&(He.shadowRoot?(()=>{if(He.contains(Pt))He.lastFocus=Pt;else{const cn=He.lastFocus;ve(He,He),cn===rt.activeElement&&at(He,He),He.lastFocus=rt.activeElement}})():(()=>{if(He===Pt)He.lastFocus=void 0;else{const cn=(0,Te.g)(He);if(!cn.contains(Pt))return;const xt=cn.querySelector(".ion-overlay-wrapper");if(!xt)return;if(xt.contains(Pt))He.lastFocus=Pt;else{const Dn=He.lastFocus;ve(xt,He),Dn===rt.activeElement&&at(xt,He),He.lastFocus=rt.activeElement}}})())})(rt,Le)},!0),Le.addEventListener("ionBackButton",rt=>{const He=Oe(Le);null!=He&&He.backdropDismiss&&rt.detail.register(z.OVERLAY_BACK_BUTTON_PRIORITY,()=>He.dismiss(void 0,be))}),Le.addEventListener("keyup",rt=>{if("Escape"===rt.key){const He=Oe(Le);null!=He&&He.backdropDismiss&&He.dismiss(void 0,be)}}))},Qe=(Le,rt,He,Pt,St)=>{const Nt=Oe(Le,Pt,St);return Nt?Nt.dismiss(rt,He):Promise.reject("overlay does not exist")},Oe=(Le,rt,He)=>{const Pt=((Le,rt)=>(void 0===rt&&(rt="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(Le.querySelectorAll(rt)).filter(He=>He.overlayIndex>0)))(Le,rt).filter(St=>!(Le=>Le.classList.contains("overlay-hidden"))(St));return void 0===He?Pt[Pt.length-1]:Pt.find(St=>St.id===He)},J=(Le=!1)=>{const He=Ke(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");He&&(Le?He.setAttribute("aria-hidden","true"):He.removeAttribute("aria-hidden"))},Xe=function(){var Le=(0,a.Z)(function*(rt,He,Pt,St,Nt){var cn,xt;if(rt.presented)return;J(!0),rt.presented=!0,rt.willPresent.emit(),null===(cn=rt.willPresentShorthand)||void 0===cn||cn.emit();const Dn=(0,te.b)(rt),Ln=rt.enterAnimation?rt.enterAnimation:te.c.get(He,"ios"===Dn?Pt:St);(yield tt(rt,Ln,rt.el,Nt))&&(rt.didPresent.emit(),null===(xt=rt.didPresentShorthand)||void 0===xt||xt.emit()),"ION-TOAST"!==rt.el.tagName&&Fe(rt.el),rt.keyboardClose&&(null===document.activeElement||!rt.el.contains(document.activeElement))&&rt.el.focus()});return function(He,Pt,St,Nt,cn){return Le.apply(this,arguments)}}(),Fe=function(){var Le=(0,a.Z)(function*(rt){let He=document.activeElement;if(!He)return;const Pt=null==He?void 0:He.shadowRoot;Pt&&(He=Pt.querySelector(Me)||He),yield rt.onDidDismiss(),He.focus()});return function(He){return Le.apply(this,arguments)}}(),je=function(){var Le=(0,a.Z)(function*(rt,He,Pt,St,Nt,cn,xt){var Dn,Ln;if(!rt.presented)return!1;J(!1),rt.presented=!1;try{rt.el.style.setProperty("pointer-events","none"),rt.willDismiss.emit({data:He,role:Pt}),null===(Dn=rt.willDismissShorthand)||void 0===Dn||Dn.emit({data:He,role:Pt});const Un=(0,te.b)(rt),Qt=rt.leaveAnimation?rt.leaveAnimation:te.c.get(St,"ios"===Un?Nt:cn);Pt!==Je&&(yield tt(rt,Qt,rt.el,xt)),rt.didDismiss.emit({data:He,role:Pt}),null===(Ln=rt.didDismissShorthand)||void 0===Ln||Ln.emit({data:He,role:Pt}),Se.delete(rt),rt.el.classList.add("overlay-hidden"),rt.el.style.removeProperty("pointer-events"),void 0!==rt.el.lastFocus&&(rt.el.lastFocus=void 0)}catch(Un){console.error(Un)}return rt.el.remove(),!0});return function(He,Pt,St,Nt,cn,xt,Dn){return Le.apply(this,arguments)}}(),Ke=Le=>Le.querySelector("ion-app")||Le.body,tt=function(){var Le=(0,a.Z)(function*(rt,He,Pt,St){Pt.classList.remove("overlay-hidden");const cn=He(rt.el,St);(!rt.animated||!te.c.getBoolean("animated",!0))&&cn.duration(0),rt.keyboardClose&&cn.beforeAddWrite(()=>{const Dn=Pt.ownerDocument.activeElement;null!=Dn&&Dn.matches("input,ion-input, ion-textarea")&&Dn.blur()});const xt=Se.get(rt)||[];return Se.set(rt,[...xt,cn]),yield cn.play(),!0});return function(He,Pt,St,Nt){return Le.apply(this,arguments)}}(),W=(Le,rt)=>{let He;const Pt=new Promise(St=>He=St);return pt(Le,rt,St=>{He(St.detail)}),Pt},pt=(Le,rt,He)=>{const Pt=St=>{(0,Te.b)(Le,rt,Pt),He(St)};(0,Te.a)(Le,rt,Pt)},nt=Le=>"cancel"===Le||Le===be,Ie=Le=>Le(),we=(Le,rt)=>{if("function"==typeof Le)return te.c.get("_zoneGate",Ie)(()=>{try{return Le(rt)}catch(Pt){throw Pt}})},be="backdrop",Je="gesture"},6893:(ln,ft,$)=>{"use strict";$.d(ft,{e:()=>xe});var a=$(4650),te=$(1205),z=$(3101),Te=$(2435);let xe=(()=>{class Se{constructor(Ae,Ue,me){this.afauth=Ae,this.db=Ue,this.router=me,this.nombre=""}login(Ae,Ue){return new Promise((me,fe)=>{this.afauth.signInWithEmailAndPassword(Ae,Ue).then(pe=>{const ke=pe.user.uid;this.db.collection("users").doc(ke).valueChanges().subscribe(Ge=>{this.user=Ge,this.nombre=this.user.name,localStorage.setItem("usuario",JSON.stringify(this.nombre))}),me(pe)}).catch(pe=>fe(pe))})}logout(){this.afauth.signOut().then(()=>{this.nombre="",this.user="null",localStorage.setItem("usuario",JSON.stringify("")),this.router.navigate(["/login"])})}registrar(Ae,Ue,me){return new Promise((fe,pe)=>{this.afauth.createUserWithEmailAndPassword(Ue,me).then(ke=>{const Ge=ke.user.uid;this.db.collection("users").doc(ke.user.uid).set({name:Ae,uid:Ge}).then(ut=>{this.user=ut,this.nombre=this.user.name,localStorage.setItem("usuario",JSON.stringify(this.nombre))}),fe(ke)}).catch(ke=>pe(ke))})}}return Se.\u0275fac=function(Ae){return new(Ae||Se)(a.LFG(te.zQ),a.LFG(z.ST),a.LFG(Te.F0))},Se.\u0275prov=a.Yz7({token:Se,factory:Se.\u0275fac,providedIn:"root"}),Se})()},6237:(ln,ft,$)=>{"use strict";$.d(ft,{a:()=>Te});var a=$(9260),te=$(4650),z=$(3101);let Te=(()=>{class xe{constructor(de){this.db=de}getChatRooms(){return this.db.collection("chatRooms").valueChanges({idField:"id"})}getChat(de){return this.db.collection("chatRooms").doc(de).valueChanges()}enviarABD(de,Ae){this.db.collection("chatRooms").doc(Ae).update({Messages:a.Z.firestore.FieldValue.arrayUnion(de)})}}return xe.\u0275fac=function(de){return new(de||xe)(te.LFG(z.ST))},xe.\u0275prov=te.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})()},5061:(ln,ft,$)=>{"use strict";var a=$(1481),te=$(4650),z=$(6237),Te=$(2435),xe=$(2078),Se=$(2011),de=$(1205),Ae=$(3101),Ue=$(4986),me=$(9751),fe=$(9646),pe=$(6451),ke=$(4004),Ge=$(3099),ut=$(3900),Dt=$(5026),Me=$(1884),ve=$(4482),le=$(5403),at=$(8421),st=$(4671),et=$(5032),Qe=$(7669),J=$(2122),Fe=($(4217),$(3942)),je=$(4859),Ke=$(5861),tt=$(9681),W=$(2090),pt=$(1877);const nt="@firebase/database";let we="";function be(h){we=h}class Je{constructor(u){this.domStorage_=u,this.prefix_="firebase:"}set(u,d){null==d?this.domStorage_.removeItem(this.prefixedName_(u)):this.domStorage_.setItem(this.prefixedName_(u),(0,W.Wl)(d))}get(u){const d=this.domStorage_.getItem(this.prefixedName_(u));return null==d?null:(0,W.cI)(d)}remove(u){this.domStorage_.removeItem(this.prefixedName_(u))}prefixedName_(u){return this.prefix_+u}toString(){return this.domStorage_.toString()}}class Le{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(u,d){null==d?delete this.cache_[u]:this.cache_[u]=d}get(u){return(0,W.r3)(this.cache_,u)?this.cache_[u]:null}remove(u){delete this.cache_[u]}}const rt=function(h){try{if(typeof window<"u"&&typeof window[h]<"u"){const u=window[h];return u.setItem("firebase:sentinel","cache"),u.removeItem("firebase:sentinel"),new Je(u)}}catch(u){}return new Le},He=rt("localStorage"),Pt=rt("sessionStorage"),St=new pt.Yd("@firebase/database"),Nt=function(){let h=1;return function(){return h++}}(),cn=function(h){const u=(0,W.dS)(h),d=new W.gQ;d.update(u);const v=d.digest();return W.US.encodeByteArray(v)},xt=function(...h){let u="";for(let d=0;d<h.length;d++){const v=h[d];Array.isArray(v)||v&&"object"==typeof v&&"number"==typeof v.length?u+=xt.apply(null,v):u+="object"==typeof v?(0,W.Wl)(v):v,u+=" "}return u};let Dn=null,Ln=!0;const Un=function(h,u){(0,W.hu)(!u||!0===h||!1===h,"Can't turn on custom loggers persistently."),!0===h?(St.logLevel=pt.in.VERBOSE,Dn=St.log.bind(St),u&&Pt.set("logging_enabled",!0)):"function"==typeof h?Dn=h:(Dn=null,Pt.remove("logging_enabled"))},Qt=function(...h){if(!0===Ln&&(Ln=!1,null===Dn&&!0===Pt.get("logging_enabled")&&Un(!0)),Dn){const u=xt.apply(null,h);Dn(u)}},nr=function(h){return function(...u){Qt(h,...u)}},Cr=function(...h){const u="FIREBASE INTERNAL ERROR: "+xt(...h);St.error(u)},_r=function(...h){const u=`FIREBASE FATAL ERROR: ${xt(...h)}`;throw St.error(u),new Error(u)},gn=function(...h){const u="FIREBASE WARNING: "+xt(...h);St.warn(u)},Yt=function(h){return"number"==typeof h&&(h!=h||h===Number.POSITIVE_INFINITY||h===Number.NEGATIVE_INFINITY)},Tr="[MIN_NAME]",br="[MAX_NAME]",ei=function(h,u){if(h===u)return 0;if(h===Tr||u===br)return-1;if(u===Tr||h===br)return 1;{const d=sr(h),v=sr(u);return null!==d?null!==v?d-v==0?h.length-u.length:d-v:-1:null!==v?1:h<u?-1:1}},Ar=function(h,u){return h===u?0:h<u?-1:1},xn=function(h,u){if(u&&h in u)return u[h];throw new Error("Missing required key ("+h+") in object: "+(0,W.Wl)(u))},En=function(h){if("object"!=typeof h||null===h)return(0,W.Wl)(h);const u=[];for(const v in h)u.push(v);u.sort();let d="{";for(let v=0;v<u.length;v++)0!==v&&(d+=","),d+=(0,W.Wl)(u[v]),d+=":",d+=En(h[u[v]]);return d+="}",d},Tn=function(h,u){const d=h.length;if(d<=u)return[h];const v=[];for(let S=0;S<d;S+=u)v.push(h.substring(S,S+u>d?d:S+u));return v};function xr(h,u){for(const d in h)h.hasOwnProperty(d)&&u(d,h[d])}const Cn=function(h){(0,W.hu)(!Yt(h),"Invalid JSON number");const v=1023;let S,k,G,se,_e;0===h?(k=0,G=0,S=1/h==-1/0?1:0):(S=h<0,(h=Math.abs(h))>=Math.pow(2,1-v)?(se=Math.min(Math.floor(Math.log(h)/Math.LN2),v),k=se+v,G=Math.round(h*Math.pow(2,52-se)-Math.pow(2,52))):(k=0,G=Math.round(h/Math.pow(2,-1074))));const Ve=[];for(_e=52;_e;_e-=1)Ve.push(G%2?1:0),G=Math.floor(G/2);for(_e=11;_e;_e-=1)Ve.push(k%2?1:0),k=Math.floor(k/2);Ve.push(S?1:0),Ve.reverse();const Bt=Ve.join("");let kt="";for(_e=0;_e<64;_e+=8){let Zt=parseInt(Bt.substr(_e,8),2).toString(16);1===Zt.length&&(Zt="0"+Zt),kt+=Zt}return kt.toLowerCase()},Gi=new RegExp("^-?(0*)\\d{1,10}$"),sr=function(h){if(Gi.test(h)){const u=Number(h);if(u>=-2147483648&&u<=2147483647)return u}return null},kn=function(h){try{h()}catch(u){setTimeout(()=>{throw gn("Exception was thrown by user callback.",u.stack||""),u},Math.floor(0))}},hi=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},rn=function(h,u){const d=setTimeout(h,u);return"number"==typeof d&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(d):"object"==typeof d&&d.unref&&d.unref(),d};class $t{constructor(u,d){this.appName_=u,this.appCheckProvider=d,this.appCheck=null==d?void 0:d.getImmediate({optional:!0}),this.appCheck||null==d||d.get().then(v=>this.appCheck=v)}getToken(u){return this.appCheck?this.appCheck.getToken(u):new Promise((d,v)=>{setTimeout(()=>{this.appCheck?this.getToken(u).then(d,v):d(null)},0)})}addTokenChangeListener(u){var d;null===(d=this.appCheckProvider)||void 0===d||d.get().then(v=>v.addTokenListener(u))}notifyForInvalidToken(){gn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class yn{constructor(u,d,v){this.appName_=u,this.firebaseOptions_=d,this.authProvider_=v,this.auth_=null,this.auth_=v.getImmediate({optional:!0}),this.auth_||v.onInit(S=>this.auth_=S)}getToken(u){return this.auth_?this.auth_.getToken(u).catch(d=>d&&"auth/token-not-initialized"===d.code?(Qt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(d)):new Promise((d,v)=>{setTimeout(()=>{this.auth_?this.getToken(u).then(d,v):d(null)},0)})}addTokenChangeListener(u){this.auth_?this.auth_.addAuthTokenListener(u):this.authProvider_.get().then(d=>d.addAuthTokenListener(u))}removeTokenChangeListener(u){this.authProvider_.get().then(d=>d.removeAuthTokenListener(u))}notifyForInvalidToken(){let u='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';u+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',gn(u)}}let Mn=(()=>{class h{constructor(d){this.accessToken=d}getToken(d){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(d){d(this.accessToken)}removeTokenChangeListener(d){}notifyForInvalidToken(){}}return h.OWNER="owner",h})();const We=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Be="websocket",$e="long_polling";class ge{constructor(u,d,v,S,k=!1,G="",se=!1,_e=!1){this.secure=d,this.namespace=v,this.webSocketOnly=S,this.nodeAdmin=k,this.persistenceKey=G,this.includeNamespaceInQueryParams=se,this.isUsingEmulator=_e,this._host=u.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=He.get("host:"+u)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(u){u!==this.internalHost&&(this.internalHost=u,this.isCacheableHost()&&He.set("host:"+this._host,this.internalHost))}toString(){let u=this.toURLString();return this.persistenceKey&&(u+="<"+this.persistenceKey+">"),u}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Ot(h,u,d){let v;if((0,W.hu)("string"==typeof u,"typeof type must == string"),(0,W.hu)("object"==typeof d,"typeof params must == object"),u===Be)v=(h.secure?"wss://":"ws://")+h.internalHost+"/.ws?";else{if(u!==$e)throw new Error("Unknown connection type: "+u);v=(h.secure?"https://":"http://")+h.internalHost+"/.lp?"}(function yt(h){return h.host!==h.internalHost||h.isCustomHost()||h.includeNamespaceInQueryParams})(h)&&(d.ns=h.namespace);const S=[];return xr(d,(k,G)=>{S.push(k+"="+G)}),v+S.join("&")}class Ht{constructor(){this.counters_={}}incrementCounter(u,d=1){(0,W.r3)(this.counters_,u)||(this.counters_[u]=0),this.counters_[u]+=d}get(){return(0,W.p$)(this.counters_)}}const On={},Wn={};function fr(h){const u=h.toString();return On[u]||(On[u]=new Ht),On[u]}class Li{constructor(u){this.onMessage_=u,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(u,d){this.closeAfterResponse=u,this.onClose=d,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(u,d){for(this.pendingResponses[u]=d;this.pendingResponses[this.currentResponseNum];){const v=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let S=0;S<v.length;++S)v[S]&&kn(()=>{this.onMessage_(v[S])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Hr{constructor(u,d,v,S,k,G,se){this.connId=u,this.repoInfo=d,this.applicationId=v,this.appCheckToken=S,this.authToken=k,this.transportSessionId=G,this.lastSessionId=se,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=nr(u),this.stats_=fr(d),this.urlFn=_e=>(this.appCheckToken&&(_e.ac=this.appCheckToken),Ot(d,$e,_e))}open(u,d){this.curSegmentNum=0,this.onDisconnect_=d,this.myPacketOrderer=new Li(u),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(h){if((0,W.Yr)()||"complete"===document.readyState)h();else{let u=!1;const d=function(){document.body?u||(u=!0,h()):setTimeout(d,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",d,!1),window.addEventListener("load",d,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&d()}),window.attachEvent("onload",d))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new wi((...k)=>{const[G,se,_e,Ve,Bt]=k;if(this.incrementIncomingBytes_(k),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===G)this.id=se,this.password=_e;else{if("close"!==G)throw new Error("Unrecognized command received: "+G);se?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(se,()=>{this.onClosed_()})):this.onClosed_()}},(...k)=>{const[G,se]=k;this.incrementIncomingBytes_(k),this.myPacketOrderer.handleResponse(G,se)},()=>{this.onClosed_()},this.urlFn);const v={start:"t"};v.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(v.cb=this.scriptTagHolder.uniqueCallbackIdentifier),v.v="5",this.transportSessionId&&(v.s=this.transportSessionId),this.lastSessionId&&(v.ls=this.lastSessionId),this.applicationId&&(v.p=this.applicationId),this.appCheckToken&&(v.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&We.test(location.hostname)&&(v.r="f");const S=this.urlFn(v);this.log_("Connecting via long-poll to "+S),this.scriptTagHolder.addTag(S,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Hr.forceAllow_=!0}static forceDisallow(){Hr.forceDisallow_=!0}static isAvailable(){return!((0,W.Yr)()||!Hr.forceAllow_&&(Hr.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(u){const d=(0,W.Wl)(u);this.bytesSent+=d.length,this.stats_.incrementCounter("bytes_sent",d.length);const v=(0,W.h$)(d),S=Tn(v,1840);for(let k=0;k<S.length;k++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,S.length,S[k]),this.curSegmentNum++}addDisconnectPingFrame(u,d){if((0,W.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const v={dframe:"t"};v.id=u,v.pw=d,this.myDisconnFrame.src=this.urlFn(v),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(u){const d=(0,W.Wl)(u).length;this.bytesReceived+=d,this.stats_.incrementCounter("bytes_received",d)}}class wi{constructor(u,d,v,S){if(this.onDisconnect=v,this.urlFn=S,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,W.Yr)())this.commandCB=u,this.onMessageCB=d;else{this.uniqueCallbackIdentifier=Nt(),window["pLPCommand"+this.uniqueCallbackIdentifier]=u,window["pRTLPCB"+this.uniqueCallbackIdentifier]=d,this.myIFrame=wi.createIFrame_();let k="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(k='<script>document.domain="'+document.domain+'";<\/script>');const G="<html><body>"+k+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(G),this.myIFrame.doc.close()}catch(se){Qt("frame writing exception"),se.stack&&Qt(se.stack),Qt(se)}}}static createIFrame_(){const u=document.createElement("iframe");if(u.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(u);try{u.contentWindow.document||Qt("No IE domain setting required")}catch(d){const v=document.domain;u.src="javascript:void((function(){document.open();document.domain='"+v+"';document.close();})())"}return u.contentDocument?u.doc=u.contentDocument:u.contentWindow?u.doc=u.contentWindow.document:u.document&&(u.doc=u.document),u}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const u=this.onDisconnect;u&&(this.onDisconnect=null,u())}startLongPoll(u,d){for(this.myID=u,this.myPW=d,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const u={};u.id=this.myID,u.pw=this.myPW,u.ser=this.currentSerial;let d=this.urlFn(u),v="",S=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+v.length<=1870;){const G=this.pendingSegs.shift();v=v+"&seg"+S+"="+G.seg+"&ts"+S+"="+G.ts+"&d"+S+"="+G.d,S++}return d+=v,this.addLongPollTag_(d,this.currentSerial),!0}return!1}enqueueSegment(u,d,v){this.pendingSegs.push({seg:u,ts:d,d:v}),this.alive&&this.newRequest_()}addLongPollTag_(u,d){this.outstandingRequests.add(d);const v=()=>{this.outstandingRequests.delete(d),this.newRequest_()},S=setTimeout(v,Math.floor(25e3));this.addTag(u,()=>{clearTimeout(S),v()})}addTag(u,d){(0,W.Yr)()?this.doNodeLongPoll(u,d):setTimeout(()=>{try{if(!this.sendNewPolls)return;const v=this.myIFrame.doc.createElement("script");v.type="text/javascript",v.async=!0,v.src=u,v.onload=v.onreadystatechange=function(){const S=v.readyState;(!S||"loaded"===S||"complete"===S)&&(v.onload=v.onreadystatechange=null,v.parentNode&&v.parentNode.removeChild(v),d())},v.onerror=()=>{Qt("Long-poll script failed to load: "+u),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(v)}catch(v){}},Math.floor(1))}}let he=null;typeof MozWebSocket<"u"?he=MozWebSocket:typeof WebSocket<"u"&&(he=WebSocket);let Ne=(()=>{class h{constructor(d,v,S,k,G,se,_e){this.connId=d,this.applicationId=S,this.appCheckToken=k,this.authToken=G,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=nr(this.connId),this.stats_=fr(v),this.connURL=h.connectionURL_(v,se,_e,k,S),this.nodeAdmin=v.nodeAdmin}static connectionURL_(d,v,S,k,G){const se={v:"5"};return!(0,W.Yr)()&&typeof location<"u"&&location.hostname&&We.test(location.hostname)&&(se.r="f"),v&&(se.s=v),S&&(se.ls=S),k&&(se.ac=k),G&&(se.p=G),Ot(d,Be,se)}open(d,v){this.onDisconnect=v,this.onMessage=d,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,He.set("previous_websocket_failure",!0);try{let S;if((0,W.Yr)()){S={headers:{"User-Agent":`Firebase/5/${we}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(S.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(S.headers["X-Firebase-AppCheck"]=this.appCheckToken);const G=process.env,se=0===this.connURL.indexOf("wss://")?G.HTTPS_PROXY||G.https_proxy:G.HTTP_PROXY||G.http_proxy;se&&(S.proxy={origin:se})}this.mySock=new he(this.connURL,[],S)}catch(S){this.log_("Error instantiating WebSocket.");const k=S.message||S.data;return k&&this.log_(k),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=S=>{this.handleIncomingFrame(S)},this.mySock.onerror=S=>{this.log_("WebSocket error.  Closing connection.");const k=S.message||S.data;k&&this.log_(k),this.onClosed_()}}start(){}static forceDisallow(){h.forceDisallow_=!0}static isAvailable(){let d=!1;if(typeof navigator<"u"&&navigator.userAgent){const S=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);S&&S.length>1&&parseFloat(S[1])<4.4&&(d=!0)}return!d&&null!==he&&!h.forceDisallow_}static previouslyFailed(){return He.isInMemoryStorage||!0===He.get("previous_websocket_failure")}markConnectionHealthy(){He.remove("previous_websocket_failure")}appendFrame_(d){if(this.frames.push(d),this.frames.length===this.totalFrames){const v=this.frames.join("");this.frames=null;const S=(0,W.cI)(v);this.onMessage(S)}}handleNewFrameCount_(d){this.totalFrames=d,this.frames=[]}extractFrameCount_(d){if((0,W.hu)(null===this.frames,"We already have a frame buffer"),d.length<=6){const v=Number(d);if(!isNaN(v))return this.handleNewFrameCount_(v),null}return this.handleNewFrameCount_(1),d}handleIncomingFrame(d){if(null===this.mySock)return;const v=d.data;if(this.bytesReceived+=v.length,this.stats_.incrementCounter("bytes_received",v.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(v);else{const S=this.extractFrameCount_(v);null!==S&&this.appendFrame_(S)}}send(d){this.resetKeepAlive();const v=(0,W.Wl)(d);this.bytesSent+=v.length,this.stats_.incrementCounter("bytes_sent",v.length);const S=Tn(v,16384);S.length>1&&this.sendString_(String(S.length));for(let k=0;k<S.length;k++)this.sendString_(S[k])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(d){try{this.mySock.send(d)}catch(v){this.log_("Exception thrown from WebSocket.send():",v.message||v.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return h.responsesRequiredToBeHealthy=2,h.healthyTimeout=3e4,h})(),lt=(()=>{class h{constructor(d){this.initTransports_(d)}static get ALL_TRANSPORTS(){return[Hr,Ne]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(d){const v=Ne&&Ne.isAvailable();let S=v&&!Ne.previouslyFailed();if(d.webSocketOnly&&(v||gn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),S=!0),S)this.transports_=[Ne];else{const k=this.transports_=[];for(const G of h.ALL_TRANSPORTS)G&&G.isAvailable()&&k.push(G);h.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return h.globalTransportInitialized_=!1,h})();class Ut{constructor(u,d,v,S,k,G,se,_e,Ve,Bt){this.id=u,this.repoInfo_=d,this.applicationId_=v,this.appCheckToken_=S,this.authToken_=k,this.onMessage_=G,this.onReady_=se,this.onDisconnect_=_e,this.onKill_=Ve,this.lastSessionId=Bt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=nr("c:"+this.id+":"),this.transportManager_=new lt(d),this.log_("Connection created"),this.start_()}start_(){const u=this.transportManager_.initialTransport();this.conn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const d=this.connReceiver_(this.conn_),v=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(d,v)},Math.floor(0));const S=u.healthyTimeout||0;S>0&&(this.healthyTimeout_=rn(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(S)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(u){return d=>{u===this.conn_?this.onConnectionLost_(d):u===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(u){return d=>{2!==this.state_&&(u===this.rx_?this.onPrimaryMessageReceived_(d):u===this.secondaryConn_?this.onSecondaryMessageReceived_(d):this.log_("message on old connection"))}}sendRequest(u){this.sendData_({t:"d",d:u})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(u){if("t"in u){const d=u.t;"a"===d?this.upgradeIfSecondaryHealthy_():"r"===d?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===d&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(u){const d=xn("t",u),v=xn("d",u);if("c"===d)this.onSecondaryControl_(v);else{if("d"!==d)throw new Error("Unknown protocol layer: "+d);this.pendingDataMessages.push(v)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(u){const d=xn("t",u),v=xn("d",u);"c"===d?this.onControl_(v):"d"===d&&this.onDataMessage_(v)}onDataMessage_(u){this.onPrimaryResponse_(),this.onMessage_(u)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(u){const d=xn("t",u);if("d"in u){const v=u.d;if("h"===d){const S=Object.assign({},v);this.repoInfo_.isUsingEmulator&&(S.h=this.repoInfo_.host),this.onHandshake_(S)}else if("n"===d){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let S=0;S<this.pendingDataMessages.length;++S)this.onDataMessage_(this.pendingDataMessages[S]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===d?this.onConnectionShutdown_(v):"r"===d?this.onReset_(v):"e"===d?Cr("Server Error: "+v):"o"===d?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Cr("Unknown control packet command: "+d)}}onHandshake_(u){const d=u.ts,v=u.v,S=u.h;this.sessionId=u.s,this.repoInfo_.host=S,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,d),"5"!==v&&gn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const u=this.transportManager_.upgradeTransport();u&&this.startUpgrade_(u)}startUpgrade_(u){this.secondaryConn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const d=this.connReceiver_(this.secondaryConn_),v=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(d,v),rn(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(u){this.log_("Reset packet received.  New host: "+u),this.repoInfo_.host=u,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(u,d){this.log_("Realtime connection established."),this.conn_=u,this.state_=1,this.onReady_&&(this.onReady_(d,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):rn(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const u=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===u||this.rx_===u)&&this.close()}onConnectionLost_(u){this.conn_=null,u||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(He.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(u){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(u),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(u){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(u)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class nn{put(u,d,v,S){}merge(u,d,v,S){}refreshAuthToken(u){}refreshAppCheckToken(u){}onDisconnectPut(u,d,v){}onDisconnectMerge(u,d,v){}onDisconnectCancel(u,d){}reportStats(u){}}class In{constructor(u){this.allowedEvents_=u,this.listeners_={},(0,W.hu)(Array.isArray(u)&&u.length>0,"Requires a non-empty array")}trigger(u,...d){if(Array.isArray(this.listeners_[u])){const v=[...this.listeners_[u]];for(let S=0;S<v.length;S++)v[S].callback.apply(v[S].context,d)}}on(u,d,v){this.validateEventType_(u),this.listeners_[u]=this.listeners_[u]||[],this.listeners_[u].push({callback:d,context:v});const S=this.getInitialEvent(u);S&&d.apply(v,S)}off(u,d,v){this.validateEventType_(u);const S=this.listeners_[u]||[];for(let k=0;k<S.length;k++)if(S[k].callback===d&&(!v||v===S[k].context))return void S.splice(k,1)}validateEventType_(u){(0,W.hu)(this.allowedEvents_.find(d=>d===u),"Unknown event: "+u)}}class rr extends In{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,W.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new rr}getInitialEvent(u){return(0,W.hu)("online"===u,"Unknown event type: "+u),[this.online_]}currentlyOnline(){return this.online_}}const kr=32,Er=768;class Ir{constructor(u,d){if(void 0===d){this.pieces_=u.split("/");let v=0;for(let S=0;S<this.pieces_.length;S++)this.pieces_[S].length>0&&(this.pieces_[v]=this.pieces_[S],v++);this.pieces_.length=v,this.pieceNum_=0}else this.pieces_=u,this.pieceNum_=d}toString(){let u="";for(let d=this.pieceNum_;d<this.pieces_.length;d++)""!==this.pieces_[d]&&(u+="/"+this.pieces_[d]);return u||"/"}}function pr(){return new Ir("")}function Kn(h){return h.pieceNum_>=h.pieces_.length?null:h.pieces_[h.pieceNum_]}function gi(h){return h.pieces_.length-h.pieceNum_}function ii(h){let u=h.pieceNum_;return u<h.pieces_.length&&u++,new Ir(h.pieces_,u)}function lo(h){return h.pieceNum_<h.pieces_.length?h.pieces_[h.pieces_.length-1]:null}function Ls(h,u=0){return h.pieces_.slice(h.pieceNum_+u)}function Io(h){if(h.pieceNum_>=h.pieces_.length)return null;const u=[];for(let d=h.pieceNum_;d<h.pieces_.length-1;d++)u.push(h.pieces_[d]);return new Ir(u,0)}function Vr(h,u){const d=[];for(let v=h.pieceNum_;v<h.pieces_.length;v++)d.push(h.pieces_[v]);if(u instanceof Ir)for(let v=u.pieceNum_;v<u.pieces_.length;v++)d.push(u.pieces_[v]);else{const v=u.split("/");for(let S=0;S<v.length;S++)v[S].length>0&&d.push(v[S])}return new Ir(d,0)}function Jn(h){return h.pieceNum_>=h.pieces_.length}function ni(h,u){const d=Kn(h),v=Kn(u);if(null===d)return u;if(d===v)return ni(ii(h),ii(u));throw new Error("INTERNAL ERROR: innerPath ("+u+") is not within outerPath ("+h+")")}function wo(h,u){const d=Ls(h,0),v=Ls(u,0);for(let S=0;S<d.length&&S<v.length;S++){const k=ei(d[S],v[S]);if(0!==k)return k}return d.length===v.length?0:d.length<v.length?-1:1}function Co(h,u){if(gi(h)!==gi(u))return!1;for(let d=h.pieceNum_,v=u.pieceNum_;d<=h.pieces_.length;d++,v++)if(h.pieces_[d]!==u.pieces_[v])return!1;return!0}function Bi(h,u){let d=h.pieceNum_,v=u.pieceNum_;if(gi(h)>gi(u))return!1;for(;d<h.pieces_.length;){if(h.pieces_[d]!==u.pieces_[v])return!1;++d,++v}return!0}class ms{constructor(u,d){this.errorPrefix_=d,this.parts_=Ls(u,0),this.byteLength_=Math.max(1,this.parts_.length);for(let v=0;v<this.parts_.length;v++)this.byteLength_+=(0,W.ug)(this.parts_[v]);ns(this)}}function ns(h){if(h.byteLength_>Er)throw new Error(h.errorPrefix_+"has a key path longer than "+Er+" bytes ("+h.byteLength_+").");if(h.parts_.length>kr)throw new Error(h.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+kr+") or object contains a cycle "+Qs(h))}function Qs(h){return 0===h.parts_.length?"":"in property '"+h.parts_.join(".")+"'"}class Bs extends In{constructor(){let u,d;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(d="visibilitychange",u="hidden"):typeof document.mozHidden<"u"?(d="mozvisibilitychange",u="mozHidden"):typeof document.msHidden<"u"?(d="msvisibilitychange",u="msHidden"):typeof document.webkitHidden<"u"&&(d="webkitvisibilitychange",u="webkitHidden")),this.visible_=!0,d&&document.addEventListener(d,()=>{const v=!document[u];v!==this.visible_&&(this.visible_=v,this.trigger("visible",v))},!1)}static getInstance(){return new Bs}getInitialEvent(u){return(0,W.hu)("visible"===u,"Unknown event type: "+u),[this.visible_]}}const ys=1e3;let As,bi=(()=>{class h extends nn{constructor(d,v,S,k,G,se,_e,Ve){if(super(),this.repoInfo_=d,this.applicationId_=v,this.onDataUpdate_=S,this.onConnectStatus_=k,this.onServerInfoUpdate_=G,this.authTokenProvider_=se,this.appCheckTokenProvider_=_e,this.authOverride_=Ve,this.id=h.nextPersistentConnectionId_++,this.log_=nr("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ys,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Ve&&!(0,W.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Bs.getInstance().on("visible",this.onVisible_,this),-1===d.host.indexOf("fblocal")&&rr.getInstance().on("online",this.onOnline_,this)}sendRequest(d,v,S){const k=++this.requestNumber_,G={r:k,a:d,b:v};this.log_((0,W.Wl)(G)),(0,W.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(G),S&&(this.requestCBHash_[k]=S)}get(d){this.initConnection_();const v=new W.BH,k={action:"g",request:{p:d._path.toString(),q:d._queryObject},onComplete:se=>{const _e=se.d;"ok"===se.s?v.resolve(_e):v.reject(_e)}};return this.outstandingGets_.push(k),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),v.promise}listen(d,v,S,k){this.initConnection_();const G=d._queryIdentifier,se=d._path.toString();this.log_("Listen called for "+se+" "+G),this.listens.has(se)||this.listens.set(se,new Map),(0,W.hu)(d._queryParams.isDefault()||!d._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,W.hu)(!this.listens.get(se).has(G),"listen() called twice for same path/queryId.");const _e={onComplete:k,hashFn:v,query:d,tag:S};this.listens.get(se).set(G,_e),this.connected_&&this.sendListen_(_e)}sendGet_(d){const v=this.outstandingGets_[d];this.sendRequest("g",v.request,S=>{delete this.outstandingGets_[d],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),v.onComplete&&v.onComplete(S)})}sendListen_(d){const v=d.query,S=v._path.toString(),k=v._queryIdentifier;this.log_("Listen on "+S+" for "+k);const G={p:S};d.tag&&(G.q=v._queryObject,G.t=d.tag),G.h=d.hashFn(),this.sendRequest("q",G,_e=>{const Ve=_e.d,Bt=_e.s;h.warnOnListenWarnings_(Ve,v),(this.listens.get(S)&&this.listens.get(S).get(k))===d&&(this.log_("listen response",_e),"ok"!==Bt&&this.removeListen_(S,k),d.onComplete&&d.onComplete(Bt,Ve))})}static warnOnListenWarnings_(d,v){if(d&&"object"==typeof d&&(0,W.r3)(d,"w")){const S=(0,W.DV)(d,"w");if(Array.isArray(S)&&~S.indexOf("no_index")){const k='".indexOn": "'+v._queryParams.getIndex().toString()+'"',G=v._path.toString();gn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${k} at ${G} to your security rules for better performance.`)}}}refreshAuthToken(d){this.authToken_=d,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(d)}reduceReconnectDelayIfAdminCredential_(d){(d&&40===d.length||(0,W.GJ)(d))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(d){this.appCheckToken_=d,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const d=this.authToken_,v=(0,W.w9)(d)?"auth":"gauth",S={cred:d};null===this.authOverride_?S.noauth=!0:"object"==typeof this.authOverride_&&(S.authvar=this.authOverride_),this.sendRequest(v,S,k=>{const G=k.s,se=k.d||"error";this.authToken_===d&&("ok"===G?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(G,se))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},d=>{const v=d.s,S=d.d||"error";"ok"===v?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(v,S)})}unlisten(d,v){const S=d._path.toString(),k=d._queryIdentifier;this.log_("Unlisten called for "+S+" "+k),(0,W.hu)(d._queryParams.isDefault()||!d._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(S,k)&&this.connected_&&this.sendUnlisten_(S,k,d._queryObject,v)}sendUnlisten_(d,v,S,k){this.log_("Unlisten on "+d+" for "+v);const G={p:d};k&&(G.q=S,G.t=k),this.sendRequest("n",G)}onDisconnectPut(d,v,S){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",d,v,S):this.onDisconnectRequestQueue_.push({pathString:d,action:"o",data:v,onComplete:S})}onDisconnectMerge(d,v,S){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",d,v,S):this.onDisconnectRequestQueue_.push({pathString:d,action:"om",data:v,onComplete:S})}onDisconnectCancel(d,v){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",d,null,v):this.onDisconnectRequestQueue_.push({pathString:d,action:"oc",data:null,onComplete:v})}sendOnDisconnect_(d,v,S,k){const G={p:v,d:S};this.log_("onDisconnect "+d,G),this.sendRequest(d,G,se=>{k&&setTimeout(()=>{k(se.s,se.d)},Math.floor(0))})}put(d,v,S,k){this.putInternal("p",d,v,S,k)}merge(d,v,S,k){this.putInternal("m",d,v,S,k)}putInternal(d,v,S,k,G){this.initConnection_();const se={p:v,d:S};void 0!==G&&(se.h=G),this.outstandingPuts_.push({action:d,request:se,onComplete:k}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+v)}sendPut_(d){const v=this.outstandingPuts_[d].action,S=this.outstandingPuts_[d].request,k=this.outstandingPuts_[d].onComplete;this.outstandingPuts_[d].queued=this.connected_,this.sendRequest(v,S,G=>{this.log_(v+" response",G),delete this.outstandingPuts_[d],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),k&&k(G.s,G.d)})}reportStats(d){if(this.connected_){const v={c:d};this.log_("reportStats",v),this.sendRequest("s",v,S=>{"ok"!==S.s&&this.log_("reportStats","Error sending stats: "+S.d)})}}onDataMessage_(d){if("r"in d){this.log_("from server: "+(0,W.Wl)(d));const v=d.r,S=this.requestCBHash_[v];S&&(delete this.requestCBHash_[v],S(d.b))}else{if("error"in d)throw"A server-side error has occurred: "+d.error;"a"in d&&this.onDataPush_(d.a,d.b)}}onDataPush_(d,v){this.log_("handleServerMessage",d,v),"d"===d?this.onDataUpdate_(v.p,v.d,!1,v.t):"m"===d?this.onDataUpdate_(v.p,v.d,!0,v.t):"c"===d?this.onListenRevoked_(v.p,v.q):"ac"===d?this.onAuthRevoked_(v.s,v.d):"apc"===d?this.onAppCheckRevoked_(v.s,v.d):"sd"===d?this.onSecurityDebugPacket_(v):Cr("Unrecognized action received from server: "+(0,W.Wl)(d)+"\nAre you using the latest client?")}onReady_(d,v){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(d),this.lastSessionId=v,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(d){(0,W.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(d))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(d){d&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ys,this.realtime_||this.scheduleConnect_(0)),this.visible_=d}onOnline_(d){d?(this.log_("Browser went online."),this.reconnectDelay_=ys,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ys),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const d=(new Date).getTime()-this.lastConnectionAttemptTime_;let v=Math.max(0,this.reconnectDelay_-d);v=Math.random()*v,this.log_("Trying to reconnect in "+v+"ms"),this.scheduleConnect_(v),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var d=this;return(0,Ke.Z)(function*(){if(d.shouldReconnect_()){d.log_("Making a connection attempt"),d.lastConnectionAttemptTime_=(new Date).getTime(),d.lastConnectionEstablishedTime_=null;const v=d.onDataMessage_.bind(d),S=d.onReady_.bind(d),k=d.onRealtimeDisconnect_.bind(d),G=d.id+":"+h.nextConnectionId_++,se=d.lastSessionId;let _e=!1,Ve=null;const Bt=function(){Ve?Ve.close():(_e=!0,k())};d.realtime_={close:Bt,sendRequest:function(Vn){(0,W.hu)(Ve,"sendRequest call when we're not connected not allowed."),Ve.sendRequest(Vn)}};const Zt=d.forceTokenRefresh_;d.forceTokenRefresh_=!1;try{const[Vn,ur]=yield Promise.all([d.authTokenProvider_.getToken(Zt),d.appCheckTokenProvider_.getToken(Zt)]);_e?Qt("getToken() completed but was canceled"):(Qt("getToken() completed. Creating connection."),d.authToken_=Vn&&Vn.accessToken,d.appCheckToken_=ur&&ur.token,Ve=new Ut(G,d.repoInfo_,d.applicationId_,d.appCheckToken_,d.authToken_,v,S,k,xi=>{gn(xi+" ("+d.repoInfo_.toString()+")"),d.interrupt("server_kill")},se))}catch(Vn){d.log_("Failed to get token: "+Vn),_e||(d.repoInfo_.nodeAdmin&&gn(Vn),Bt())}}})()}interrupt(d){Qt("Interrupting connection for reason: "+d),this.interruptReasons_[d]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(d){Qt("Resuming connection for reason: "+d),delete this.interruptReasons_[d],(0,W.xb)(this.interruptReasons_)&&(this.reconnectDelay_=ys,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(d){const v=d-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:v})}cancelSentTransactions_(){for(let d=0;d<this.outstandingPuts_.length;d++){const v=this.outstandingPuts_[d];v&&"h"in v.request&&v.queued&&(v.onComplete&&v.onComplete("disconnect"),delete this.outstandingPuts_[d],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(d,v){let S;S=v?v.map(G=>En(G)).join("$"):"default";const k=this.removeListen_(d,S);k&&k.onComplete&&k.onComplete("permission_denied")}removeListen_(d,v){const S=new Ir(d).toString();let k;if(this.listens.has(S)){const G=this.listens.get(S);k=G.get(v),G.delete(v),0===G.size&&this.listens.delete(S)}else k=void 0;return k}onAuthRevoked_(d,v){Qt("Auth token revoked: "+d+"/"+v),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===d||"permission_denied"===d)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(d,v){Qt("App check token revoked: "+d+"/"+v),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===d||"permission_denied"===d)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(d){this.securityDebugCallback_?this.securityDebugCallback_(d):"msg"in d&&console.log("FIREBASE: "+d.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const d of this.listens.values())for(const v of d.values())this.sendListen_(v);for(let d=0;d<this.outstandingPuts_.length;d++)this.outstandingPuts_[d]&&this.sendPut_(d);for(;this.onDisconnectRequestQueue_.length;){const d=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(d.action,d.pathString,d.data,d.onComplete)}for(let d=0;d<this.outstandingGets_.length;d++)this.outstandingGets_[d]&&this.sendGet_(d)}sendConnectStats_(){const d={};let v="js";(0,W.Yr)()&&(v=this.repoInfo_.nodeAdmin?"admin_node":"node"),d["sdk."+v+"."+we.replace(/\./g,"-")]=1,(0,W.uI)()?d["framework.cordova"]=1:(0,W.b$)()&&(d["framework.reactnative"]=1),this.reportStats(d)}shouldReconnect_(){const d=rr.getInstance().currentlyOnline();return(0,W.xb)(this.interruptReasons_)&&d}}return h.nextPersistentConnectionId_=0,h.nextConnectionId_=0,h})();class gr{constructor(u,d){this.name=u,this.node=d}static Wrap(u,d){return new gr(u,d)}}class us{getCompare(){return this.compare.bind(this)}indexedValueChanged(u,d){const v=new gr(Tr,u),S=new gr(Tr,d);return 0!==this.compare(v,S)}minPost(){return gr.MIN}}class ss extends us{static get __EMPTY_NODE(){return As}static set __EMPTY_NODE(u){As=u}compare(u,d){return ei(u.name,d.name)}isDefinedOn(u){throw(0,W.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(u,d){return!1}minPost(){return gr.MIN}maxPost(){return new gr(br,As)}makePost(u,d){return(0,W.hu)("string"==typeof u,"KeyIndex indexValue must always be a string."),new gr(u,As)}toString(){return".key"}}const Ni=new ss;class cs{constructor(u,d,v,S,k=null){this.isReverse_=S,this.resultGenerator_=k,this.nodeStack_=[];let G=1;for(;!u.isEmpty();)if(G=d?v(u.key,d):1,S&&(G*=-1),G<0)u=this.isReverse_?u.left:u.right;else{if(0===G){this.nodeStack_.push(u);break}this.nodeStack_.push(u),u=this.isReverse_?u.right:u.left}}getNext(){if(0===this.nodeStack_.length)return null;let d,u=this.nodeStack_.pop();if(d=this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value},this.isReverse_)for(u=u.left;!u.isEmpty();)this.nodeStack_.push(u),u=u.right;else for(u=u.right;!u.isEmpty();)this.nodeStack_.push(u),u=u.left;return d}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const u=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value}}}let Vs,Qi=(()=>{class h{constructor(d,v,S,k,G){this.key=d,this.value=v,this.color=null!=S?S:h.RED,this.left=null!=k?k:mi.EMPTY_NODE,this.right=null!=G?G:mi.EMPTY_NODE}copy(d,v,S,k,G){return new h(null!=d?d:this.key,null!=v?v:this.value,null!=S?S:this.color,null!=k?k:this.left,null!=G?G:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(d){return this.left.inorderTraversal(d)||!!d(this.key,this.value)||this.right.inorderTraversal(d)}reverseTraversal(d){return this.right.reverseTraversal(d)||d(this.key,this.value)||this.left.reverseTraversal(d)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(d,v,S){let k=this;const G=S(d,k.key);return k=G<0?k.copy(null,null,null,k.left.insert(d,v,S),null):0===G?k.copy(null,v,null,null,null):k.copy(null,null,null,null,k.right.insert(d,v,S)),k.fixUp_()}removeMin_(){if(this.left.isEmpty())return mi.EMPTY_NODE;let d=this;return!d.left.isRed_()&&!d.left.left.isRed_()&&(d=d.moveRedLeft_()),d=d.copy(null,null,null,d.left.removeMin_(),null),d.fixUp_()}remove(d,v){let S,k;if(S=this,v(d,S.key)<0)!S.left.isEmpty()&&!S.left.isRed_()&&!S.left.left.isRed_()&&(S=S.moveRedLeft_()),S=S.copy(null,null,null,S.left.remove(d,v),null);else{if(S.left.isRed_()&&(S=S.rotateRight_()),!S.right.isEmpty()&&!S.right.isRed_()&&!S.right.left.isRed_()&&(S=S.moveRedRight_()),0===v(d,S.key)){if(S.right.isEmpty())return mi.EMPTY_NODE;k=S.right.min_(),S=S.copy(k.key,k.value,null,null,S.right.removeMin_())}S=S.copy(null,null,null,null,S.right.remove(d,v))}return S.fixUp_()}isRed_(){return this.color}fixUp_(){let d=this;return d.right.isRed_()&&!d.left.isRed_()&&(d=d.rotateLeft_()),d.left.isRed_()&&d.left.left.isRed_()&&(d=d.rotateRight_()),d.left.isRed_()&&d.right.isRed_()&&(d=d.colorFlip_()),d}moveRedLeft_(){let d=this.colorFlip_();return d.right.left.isRed_()&&(d=d.copy(null,null,null,null,d.right.rotateRight_()),d=d.rotateLeft_(),d=d.colorFlip_()),d}moveRedRight_(){let d=this.colorFlip_();return d.left.left.isRed_()&&(d=d.rotateRight_(),d=d.colorFlip_()),d}rotateLeft_(){const d=this.copy(null,null,h.RED,null,this.right.left);return this.right.copy(null,null,this.color,d,null)}rotateRight_(){const d=this.copy(null,null,h.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,d)}colorFlip_(){const d=this.left.copy(null,null,!this.left.color,null,null),v=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,d,v)}checkMaxDepth_(){const d=this.check_();return Math.pow(2,d)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const d=this.left.check_();if(d!==this.right.check_())throw new Error("Black depths differ");return d+(this.isRed_()?0:1)}}return h.RED=!0,h.BLACK=!1,h})();class mi{constructor(u,d=mi.EMPTY_NODE){this.comparator_=u,this.root_=d}insert(u,d){return new mi(this.comparator_,this.root_.insert(u,d,this.comparator_).copy(null,null,Qi.BLACK,null,null))}remove(u){return new mi(this.comparator_,this.root_.remove(u,this.comparator_).copy(null,null,Qi.BLACK,null,null))}get(u){let d,v=this.root_;for(;!v.isEmpty();){if(d=this.comparator_(u,v.key),0===d)return v.value;d<0?v=v.left:d>0&&(v=v.right)}return null}getPredecessorKey(u){let d,v=this.root_,S=null;for(;!v.isEmpty();){if(d=this.comparator_(u,v.key),0===d){if(v.left.isEmpty())return S?S.key:null;for(v=v.left;!v.right.isEmpty();)v=v.right;return v.key}d<0?v=v.left:d>0&&(S=v,v=v.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(u){return this.root_.inorderTraversal(u)}reverseTraversal(u){return this.root_.reverseTraversal(u)}getIterator(u){return new cs(this.root_,null,this.comparator_,!1,u)}getIteratorFrom(u,d){return new cs(this.root_,u,this.comparator_,!1,d)}getReverseIteratorFrom(u,d){return new cs(this.root_,u,this.comparator_,!0,d)}getReverseIterator(u){return new cs(this.root_,null,this.comparator_,!0,u)}}function $s(h,u){return ei(h.name,u.name)}function Dr(h,u){return ei(h,u)}mi.EMPTY_NODE=new class Xi{copy(u,d,v,S,k){return this}insert(u,d,v){return new Qi(u,d,null)}remove(u,d){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(u){return!1}reverseTraversal(u){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Ci=function(h){return"number"==typeof h?"number:"+Cn(h):"string:"+h},Zo=function(h){if(h.isLeafNode()){const u=h.val();(0,W.hu)("string"==typeof u||"number"==typeof u||"object"==typeof u&&(0,W.r3)(u,".sv"),"Priority must be a string or number.")}else(0,W.hu)(h===Vs||h.isEmpty(),"priority of unexpected type.");(0,W.hu)(h===Vs||h.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let co,$i,Qo,qi=(()=>{class h{constructor(d,v=h.__childrenNodeConstructor.EMPTY_NODE){this.value_=d,this.priorityNode_=v,this.lazyHash_=null,(0,W.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Zo(this.priorityNode_)}static set __childrenNodeConstructor(d){co=d}static get __childrenNodeConstructor(){return co}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(d){return new h(this.value_,d)}getImmediateChild(d){return".priority"===d?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}getChild(d){return Jn(d)?this:".priority"===Kn(d)?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(d,v){return null}updateImmediateChild(d,v){return".priority"===d?this.updatePriority(v):v.isEmpty()&&".priority"!==d?this:h.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(d,v).updatePriority(this.priorityNode_)}updateChild(d,v){const S=Kn(d);return null===S?v:v.isEmpty()&&".priority"!==S?this:((0,W.hu)(".priority"!==S||1===gi(d),".priority must be the last token in a path"),this.updateImmediateChild(S,h.__childrenNodeConstructor.EMPTY_NODE.updateChild(ii(d),v)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(d,v){return!1}val(d){return d&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let d="";this.priorityNode_.isEmpty()||(d+="priority:"+Ci(this.priorityNode_.val())+":");const v=typeof this.value_;d+=v+":",d+="number"===v?Cn(this.value_):this.value_,this.lazyHash_=cn(d)}return this.lazyHash_}getValue(){return this.value_}compareTo(d){return d===h.__childrenNodeConstructor.EMPTY_NODE?1:d instanceof h.__childrenNodeConstructor?-1:((0,W.hu)(d.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(d))}compareToLeafNode_(d){const v=typeof d.value_,S=typeof this.value_,k=h.VALUE_TYPE_ORDER.indexOf(v),G=h.VALUE_TYPE_ORDER.indexOf(S);return(0,W.hu)(k>=0,"Unknown leaf type: "+v),(0,W.hu)(G>=0,"Unknown leaf type: "+S),k===G?"object"===S?0:this.value_<d.value_?-1:this.value_===d.value_?0:1:G-k}withIndex(){return this}isIndexed(){return!0}equals(d){return d===this||!!d.isLeafNode()&&(this.value_===d.value_&&this.priorityNode_.equals(d.priorityNode_))}}return h.VALUE_TYPE_ORDER=["object","boolean","number","string"],h})();const Xr=new class ki extends us{compare(u,d){const v=u.node.getPriority(),S=d.node.getPriority(),k=v.compareTo(S);return 0===k?ei(u.name,d.name):k}isDefinedOn(u){return!u.getPriority().isEmpty()}indexedValueChanged(u,d){return!u.getPriority().equals(d.getPriority())}minPost(){return gr.MIN}maxPost(){return new gr(br,new qi("[PRIORITY-POST]",Qo))}makePost(u,d){const v=$i(u);return new gr(d,new qi("[PRIORITY-POST]",v))}toString(){return".priority"}},eo=Math.log(2);class or{constructor(u){this.count=parseInt(Math.log(u+1)/eo,10),this.current_=this.count-1;const S=(k=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=u+1&S}nextBitIsOne(){const u=!(this.bits_&1<<this.current_);return this.current_--,u}}const Do=function(h,u,d,v){h.sort(u);const S=function(_e,Ve){const Bt=Ve-_e;let kt,Zt;if(0===Bt)return null;if(1===Bt)return kt=h[_e],Zt=d?d(kt):kt,new Qi(Zt,kt.node,Qi.BLACK,null,null);{const Vn=parseInt(Bt/2,10)+_e,ur=S(_e,Vn),xi=S(Vn+1,Ve);return kt=h[Vn],Zt=d?d(kt):kt,new Qi(Zt,kt.node,Qi.BLACK,ur,xi)}},se=function(_e){let Ve=null,Bt=null,kt=h.length;const Zt=function(ur,xi){const gs=kt-ur,vo=kt;kt-=ur;const Ko=S(gs+1,vo),fl=h[gs],jp=d?d(fl):fl;Vn(new Qi(jp,fl.node,xi,null,Ko))},Vn=function(ur){Ve?(Ve.left=ur,Ve=ur):(Bt=ur,Ve=ur)};for(let ur=0;ur<_e.count;++ur){const xi=_e.nextBitIsOne(),gs=Math.pow(2,_e.count-(ur+1));xi?Zt(gs,Qi.BLACK):(Zt(gs,Qi.BLACK),Zt(gs,Qi.RED))}return Bt}(new or(h.length));return new mi(v||u,se)};let va;const to={};class vs{constructor(u,d){this.indexes_=u,this.indexSet_=d}static get Default(){return(0,W.hu)(to&&Xr,"ChildrenNode.ts has not been loaded"),va=va||new vs({".priority":to},{".priority":Xr}),va}get(u){const d=(0,W.DV)(this.indexes_,u);if(!d)throw new Error("No index defined for "+u);return d instanceof mi?d:null}hasIndex(u){return(0,W.r3)(this.indexSet_,u.toString())}addIndex(u,d){(0,W.hu)(u!==Ni,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const v=[];let S=!1;const k=d.getIterator(gr.Wrap);let se,G=k.getNext();for(;G;)S=S||u.isDefinedOn(G.node),v.push(G),G=k.getNext();se=S?Do(v,u.getCompare()):to;const _e=u.toString(),Ve=Object.assign({},this.indexSet_);Ve[_e]=u;const Bt=Object.assign({},this.indexes_);return Bt[_e]=se,new vs(Bt,Ve)}addToIndexes(u,d){const v=(0,W.UI)(this.indexes_,(S,k)=>{const G=(0,W.DV)(this.indexSet_,k);if((0,W.hu)(G,"Missing index implementation for "+k),S===to){if(G.isDefinedOn(u.node)){const se=[],_e=d.getIterator(gr.Wrap);let Ve=_e.getNext();for(;Ve;)Ve.name!==u.name&&se.push(Ve),Ve=_e.getNext();return se.push(u),Do(se,G.getCompare())}return to}{const se=d.get(u.name);let _e=S;return se&&(_e=_e.remove(new gr(u.name,se))),_e.insert(u,u.node)}});return new vs(v,this.indexSet_)}removeFromIndexes(u,d){const v=(0,W.UI)(this.indexes_,S=>{if(S===to)return S;{const k=d.get(u.name);return k?S.remove(new gr(u.name,k)):S}});return new vs(v,this.indexSet_)}}let Us,tr=(()=>{class h{constructor(d,v,S){this.children_=d,this.priorityNode_=v,this.indexMap_=S,this.lazyHash_=null,this.priorityNode_&&Zo(this.priorityNode_),this.children_.isEmpty()&&(0,W.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Us||(Us=new h(new mi(Dr),null,vs.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Us}updatePriority(d){return this.children_.isEmpty()?this:new h(this.children_,d,this.indexMap_)}getImmediateChild(d){if(".priority"===d)return this.getPriority();{const v=this.children_.get(d);return null===v?Us:v}}getChild(d){const v=Kn(d);return null===v?this:this.getImmediateChild(v).getChild(ii(d))}hasChild(d){return null!==this.children_.get(d)}updateImmediateChild(d,v){if((0,W.hu)(v,"We should always be passing snapshot nodes"),".priority"===d)return this.updatePriority(v);{const S=new gr(d,v);let k,G;v.isEmpty()?(k=this.children_.remove(d),G=this.indexMap_.removeFromIndexes(S,this.children_)):(k=this.children_.insert(d,v),G=this.indexMap_.addToIndexes(S,this.children_));const se=k.isEmpty()?Us:this.priorityNode_;return new h(k,se,G)}}updateChild(d,v){const S=Kn(d);if(null===S)return v;{(0,W.hu)(".priority"!==Kn(d)||1===gi(d),".priority must be the last token in a path");const k=this.getImmediateChild(S).updateChild(ii(d),v);return this.updateImmediateChild(S,k)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(d){if(this.isEmpty())return null;const v={};let S=0,k=0,G=!0;if(this.forEachChild(Xr,(se,_e)=>{v[se]=_e.val(d),S++,G&&h.INTEGER_REGEXP_.test(se)?k=Math.max(k,Number(se)):G=!1}),!d&&G&&k<2*S){const se=[];for(const _e in v)se[_e]=v[_e];return se}return d&&!this.getPriority().isEmpty()&&(v[".priority"]=this.getPriority().val()),v}hash(){if(null===this.lazyHash_){let d="";this.getPriority().isEmpty()||(d+="priority:"+Ci(this.getPriority().val())+":"),this.forEachChild(Xr,(v,S)=>{const k=S.hash();""!==k&&(d+=":"+v+":"+k)}),this.lazyHash_=""===d?"":cn(d)}return this.lazyHash_}getPredecessorChildName(d,v,S){const k=this.resolveIndex_(S);if(k){const G=k.getPredecessorKey(new gr(d,v));return G?G.name:null}return this.children_.getPredecessorKey(d)}getFirstChildName(d){const v=this.resolveIndex_(d);if(v){const S=v.minKey();return S&&S.name}return this.children_.minKey()}getFirstChild(d){const v=this.getFirstChildName(d);return v?new gr(v,this.children_.get(v)):null}getLastChildName(d){const v=this.resolveIndex_(d);if(v){const S=v.maxKey();return S&&S.name}return this.children_.maxKey()}getLastChild(d){const v=this.getLastChildName(d);return v?new gr(v,this.children_.get(v)):null}forEachChild(d,v){const S=this.resolveIndex_(d);return S?S.inorderTraversal(k=>v(k.name,k.node)):this.children_.inorderTraversal(v)}getIterator(d){return this.getIteratorFrom(d.minPost(),d)}getIteratorFrom(d,v){const S=this.resolveIndex_(v);if(S)return S.getIteratorFrom(d,k=>k);{const k=this.children_.getIteratorFrom(d.name,gr.Wrap);let G=k.peek();for(;null!=G&&v.compare(G,d)<0;)k.getNext(),G=k.peek();return k}}getReverseIterator(d){return this.getReverseIteratorFrom(d.maxPost(),d)}getReverseIteratorFrom(d,v){const S=this.resolveIndex_(v);if(S)return S.getReverseIteratorFrom(d,k=>k);{const k=this.children_.getReverseIteratorFrom(d.name,gr.Wrap);let G=k.peek();for(;null!=G&&v.compare(G,d)>0;)k.getNext(),G=k.peek();return k}}compareTo(d){return this.isEmpty()?d.isEmpty()?0:-1:d.isLeafNode()||d.isEmpty()?1:d===To?-1:0}withIndex(d){if(d===Ni||this.indexMap_.hasIndex(d))return this;{const v=this.indexMap_.addIndex(d,this.children_);return new h(this.children_,this.priorityNode_,v)}}isIndexed(d){return d===Ni||this.indexMap_.hasIndex(d)}equals(d){if(d===this)return!0;if(d.isLeafNode())return!1;{const v=d;if(this.getPriority().equals(v.getPriority())){if(this.children_.count()===v.children_.count()){const S=this.getIterator(Xr),k=v.getIterator(Xr);let G=S.getNext(),se=k.getNext();for(;G&&se;){if(G.name!==se.name||!G.node.equals(se.node))return!1;G=S.getNext(),se=k.getNext()}return null===G&&null===se}return!1}return!1}}resolveIndex_(d){return d===Ni?null:this.indexMap_.get(d.toString())}}return h.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,h})();const To=new class fo extends tr{constructor(){super(new mi(Dr),tr.EMPTY_NODE,vs.Default)}compareTo(u){return u===this?0:1}equals(u){return u===this}getPriority(){return this}getImmediateChild(u){return tr.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(gr,{MIN:{value:new gr(Tr,tr.EMPTY_NODE)},MAX:{value:new gr(br,To)}}),ss.__EMPTY_NODE=tr.EMPTY_NODE,qi.__childrenNodeConstructor=tr,function Xs(h){Vs=h}(To),function Js(h){Qo=h}(To);const qt=!0;function Fn(h,u=null){if(null===h)return tr.EMPTY_NODE;if("object"==typeof h&&".priority"in h&&(u=h[".priority"]),(0,W.hu)(null===u||"string"==typeof u||"number"==typeof u||"object"==typeof u&&".sv"in u,"Invalid priority type found: "+typeof u),"object"==typeof h&&".value"in h&&null!==h[".value"]&&(h=h[".value"]),"object"!=typeof h||".sv"in h)return new qi(h,Fn(u));if(h instanceof Array||!qt){let d=tr.EMPTY_NODE;return xr(h,(v,S)=>{if((0,W.r3)(h,v)&&"."!==v.substring(0,1)){const k=Fn(S);(k.isLeafNode()||!k.isEmpty())&&(d=d.updateImmediateChild(v,k))}}),d.updatePriority(Fn(u))}{const d=[];let v=!1;if(xr(h,(G,se)=>{if("."!==G.substring(0,1)){const _e=Fn(se);_e.isEmpty()||(v=v||!_e.getPriority().isEmpty(),d.push(new gr(G,_e)))}}),0===d.length)return tr.EMPTY_NODE;const k=Do(d,$s,G=>G.name,Dr);if(v){const G=Do(d,Xr.getCompare());return new tr(k,Fn(u),new vs({".priority":G},{".priority":Xr}))}return new tr(k,Fn(u),vs.Default)}}!function ho(h){$i=h}(Fn);class j extends us{constructor(u){super(),this.indexPath_=u,(0,W.hu)(!Jn(u)&&".priority"!==Kn(u),"Can't create PathIndex with empty path or .priority key")}extractChild(u){return u.getChild(this.indexPath_)}isDefinedOn(u){return!u.getChild(this.indexPath_).isEmpty()}compare(u,d){const v=this.extractChild(u.node),S=this.extractChild(d.node),k=v.compareTo(S);return 0===k?ei(u.name,d.name):k}makePost(u,d){const v=Fn(u),S=tr.EMPTY_NODE.updateChild(this.indexPath_,v);return new gr(d,S)}maxPost(){const u=tr.EMPTY_NODE.updateChild(this.indexPath_,To);return new gr(br,u)}toString(){return Ls(this.indexPath_,0).join("/")}}const I=new class f extends us{compare(u,d){const v=u.node.compareTo(d.node);return 0===v?ei(u.name,d.name):v}isDefinedOn(u){return!0}indexedValueChanged(u,d){return!u.equals(d)}minPost(){return gr.MIN}maxPost(){return gr.MAX}makePost(u,d){const v=Fn(u);return new gr(d,v)}toString(){return".value"}};function y(h){return{type:"value",snapshotNode:h}}function P(h,u){return{type:"child_added",snapshotNode:u,childName:h}}function Q(h,u){return{type:"child_removed",snapshotNode:u,childName:h}}function gt(h,u,d){return{type:"child_changed",snapshotNode:u,childName:h,oldSnap:d}}class vn{constructor(u){this.index_=u}updateChild(u,d,v,S,k,G){(0,W.hu)(u.isIndexed(this.index_),"A node must be indexed if only a child is updated");const se=u.getImmediateChild(d);return se.getChild(S).equals(v.getChild(S))&&se.isEmpty()===v.isEmpty()||(null!=G&&(v.isEmpty()?u.hasChild(d)?G.trackChildChange(Q(d,se)):(0,W.hu)(u.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):se.isEmpty()?G.trackChildChange(P(d,v)):G.trackChildChange(gt(d,v,se))),u.isLeafNode()&&v.isEmpty())?u:u.updateImmediateChild(d,v).withIndex(this.index_)}updateFullNode(u,d,v){return null!=v&&(u.isLeafNode()||u.forEachChild(Xr,(S,k)=>{d.hasChild(S)||v.trackChildChange(Q(S,k))}),d.isLeafNode()||d.forEachChild(Xr,(S,k)=>{if(u.hasChild(S)){const G=u.getImmediateChild(S);G.equals(k)||v.trackChildChange(gt(S,k,G))}else v.trackChildChange(P(S,k))})),d.withIndex(this.index_)}updatePriority(u,d){return u.isEmpty()?tr.EMPTY_NODE:u.updatePriority(d)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Gn{constructor(u){this.indexedFilter_=new vn(u.getIndex()),this.index_=u.getIndex(),this.startPost_=Gn.getStartPost_(u),this.endPost_=Gn.getEndPost_(u),this.startIsInclusive_=!u.startAfterSet_,this.endIsInclusive_=!u.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(u){const d=this.startIsInclusive_?this.index_.compare(this.getStartPost(),u)<=0:this.index_.compare(this.getStartPost(),u)<0,v=this.endIsInclusive_?this.index_.compare(u,this.getEndPost())<=0:this.index_.compare(u,this.getEndPost())<0;return d&&v}updateChild(u,d,v,S,k,G){return this.matches(new gr(d,v))||(v=tr.EMPTY_NODE),this.indexedFilter_.updateChild(u,d,v,S,k,G)}updateFullNode(u,d,v){d.isLeafNode()&&(d=tr.EMPTY_NODE);let S=d.withIndex(this.index_);S=S.updatePriority(tr.EMPTY_NODE);const k=this;return d.forEachChild(Xr,(G,se)=>{k.matches(new gr(G,se))||(S=S.updateImmediateChild(G,tr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(u,S,v)}updatePriority(u,d){return u}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(u){if(u.hasStart()){const d=u.getIndexStartName();return u.getIndex().makePost(u.getIndexStartValue(),d)}return u.getIndex().minPost()}static getEndPost_(u){if(u.hasEnd()){const d=u.getIndexEndName();return u.getIndex().makePost(u.getIndexEndValue(),d)}return u.getIndex().maxPost()}}class Rr{constructor(u){this.withinDirectionalStart=d=>this.reverse_?this.withinEndPost(d):this.withinStartPost(d),this.withinDirectionalEnd=d=>this.reverse_?this.withinStartPost(d):this.withinEndPost(d),this.withinStartPost=d=>{const v=this.index_.compare(this.rangedFilter_.getStartPost(),d);return this.startIsInclusive_?v<=0:v<0},this.withinEndPost=d=>{const v=this.index_.compare(d,this.rangedFilter_.getEndPost());return this.endIsInclusive_?v<=0:v<0},this.rangedFilter_=new Gn(u),this.index_=u.getIndex(),this.limit_=u.getLimit(),this.reverse_=!u.isViewFromLeft(),this.startIsInclusive_=!u.startAfterSet_,this.endIsInclusive_=!u.endBeforeSet_}updateChild(u,d,v,S,k,G){return this.rangedFilter_.matches(new gr(d,v))||(v=tr.EMPTY_NODE),u.getImmediateChild(d).equals(v)?u:u.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(u,d,v,S,k,G):this.fullLimitUpdateChild_(u,d,v,k,G)}updateFullNode(u,d,v){let S;if(d.isLeafNode()||d.isEmpty())S=tr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<d.numChildren()&&d.isIndexed(this.index_)){let k;S=tr.EMPTY_NODE.withIndex(this.index_),k=this.reverse_?d.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):d.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let G=0;for(;k.hasNext()&&G<this.limit_;){const se=k.getNext();if(this.withinDirectionalStart(se)){if(!this.withinDirectionalEnd(se))break;S=S.updateImmediateChild(se.name,se.node),G++}}}else{let k;S=d.withIndex(this.index_),S=S.updatePriority(tr.EMPTY_NODE),k=this.reverse_?S.getReverseIterator(this.index_):S.getIterator(this.index_);let G=0;for(;k.hasNext();){const se=k.getNext();G<this.limit_&&this.withinDirectionalStart(se)&&this.withinDirectionalEnd(se)?G++:S=S.updateImmediateChild(se.name,tr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(u,S,v)}updatePriority(u,d){return u}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(u,d,v,S,k){let G;if(this.reverse_){const kt=this.index_.getCompare();G=(Zt,Vn)=>kt(Vn,Zt)}else G=this.index_.getCompare();const se=u;(0,W.hu)(se.numChildren()===this.limit_,"");const _e=new gr(d,v),Ve=this.reverse_?se.getFirstChild(this.index_):se.getLastChild(this.index_),Bt=this.rangedFilter_.matches(_e);if(se.hasChild(d)){const kt=se.getImmediateChild(d);let Zt=S.getChildAfterChild(this.index_,Ve,this.reverse_);for(;null!=Zt&&(Zt.name===d||se.hasChild(Zt.name));)Zt=S.getChildAfterChild(this.index_,Zt,this.reverse_);const Vn=null==Zt?1:G(Zt,_e);if(Bt&&!v.isEmpty()&&Vn>=0)return null!=k&&k.trackChildChange(gt(d,v,kt)),se.updateImmediateChild(d,v);{null!=k&&k.trackChildChange(Q(d,kt));const xi=se.updateImmediateChild(d,tr.EMPTY_NODE);return null!=Zt&&this.rangedFilter_.matches(Zt)?(null!=k&&k.trackChildChange(P(Zt.name,Zt.node)),xi.updateImmediateChild(Zt.name,Zt.node)):xi}}return v.isEmpty()?u:Bt&&G(Ve,_e)>=0?(null!=k&&(k.trackChildChange(Q(Ve.name,Ve.node)),k.trackChildChange(P(d,v))),se.updateImmediateChild(d,v).updateImmediateChild(Ve.name,tr.EMPTY_NODE)):u}}class Zn{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,W.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,W.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Tr}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,W.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,W.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:br}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,W.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Xr}copy(){const u=new Zn;return u.limitSet_=this.limitSet_,u.limit_=this.limit_,u.startSet_=this.startSet_,u.startAfterSet_=this.startAfterSet_,u.indexStartValue_=this.indexStartValue_,u.startNameSet_=this.startNameSet_,u.indexStartName_=this.indexStartName_,u.endSet_=this.endSet_,u.endBeforeSet_=this.endBeforeSet_,u.indexEndValue_=this.indexEndValue_,u.endNameSet_=this.endNameSet_,u.indexEndName_=this.indexEndName_,u.index_=this.index_,u.viewFrom_=this.viewFrom_,u}}function si(h,u,d){const v=h.copy();return v.startSet_=!0,void 0===u&&(u=null),v.indexStartValue_=u,null!=d?(v.startNameSet_=!0,v.indexStartName_=d):(v.startNameSet_=!1,v.indexStartName_=""),v}function js(h,u,d){const v=h.copy();return v.endSet_=!0,void 0===u&&(u=null),v.indexEndValue_=u,void 0!==d?(v.endNameSet_=!0,v.indexEndName_=d):(v.endNameSet_=!1,v.indexEndName_=""),v}function ua(h,u){const d=h.copy();return d.index_=u,d}function ca(h){const u={};if(h.isDefault())return u;let d;if(h.index_===Xr?d="$priority":h.index_===I?d="$value":h.index_===Ni?d="$key":((0,W.hu)(h.index_ instanceof j,"Unrecognized index type!"),d=h.index_.toString()),u.orderBy=(0,W.Wl)(d),h.startSet_){const v=h.startAfterSet_?"startAfter":"startAt";u[v]=(0,W.Wl)(h.indexStartValue_),h.startNameSet_&&(u[v]+=","+(0,W.Wl)(h.indexStartName_))}if(h.endSet_){const v=h.endBeforeSet_?"endBefore":"endAt";u[v]=(0,W.Wl)(h.indexEndValue_),h.endNameSet_&&(u[v]+=","+(0,W.Wl)(h.indexEndName_))}return h.limitSet_&&(h.isViewFromLeft()?u.limitToFirst=h.limit_:u.limitToLast=h.limit_),u}function _a(h){const u={};if(h.startSet_&&(u.sp=h.indexStartValue_,h.startNameSet_&&(u.sn=h.indexStartName_),u.sin=!h.startAfterSet_),h.endSet_&&(u.ep=h.indexEndValue_,h.endNameSet_&&(u.en=h.indexEndName_),u.ein=!h.endBeforeSet_),h.limitSet_){u.l=h.limit_;let d=h.viewFrom_;""===d&&(d=h.isViewFromLeft()?"l":"r"),u.vf=d}return h.index_!==Xr&&(u.i=h.index_.toString()),u}class Pa extends nn{constructor(u,d,v,S){super(),this.repoInfo_=u,this.onDataUpdate_=d,this.authTokenProvider_=v,this.appCheckTokenProvider_=S,this.log_=nr("p:rest:"),this.listens_={}}reportStats(u){throw new Error("Method not implemented.")}static getListenId_(u,d){return void 0!==d?"tag$"+d:((0,W.hu)(u._queryParams.isDefault(),"should have a tag if it's not a default query."),u._path.toString())}listen(u,d,v,S){const k=u._path.toString();this.log_("Listen called for "+k+" "+u._queryIdentifier);const G=Pa.getListenId_(u,v),se={};this.listens_[G]=se;const _e=ca(u._queryParams);this.restRequest_(k+".json",_e,(Ve,Bt)=>{let kt=Bt;if(404===Ve&&(kt=null,Ve=null),null===Ve&&this.onDataUpdate_(k,kt,!1,v),(0,W.DV)(this.listens_,G)===se){let Zt;Zt=Ve?401===Ve?"permission_denied":"rest_error:"+Ve:"ok",S(Zt,null)}})}unlisten(u,d){const v=Pa.getListenId_(u,d);delete this.listens_[v]}get(u){const d=ca(u._queryParams),v=u._path.toString(),S=new W.BH;return this.restRequest_(v+".json",d,(k,G)=>{let se=G;404===k&&(se=null,k=null),null===k?(this.onDataUpdate_(v,se,!1,null),S.resolve(se)):S.reject(new Error(se))}),S.promise}refreshAuthToken(u){}restRequest_(u,d={},v){return d.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([S,k])=>{S&&S.accessToken&&(d.auth=S.accessToken),k&&k.token&&(d.ac=k.token);const G=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+u+"?ns="+this.repoInfo_.namespace+(0,W.xO)(d);this.log_("Sending REST request for "+G);const se=new XMLHttpRequest;se.onreadystatechange=()=>{if(v&&4===se.readyState){this.log_("REST Response for "+G+" received. status:",se.status,"response:",se.responseText);let _e=null;if(se.status>=200&&se.status<300){try{_e=(0,W.cI)(se.responseText)}catch(Ve){gn("Failed to parse JSON response for "+G+": "+se.responseText)}v(null,_e)}else 401!==se.status&&404!==se.status&&gn("Got unsuccessful REST response for "+G+" Status: "+se.status),v(se.status);v=null}},se.open("GET",G,!0),se.send()})}}class xs{constructor(){this.rootNode_=tr.EMPTY_NODE}getNode(u){return this.rootNode_.getChild(u)}updateSnapshot(u,d){this.rootNode_=this.rootNode_.updateChild(u,d)}}function Na(){return{value:null,children:new Map}}function Bo(h,u,d){if(Jn(u))h.value=d,h.children.clear();else if(null!==h.value)h.value=h.value.updateChild(u,d);else{const v=Kn(u);h.children.has(v)||h.children.set(v,Na()),Bo(h.children.get(v),u=ii(u),d)}}function So(h,u){if(Jn(u))return h.value=null,h.children.clear(),!0;if(null!==h.value){if(h.value.isLeafNode())return!1;{const d=h.value;return h.value=null,d.forEachChild(Xr,(v,S)=>{Bo(h,new Ir(v),S)}),So(h,u)}}if(h.children.size>0){const d=Kn(u);return u=ii(u),h.children.has(d)&&So(h.children.get(d),u)&&h.children.delete(d),0===h.children.size}return!0}function Ka(h,u,d){null!==h.value?d(u,h.value):function al(h,u){h.children.forEach((d,v)=>{u(v,d)})}(h,(v,S)=>{Ka(S,new Ir(u.toString()+"/"+v),d)})}class ll{constructor(u){this.collection_=u,this.last_=null}get(){const u=this.collection_.get(),d=Object.assign({},u);return this.last_&&xr(this.last_,(v,S)=>{d[v]=d[v]-S}),this.last_=u,d}}class Iu{constructor(u,d){this.server_=d,this.statsToReport_={},this.statsListener_=new ll(u);const v=1e4+2e4*Math.random();rn(this.reportStats_.bind(this),Math.floor(v))}reportStats_(){const u=this.statsListener_.get(),d={};let v=!1;xr(u,(S,k)=>{k>0&&(0,W.r3)(this.statsToReport_,S)&&(d[S]=k,v=!0)}),v&&this.server_.reportStats(d),rn(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var _i=(()=>{return(h=_i||(_i={}))[h.OVERWRITE=0]="OVERWRITE",h[h.MERGE=1]="MERGE",h[h.ACK_USER_WRITE=2]="ACK_USER_WRITE",h[h.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",_i;var h})();function Jo(h){return{fromUser:!1,fromServer:!0,queryId:h,tagged:!0}}class ds{constructor(u,d,v){this.path=u,this.affectedTree=d,this.revert=v,this.type=_i.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(u){if(Jn(this.path)){if(null!=this.affectedTree.value)return(0,W.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const d=this.affectedTree.subtree(new Ir(u));return new ds(pr(),d,this.revert)}}return(0,W.hu)(Kn(this.path)===u,"operationForChild called for unrelated child."),new ds(ii(this.path),this.affectedTree,this.revert)}}class Ao{constructor(u,d){this.source=u,this.path=d,this.type=_i.LISTEN_COMPLETE}operationForChild(u){return Jn(this.path)?new Ao(this.source,pr()):new Ao(this.source,ii(this.path))}}class $o{constructor(u,d,v){this.source=u,this.path=d,this.snap=v,this.type=_i.OVERWRITE}operationForChild(u){return Jn(this.path)?new $o(this.source,pr(),this.snap.getImmediateChild(u)):new $o(this.source,ii(this.path),this.snap)}}class Ti{constructor(u,d,v){this.source=u,this.path=d,this.children=v,this.type=_i.MERGE}operationForChild(u){if(Jn(this.path)){const d=this.children.subtree(new Ir(u));return d.isEmpty()?null:d.value?new $o(this.source,pr(),d.value):new Ti(this.source,pr(),d)}return(0,W.hu)(Kn(this.path)===u,"Can't get a merge for a child not on the path of the operation"),new Ti(this.source,ii(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class da{constructor(u,d,v){this.node_=u,this.fullyInitialized_=d,this.filtered_=v}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(u){if(Jn(u))return this.isFullyInitialized()&&!this.filtered_;const d=Kn(u);return this.isCompleteForChild(d)}isCompleteForChild(u){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(u)}getNode(){return this.node_}}class pl{constructor(u){this.query_=u,this.index_=this.query_._queryParams.getIndex()}}function ea(h,u,d,v,S,k){const G=v.filter(se=>se.type===d);G.sort((se,_e)=>function Pl(h,u,d){if(null==u.childName||null==d.childName)throw(0,W.g5)("Should only compare child_ events.");const v=new gr(u.childName,u.snapshotNode),S=new gr(d.childName,d.snapshotNode);return h.index_.compare(v,S)}(h,se,_e)),G.forEach(se=>{const _e=function Fa(h,u,d){return"value"===u.type||"child_removed"===u.type||(u.prevName=d.getPredecessorChildName(u.childName,u.snapshotNode,h.index_)),u}(h,se,k);S.forEach(Ve=>{Ve.respondsTo(se.type)&&u.push(Ve.createEvent(_e,h.query_))})})}function N(h,u){return{eventCache:h,serverCache:u}}function K(h,u,d,v){return N(new da(u,d,v),h.serverCache)}function B(h,u,d,v){return N(h.eventCache,new da(u,d,v))}function re(h){return h.eventCache.isFullyInitialized()?h.eventCache.getNode():null}function ye(h){return h.serverCache.isFullyInitialized()?h.serverCache.getNode():null}let _t;class un{constructor(u,d=(()=>(_t||(_t=new mi(Ar)),_t))()){this.value=u,this.children=d}static fromObject(u){let d=new un(null);return xr(u,(v,S)=>{d=d.set(new Ir(v),S)}),d}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(u,d){if(null!=this.value&&d(this.value))return{path:pr(),value:this.value};if(Jn(u))return null;{const v=Kn(u),S=this.children.get(v);if(null!==S){const k=S.findRootMostMatchingPathAndValue(ii(u),d);return null!=k?{path:Vr(new Ir(v),k.path),value:k.value}:null}return null}}findRootMostValueAndPath(u){return this.findRootMostMatchingPathAndValue(u,()=>!0)}subtree(u){if(Jn(u))return this;{const d=Kn(u),v=this.children.get(d);return null!==v?v.subtree(ii(u)):new un(null)}}set(u,d){if(Jn(u))return new un(d,this.children);{const v=Kn(u),k=(this.children.get(v)||new un(null)).set(ii(u),d),G=this.children.insert(v,k);return new un(this.value,G)}}remove(u){if(Jn(u))return this.children.isEmpty()?new un(null):new un(null,this.children);{const d=Kn(u),v=this.children.get(d);if(v){const S=v.remove(ii(u));let k;return k=S.isEmpty()?this.children.remove(d):this.children.insert(d,S),null===this.value&&k.isEmpty()?new un(null):new un(this.value,k)}return this}}get(u){if(Jn(u))return this.value;{const d=Kn(u),v=this.children.get(d);return v?v.get(ii(u)):null}}setTree(u,d){if(Jn(u))return d;{const v=Kn(u),k=(this.children.get(v)||new un(null)).setTree(ii(u),d);let G;return G=k.isEmpty()?this.children.remove(v):this.children.insert(v,k),new un(this.value,G)}}fold(u){return this.fold_(pr(),u)}fold_(u,d){const v={};return this.children.inorderTraversal((S,k)=>{v[S]=k.fold_(Vr(u,S),d)}),d(u,this.value,v)}findOnPath(u,d){return this.findOnPath_(u,pr(),d)}findOnPath_(u,d,v){const S=!!this.value&&v(d,this.value);if(S)return S;if(Jn(u))return null;{const k=Kn(u),G=this.children.get(k);return G?G.findOnPath_(ii(u),Vr(d,k),v):null}}foreachOnPath(u,d){return this.foreachOnPath_(u,pr(),d)}foreachOnPath_(u,d,v){if(Jn(u))return this;{this.value&&v(d,this.value);const S=Kn(u),k=this.children.get(S);return k?k.foreachOnPath_(ii(u),Vr(d,S),v):new un(null)}}foreach(u){this.foreach_(pr(),u)}foreach_(u,d){this.children.inorderTraversal((v,S)=>{S.foreach_(Vr(u,v),d)}),this.value&&d(u,this.value)}foreachChild(u){this.children.inorderTraversal((d,v)=>{v.value&&u(d,v.value)})}}class hr{constructor(u){this.writeTree_=u}static empty(){return new hr(new un(null))}}function Ft(h,u,d){if(Jn(u))return new hr(new un(d));{const v=h.writeTree_.findRootMostValueAndPath(u);if(null!=v){const S=v.path;let k=v.value;const G=ni(S,u);return k=k.updateChild(G,d),new hr(h.writeTree_.set(S,k))}{const S=new un(d),k=h.writeTree_.setTree(u,S);return new hr(k)}}}function ir(h,u,d){let v=h;return xr(d,(S,k)=>{v=Ft(v,Vr(u,S),k)}),v}function ar(h,u){if(Jn(u))return hr.empty();{const d=h.writeTree_.setTree(u,new un(null));return new hr(d)}}function Ei(h,u){return null!=zt(h,u)}function zt(h,u){const d=h.writeTree_.findRootMostValueAndPath(u);return null!=d?h.writeTree_.get(d.path).getChild(ni(d.path,u)):null}function _n(h){const u=[],d=h.writeTree_.value;return null!=d?d.isLeafNode()||d.forEachChild(Xr,(v,S)=>{u.push(new gr(v,S))}):h.writeTree_.children.inorderTraversal((v,S)=>{null!=S.value&&u.push(new gr(v,S.value))}),u}function hs(h,u){if(Jn(u))return h;{const d=zt(h,u);return new hr(null!=d?new un(d):h.writeTree_.subtree(u))}}function dn(h){return h.writeTree_.isEmpty()}function It(h,u){return Wt(pr(),h.writeTree_,u)}function Wt(h,u,d){if(null!=u.value)return d.updateChild(h,u.value);{let v=null;return u.children.inorderTraversal((S,k)=>{".priority"===S?((0,W.hu)(null!==k.value,"Priority writes must always be leaf nodes"),v=k.value):d=Wt(Vr(h,S),k,d)}),!d.getChild(h).isEmpty()&&null!==v&&(d=d.updateChild(Vr(h,".priority"),v)),d}}function Ii(h,u){return es(u,h)}function Ea(h,u){if(h.snap)return Bi(h.path,u);for(const d in h.children)if(h.children.hasOwnProperty(d)&&Bi(Vr(h.path,d),u))return!0;return!1}function Gs(h){return h.visible}function gl(h,u,d){let v=hr.empty();for(let S=0;S<h.length;++S){const k=h[S];if(u(k)){const G=k.path;let se;if(k.snap)Bi(d,G)?(se=ni(d,G),v=Ft(v,se,k.snap)):Bi(G,d)&&(se=ni(G,d),v=Ft(v,pr(),k.snap.getChild(se)));else{if(!k.children)throw(0,W.g5)("WriteRecord should have .snap or .children");if(Bi(d,G))se=ni(d,G),v=ir(v,se,k.children);else if(Bi(G,d))if(se=ni(G,d),Jn(se))v=ir(v,pr(),k.children);else{const _e=(0,W.DV)(k.children,Kn(se));if(_e){const Ve=_e.getChild(ii(se));v=Ft(v,pr(),Ve)}}}}}return v}function La(h,u,d,v,S){if(v||S){const k=hs(h.visibleWrites,u);return!S&&dn(k)?d:S||null!=d||Ei(k,pr())?It(gl(h.allWrites,function(Ve){return(Ve.visible||S)&&(!v||!~v.indexOf(Ve.writeId))&&(Bi(Ve.path,u)||Bi(u,Ve.path))},u),d||tr.EMPTY_NODE):null}{const k=zt(h.visibleWrites,u);if(null!=k)return k;{const G=hs(h.visibleWrites,u);return dn(G)?d:null!=d||Ei(G,pr())?It(G,d||tr.EMPTY_NODE):null}}}function qn(h,u,d,v){return La(h.writeTree,h.treePath,u,d,v)}function xo(h,u){return function ml(h,u,d){let v=tr.EMPTY_NODE;const S=zt(h.visibleWrites,u);if(S)return S.isLeafNode()||S.forEachChild(Xr,(k,G)=>{v=v.updateImmediateChild(k,G)}),v;if(d){const k=hs(h.visibleWrites,u);return d.forEachChild(Xr,(G,se)=>{const _e=It(hs(k,new Ir(G)),se);v=v.updateImmediateChild(G,_e)}),_n(k).forEach(G=>{v=v.updateImmediateChild(G.name,G.node)}),v}return _n(hs(h.visibleWrites,u)).forEach(G=>{v=v.updateImmediateChild(G.name,G.node)}),v}(h.writeTree,h.treePath,u)}function Ur(h,u,d,v){return function ul(h,u,d,v,S){(0,W.hu)(v||S,"Either existingEventSnap or existingServerSnap must exist");const k=Vr(u,d);if(Ei(h.visibleWrites,k))return null;{const G=hs(h.visibleWrites,k);return dn(G)?S.getChild(d):It(G,S.getChild(d))}}(h.writeTree,h.treePath,u,d,v)}function Nl(h,u){return function ha(h,u){return zt(h.visibleWrites,u)}(h.writeTree,Vr(h.treePath,u))}function pn(h,u,d){return function mr(h,u,d,v){const S=Vr(u,d),k=zt(h.visibleWrites,S);return null!=k?k:v.isCompleteForChild(d)?It(hs(h.visibleWrites,S),v.getNode().getImmediateChild(d)):null}(h.writeTree,h.treePath,u,d)}function cl(h,u){return es(Vr(h.treePath,u),h.writeTree)}function es(h,u){return{treePath:h,writeTree:u}}class fa{constructor(){this.changeMap=new Map}trackChildChange(u){const d=u.type,v=u.childName;(0,W.hu)("child_added"===d||"child_changed"===d||"child_removed"===d,"Only child changes supported for tracking"),(0,W.hu)(".priority"!==v,"Only non-priority child changes can be tracked.");const S=this.changeMap.get(v);if(S){const k=S.type;if("child_added"===d&&"child_removed"===k)this.changeMap.set(v,gt(v,u.snapshotNode,S.snapshotNode));else if("child_removed"===d&&"child_added"===k)this.changeMap.delete(v);else if("child_removed"===d&&"child_changed"===k)this.changeMap.set(v,Q(v,S.oldSnap));else if("child_changed"===d&&"child_added"===k)this.changeMap.set(v,P(v,u.snapshotNode));else{if("child_changed"!==d||"child_changed"!==k)throw(0,W.g5)("Illegal combination of changes: "+u+" occurred after "+S);this.changeMap.set(v,gt(v,u.snapshotNode,S.oldSnap))}}else this.changeMap.set(v,u)}getChanges(){return Array.from(this.changeMap.values())}}const Mo=new class pa{getCompleteChild(u){return null}getChildAfterChild(u,d,v){return null}};class Ia{constructor(u,d,v=null){this.writes_=u,this.viewCache_=d,this.optCompleteServerCache_=v}getCompleteChild(u){const d=this.viewCache_.eventCache;if(d.isCompleteForChild(u))return d.getNode().getImmediateChild(u);{const v=null!=this.optCompleteServerCache_?new da(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return pn(this.writes_,u,v)}}getChildAfterChild(u,d,v){const S=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ye(this.viewCache_),k=function ai(h,u,d,v,S,k){return function Ql(h,u,d,v,S,k,G){let se;const _e=hs(h.visibleWrites,u),Ve=zt(_e,pr());if(null!=Ve)se=Ve;else{if(null==d)return[];se=It(_e,d)}if(se=se.withIndex(G),se.isEmpty()||se.isLeafNode())return[];{const Bt=[],kt=G.getCompare(),Zt=k?se.getReverseIteratorFrom(v,G):se.getIteratorFrom(v,G);let Vn=Zt.getNext();for(;Vn&&Bt.length<S;)0!==kt(Vn,v)&&Bt.push(Vn),Vn=Zt.getNext();return Bt}}(h.writeTree,h.treePath,u,d,v,S,k)}(this.writes_,S,d,1,v,u);return 0===k.length?null:k[0]}}function ta(h,u,d,v,S,k){const G=u.eventCache;if(null!=Nl(v,d))return u;{let se,_e;if(Jn(d))if((0,W.hu)(u.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),u.serverCache.isFiltered()){const Ve=ye(u),kt=xo(v,Ve instanceof tr?Ve:tr.EMPTY_NODE);se=h.filter.updateFullNode(u.eventCache.getNode(),kt,k)}else{const Ve=qn(v,ye(u));se=h.filter.updateFullNode(u.eventCache.getNode(),Ve,k)}else{const Ve=Kn(d);if(".priority"===Ve){(0,W.hu)(1===gi(d),"Can't have a priority with additional path components");const Bt=G.getNode();_e=u.serverCache.getNode();const kt=Ur(v,d,Bt,_e);se=null!=kt?h.filter.updatePriority(Bt,kt):G.getNode()}else{const Bt=ii(d);let kt;if(G.isCompleteForChild(Ve)){_e=u.serverCache.getNode();const Zt=Ur(v,d,G.getNode(),_e);kt=null!=Zt?G.getNode().getImmediateChild(Ve).updateChild(Bt,Zt):G.getNode().getImmediateChild(Ve)}else kt=pn(v,Ve,u.serverCache);se=null!=kt?h.filter.updateChild(G.getNode(),Ve,kt,Bt,S,k):G.getNode()}}return K(u,se,G.isFullyInitialized()||Jn(d),h.filter.filtersNodes())}}function na(h,u,d,v,S,k,G,se){const _e=u.serverCache;let Ve;const Bt=G?h.filter:h.filter.getIndexedFilter();if(Jn(d))Ve=Bt.updateFullNode(_e.getNode(),v,null);else if(Bt.filtersNodes()&&!_e.isFiltered()){const Vn=_e.getNode().updateChild(d,v);Ve=Bt.updateFullNode(_e.getNode(),Vn,null)}else{const Vn=Kn(d);if(!_e.isCompleteForPath(d)&&gi(d)>1)return u;const ur=ii(d),gs=_e.getNode().getImmediateChild(Vn).updateChild(ur,v);Ve=".priority"===Vn?Bt.updatePriority(_e.getNode(),gs):Bt.updateChild(_e.getNode(),Vn,gs,ur,Mo,null)}const kt=B(u,Ve,_e.isFullyInitialized()||Jn(d),Bt.filtersNodes());return ta(h,kt,d,S,new Ia(S,kt,k),se)}function Zi(h,u,d,v,S,k,G){const se=u.eventCache;let _e,Ve;const Bt=new Ia(S,u,k);if(Jn(d))Ve=h.filter.updateFullNode(u.eventCache.getNode(),v,G),_e=K(u,Ve,!0,h.filter.filtersNodes());else{const kt=Kn(d);if(".priority"===kt)Ve=h.filter.updatePriority(u.eventCache.getNode(),v),_e=K(u,Ve,se.isFullyInitialized(),se.isFiltered());else{const Zt=ii(d),Vn=se.getNode().getImmediateChild(kt);let ur;if(Jn(Zt))ur=v;else{const xi=Bt.getCompleteChild(kt);ur=null!=xi?".priority"===lo(Zt)&&xi.getChild(Io(Zt)).isEmpty()?xi:xi.updateChild(Zt,v):tr.EMPTY_NODE}_e=Vn.equals(ur)?u:K(u,h.filter.updateChild(se.getNode(),kt,ur,Zt,Bt,G),se.isFullyInitialized(),h.filter.filtersNodes())}}return _e}function wa(h,u){return h.eventCache.isCompleteForChild(u)}function bt(h,u,d){return d.foreach((v,S)=>{u=u.updateChild(v,S)}),u}function yl(h,u,d,v,S,k,G,se){if(u.serverCache.getNode().isEmpty()&&!u.serverCache.isFullyInitialized())return u;let Ve,_e=u;Ve=Jn(d)?v:new un(null).setTree(d,v);const Bt=u.serverCache.getNode();return Ve.children.inorderTraversal((kt,Zt)=>{if(Bt.hasChild(kt)){const ur=bt(0,u.serverCache.getNode().getImmediateChild(kt),Zt);_e=na(h,_e,new Ir(kt),ur,S,k,G,se)}}),Ve.children.inorderTraversal((kt,Zt)=>{const Vn=!u.serverCache.isCompleteForChild(kt)&&null===Zt.value;if(!Bt.hasChild(kt)&&!Vn){const xi=bt(0,u.serverCache.getNode().getImmediateChild(kt),Zt);_e=na(h,_e,new Ir(kt),xi,S,k,G,se)}}),_e}class Xa{constructor(u,d){this.query_=u,this.eventRegistrations_=[];const v=this.query_._queryParams,S=new vn(v.getIndex()),k=function Br(h){return h.loadsAllData()?new vn(h.getIndex()):h.hasLimit()?new Rr(h):new Gn(h)}(v);this.processor_=function Qa(h){return{filter:h}}(k);const G=d.serverCache,se=d.eventCache,_e=S.updateFullNode(tr.EMPTY_NODE,G.getNode(),null),Ve=k.updateFullNode(tr.EMPTY_NODE,se.getNode(),null),Bt=new da(_e,G.isFullyInitialized(),S.filtersNodes()),kt=new da(Ve,se.isFullyInitialized(),k.filtersNodes());this.viewCache_=N(kt,Bt),this.eventGenerator_=new pl(this.query_)}get query(){return this.query_}}function kl(h,u){const d=ye(h.viewCache_);return d&&(h.query._queryParams.loadsAllData()||!Jn(u)&&!d.getImmediateChild(Kn(u)).isEmpty())?d.getChild(u):null}function _l(h){return 0===h.eventRegistrations_.length}function ba(h,u,d){const v=[];if(d){(0,W.hu)(null==u,"A cancel should cancel all event registrations.");const S=h.query._path;h.eventRegistrations_.forEach(k=>{const G=k.createCancelEvent(d,S);G&&v.push(G)})}if(u){let S=[];for(let k=0;k<h.eventRegistrations_.length;++k){const G=h.eventRegistrations_[k];if(G.matches(u)){if(u.hasAnyCallback()){S=S.concat(h.eventRegistrations_.slice(k+1));break}}else S.push(G)}h.eventRegistrations_=S}else h.eventRegistrations_=[];return v}function no(h,u,d,v){u.type===_i.MERGE&&null!==u.source.queryId&&((0,W.hu)(ye(h.viewCache_),"We should always have a full cache before handling merges"),(0,W.hu)(re(h.viewCache_),"Missing event cache, even though we have a server cache"));const S=h.viewCache_,k=function Cu(h,u,d,v,S){const k=new fa;let G,se;if(d.type===_i.OVERWRITE){const Ve=d;Ve.source.fromUser?G=Zi(h,u,Ve.path,Ve.snap,v,S,k):((0,W.hu)(Ve.source.fromServer,"Unknown source."),se=Ve.source.tagged||u.serverCache.isFiltered()&&!Jn(Ve.path),G=na(h,u,Ve.path,Ve.snap,v,S,se,k))}else if(d.type===_i.MERGE){const Ve=d;Ve.source.fromUser?G=function Ca(h,u,d,v,S,k,G){let se=u;return v.foreach((_e,Ve)=>{const Bt=Vr(d,_e);wa(u,Kn(Bt))&&(se=Zi(h,se,Bt,Ve,S,k,G))}),v.foreach((_e,Ve)=>{const Bt=Vr(d,_e);wa(u,Kn(Bt))||(se=Zi(h,se,Bt,Ve,S,k,G))}),se}(h,u,Ve.path,Ve.children,v,S,k):((0,W.hu)(Ve.source.fromServer,"Unknown source."),se=Ve.source.tagged||u.serverCache.isFiltered(),G=yl(h,u,Ve.path,Ve.children,v,S,se,k))}else if(d.type===_i.ACK_USER_WRITE){const Ve=d;G=Ve.revert?function vl(h,u,d,v,S,k){let G;if(null!=Nl(v,d))return u;{const se=new Ia(v,u,S),_e=u.eventCache.getNode();let Ve;if(Jn(d)||".priority"===Kn(d)){let Bt;if(u.serverCache.isFullyInitialized())Bt=qn(v,ye(u));else{const kt=u.serverCache.getNode();(0,W.hu)(kt instanceof tr,"serverChildren would be complete if leaf node"),Bt=xo(v,kt)}Ve=h.filter.updateFullNode(_e,Bt,k)}else{const Bt=Kn(d);let kt=pn(v,Bt,u.serverCache);null==kt&&u.serverCache.isCompleteForChild(Bt)&&(kt=_e.getImmediateChild(Bt)),Ve=null!=kt?h.filter.updateChild(_e,Bt,kt,ii(d),se,k):u.eventCache.getNode().hasChild(Bt)?h.filter.updateChild(_e,Bt,tr.EMPTY_NODE,ii(d),se,k):_e,Ve.isEmpty()&&u.serverCache.isFullyInitialized()&&(G=qn(v,ye(u)),G.isLeafNode()&&(Ve=h.filter.updateFullNode(Ve,G,k)))}return G=u.serverCache.isFullyInitialized()||null!=Nl(v,pr()),K(u,Ve,G,h.filter.filtersNodes())}}(h,u,Ve.path,v,S,k):function Ms(h,u,d,v,S,k,G){if(null!=Nl(S,d))return u;const se=u.serverCache.isFiltered(),_e=u.serverCache;if(null!=v.value){if(Jn(d)&&_e.isFullyInitialized()||_e.isCompleteForPath(d))return na(h,u,d,_e.getNode().getChild(d),S,k,se,G);if(Jn(d)){let Ve=new un(null);return _e.getNode().forEachChild(Ni,(Bt,kt)=>{Ve=Ve.set(new Ir(Bt),kt)}),yl(h,u,d,Ve,S,k,se,G)}return u}{let Ve=new un(null);return v.foreach((Bt,kt)=>{const Zt=Vr(d,Bt);_e.isCompleteForPath(Zt)&&(Ve=Ve.set(Bt,_e.getNode().getChild(Zt)))}),yl(h,u,d,Ve,S,k,se,G)}}(h,u,Ve.path,Ve.affectedTree,v,S,k)}else{if(d.type!==_i.LISTEN_COMPLETE)throw(0,W.g5)("Unknown operation type: "+d.type);G=function Ai(h,u,d,v,S){const k=u.serverCache;return ta(h,B(u,k.getNode(),k.isFullyInitialized()||Jn(d),k.isFiltered()),d,v,Mo,S)}(h,u,d.path,v,k)}const _e=k.getChanges();return function zs(h,u,d){const v=u.eventCache;if(v.isFullyInitialized()){const S=v.getNode().isLeafNode()||v.getNode().isEmpty(),k=re(h);(d.length>0||!h.eventCache.isFullyInitialized()||S&&!v.getNode().equals(k)||!v.getNode().getPriority().equals(k.getPriority()))&&d.push(y(re(u)))}}(u,G,_e),{viewCache:G,changes:_e}}(h.processor_,S,u,d,v);return function wu(h,u){(0,W.hu)(u.eventCache.getNode().isIndexed(h.filter.getIndex()),"Event snap not indexed"),(0,W.hu)(u.serverCache.getNode().isIndexed(h.filter.getIndex()),"Server snap not indexed")}(h.processor_,k.viewCache),(0,W.hu)(k.viewCache.serverCache.isFullyInitialized()||!S.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),h.viewCache_=k.viewCache,Wi(h,k.changes,k.viewCache.eventCache.getNode(),null)}function Wi(h,u,d,v){return function ka(h,u,d,v){const S=[],k=[];return u.forEach(G=>{"child_changed"===G.type&&h.index_.indexedValueChanged(G.oldSnap,G.snapshotNode)&&k.push(function tn(h,u){return{type:"child_moved",snapshotNode:u,childName:h}}(G.childName,G.snapshotNode))}),ea(h,S,"child_removed",u,v,d),ea(h,S,"child_added",u,v,d),ea(h,S,"child_moved",k,v,d),ea(h,S,"child_changed",u,v,d),ea(h,S,"value",u,v,d),S}(h.eventGenerator_,u,d,v?[v]:h.eventRegistrations_)}let Da,ia;class ra{constructor(){this.views=new Map}}function Ba(h,u,d,v){const S=u.source.queryId;if(null!==S){const k=h.views.get(S);return(0,W.hu)(null!=k,"SyncTree gave us an op for an invalid query."),no(k,u,d,v)}{let k=[];for(const G of h.views.values())k=k.concat(no(G,u,d,v));return k}}function Ro(h,u,d,v,S){const G=h.views.get(u._queryIdentifier);if(!G){let se=qn(d,S?v:null),_e=!1;se?_e=!0:v instanceof tr?(se=xo(d,v),_e=!1):(se=tr.EMPTY_NODE,_e=!1);const Ve=N(new da(se,_e,!1),new da(v,S,!1));return new Xa(u,Ve)}return G}function Xl(h){const u=[];for(const d of h.views.values())d.query._queryParams.loadsAllData()||u.push(d);return u}function Ho(h,u){let d=null;for(const v of h.views.values())d=d||kl(v,u);return d}function _s(h,u){return u._queryParams.loadsAllData()?li(h):h.views.get(u._queryIdentifier)}function ro(h,u){return null!=_s(h,u)}function Ws(h){return null!=li(h)}function li(h){for(const u of h.views.values())if(u.query._queryParams.loadsAllData())return u;return null}let x=1;class w{constructor(u){this.listenProvider_=u,this.syncPointTree_=new un(null),this.pendingWriteTree_=function Si(){return{visibleWrites:hr.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function M(h,u,d,v,S){return function Vo(h,u,d,v,S){(0,W.hu)(v>h.lastWriteId,"Stacking an older write on top of newer ones"),void 0===S&&(S=!0),h.allWrites.push({path:u,snap:d,writeId:v,visible:S}),S&&(h.visibleWrites=Ft(h.visibleWrites,u,d)),h.lastWriteId=v}(h.pendingWriteTree_,u,d,v,S),S?ot(h,new $o({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,d)):[]}function X(h,u,d=!1){const v=function qa(h,u){for(let d=0;d<h.allWrites.length;d++){const v=h.allWrites[d];if(v.writeId===u)return v}return null}(h.pendingWriteTree_,u);if(function Zl(h,u){const d=h.allWrites.findIndex(se=>se.writeId===u);(0,W.hu)(d>=0,"removeWrite called with nonexistent writeId.");const v=h.allWrites[d];h.allWrites.splice(d,1);let S=v.visible,k=!1,G=h.allWrites.length-1;for(;S&&G>=0;){const se=h.allWrites[G];se.visible&&(G>=d&&Ea(se,v.path)?S=!1:Bi(v.path,se.path)&&(k=!0)),G--}return!!S&&(k?(function Za(h){h.visibleWrites=gl(h.allWrites,Gs,pr()),h.lastWriteId=h.allWrites.length>0?h.allWrites[h.allWrites.length-1].writeId:-1}(h),!0):(v.snap?h.visibleWrites=ar(h.visibleWrites,v.path):xr(v.children,_e=>{h.visibleWrites=ar(h.visibleWrites,Vr(v.path,_e))}),!0))}(h.pendingWriteTree_,u)){let k=new un(null);return null!=v.snap?k=k.set(pr(),!0):xr(v.children,G=>{k=k.set(new Ir(G),!0)}),ot(h,new ds(v.path,k,d))}return[]}function ie(h,u,d){return ot(h,new $o({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,d))}function Rn(h,u,d,v,S=!1){const k=u._path,G=h.syncPointTree_.get(k);let se=[];if(G&&("default"===u._queryIdentifier||ro(G,u))){const _e=function Fl(h,u,d,v){const S=u._queryIdentifier,k=[];let G=[];const se=Ws(h);if("default"===S)for(const[_e,Ve]of h.views.entries())G=G.concat(ba(Ve,d,v)),_l(Ve)&&(h.views.delete(_e),Ve.query._queryParams.loadsAllData()||k.push(Ve.query));else{const _e=h.views.get(S);_e&&(G=G.concat(ba(_e,d,v)),_l(_e)&&(h.views.delete(S),_e.query._queryParams.loadsAllData()||k.push(_e.query)))}return se&&!Ws(h)&&k.push(new(function Rs(){return(0,W.hu)(Da,"Reference.ts has not been loaded"),Da}())(u._repo,u._path)),{removed:k,events:G}}(G,u,d,v);(function po(h){return 0===h.views.size})(G)&&(h.syncPointTree_=h.syncPointTree_.remove(k));const Ve=_e.removed;if(se=_e.events,!S){const Bt=-1!==Ve.findIndex(Zt=>Zt._queryParams.loadsAllData()),kt=h.syncPointTree_.findOnPath(k,(Zt,Vn)=>Ws(Vn));if(Bt&&!kt){const Zt=h.syncPointTree_.subtree(k);if(!Zt.isEmpty()){const Vn=function so(h){return h.fold((u,d,v)=>{if(d&&Ws(d))return[li(d)];{let S=[];return d&&(S=Xl(d)),xr(v,(k,G)=>{S=S.concat(G)}),S}})}(Zt);for(let ur=0;ur<Vn.length;++ur){const xi=Vn[ur],gs=xi.query,vo=Nn(h,xi);h.listenProvider_.startListening(Va(gs),An(h,gs),vo.hashFn,vo.onComplete)}}}!kt&&Ve.length>0&&!v&&(Bt?h.listenProvider_.stopListening(Va(u),null):Ve.forEach(Zt=>{const Vn=h.queryToTagMap.get(er(Zt));h.listenProvider_.stopListening(Va(Zt),Vn)}))}!function Yr(h,u){for(let d=0;d<u.length;++d){const v=u[d];if(!v._queryParams.loadsAllData()){const S=er(v),k=h.queryToTagMap.get(S);h.queryToTagMap.delete(S),h.tagToQueryMap.delete(k)}}}(h,Ve)}return se}function wn(h,u,d,v){const S=Wr(h,v);if(null!=S){const k=lr(S),G=k.path,se=k.queryId,_e=ni(G,u);return io(h,G,new $o(Jo(se),_e,d))}return[]}function U(h,u,d,v=!1){const S=u._path;let k=null,G=!1;h.syncPointTree_.foreachOnPath(S,(Zt,Vn)=>{const ur=ni(Zt,S);k=k||Ho(Vn,ur),G=G||Ws(Vn)});let _e,se=h.syncPointTree_.get(S);se?(G=G||Ws(se),k=k||Ho(se,pr())):(se=new ra,h.syncPointTree_=h.syncPointTree_.set(S,se)),null!=k?_e=!0:(_e=!1,k=tr.EMPTY_NODE,h.syncPointTree_.subtree(S).foreachChild((Vn,ur)=>{const xi=Ho(ur,pr());xi&&(k=k.updateImmediateChild(Vn,xi))}));const Ve=ro(se,u);if(!Ve&&!u._queryParams.loadsAllData()){const Zt=er(u);(0,W.hu)(!h.queryToTagMap.has(Zt),"View does not exist, but we have a tag");const Vn=function ci(){return x++}();h.queryToTagMap.set(Zt,Vn),h.tagToQueryMap.set(Vn,Zt)}let kt=function jo(h,u,d,v,S,k){const G=Ro(h,u,v,S,k);return h.views.has(u._queryIdentifier)||h.views.set(u._queryIdentifier,G),function Du(h,u){h.eventRegistrations_.push(u)}(G,d),function Cc(h,u){const d=h.viewCache_.eventCache,v=[];return d.getNode().isLeafNode()||d.getNode().forEachChild(Xr,(k,G)=>{v.push(P(k,G))}),d.isFullyInitialized()&&v.push(y(d.getNode())),Wi(h,v,d.getNode(),u)}(G,d)}(se,u,d,Ii(h.pendingWriteTree_,S),k,_e);if(!Ve&&!G&&!v){const Zt=_s(se,u);kt=kt.concat(function Os(h,u,d){const v=u._path,S=An(h,u),k=Nn(h,d),G=h.listenProvider_.startListening(Va(u),S,k.hashFn,k.onComplete),se=h.syncPointTree_.subtree(v);if(S)(0,W.hu)(!Ws(se.value),"If we're adding a query, it shouldn't be shadowed");else{const _e=se.fold((Ve,Bt,kt)=>{if(!Jn(Ve)&&Bt&&Ws(Bt))return[li(Bt).query];{let Zt=[];return Bt&&(Zt=Zt.concat(Xl(Bt).map(Vn=>Vn.query))),xr(kt,(Vn,ur)=>{Zt=Zt.concat(ur)}),Zt}});for(let Ve=0;Ve<_e.length;++Ve){const Bt=_e[Ve];h.listenProvider_.stopListening(Va(Bt),An(h,Bt))}}return G}(h,u,Zt))}return kt}function ee(h,u,d){const S=h.pendingWriteTree_,k=h.syncPointTree_.findOnPath(u,(G,se)=>{const Ve=Ho(se,ni(G,u));if(Ve)return Ve});return La(S,u,k,d,!0)}function ot(h,u){return Et(u,h.syncPointTree_,null,Ii(h.pendingWriteTree_,pr()))}function Et(h,u,d,v){if(Jn(h.path))return Jt(h,u,d,v);{const S=u.get(pr());null==d&&null!=S&&(d=Ho(S,pr()));let k=[];const G=Kn(h.path),se=h.operationForChild(G),_e=u.children.get(G);if(_e&&se){const Ve=d?d.getImmediateChild(G):null,Bt=cl(v,G);k=k.concat(Et(se,_e,Ve,Bt))}return S&&(k=k.concat(Ba(S,h,v,d))),k}}function Jt(h,u,d,v){const S=u.get(pr());null==d&&null!=S&&(d=Ho(S,pr()));let k=[];return u.children.inorderTraversal((G,se)=>{const _e=d?d.getImmediateChild(G):null,Ve=cl(v,G),Bt=h.operationForChild(G);Bt&&(k=k.concat(Jt(Bt,se,_e,Ve)))}),S&&(k=k.concat(Ba(S,h,v,d))),k}function Nn(h,u){const d=u.query,v=An(h,d);return{hashFn:()=>(function bu(h){return h.viewCache_.serverCache.getNode()}(u)||tr.EMPTY_NODE).hash(),onComplete:S=>{if("ok"===S)return v?function on(h,u,d){const v=Wr(h,d);if(v){const S=lr(v),k=S.path,G=S.queryId,se=ni(k,u);return io(h,k,new Ao(Jo(G),se))}return[]}(h,d._path,v):function At(h,u){return ot(h,new Ao({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u))}(h,d._path);{const k=function yi(h,u){let d="Unknown Error";"too_big"===h?d="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===h?d="Client doesn't have permission to access the desired data.":"unavailable"===h&&(d="The service is unavailable");const v=new Error(h+" at "+u._path.toString()+": "+d);return v.code=h.toUpperCase(),v}(S,d);return Rn(h,d,null,k)}}}}function An(h,u){const d=er(u);return h.queryToTagMap.get(d)}function er(h){return h._path.toString()+"$"+h._queryIdentifier}function Wr(h,u){return h.tagToQueryMap.get(u)}function lr(h){const u=h.indexOf("$");return(0,W.hu)(-1!==u&&u<h.length-1,"Bad queryKey."),{queryId:h.substr(u+1),path:new Ir(h.substr(0,u))}}function io(h,u,d){const v=h.syncPointTree_.get(u);return(0,W.hu)(v,"Missing sync point for query tag that we're tracking"),Ba(v,d,Ii(h.pendingWriteTree_,u),null)}function Va(h){return h._queryParams.loadsAllData()&&!h._queryParams.isDefault()?new(function T(){return(0,W.hu)(ia,"Reference.ts has not been loaded"),ia}())(h._repo,h._path):h}class Go{constructor(u){this.node_=u}getImmediateChild(u){const d=this.node_.getImmediateChild(u);return new Go(d)}node(){return this.node_}}class dl{constructor(u,d){this.syncTree_=u,this.path_=d}getImmediateChild(u){const d=Vr(this.path_,u);return new dl(this.syncTree_,d)}node(){return ee(this.syncTree_,this.path_)}}const Jc=function(h){return(h=h||{}).timestamp=h.timestamp||(new Date).getTime(),h},ed=function(h,u,d){return h&&"object"==typeof h?((0,W.hu)(".sv"in h,"Unexpected leaf node or priority contents"),"string"==typeof h[".sv"]?td(h[".sv"],u,d):"object"==typeof h[".sv"]?nd(h[".sv"],u):void(0,W.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2))):h},td=function(h,u,d){if("timestamp"===h)return d.timestamp;(0,W.hu)(!1,"Unexpected server value: "+h)},nd=function(h,u,d){h.hasOwnProperty("increment")||(0,W.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2));const v=h.increment;"number"!=typeof v&&(0,W.hu)(!1,"Unexpected increment value: "+v);const S=u.node();if((0,W.hu)(null!==S&&typeof S<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!S.isLeafNode())return v;const G=S.getValue();return"number"!=typeof G?v:G+v},rd=function(h,u,d,v){return Tu(u,new dl(d,h),v)},id=function(h,u,d){return Tu(h,new Go(u),d)};function Tu(h,u,d){const v=h.getPriority().val(),S=ed(v,u.getImmediateChild(".priority"),d);let k;if(h.isLeafNode()){const G=h,se=ed(G.getValue(),u,d);return se!==G.getValue()||S!==G.getPriority().val()?new qi(se,Fn(S)):h}{const G=h;return k=G,S!==G.getPriority().val()&&(k=k.updatePriority(new qi(S))),G.forEachChild(Xr,(se,_e)=>{const Ve=Tu(_e,u.getImmediateChild(se),d);Ve!==_e&&(k=k.updateImmediateChild(se,Ve))}),k}}class zd{constructor(u="",d=null,v={children:{},childCount:0}){this.name=u,this.parent=d,this.node=v}}function Jl(h,u){let d=u instanceof Ir?u:new Ir(u),v=h,S=Kn(d);for(;null!==S;){const k=(0,W.DV)(v.node.children,S)||{children:{},childCount:0};v=new zd(S,v,k),d=ii(d),S=Kn(d)}return v}function El(h){return h.node.value}function sd(h,u){h.node.value=u,ps(h)}function Ah(h){return h.node.childCount>0}function Ll(h,u){xr(h.node.children,(d,v)=>{u(new zd(d,h,v))})}function xh(h,u,d,v){d&&!v&&u(h),Ll(h,S=>{xh(S,u,!0,v)}),d&&v&&u(h)}function Il(h){return new Ir(null===h.parent?h.name:Il(h.parent)+"/"+h.name)}function ps(h){null!==h.parent&&function ji(h,u,d){const v=function Cf(h){return void 0===El(h)&&!Ah(h)}(d),S=(0,W.r3)(h.node.children,u);v&&S?(delete h.node.children[u],h.node.childCount--,ps(h)):!v&&!S&&(h.node.children[u]=d.node,h.node.childCount++,ps(h))}(h.parent,h.name,h)}const od=/[\[\].#$\/\u0000-\u001F\u007F]/,eu=/[\[\].#$\u0000-\u001F\u007F]/,os=10485760,Ps=function(h){return"string"==typeof h&&0!==h.length&&!od.test(h)},bc=function(h){return"string"==typeof h&&0!==h.length&&!eu.test(h)},Su=function(h){return null===h||"string"==typeof h||"number"==typeof h&&!Yt(h)||h&&"object"==typeof h&&(0,W.r3)(h,".sv")},ga=function(h,u,d,v){v&&void 0===u||el((0,W.gK)(h,"value"),u,d)},el=function(h,u,d){const v=d instanceof Ir?new ms(d,h):d;if(void 0===u)throw new Error(h+"contains undefined "+Qs(v));if("function"==typeof u)throw new Error(h+"contains a function "+Qs(v)+" with contents = "+u.toString());if(Yt(u))throw new Error(h+"contains "+u.toString()+" "+Qs(v));if("string"==typeof u&&u.length>os/3&&(0,W.ug)(u)>os)throw new Error(h+"contains a string greater than "+os+" utf8 bytes "+Qs(v)+" ('"+u.substring(0,50)+"...')");if(u&&"object"==typeof u){let S=!1,k=!1;if(xr(u,(G,se)=>{if(".value"===G)S=!0;else if(".priority"!==G&&".sv"!==G&&(k=!0,!Ps(G)))throw new Error(h+" contains an invalid key ("+G+") "+Qs(v)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Ss(h,u){h.parts_.length>0&&(h.byteLength_+=1),h.parts_.push(u),h.byteLength_+=(0,W.ug)(u),ns(h)})(v,G),el(h,se,v),function Zs(h){const u=h.parts_.pop();h.byteLength_-=(0,W.ug)(u),h.parts_.length>0&&(h.byteLength_-=1)}(v)}),S&&k)throw new Error(h+' contains ".value" child '+Qs(v)+" in addition to actual children.")}},qu=function(h,u,d,v){if(v&&void 0===u)return;const S=(0,W.gK)(h,"values");if(!u||"object"!=typeof u||Array.isArray(u))throw new Error(S+" must be an object containing the children to replace.");const k=[];xr(u,(G,se)=>{const _e=new Ir(G);if(el(S,se,Vr(d,_e)),".priority"===lo(_e)&&!Su(se))throw new Error(S+"contains an invalid value for '"+_e.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");k.push(_e)}),function(h,u){let d,v;for(d=0;d<u.length;d++){v=u[d];const k=Ls(v);for(let G=0;G<k.length;G++)if((".priority"!==k[G]||G!==k.length-1)&&!Ps(k[G]))throw new Error(h+"contains an invalid key ("+k[G]+") in path "+v.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}u.sort(wo);let S=null;for(d=0;d<u.length;d++){if(v=u[d],null!==S&&Bi(S,v))throw new Error(h+"contains a path "+S.toString()+" that is ancestor of another path "+v.toString());S=v}}(S,k)},wl=function(h,u,d){if(!d||void 0!==u){if(Yt(u))throw new Error((0,W.gK)(h,"priority")+"is "+u.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Su(u))throw new Error((0,W.gK)(h,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Au=function(h,u,d,v){if(!(v&&void 0===d||Ps(d)))throw new Error((0,W.gK)(h,u)+'was an invalid key = "'+d+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},nu=function(h,u,d,v){if(!(v&&void 0===d||bc(d)))throw new Error((0,W.gK)(h,u)+'was an invalid path = "'+d+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Is=function(h,u,d,v){d&&(d=d.replace(/^\/*\.info(\/|$)/,"/")),nu(h,u,d,v)},Oo=function(h,u){if(".info"===Kn(u))throw new Error(h+" failed = Can't modify data under /.info/")},Bl=function(h,u){const d=u.path.toString();if("string"!=typeof u.repoInfo.host||0===u.repoInfo.host.length||!Ps(u.repoInfo.namespace)&&"localhost"!==u.repoInfo.host.split(":")[0]||0!==d.length&&!function(h){return h&&(h=h.replace(/^\/*\.info(\/|$)/,"/")),bc(h)}(d))throw new Error((0,W.gK)(h,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Zu{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ws(h,u){let d=null;for(let v=0;v<u.length;v++){const S=u[v],k=S.getPath();null!==d&&!Co(k,d.path)&&(h.eventLists_.push(d),d=null),null===d&&(d={events:[],path:k}),d.events.push(S)}d&&h.eventLists_.push(d)}function Cl(h,u,d){ws(h,d),bl(h,v=>Co(v,u))}function zo(h,u,d){ws(h,d),bl(h,v=>Bi(v,u)||Bi(u,v))}function bl(h,u){h.recursionDepth_++;let d=!0;for(let v=0;v<h.eventLists_.length;v++){const S=h.eventLists_[v];S&&(u(S.path)?(sa(h.eventLists_[v]),h.eventLists_[v]=null):d=!1)}d&&(h.eventLists_=[]),h.recursionDepth_--}function sa(h){for(let u=0;u<h.events.length;u++){const d=h.events[u];if(null!==d){h.events[u]=null;const v=d.getEventRunner();Dn&&Qt("event: "+d.toString()),kn(v)}}}const Qu="repo_interrupt",Xu=25;class xu{constructor(u,d,v,S){this.repoInfo_=u,this.forceRestClient_=d,this.authTokenProvider_=v,this.appCheckProvider_=S,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Zu,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Na(),this.transactionQueueTree_=new zd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function tl(h){const d=h.infoData_.getNode(new Ir(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+d}function Dl(h){return Jc({timestamp:tl(h)})}function ad(h,u,d,v,S){h.dataUpdateCount++;const k=new Ir(u);d=h.interceptServerDataCallback_?h.interceptServerDataCallback_(u,d):d;let G=[];if(S)if(v){const _e=(0,W.UI)(d,Ve=>Fn(Ve));G=function F(h,u,d,v){const S=Wr(h,v);if(S){const k=lr(S),G=k.path,se=k.queryId,_e=ni(G,u),Ve=un.fromObject(d);return io(h,G,new Ti(Jo(se),_e,Ve))}return[]}(h.serverSyncTree_,k,_e,S)}else{const _e=Fn(d);G=wn(h.serverSyncTree_,k,_e,S)}else if(v){const _e=(0,W.UI)(d,Ve=>Fn(Ve));G=function Ze(h,u,d){const v=un.fromObject(d);return ot(h,new Ti({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,v))}(h.serverSyncTree_,k,_e)}else{const _e=Fn(d);G=ie(h.serverSyncTree_,k,_e)}let se=k;G.length>0&&(se=Sa(h,k)),zo(h.eventQueue_,se,G)}function ru(h,u){Mu(h,"connected",u),!1===u&&function cd(h){su(h,"onDisconnectEvents");const u=Dl(h),d=Na();Ka(h.onDisconnect_,pr(),(S,k)=>{const G=rd(S,k,h.serverSyncTree_,u);Bo(d,S,G)});let v=[];Ka(d,pr(),(S,k)=>{v=v.concat(ie(h.serverSyncTree_,S,k));const G=ma(h,S);Sa(h,G)}),h.onDisconnect_=Na(),zo(h.eventQueue_,pr(),v)}(h)}function Mu(h,u,d){const v=new Ir("/.info/"+u),S=Fn(d);h.infoData_.updateSnapshot(v,S);const k=ie(h.infoSyncTree_,v,S);zo(h.eventQueue_,v,k)}function Tl(h){return h.nextWriteId_++}function $l(h,u,d,v,S){su(h,"set",{path:u.toString(),value:d,priority:v});const k=Dl(h),G=Fn(d,v),se=ee(h.serverSyncTree_,u),_e=id(G,se,k),Ve=Tl(h),Bt=M(h.serverSyncTree_,u,_e,Ve,!0);ws(h.eventQueue_,Bt),h.server_.put(u.toString(),G.val(!0),(Zt,Vn)=>{const ur="ok"===Zt;ur||gn("set at "+u+" failed: "+Zt);const xi=X(h.serverSyncTree_,Ve,!ur);zo(h.eventQueue_,u,xi),ja(0,S,Zt,Vn)});const kt=ma(h,u);Sa(h,kt),zo(h.eventQueue_,kt,[])}function Ju(h,u,d){h.server_.onDisconnectCancel(u.toString(),(v,S)=>{"ok"===v&&So(h.onDisconnect_,u),ja(0,d,v,S)})}function Ua(h,u,d,v){const S=Fn(d);h.server_.onDisconnectPut(u.toString(),S.val(!0),(k,G)=>{"ok"===k&&Bo(h.onDisconnect_,u,S),ja(0,v,k,G)})}function Ru(h,u,d){let v;v=".info"===Kn(u._path)?Rn(h.infoSyncTree_,u,d):Rn(h.serverSyncTree_,u,d),Cl(h.eventQueue_,u._path,v)}function Vl(h){h.persistentConnection_&&h.persistentConnection_.interrupt(Qu)}function su(h,...u){let d="";h.persistentConnection_&&(d=h.persistentConnection_.id+":"),Qt(d,...u)}function ja(h,u,d,v){u&&kn(()=>{if("ok"===d)u(null);else{const S=(d||"error").toUpperCase();let k=S;v&&(k+=": "+v);const G=new Error(k);G.code=S,u(G)}})}function ec(h,u,d){return ee(h.serverSyncTree_,u,d)||tr.EMPTY_NODE}function Ki(h,u=h.transactionQueueTree_){if(u||Nu(h,u),El(u)){const d=Pu(h,u);(0,W.hu)(d.length>0,"Sending zero length transaction queue"),d.every(S=>0===S.status)&&function Ou(h,u,d){const v=d.map(Ve=>Ve.currentWriteId),S=ec(h,u,v);let k=S;const G=S.hash();for(let Ve=0;Ve<d.length;Ve++){const Bt=d[Ve];(0,W.hu)(0===Bt.status,"tryToSendTransactionQueue_: items in queue should all be run."),Bt.status=1,Bt.retryCount++;const kt=ni(u,Bt.path);k=k.updateChild(kt,Bt.currentOutputSnapshotRaw)}const se=k.val(!0),_e=u;h.server_.put(_e.toString(),se,Ve=>{su(h,"transaction put response",{path:_e.toString(),status:Ve});let Bt=[];if("ok"===Ve){const kt=[];for(let Zt=0;Zt<d.length;Zt++)d[Zt].status=2,Bt=Bt.concat(X(h.serverSyncTree_,d[Zt].currentWriteId)),d[Zt].onComplete&&kt.push(()=>d[Zt].onComplete(null,!0,d[Zt].currentOutputSnapshotResolved)),d[Zt].unwatcher();Nu(h,Jl(h.transactionQueueTree_,u)),Ki(h,h.transactionQueueTree_),zo(h.eventQueue_,u,Bt);for(let Zt=0;Zt<kt.length;Zt++)kn(kt[Zt])}else{if("datastale"===Ve)for(let kt=0;kt<d.length;kt++)d[kt].status=3===d[kt].status?4:0;else{gn("transaction at "+_e.toString()+" failed: "+Ve);for(let kt=0;kt<d.length;kt++)d[kt].status=4,d[kt].abortReason=Ve}Sa(h,u)}},G)}(h,Il(u),d)}else Ah(u)&&Ll(u,d=>{Ki(h,d)})}function Sa(h,u){const d=Kd(h,u),v=Il(d);return function Tc(h,u,d){if(0===u.length)return;const v=[];let S=[];const G=u.filter(se=>0===se.status).map(se=>se.currentWriteId);for(let se=0;se<u.length;se++){const _e=u[se],Ve=ni(d,_e.path);let kt,Bt=!1;if((0,W.hu)(null!==Ve,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_e.status)Bt=!0,kt=_e.abortReason,S=S.concat(X(h.serverSyncTree_,_e.currentWriteId,!0));else if(0===_e.status)if(_e.retryCount>=Xu)Bt=!0,kt="maxretry",S=S.concat(X(h.serverSyncTree_,_e.currentWriteId,!0));else{const Zt=ec(h,_e.path,G);_e.currentInputSnapshot=Zt;const Vn=u[se].update(Zt.val());if(void 0!==Vn){el("transaction failed: Data returned ",Vn,_e.path);let ur=Fn(Vn);"object"==typeof Vn&&null!=Vn&&(0,W.r3)(Vn,".priority")||(ur=ur.updatePriority(Zt.getPriority()));const gs=_e.currentWriteId,vo=Dl(h),Ko=id(ur,Zt,vo);_e.currentOutputSnapshotRaw=ur,_e.currentOutputSnapshotResolved=Ko,_e.currentWriteId=Tl(h),G.splice(G.indexOf(gs),1),S=S.concat(M(h.serverSyncTree_,_e.path,Ko,_e.currentWriteId,_e.applyLocally)),S=S.concat(X(h.serverSyncTree_,gs,!0))}else Bt=!0,kt="nodata",S=S.concat(X(h.serverSyncTree_,_e.currentWriteId,!0))}zo(h.eventQueue_,d,S),S=[],Bt&&(u[se].status=2,setTimeout(u[se].unwatcher,Math.floor(0)),u[se].onComplete&&v.push("nodata"===kt?()=>u[se].onComplete(null,!1,u[se].currentInputSnapshot):()=>u[se].onComplete(new Error(kt),!1,null)))}Nu(h,h.transactionQueueTree_);for(let se=0;se<v.length;se++)kn(v[se]);Ki(h,h.transactionQueueTree_)}(h,Pu(h,d),v),v}function Kd(h,u){let d,v=h.transactionQueueTree_;for(d=Kn(u);null!==d&&void 0===El(v);)v=Jl(v,d),d=Kn(u=ii(u));return v}function Pu(h,u){const d=[];return Sc(h,u,d),d.sort((v,S)=>v.order-S.order),d}function Sc(h,u,d){const v=El(u);if(v)for(let S=0;S<v.length;S++)d.push(v[S]);Ll(u,S=>{Sc(h,S,d)})}function Nu(h,u){const d=El(u);if(d){let v=0;for(let S=0;S<d.length;S++)2!==d[S].status&&(d[v]=d[S],v++);d.length=v,sd(u,d.length>0?d:void 0)}Ll(u,v=>{Nu(h,v)})}function ma(h,u){const d=Il(Kd(h,u)),v=Jl(h.transactionQueueTree_,u);return function Es(h,u,d){let v=d?h:h.parent;for(;null!==v;){if(u(v))return!0;v=v.parent}}(v,S=>{Ha(h,S)}),Ha(h,v),xh(v,S=>{Ha(h,S)}),d}function Ha(h,u){const d=El(u);if(d){const v=[];let S=[],k=-1;for(let G=0;G<d.length;G++)3===d[G].status||(1===d[G].status?((0,W.hu)(k===G-1,"All SENT items should be at beginning of queue."),k=G,d[G].status=3,d[G].abortReason="set"):((0,W.hu)(0===d[G].status,"Unexpected transaction status in abort"),d[G].unwatcher(),S=S.concat(X(h.serverSyncTree_,d[G].currentWriteId,!0)),d[G].onComplete&&v.push(d[G].onComplete.bind(null,new Error("set"),!1,null))));-1===k?sd(u,void 0):d.length=k+1,zo(h.eventQueue_,Il(u),S);for(let G=0;G<v.length;G++)kn(v[G])}}const pd=function(h,u){const d=hl(h),v=d.namespace;return"firebase.com"===d.domain&&_r(d.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!v||"undefined"===v)&&"localhost"!==d.domain&&_r("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),d.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&gn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ge(d.host,d.secure,v,"ws"===d.scheme||"wss"===d.scheme,u,"",v!==d.subdomain),path:new Ir(d.pathString)}},hl=function(h){let u="",d="",v="",S="",k="",G=!0,se="https",_e=443;if("string"==typeof h){let Ve=h.indexOf("//");Ve>=0&&(se=h.substring(0,Ve-1),h=h.substring(Ve+2));let Bt=h.indexOf("/");-1===Bt&&(Bt=h.length);let kt=h.indexOf("?");-1===kt&&(kt=h.length),u=h.substring(0,Math.min(Bt,kt)),Bt<kt&&(S=function fd(h){let u="";const d=h.split("/");for(let v=0;v<d.length;v++)if(d[v].length>0){let S=d[v];try{S=decodeURIComponent(S.replace(/\+/g," "))}catch(k){}u+="/"+S}return u}(h.substring(Bt,kt)));const Zt=function ku(h){const u={};"?"===h.charAt(0)&&(h=h.substring(1));for(const d of h.split("&")){if(0===d.length)continue;const v=d.split("=");2===v.length?u[decodeURIComponent(v[0])]=decodeURIComponent(v[1]):gn(`Invalid query segment '${d}' in query '${h}'`)}return u}(h.substring(Math.min(h.length,kt)));Ve=u.indexOf(":"),Ve>=0?(G="https"===se||"wss"===se,_e=parseInt(u.substring(Ve+1),10)):Ve=u.length;const Vn=u.slice(0,Ve);if("localhost"===Vn.toLowerCase())d="localhost";else if(Vn.split(".").length<=2)d=Vn;else{const ur=u.indexOf(".");v=u.substring(0,ur).toLowerCase(),d=u.substring(ur+1),k=v}"ns"in Zt&&(k=Zt.ns)}return{host:u,port:_e,domain:d,subdomain:v,secure:G,scheme:se,pathString:S,namespace:k}},Ac="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Yd=function(){let h=0;const u=[];return function(d){const v=d===h;let S;h=d;const k=new Array(8);for(S=7;S>=0;S--)k[S]=Ac.charAt(d%64),d=Math.floor(d/64);(0,W.hu)(0===d,"Cannot push at time == 0");let G=k.join("");if(v){for(S=11;S>=0&&63===u[S];S--)u[S]=0;u[S]++}else for(S=0;S<12;S++)u[S]=Math.floor(64*Math.random());for(S=0;S<12;S++)G+=Ac.charAt(u[S]);return(0,W.hu)(20===G.length,"nextPushId: Length should be 20."),G}}();class Cs{constructor(u,d,v,S){this.eventType=u,this.eventRegistration=d,this.snapshot=v,this.prevName=S}getPath(){const u=this.snapshot.ref;return"value"===this.eventType?u._path:u.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,W.Wl)(this.snapshot.exportVal())}}class di{constructor(u,d,v){this.eventRegistration=u,this.error=d,this.path=v}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class ou{constructor(u,d){this.snapshotCallback=u,this.cancelCallback=d}onValue(u,d){this.snapshotCallback.call(null,u,d)}onCancel(u){return(0,W.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,u)}get hasCancelCallback(){return!!this.cancelCallback}matches(u){return this.snapshotCallback===u.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===u.snapshotCallback.userCallback&&this.snapshotCallback.context===u.snapshotCallback.context}}class Fu{constructor(u,d){this._repo=u,this._path=d}cancel(){const u=new W.BH;return Ju(this._repo,this._path,u.wrapCallback(()=>{})),u.promise}remove(){Oo("OnDisconnect.remove",this._path);const u=new W.BH;return Ua(this._repo,this._path,null,u.wrapCallback(()=>{})),u.promise}set(u){Oo("OnDisconnect.set",this._path),ga("OnDisconnect.set",u,this._path,!1);const d=new W.BH;return Ua(this._repo,this._path,u,d.wrapCallback(()=>{})),d.promise}setWithPriority(u,d){Oo("OnDisconnect.setWithPriority",this._path),ga("OnDisconnect.setWithPriority",u,this._path,!1),wl("OnDisconnect.setWithPriority",d,!1);const v=new W.BH;return function Sl(h,u,d,v,S){const k=Fn(d,v);h.server_.onDisconnectPut(u.toString(),k.val(!0),(G,se)=>{"ok"===G&&Bo(h.onDisconnect_,u,k),ja(0,S,G,se)})}(this._repo,this._path,u,d,v.wrapCallback(()=>{})),v.promise}update(u){Oo("OnDisconnect.update",this._path),qu("OnDisconnect.update",u,this._path,!1);const d=new W.BH;return function dd(h,u,d,v){if((0,W.xb)(d))return Qt("onDisconnect().update() called with empty data.  Don't do anything."),void ja(0,v,"ok",void 0);h.server_.onDisconnectMerge(u.toString(),d,(S,k)=>{"ok"===S&&xr(d,(G,se)=>{const _e=Fn(se);Bo(h.onDisconnect_,Vr(u,G),_e)}),ja(0,v,S,k)})}(this._repo,this._path,u,d.wrapCallback(()=>{})),d.promise}}class ts{constructor(u,d,v,S){this._repo=u,this._path=d,this._queryParams=v,this._orderByCalled=S}get key(){return Jn(this._path)?null:lo(this._path)}get ref(){return new go(this._repo,this._path)}get _queryIdentifier(){const u=_a(this._queryParams),d=En(u);return"{}"===d?"default":d}get _queryObject(){return _a(this._queryParams)}isEqual(u){if(!((u=(0,W.m9)(u))instanceof ts))return!1;const d=this._repo===u._repo,v=Co(this._path,u._path);return d&&v&&this._queryIdentifier===u._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function uo(h){let u="";for(let d=h.pieceNum_;d<h.pieces_.length;d++)""!==h.pieces_[d]&&(u+="/"+encodeURIComponent(String(h.pieces_[d])));return u||"/"}(this._path)}}function Ul(h,u){if(!0===h._orderByCalled)throw new Error(u+": You can't combine multiple orderBy calls.")}function bs(h){let u=null,d=null;if(h.hasStart()&&(u=h.getIndexStartValue()),h.hasEnd()&&(d=h.getIndexEndValue()),h.getIndex()===Ni){const v="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",S="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(h.hasStart()){if(h.getIndexStartName()!==Tr)throw new Error(v);if("string"!=typeof u)throw new Error(S)}if(h.hasEnd()){if(h.getIndexEndName()!==br)throw new Error(v);if("string"!=typeof d)throw new Error(S)}}else if(h.getIndex()===Xr){if(null!=u&&!Su(u)||null!=d&&!Su(d))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,W.hu)(h.getIndex()instanceof j||h.getIndex()===I,"unknown index type."),null!=u&&"object"==typeof u||null!=d&&"object"==typeof d)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Al(h){if(h.hasStart()&&h.hasEnd()&&h.hasLimit()&&!h.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class go extends ts{constructor(u,d){super(u,d,new Zn,!1)}get parent(){const u=Io(this._path);return null===u?null:new go(this._repo,u)}get root(){let u=this;for(;null!==u.parent;)u=u.parent;return u}}class Ds{constructor(u,d,v){this._node=u,this.ref=d,this._index=v}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(u){const d=new Ir(u),v=Ga(this.ref,u);return new Ds(this._node.getChild(d),v,Xr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(u){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(v,S)=>u(new Ds(S,Ga(this.ref,v),Xr)))}hasChild(u){const d=new Ir(u);return!this._node.getChild(d).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function oo(h,u){return(h=(0,W.m9)(h))._checkNotDeleted("ref"),void 0!==u?Ga(h._root,u):h._root}function xc(h,u){(h=(0,W.m9)(h))._checkNotDeleted("refFromURL");const d=pd(u,h._repo.repoInfo_.nodeAdmin);Bl("refFromURL",d);const v=d.repoInfo;return!h._repo.repoInfo_.isCustomHost()&&v.host!==h._repo.repoInfo_.host&&_r("refFromURL: Host name does not match the current database: (found "+v.host+" but expected "+h._repo.repoInfo_.host+")"),oo(h,d.path.toString())}function Ga(h,u){return null===Kn((h=(0,W.m9)(h))._path)?Is("child","path",u,!1):nu("child","path",u,!1),new go(h._repo,Vr(h._path,u))}function tc(h,u){h=(0,W.m9)(h),Oo("set",h._path),ga("set",u,h._path,!1);const d=new W.BH;return $l(h._repo,h._path,u,null,d.wrapCallback(()=>{})),d.promise}function jl(h,u){qu("update",u,h._path,!1);const d=new W.BH;return function ud(h,u,d,v){su(h,"update",{path:u.toString(),value:d});let S=!0;const k=Dl(h),G={};if(xr(d,(se,_e)=>{S=!1,G[se]=rd(Vr(u,se),Fn(_e),h.serverSyncTree_,k)}),S)Qt("update() called with empty data.  Don't do anything."),ja(0,v,"ok",void 0);else{const se=Tl(h),_e=function V(h,u,d,v){!function Uo(h,u,d,v){(0,W.hu)(v>h.lastWriteId,"Stacking an older merge on top of newer ones"),h.allWrites.push({path:u,children:d,writeId:v,visible:!0}),h.visibleWrites=ir(h.visibleWrites,u,d),h.lastWriteId=v}(h.pendingWriteTree_,u,d,v);const S=un.fromObject(d);return ot(h,new Ti({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,S))}(h.serverSyncTree_,u,G,se);ws(h.eventQueue_,_e),h.server_.merge(u.toString(),d,(Ve,Bt)=>{const kt="ok"===Ve;kt||gn("update at "+u+" failed: "+Ve);const Zt=X(h.serverSyncTree_,se,!kt),Vn=Zt.length>0?Sa(h,u):u;zo(h.eventQueue_,Vn,Zt),ja(0,v,Ve,Bt)}),xr(d,Ve=>{const Bt=ma(h,Vr(u,Ve));Sa(h,Bt)}),zo(h.eventQueue_,u,[])}}(h._repo,h._path,u,d.wrapCallback(()=>{})),d.promise}function xl(h){h=(0,W.m9)(h);const u=new ou(()=>{}),d=new Lu(u);return function Wd(h,u,d){const v=function De(h,u){const d=u._path;let v=null;h.syncPointTree_.foreachOnPath(d,(Ve,Bt)=>{const kt=ni(Ve,d);v=v||Ho(Bt,kt)});let S=h.syncPointTree_.get(d);S?v=v||Ho(S,pr()):(S=new ra,h.syncPointTree_=h.syncPointTree_.set(d,S));const k=null!=v,G=k?new da(v,!0,!1):null;return function Ja(h){return re(h.viewCache_)}(Ro(S,u,Ii(h.pendingWriteTree_,u._path),k?G.getNode():tr.EMPTY_NODE,k))}(h.serverSyncTree_,u);return null!=v?Promise.resolve(v):h.server_.get(u).then(S=>{const k=Fn(S).withIndex(u._queryParams.getIndex());let G;if(U(h.serverSyncTree_,u,d,!0),u._queryParams.loadsAllData())G=ie(h.serverSyncTree_,u._path,k);else{const se=An(h.serverSyncTree_,u);G=wn(h.serverSyncTree_,u._path,k,se)}return zo(h.eventQueue_,u._path,G),Rn(h.serverSyncTree_,u,d,null,!0),k},S=>(su(h,"get for query "+(0,W.Wl)(u)+" failed: "+S),Promise.reject(new Error(S))))}(h._repo,h,d).then(v=>new Ds(v,new go(h._repo,h._path),h._queryParams.getIndex()))}class Lu{constructor(u){this.callbackContext=u}respondsTo(u){return"value"===u}createEvent(u,d){const v=d._queryParams.getIndex();return new Cs("value",this,new Ds(u.snapshotNode,new go(d._repo,d._path),v))}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,null)}createCancelEvent(u,d){return this.callbackContext.hasCancelCallback?new di(this,u,d):null}matches(u){return u instanceof Lu&&(!u.callbackContext||!this.callbackContext||u.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class rc{constructor(u,d){this.eventType=u,this.callbackContext=d}respondsTo(u){let d="children_added"===u?"child_added":u;return d="children_removed"===d?"child_removed":d,this.eventType===d}createCancelEvent(u,d){return this.callbackContext.hasCancelCallback?new di(this,u,d):null}createEvent(u,d){(0,W.hu)(null!=u.childName,"Child events should have a childName.");const v=Ga(new go(d._repo,d._path),u.childName),S=d._queryParams.getIndex();return new Cs(u.type,this,new Ds(u.snapshotNode,v,S),u.prevName)}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,u.prevName)}matches(u){return u instanceof rc&&this.eventType===u.eventType&&(!this.callbackContext||!u.callbackContext||this.callbackContext.matches(u.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Bu(h,u,d,v,S){let k;if("object"==typeof v&&(k=void 0,S=v),"function"==typeof v&&(k=v),S&&S.onlyOnce){const _e=d,Ve=(Bt,kt)=>{Ru(h._repo,h,se),_e(Bt,kt)};Ve.userCallback=d.userCallback,Ve.context=d.context,d=Ve}const G=new ou(d,k||void 0),se="value"===u?new Lu(G):new rc(u,G);return function iu(h,u,d){let v;v=".info"===Kn(u._path)?U(h.infoSyncTree_,u,d):U(h.serverSyncTree_,u,d),Cl(h.eventQueue_,u._path,v)}(h._repo,h,se),()=>Ru(h._repo,h,se)}function Wo(h,u,d,v){return Bu(h,"value",u,d,v)}function au(h,u,d,v){return Bu(h,"child_added",u,d,v)}function ic(h,u,d,v){return Bu(h,"child_changed",u,d,v)}function md(h,u,d,v){return Bu(h,"child_moved",u,d,v)}function Aa(h,u,d,v){return Bu(h,"child_removed",u,d,v)}function Hl(h,u,d){let v=null;const S=d?new ou(d):null;"value"===u?v=new Lu(S):u&&(v=new rc(u,S)),Ru(h._repo,h,v)}class xa{}class Ml extends xa{constructor(u,d){super(),this._value=u,this._key=d}_apply(u){ga("endAt",this._value,u._path,!0);const d=js(u._queryParams,this._value,this._key);if(Al(d),bs(d),u._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ts(u._repo,u._path,d,u._orderByCalled)}}class Mc extends xa{constructor(u,d){super(),this._value=u,this._key=d}_apply(u){ga("endBefore",this._value,u._path,!1);const d=function Wa(h,u,d){let v;return v=js(h,u,h.index_===Ni||d?d:Tr),v.endBeforeSet_=!0,v}(u._queryParams,this._value,this._key);if(Al(d),bs(d),u._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ts(u._repo,u._path,d,u._orderByCalled)}}class Rc extends xa{constructor(u,d){super(),this._value=u,this._key=d}_apply(u){ga("startAt",this._value,u._path,!0);const d=si(u._queryParams,this._value,this._key);if(Al(d),bs(d),u._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ts(u._repo,u._path,d,u._orderByCalled)}}class sc extends xa{constructor(u,d){super(),this._value=u,this._key=d}_apply(u){ga("startAfter",this._value,u._path,!1);const d=function la(h,u,d){let v;return v=si(h,u,h.index_===Ni||d?d:br),v.startAfterSet_=!0,v}(u._queryParams,this._value,this._key);if(Al(d),bs(d),u._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ts(u._repo,u._path,d,u._orderByCalled)}}class g extends xa{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ts(u._repo,u._path,function Ji(h,u){const d=h.copy();return d.limitSet_=!0,d.limit_=u,d.viewFrom_="l",d}(u._queryParams,this._limit),u._orderByCalled)}}class A extends xa{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ts(u._repo,u._path,function Ui(h,u){const d=h.copy();return d.limitSet_=!0,d.limit_=u,d.viewFrom_="r",d}(u._queryParams,this._limit),u._orderByCalled)}}class ae extends xa{constructor(u){super(),this._path=u}_apply(u){Ul(u,"orderByChild");const d=new Ir(this._path);if(Jn(d))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const v=new j(d),S=ua(u._queryParams,v);return bs(S),new ts(u._repo,u._path,S,!0)}}class jt extends xa{_apply(u){Ul(u,"orderByKey");const d=ua(u._queryParams,Ni);return bs(d),new ts(u._repo,u._path,d,!0)}}class $n extends xa{_apply(u){Ul(u,"orderByPriority");const d=ua(u._queryParams,Xr);return bs(d),new ts(u._repo,u._path,d,!0)}}class yr extends xa{_apply(u){Ul(u,"orderByValue");const d=ua(u._queryParams,I);return bs(d),new ts(u._repo,u._path,d,!0)}}class Ma extends xa{constructor(u,d){super(),this._value=u,this._key=d}_apply(u){if(ga("equalTo",this._value,u._path,!1),u._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(u._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ml(this._value,this._key)._apply(new Rc(this._value,this._key)._apply(u))}}function Ys(h,...u){let d=(0,W.m9)(h);for(const v of u)d=v._apply(d);return d}(function Ta(h){(0,W.hu)(!Da,"__referenceConstructor has already been defined"),Da=h})(go),function $a(h){(0,W.hu)(!ia,"__referenceConstructor has already been defined"),ia=h}(go);const Gl="FIREBASE_DATABASE_EMULATOR_HOST",oc={};let Oc=!1;function Rl(h,u,d,v,S){let k=v||h.options.databaseURL;void 0===k&&(h.options.projectId||_r("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Qt("Using default host for project ",h.options.projectId),k=`${h.options.projectId}-default-rtdb.firebaseio.com`);let _e,Ve,G=pd(k,S),se=G.repoInfo;typeof process<"u"&&process.env&&(Ve=process.env[Gl]),Ve?(_e=!0,k=`http://${Ve}?ns=${se.namespace}`,G=pd(k,S),se=G.repoInfo):_e=!G.repoInfo.secure;const Bt=S&&_e?new Mn(Mn.OWNER):new yn(h.name,h.options,u);Bl("Invalid Firebase Database URL",G),Jn(G.path)||_r("Database URL must point to the root of a Firebase Database (not including a child path).");const kt=function vd(h,u,d,v){let S=oc[u.name];S||(S={},oc[u.name]=S);let k=S[h.toURLString()];return k&&_r("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),k=new xu(h,Oc,d,v),S[h.toURLString()]=k,k}(se,h,Bt,new $t(h.name,d));return new kc(kt,h)}class kc{constructor(u,d){this._repoInternal=u,this.app=d,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Mh(h,u,d){if(h.stats_=fr(h.repoInfo_),h.forceRestClient_||hi())h.server_=new Pa(h.repoInfo_,(v,S,k,G)=>{ad(h,v,S,k,G)},h.authTokenProvider_,h.appCheckProvider_),setTimeout(()=>ru(h,!0),0);else{if(typeof d<"u"&&null!==d){if("object"!=typeof d)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,W.Wl)(d)}catch(v){throw new Error("Invalid authOverride provided: "+v)}}h.persistentConnection_=new bi(h.repoInfo_,u,(v,S,k,G)=>{ad(h,v,S,k,G)},v=>{ru(h,v)},v=>{!function ld(h,u){xr(u,(d,v)=>{Mu(h,d,v)})}(h,v)},h.authTokenProvider_,h.appCheckProvider_,d),h.server_=h.persistentConnection_}h.authTokenProvider_.addTokenChangeListener(v=>{h.server_.refreshAuthToken(v)}),h.appCheckProvider_.addTokenChangeListener(v=>{h.server_.refreshAppCheckToken(v.token)}),h.statsReporter_=function Fi(h,u){const d=h.toString();return Wn[d]||(Wn[d]=u()),Wn[d]}(h.repoInfo_,()=>new Iu(h.stats_,h.server_)),h.infoData_=new xs,h.infoSyncTree_=new w({startListening:(v,S,k,G)=>{let se=[];const _e=h.infoData_.getNode(v._path);return _e.isEmpty()||(se=ie(h.infoSyncTree_,v._path,_e),setTimeout(()=>{G("ok")},0)),se},stopListening:()=>{}}),Mu(h,"connected",!1),h.serverSyncTree_=new w({startListening:(v,S,k,G)=>(h.server_.listen(v,k,S,(se,_e)=>{const Ve=G(se,_e);zo(h.eventQueue_,v._path,Ve)}),[]),stopListening:(v,S)=>{h.server_.unlisten(v,S)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new go(this._repo,pr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function $u(h,u){const d=oc[u];(!d||d[h.key]!==h)&&_r(`Database ${u}(${h.repoInfo_}) has already been deleted.`),Vl(h),delete d[h.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(u){null===this._rootInternal&&_r("Cannot call "+u+" on a deleted database.")}}function Po(){lt.IS_TRANSPORT_INITIALIZED&&gn("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function bf(){Po(),Hr.forceDisallow()}function Rh(){Po(),Ne.forceDisallow(),Hr.forceAllow()}function Tf(h,u){Un(h,u)}const Rp={".sv":"timestamp"};class mo{constructor(u,d){this.committed=u,this.snapshot=d}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}bi.prototype.simpleListen=function(h,u){this.sendRequest("q",{p:h},u)},bi.prototype.echo=function(h,u){this.sendRequest("echo",{d:h},u)},function Xd(h){be(tt.SDK_VERSION),(0,tt._registerComponent)(new je.wA("database",(u,{instanceIdentifier:d})=>Rl(u.getProvider("app").getImmediate(),u.getProvider("auth-internal"),u.getProvider("app-check-internal"),d),"PUBLIC").setMultipleInstances(!0)),(0,tt.registerVersion)(nt,"0.14.4",h),(0,tt.registerVersion)(nt,"0.14.4","esm2017")}();const Fp=new pt.Yd("@firebase/database-compat"),Af=function(h){Fp.warn("FIREBASE WARNING: "+h)};class Bp{constructor(u){this._delegate=u}cancel(u){(0,W.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,W.Wj)("OnDisconnect.cancel","onComplete",u,!0);const d=this._delegate.cancel();return u&&d.then(()=>u(null),v=>u(v)),d}remove(u){(0,W.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,W.Wj)("OnDisconnect.remove","onComplete",u,!0);const d=this._delegate.remove();return u&&d.then(()=>u(null),v=>u(v)),d}set(u,d){(0,W.Dv)("OnDisconnect.set",1,2,arguments.length),(0,W.Wj)("OnDisconnect.set","onComplete",d,!0);const v=this._delegate.set(u);return d&&v.then(()=>d(null),S=>d(S)),v}setWithPriority(u,d,v){(0,W.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,W.Wj)("OnDisconnect.setWithPriority","onComplete",v,!0);const S=this._delegate.setWithPriority(u,d);return v&&S.then(()=>v(null),k=>v(k)),S}update(u,d){if((0,W.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(u)){const S={};for(let k=0;k<u.length;++k)S[""+k]=u[k];u=S,Af("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,W.Wj)("OnDisconnect.update","onComplete",d,!0);const v=this._delegate.update(u);return d&&v.then(()=>d(null),S=>d(S)),v}}class um{constructor(u,d){this.committed=u,this.snapshot=d}toJSON(){return(0,W.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class nl{constructor(u,d){this._database=u,this._delegate=d}val(){return(0,W.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,W.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,W.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,W.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(u){return(0,W.Dv)("DataSnapshot.child",0,1,arguments.length),u=String(u),nu("DataSnapshot.child","path",u,!1),new nl(this._database,this._delegate.child(u))}hasChild(u){return(0,W.Dv)("DataSnapshot.hasChild",1,1,arguments.length),nu("DataSnapshot.hasChild","path",u,!1),this._delegate.hasChild(u)}getPriority(){return(0,W.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(u){return(0,W.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,W.Wj)("DataSnapshot.forEach","action",u,!1),this._delegate.forEach(d=>u(new nl(this._database,d)))}hasChildren(){return(0,W.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,W.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,W.Dv)("DataSnapshot.ref",0,0,arguments.length),new za(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class yo{constructor(u,d){this.database=u,this._delegate=d}on(u,d,v,S){var k;(0,W.Dv)("Query.on",2,4,arguments.length),(0,W.Wj)("Query.on","callback",d,!1);const G=yo.getCancelAndContextArgs_("Query.on",v,S),se=(Ve,Bt)=>{d.call(G.context,new nl(this.database,Ve),Bt)};se.userCallback=d,se.context=G.context;const _e=null===(k=G.cancel)||void 0===k?void 0:k.bind(G.context);switch(u){case"value":return Wo(this._delegate,se,_e),d;case"child_added":return au(this._delegate,se,_e),d;case"child_removed":return Aa(this._delegate,se,_e),d;case"child_changed":return ic(this._delegate,se,_e),d;case"child_moved":return md(this._delegate,se,_e),d;default:throw new Error((0,W.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(u,d,v){if((0,W.Dv)("Query.off",0,3,arguments.length),function(h,u,d){if(void 0!==u)switch(u){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,W.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,u),(0,W.Wj)("Query.off","callback",d,!0),(0,W.lb)("Query.off","context",v,!0),d){const S=()=>{};S.userCallback=d,S.context=v,Hl(this._delegate,u,S)}else Hl(this._delegate,u)}get(){return xl(this._delegate).then(u=>new nl(this.database,u))}once(u,d,v,S){(0,W.Dv)("Query.once",1,4,arguments.length),(0,W.Wj)("Query.once","callback",d,!0);const k=yo.getCancelAndContextArgs_("Query.once",v,S),G=new W.BH,se=(Ve,Bt)=>{const kt=new nl(this.database,Ve);d&&d.call(k.context,kt,Bt),G.resolve(kt)};se.userCallback=d,se.context=k.context;const _e=Ve=>{k.cancel&&k.cancel.call(k.context,Ve),G.reject(Ve)};switch(u){case"value":Wo(this._delegate,se,_e,{onlyOnce:!0});break;case"child_added":au(this._delegate,se,_e,{onlyOnce:!0});break;case"child_removed":Aa(this._delegate,se,_e,{onlyOnce:!0});break;case"child_changed":ic(this._delegate,se,_e,{onlyOnce:!0});break;case"child_moved":md(this._delegate,se,_e,{onlyOnce:!0});break;default:throw new Error((0,W.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return G.promise}limitToFirst(u){return(0,W.Dv)("Query.limitToFirst",1,1,arguments.length),new yo(this.database,Ys(this._delegate,function E(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new g(h)}(u)))}limitToLast(u){return(0,W.Dv)("Query.limitToLast",1,1,arguments.length),new yo(this.database,Ys(this._delegate,function q(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new A(h)}(u)))}orderByChild(u){return(0,W.Dv)("Query.orderByChild",1,1,arguments.length),new yo(this.database,Ys(this._delegate,function ht(h){if("$key"===h)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===h)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===h)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return nu("orderByChild","path",h,!1),new ae(h)}(u)))}orderByKey(){return(0,W.Dv)("Query.orderByKey",0,0,arguments.length),new yo(this.database,Ys(this._delegate,function bn(){return new jt}()))}orderByPriority(){return(0,W.Dv)("Query.orderByPriority",0,0,arguments.length),new yo(this.database,Ys(this._delegate,function wr(){return new $n}()))}orderByValue(){return(0,W.Dv)("Query.orderByValue",0,0,arguments.length),new yo(this.database,Ys(this._delegate,function Ks(){return new yr}()))}startAt(u=null,d){return(0,W.Dv)("Query.startAt",0,2,arguments.length),new yo(this.database,Ys(this._delegate,function Zd(h=null,u){return Au("startAt","key",u,!0),new Rc(h,u)}(u,d)))}startAfter(u=null,d){return(0,W.Dv)("Query.startAfter",0,2,arguments.length),new yo(this.database,Ys(this._delegate,function b(h,u){return Au("startAfter","key",u,!0),new sc(h,u)}(u,d)))}endAt(u=null,d){return(0,W.Dv)("Query.endAt",0,2,arguments.length),new yo(this.database,Ys(this._delegate,function yd(h,u){return Au("endAt","key",u,!0),new Ml(h,u)}(u,d)))}endBefore(u=null,d){return(0,W.Dv)("Query.endBefore",0,2,arguments.length),new yo(this.database,Ys(this._delegate,function Ns(h,u){return Au("endBefore","key",u,!0),new Mc(h,u)}(u,d)))}equalTo(u,d){return(0,W.Dv)("Query.equalTo",1,2,arguments.length),new yo(this.database,Ys(this._delegate,function lu(h,u){return Au("equalTo","key",u,!0),new Ma(h,u)}(u,d)))}toString(){return(0,W.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,W.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(u){if((0,W.Dv)("Query.isEqual",1,1,arguments.length),!(u instanceof yo))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(u._delegate)}static getCancelAndContextArgs_(u,d,v){const S={cancel:void 0,context:void 0};if(d&&v)S.cancel=d,(0,W.Wj)(u,"cancel",S.cancel,!0),S.context=v,(0,W.lb)(u,"context",S.context,!0);else if(d)if("object"==typeof d&&null!==d)S.context=d;else{if("function"!=typeof d)throw new Error((0,W.gK)(u,"cancelOrContext")+" must either be a cancel callback or a context object.");S.cancel=d}return S}get ref(){return new za(this.database,new go(this._delegate._repo,this._delegate._path))}}class za extends yo{constructor(u,d){super(u,new ts(d._repo,d._path,new Zn,!1)),this.database=u,this._delegate=d}getKey(){return(0,W.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(u){return(0,W.Dv)("Reference.child",1,1,arguments.length),"number"==typeof u&&(u=String(u)),new za(this.database,Ga(this._delegate,u))}getParent(){(0,W.Dv)("Reference.parent",0,0,arguments.length);const u=this._delegate.parent;return u?new za(this.database,u):null}getRoot(){return(0,W.Dv)("Reference.root",0,0,arguments.length),new za(this.database,this._delegate.root)}set(u,d){(0,W.Dv)("Reference.set",1,2,arguments.length),(0,W.Wj)("Reference.set","onComplete",d,!0);const v=tc(this._delegate,u);return d&&v.then(()=>d(null),S=>d(S)),v}update(u,d){if((0,W.Dv)("Reference.update",1,2,arguments.length),Array.isArray(u)){const S={};for(let k=0;k<u.length;++k)S[""+k]=u[k];u=S,Af("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Oo("Reference.update",this._delegate._path),(0,W.Wj)("Reference.update","onComplete",d,!0);const v=jl(this._delegate,u);return d&&v.then(()=>d(null),S=>d(S)),v}setWithPriority(u,d,v){(0,W.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,W.Wj)("Reference.setWithPriority","onComplete",v,!0);const S=function oa(h,u,d){if(Oo("setWithPriority",h._path),ga("setWithPriority",u,h._path,!1),wl("setWithPriority",d,!1),".length"===h.key||".keys"===h.key)throw"setWithPriority failed: "+h.key+" is a read-only object.";const v=new W.BH;return $l(h._repo,h._path,u,d,v.wrapCallback(()=>{})),v.promise}(this._delegate,u,d);return v&&S.then(()=>v(null),k=>v(k)),S}remove(u){(0,W.Dv)("Reference.remove",0,1,arguments.length),(0,W.Wj)("Reference.remove","onComplete",u,!0);const d=function Kr(h){return Oo("remove",h._path),tc(h,null)}(this._delegate);return u&&d.then(()=>u(null),v=>u(v)),d}transaction(u,d,v){(0,W.Dv)("Reference.transaction",1,3,arguments.length),(0,W.Wj)("Reference.transaction","transactionUpdate",u,!1),(0,W.Wj)("Reference.transaction","onComplete",d,!0),function(h,u,d,v){if(void 0!==d&&"boolean"!=typeof d)throw new Error((0,W.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,v);const S=function Pp(h,u,d){var v;if(h=(0,W.m9)(h),Oo("Reference.transaction",h._path),".length"===h.key||".keys"===h.key)throw"Reference.transaction failed: "+h.key+" is a read-only object.";const S=null===(v=null==d?void 0:d.applyLocally)||void 0===v||v,k=new W.BH,se=Wo(h,()=>{});return function hd(h,u,d,v,S,k){su(h,"transaction on "+u);const G={path:u,update:d,onComplete:v,status:null,order:Nt(),applyLocally:k,retryCount:0,unwatcher:S,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},se=ec(h,u,void 0);G.currentInputSnapshot=se;const _e=G.update(se.val());if(void 0===_e)G.unwatcher(),G.currentOutputSnapshotRaw=null,G.currentOutputSnapshotResolved=null,G.onComplete&&G.onComplete(null,!1,G.currentInputSnapshot);else{el("transaction failed: Data returned ",_e,G.path),G.status=0;const Ve=Jl(h.transactionQueueTree_,u),Bt=El(Ve)||[];let kt;Bt.push(G),sd(Ve,Bt),"object"==typeof _e&&null!==_e&&(0,W.r3)(_e,".priority")?(kt=(0,W.DV)(_e,".priority"),(0,W.hu)(Su(kt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):kt=(ee(h.serverSyncTree_,u)||tr.EMPTY_NODE).getPriority().val();const Zt=Dl(h),Vn=Fn(_e,kt),ur=id(Vn,se,Zt);G.currentOutputSnapshotRaw=Vn,G.currentOutputSnapshotResolved=ur,G.currentWriteId=Tl(h);const xi=M(h.serverSyncTree_,u,ur,G.currentWriteId,G.applyLocally);zo(h.eventQueue_,u,xi),Ki(h,h.transactionQueueTree_)}}(h._repo,h._path,u,(_e,Ve,Bt)=>{let kt=null;_e?k.reject(_e):(kt=new Ds(Bt,new go(h._repo,h._path),Xr),k.resolve(new mo(Ve,kt)))},se,S),k.promise}(this._delegate,u,{applyLocally:v}).then(k=>new um(k.committed,new nl(this.database,k.snapshot)));return d&&S.then(k=>d(null,k.committed,k.snapshot),k=>d(k,!1,null)),S}setPriority(u,d){(0,W.Dv)("Reference.setPriority",1,2,arguments.length),(0,W.Wj)("Reference.setPriority","onComplete",d,!0);const v=function nc(h,u){h=(0,W.m9)(h),Oo("setPriority",h._path),wl("setPriority",u,!1);const d=new W.BH;return $l(h._repo,Vr(h._path,".priority"),u,null,d.wrapCallback(()=>{})),d.promise}(this._delegate,u);return d&&v.then(()=>d(null),S=>d(S)),v}push(u,d){(0,W.Dv)("Reference.push",0,2,arguments.length),(0,W.Wj)("Reference.push","onComplete",d,!0);const v=function gd(h,u){h=(0,W.m9)(h),Oo("push",h._path),ga("push",u,h._path,!0);const d=tl(h._repo),v=Yd(d),S=Ga(h,v),k=Ga(h,v);let G;return G=null!=u?tc(k,u).then(()=>k):Promise.resolve(k),S.then=G.then.bind(G),S.catch=G.then.bind(G,void 0),S}(this._delegate,u),S=v.then(G=>new za(this.database,G));d&&S.then(()=>d(null),G=>d(G));const k=new za(this.database,v);return k.then=S.then.bind(S),k.catch=S.catch.bind(S,void 0),k}onDisconnect(){return Oo("Reference.onDisconnect",this._delegate._path),new Bp(new Fu(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Vu{constructor(u,d){this._delegate=u,this.app=d,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:bf,forceLongPolling:Rh}}useEmulator(u,d,v={}){!function Oh(h,u,d,v={}){(h=(0,W.m9)(h))._checkNotDeleted("useEmulator"),h._instanceStarted&&_r("Cannot call useEmulator() after instance has already been initialized.");const S=h._repoInternal;let k;if(S.repoInfo_.nodeAdmin)v.mockUserToken&&_r('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),k=new Mn(Mn.OWNER);else if(v.mockUserToken){const G="string"==typeof v.mockUserToken?v.mockUserToken:(0,W.Sg)(v.mockUserToken,h.app.options.projectId);k=new Mn(G)}!function Pc(h,u,d,v){h.repoInfo_=new ge(`${u}:${d}`,!1,h.repoInfo_.namespace,h.repoInfo_.webSocketOnly,h.repoInfo_.nodeAdmin,h.repoInfo_.persistenceKey,h.repoInfo_.includeNamespaceInQueryParams,!0),v&&(h.authTokenProvider_=v)}(S,u,d,k)}(this._delegate,u,d,v)}ref(u){if((0,W.Dv)("database.ref",0,1,arguments.length),u instanceof za){const d=xc(this._delegate,u.toString());return new za(this,d)}{const d=oo(this._delegate,u);return new za(this,d)}}refFromURL(u){(0,W.Dv)("database.refFromURL",1,1,arguments.length);const v=xc(this._delegate,u);return new za(this,v)}goOffline(){return(0,W.Dv)("database.goOffline",0,0,arguments.length),function Qd(h){(h=(0,W.m9)(h))._checkNotDeleted("goOffline"),Vl(h._repo)}(this._delegate)}goOnline(){return(0,W.Dv)("database.goOnline",0,0,arguments.length),function Df(h){(h=(0,W.m9)(h))._checkNotDeleted("goOnline"),function Dc(h){h.persistentConnection_&&h.persistentConnection_.resume(Qu)}(h._repo)}(this._delegate)}}Vu.ServerValue={TIMESTAMP:function Ph(){return Rp}(),increment:h=>function Op(h){return{".sv":{increment:h}}}(h)};var Mf=Object.freeze({__proto__:null,initStandalone:function No({app:h,url:u,version:d,customAuthImpl:v,namespace:S,nodeAdmin:k=!1}){be(d);const G=new je.zt("auth-internal",new je.H0("database-standalone"));return G.setComponent(new je.wA("auth-internal",()=>v,"PRIVATE")),{instance:new Vu(Rl(h,G,void 0,u,k),h),namespace:S}}});const Nh=Vu.ServerValue;!function Jd(h){h.INTERNAL.registerComponent(new je.wA("database-compat",(u,{instanceIdentifier:d})=>{const v=u.getProvider("app-compat").getImmediate(),S=u.getProvider("database").getImmediate({identifier:d});return new Vu(S,v)},"PUBLIC").setServiceProps({Reference:za,Query:yo,Database:Vu,DataSnapshot:nl,enableLogging:Tf,INTERNAL:Mf,ServerValue:Nh}).setMultipleInstances(!0)),h.registerVersion("@firebase/database-compat","0.3.4")}(Fe.Z);var cu=$(6217),eh=$(9260);function _d(h){return null==h}function zl(h){return"function"==typeof h.set}function du(h,u){return zl(u)?u:h.ref(u)}function hu(h,u){if(function cm(h){return"string"==typeof h}(h))return u.stringCase();if(zl(h))return u.firebaseCase();if(function th(h){return"function"==typeof h.exportVal}(h))return u.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof h)}function Ra(h,u,d="on",v=Ue.z){return new me.y(S=>{let k=null;return k=h[d](u,(G,se)=>{v.schedule(()=>{S.next({snapshot:G,prevKey:se})}),"once"===d&&v.schedule(()=>S.complete())},G=>{v.schedule(()=>S.error(G))}),"on"===d?{unsubscribe(){null!=k&&h.off(u,k)}}:{unsubscribe(){}}}).pipe((0,ke.U)(S=>{const{snapshot:k,prevKey:G}=S;let se=null;return k.exists()&&(se=k.key),{type:u,payload:k,prevKey:G,key:se}}),(0,Ge.B)())}function Fc(h,u){const d=h.length;for(let v=0;v<d;v++)if(h[v].payload.key===u)return v;return-1}function Of(h,u){const{payload:d,prevKey:v,key:S}=u,k=Fc(h,S),G=function Lc(h,u){if(_d(u))return 0;{const d=Fc(h,u);return-1===d?h.length:d+1}}(h,v);switch(u.type){case"value":if(u.payload&&u.payload.exists()){let se=null;u.payload.forEach(_e=>{const Ve={payload:_e,type:"value",prevKey:se,key:_e.key};return se=_e.key,h=[...h,Ve],!1})}return h;case"child_added":if(k>-1){const se=h[k-1];(se&&se.key||null)!==v&&(h=h.filter(_e=>_e.payload.key!==d.key)).splice(G,0,u)}else{if(null==v)return[u,...h];(h=h.slice()).splice(G,0,u)}return h;case"child_removed":return h.filter(se=>se.payload.key!==d.key);case"child_changed":return h.map(se=>se.payload.key===S?u:se);case"child_moved":if(k>-1){const se=h.splice(k,1)[0];return(h=h.slice()).splice(G,0,se),h}return h;default:return h}}function Ed(h){return(_d(h)||0===h.length)&&(h=["child_added","child_removed","child_changed","child_moved"]),h}function Id(h,u,d){return function Rf(h,u,d){return Ra(h,"value","once",d).pipe((0,ut.w)(v=>{const S=[(0,fe.of)(v)];return u.forEach(k=>S.push(Ra(h,k,"on",d))),(0,pe.T)(...S).pipe((0,Dt.R)(Of,[]))}),(0,Me.x)())}(h,u=Ed(u),d)}function fu(h,u,d){const v=(u=Ed(u)).map(S=>Ra(h,S,"on",d));return(0,pe.T)(...v)}function Uu(h,u){return function(v,S){return hu(v,{stringCase:()=>h.child(v)[u](S),firebaseCase:()=>v[u](S),snapshotCase:()=>v.ref[u](S)})}}function Pf(h){return function(d){return d?hu(d,{stringCase:()=>h.child(d).remove(),firebaseCase:()=>d.remove(),snapshotCase:()=>d.ref.remove()}):h.remove()}}function Nf(h,u){return function(){return Ra(h,"value","on",u)}}const Vp=new te.OlP("angularfire2.realtimeDatabaseURL"),lc=new te.OlP("angularfire2.database.use-emulator");let uc=(()=>{class h{constructor(d,v,S,k,G,se,_e,Ve,Bt,kt,Zt,Vn,ur,xi,gs){this.schedulers=se;const vo=_e,Ko=(0,Se.on)(d,G,v);Ve&&(0,de.nw)(Ko,G,Bt,Zt,Vn,ur,kt,xi),this.database=(0,Se.cc)(`${Ko.name}.database.${S}`,"AngularFireDatabase",Ko.name,()=>{const fl=G.runOutsideAngular(()=>Ko.database(S||void 0));return vo&&fl.useEmulator(...vo),fl},[vo])}list(d,v){const S=this.schedulers.ngZone.runOutsideAngular(()=>du(this.database,d));let k=S;return v&&(k=v(S)),function ac(h,u){const d=u.schedulers.outsideAngular,v=u.schedulers.ngZone.run(()=>h.ref);return{query:h,update:Uu(v,"update"),set:Uu(v,"set"),push:S=>v.push(S),remove:Pf(v),snapshotChanges:S=>Id(h,S,d).pipe(J.iC),stateChanges:S=>fu(h,S,d).pipe(J.iC),auditTrail:S=>function kh(h,u,d){return function wd(h,u,d){return function Bc(h,u){return Ra(h,"value","on",u).pipe((0,ke.U)(d=>{let v;return d.payload.forEach(S=>(v=S.key,!1)),{data:d,lastKeyToLoad:v}}))}(h,d).pipe(function Pe(...h){const u=(0,Qe.jO)(h);return(0,ve.e)((d,v)=>{const S=h.length,k=new Array(S);let G=h.map(()=>!1),se=!1;for(let _e=0;_e<S;_e++)(0,at.Xf)(h[_e]).subscribe((0,le.x)(v,Ve=>{k[_e]=Ve,!se&&!G[_e]&&(G[_e]=!0,(se=G.every(st.y))&&(G=null))},et.Z));d.subscribe((0,le.x)(v,_e=>{if(se){const Ve=[_e,...k];v.next(u?u(...Ve):Ve)}}))})}(u),(0,ke.U)(([S,k])=>{const G=S.lastKeyToLoad,se=k.map(_e=>_e.key);return{actions:k,lastKeyToLoad:G,loadedKeys:se}}),function Oe(h){return(0,ve.e)((u,d)=>{let v=!1,S=0;u.subscribe((0,le.x)(d,k=>(v||(v=!h(k,S++)))&&d.next(k)))})}(S=>-1===S.loadedKeys.indexOf(S.lastKeyToLoad)),(0,ke.U)(S=>S.actions))}(h,fu(h,u).pipe((0,Dt.R)((S,k)=>[...S,k],[])),d)}(h,S,d).pipe(J.iC),valueChanges:(S,k)=>Id(h,S,d).pipe((0,ke.U)(se=>se.map(_e=>k&&k.idField?Object.assign(Object.assign({},_e.payload.val()),{[k.idField]:_e.key}):_e.payload.val())),J.iC)}}(k,this)}object(d){return function $p(h,u){return{query:h,snapshotChanges:()=>Nf(h,u.schedulers.outsideAngular)().pipe(J.iC),update:d=>h.ref.update(d),set:d=>h.ref.set(d),remove:()=>h.ref.remove(),valueChanges:()=>Nf(h,u.schedulers.outsideAngular)().pipe(J.iC,(0,ke.U)(v=>v.payload.exists()?v.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>du(this.database,d)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return h.\u0275fac=function(d){return new(d||h)(te.LFG(Se.Dh),te.LFG(Se.xv,8),te.LFG(Vp,8),te.LFG(te.Lbi),te.LFG(te.R0b),te.LFG(J.HU),te.LFG(lc,8),te.LFG(de.zQ,8),te.LFG(de.Qv,8),te.LFG(de.L6,8),te.LFG(de._Q,8),te.LFG(de.rT,8),te.LFG(de.lh,8),te.LFG(de.f7,8),te.LFG(cu.nm,8))},h.\u0275prov=te.Yz7({token:h,factory:h.\u0275fac,providedIn:"any"}),h})(),pu=(()=>{class h{constructor(){eh.Z.registerVersion("angularfire",J.q4.full,"rtdb-compat")}}return h.\u0275fac=function(d){return new(d||h)},h.\u0275mod=te.oAB({type:h}),h.\u0275inj=te.cJS({providers:[uc]}),h})(),kf=(()=>{class h{constructor(){}}return h.\u0275fac=function(d){return new(d||h)},h.\u0275cmp=te.Xpm({type:h,selectors:[["app-root"]],decls:2,vars:0,template:function(d,v){1&d&&(te.TgZ(0,"ion-app"),te._UZ(1,"ion-router-outlet"),te.qZA())},dependencies:[xe.dr,xe.jP]}),h})(),Fh=(()=>{class h{constructor(d,v){this.aFaut=d,this.router=v}canActivate(d,v){return this.aFaut.authState.pipe((0,ke.U)(S=>null==S||(this.router.navigate(["/home"]),!1)))}}return h.\u0275fac=function(d){return new(d||h)(te.LFG(de.zQ),te.LFG(Te.F0))},h.\u0275prov=te.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})();const Up=[{path:"home",canActivate:[(()=>{class h{constructor(d,v){this.aFaut=d,this.router=v}canActivate(d,v){return this.aFaut.authState.pipe((0,ke.U)(S=>null!=S||(this.router.navigate(["/login"]),!1)))}}return h.\u0275fac=function(d){return new(d||h)(te.LFG(de.zQ),te.LFG(Te.F0))},h.\u0275prov=te.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()],loadChildren:()=>$.e(781).then($.bind($,781)).then(h=>h.HomePageModule)},{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",canActivate:[Fh],loadChildren:()=>$.e(4515).then($.bind($,4515)).then(h=>h.LoginPageModule)},{path:"registro",canActivate:[Fh],loadChildren:()=>$.e(9056).then($.bind($,9056)).then(h=>h.RegistroPageModule)}];let cc=(()=>{class h{}return h.\u0275fac=function(d){return new(d||h)},h.\u0275mod=te.oAB({type:h}),h.\u0275inj=te.cJS({imports:[Te.Bz.forRoot(Up,{preloadingStrategy:Te.wm}),Te.Bz]}),h})();var Lh=$(433);const hc={apiKey:"AIzaSyD2tQmGROqW_Vse6n--SVGhR9bzKu-32MQ",authDomain:"chat-online-9a633.firebaseapp.com",projectId:"chat-online-9a633",storageBucket:"chat-online-9a633.appspot.com",messagingSenderId:"766252059431",appId:"1:766252059431:web:4859727c7e843705567702"};var Bh=$(6893);let $h=(()=>{class h{}return h.\u0275fac=function(d){return new(d||h)},h.\u0275mod=te.oAB({type:h,bootstrap:[kf]}),h.\u0275inj=te.cJS({providers:[{provide:Te.wN,useClass:xe.r4},Bh.e,z.a],imports:[a.b2,xe.Pc.forRoot(),cc,Lh.u5,Se.hO.initializeApp(hc),de.ww,Ae.yb,pu]}),h})();(0,te.G48)(),a.q6().bootstrapModule($h).catch(h=>console.log(h))},1135:(ln,ft,$)=>{"use strict";$.d(ft,{X:()=>te});var a=$(7579);class te extends a.x{constructor(Te){super(),this._value=Te}get value(){return this.getValue()}_subscribe(Te){const xe=super._subscribe(Te);return!xe.closed&&Te.next(this._value),xe}getValue(){const{hasError:Te,thrownError:xe,_value:Se}=this;if(Te)throw xe;return this._throwIfClosed(),Se}next(Te){super.next(this._value=Te)}}},9751:(ln,ft,$)=>{"use strict";$.d(ft,{y:()=>Ae});var a=$(930),te=$(727),z=$(8822),Te=$(9635),xe=$(2416),Se=$(576),de=$(2806);let Ae=(()=>{class pe{constructor(Ge){Ge&&(this._subscribe=Ge)}lift(Ge){const ut=new pe;return ut.source=this,ut.operator=Ge,ut}subscribe(Ge,ut,Dt){const Me=function fe(pe){return pe&&pe instanceof a.Lv||function me(pe){return pe&&(0,Se.m)(pe.next)&&(0,Se.m)(pe.error)&&(0,Se.m)(pe.complete)}(pe)&&(0,te.Nn)(pe)}(Ge)?Ge:new a.Hp(Ge,ut,Dt);return(0,de.x)(()=>{const{operator:ve,source:le}=this;Me.add(ve?ve.call(Me,le):le?this._subscribe(Me):this._trySubscribe(Me))}),Me}_trySubscribe(Ge){try{return this._subscribe(Ge)}catch(ut){Ge.error(ut)}}forEach(Ge,ut){return new(ut=Ue(ut))((Dt,Me)=>{const ve=new a.Hp({next:le=>{try{Ge(le)}catch(at){Me(at),ve.unsubscribe()}},error:Me,complete:Dt});this.subscribe(ve)})}_subscribe(Ge){var ut;return null===(ut=this.source)||void 0===ut?void 0:ut.subscribe(Ge)}[z.L](){return this}pipe(...Ge){return(0,Te.U)(Ge)(this)}toPromise(Ge){return new(Ge=Ue(Ge))((ut,Dt)=>{let Me;this.subscribe(ve=>Me=ve,ve=>Dt(ve),()=>ut(Me))})}}return pe.create=ke=>new pe(ke),pe})();function Ue(pe){var ke;return null!==(ke=null!=pe?pe:xe.v.Promise)&&void 0!==ke?ke:Promise}},7579:(ln,ft,$)=>{"use strict";$.d(ft,{x:()=>de});var a=$(9751),te=$(727);const Te=(0,$(3888).d)(Ue=>function(){Ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var xe=$(8737),Se=$(2806);let de=(()=>{class Ue extends a.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(fe){const pe=new Ae(this,this);return pe.operator=fe,pe}_throwIfClosed(){if(this.closed)throw new Te}next(fe){(0,Se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const pe of this.currentObservers)pe.next(fe)}})}error(fe){(0,Se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=fe;const{observers:pe}=this;for(;pe.length;)pe.shift().error(fe)}})}complete(){(0,Se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:fe}=this;for(;fe.length;)fe.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var fe;return(null===(fe=this.observers)||void 0===fe?void 0:fe.length)>0}_trySubscribe(fe){return this._throwIfClosed(),super._trySubscribe(fe)}_subscribe(fe){return this._throwIfClosed(),this._checkFinalizedStatuses(fe),this._innerSubscribe(fe)}_innerSubscribe(fe){const{hasError:pe,isStopped:ke,observers:Ge}=this;return pe||ke?te.Lc:(this.currentObservers=null,Ge.push(fe),new te.w0(()=>{this.currentObservers=null,(0,xe.P)(Ge,fe)}))}_checkFinalizedStatuses(fe){const{hasError:pe,thrownError:ke,isStopped:Ge}=this;pe?fe.error(ke):Ge&&fe.complete()}asObservable(){const fe=new a.y;return fe.source=this,fe}}return Ue.create=(me,fe)=>new Ae(me,fe),Ue})();class Ae extends de{constructor(me,fe){super(),this.destination=me,this.source=fe}next(me){var fe,pe;null===(pe=null===(fe=this.destination)||void 0===fe?void 0:fe.next)||void 0===pe||pe.call(fe,me)}error(me){var fe,pe;null===(pe=null===(fe=this.destination)||void 0===fe?void 0:fe.error)||void 0===pe||pe.call(fe,me)}complete(){var me,fe;null===(fe=null===(me=this.destination)||void 0===me?void 0:me.complete)||void 0===fe||fe.call(me)}_subscribe(me){var fe,pe;return null!==(pe=null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(me))&&void 0!==pe?pe:te.Lc}}},930:(ln,ft,$)=>{"use strict";$.d(ft,{Hp:()=>Dt,Lv:()=>pe});var a=$(576),te=$(727),z=$(2416),Te=$(7849),xe=$(5032);const Se=Ue("C",void 0,void 0);function Ue(st,et,Qe){return{kind:st,value:et,error:Qe}}var me=$(3410),fe=$(2806);class pe extends te.w0{constructor(et){super(),this.isStopped=!1,et?(this.destination=et,(0,te.Nn)(et)&&et.add(this)):this.destination=at}static create(et,Qe,Pe){return new Dt(et,Qe,Pe)}next(et){this.isStopped?le(function Ae(st){return Ue("N",st,void 0)}(et),this):this._next(et)}error(et){this.isStopped?le(function de(st){return Ue("E",void 0,st)}(et),this):(this.isStopped=!0,this._error(et))}complete(){this.isStopped?le(Se,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(et){this.destination.next(et)}_error(et){try{this.destination.error(et)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ke=Function.prototype.bind;function Ge(st,et){return ke.call(st,et)}class ut{constructor(et){this.partialObserver=et}next(et){const{partialObserver:Qe}=this;if(Qe.next)try{Qe.next(et)}catch(Pe){Me(Pe)}}error(et){const{partialObserver:Qe}=this;if(Qe.error)try{Qe.error(et)}catch(Pe){Me(Pe)}else Me(et)}complete(){const{partialObserver:et}=this;if(et.complete)try{et.complete()}catch(Qe){Me(Qe)}}}class Dt extends pe{constructor(et,Qe,Pe){let Oe;if(super(),(0,a.m)(et)||!et)Oe={next:null!=et?et:void 0,error:null!=Qe?Qe:void 0,complete:null!=Pe?Pe:void 0};else{let J;this&&z.v.useDeprecatedNextContext?(J=Object.create(et),J.unsubscribe=()=>this.unsubscribe(),Oe={next:et.next&&Ge(et.next,J),error:et.error&&Ge(et.error,J),complete:et.complete&&Ge(et.complete,J)}):Oe=et}this.destination=new ut(Oe)}}function Me(st){z.v.useDeprecatedSynchronousErrorHandling?(0,fe.O)(st):(0,Te.h)(st)}function le(st,et){const{onStoppedNotification:Qe}=z.v;Qe&&me.z.setTimeout(()=>Qe(st,et))}const at={closed:!0,next:xe.Z,error:function ve(st){throw st},complete:xe.Z}},727:(ln,ft,$)=>{"use strict";$.d(ft,{Lc:()=>Se,w0:()=>xe,Nn:()=>de});var a=$(576);const z=(0,$(3888).d)(Ue=>function(fe){Ue(this),this.message=fe?`${fe.length} errors occurred during unsubscription:\n${fe.map((pe,ke)=>`${ke+1}) ${pe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=fe});var Te=$(8737);class xe{constructor(me){this.initialTeardown=me,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let me;if(!this.closed){this.closed=!0;const{_parentage:fe}=this;if(fe)if(this._parentage=null,Array.isArray(fe))for(const Ge of fe)Ge.remove(this);else fe.remove(this);const{initialTeardown:pe}=this;if((0,a.m)(pe))try{pe()}catch(Ge){me=Ge instanceof z?Ge.errors:[Ge]}const{_finalizers:ke}=this;if(ke){this._finalizers=null;for(const Ge of ke)try{Ae(Ge)}catch(ut){me=null!=me?me:[],ut instanceof z?me=[...me,...ut.errors]:me.push(ut)}}if(me)throw new z(me)}}add(me){var fe;if(me&&me!==this)if(this.closed)Ae(me);else{if(me instanceof xe){if(me.closed||me._hasParent(this))return;me._addParent(this)}(this._finalizers=null!==(fe=this._finalizers)&&void 0!==fe?fe:[]).push(me)}}_hasParent(me){const{_parentage:fe}=this;return fe===me||Array.isArray(fe)&&fe.includes(me)}_addParent(me){const{_parentage:fe}=this;this._parentage=Array.isArray(fe)?(fe.push(me),fe):fe?[fe,me]:me}_removeParent(me){const{_parentage:fe}=this;fe===me?this._parentage=null:Array.isArray(fe)&&(0,Te.P)(fe,me)}remove(me){const{_finalizers:fe}=this;fe&&(0,Te.P)(fe,me),me instanceof xe&&me._removeParent(this)}}xe.EMPTY=(()=>{const Ue=new xe;return Ue.closed=!0,Ue})();const Se=xe.EMPTY;function de(Ue){return Ue instanceof xe||Ue&&"closed"in Ue&&(0,a.m)(Ue.remove)&&(0,a.m)(Ue.add)&&(0,a.m)(Ue.unsubscribe)}function Ae(Ue){(0,a.m)(Ue)?Ue():Ue.unsubscribe()}},2416:(ln,ft,$)=>{"use strict";$.d(ft,{v:()=>a});const a={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(ln,ft,$)=>{"use strict";$.d(ft,{z:()=>xe});var a=$(8189),z=$(7669),Te=$(8996);function xe(...Se){return function te(){return(0,a.J)(1)}()((0,Te.D)(Se,(0,z.yG)(Se)))}},515:(ln,ft,$)=>{"use strict";$.d(ft,{E:()=>te});const te=new($(9751).y)(xe=>xe.complete())},8996:(ln,ft,$)=>{"use strict";$.d(ft,{D:()=>et});var a=$(8421),te=$(5363),z=$(9468),Se=$(9751),Ae=$(2202),Ue=$(576),me=$(9672);function pe(Qe,Pe){if(!Qe)throw new Error("Iterable cannot be null");return new Se.y(Oe=>{(0,me.f)(Oe,Pe,()=>{const J=Qe[Symbol.asyncIterator]();(0,me.f)(Oe,Pe,()=>{J.next().then(Xe=>{Xe.done?Oe.complete():Oe.next(Xe.value)})},0,!0)})})}var ke=$(3670),Ge=$(8239),ut=$(1144),Dt=$(6495),Me=$(2206),ve=$(4532),le=$(3260);function et(Qe,Pe){return Pe?function st(Qe,Pe){if(null!=Qe){if((0,ke.c)(Qe))return function Te(Qe,Pe){return(0,a.Xf)(Qe).pipe((0,z.R)(Pe),(0,te.Q)(Pe))}(Qe,Pe);if((0,ut.z)(Qe))return function de(Qe,Pe){return new Se.y(Oe=>{let J=0;return Pe.schedule(function(){J===Qe.length?Oe.complete():(Oe.next(Qe[J++]),Oe.closed||this.schedule())})})}(Qe,Pe);if((0,Ge.t)(Qe))return function xe(Qe,Pe){return(0,a.Xf)(Qe).pipe((0,z.R)(Pe),(0,te.Q)(Pe))}(Qe,Pe);if((0,Me.D)(Qe))return pe(Qe,Pe);if((0,Dt.T)(Qe))return function fe(Qe,Pe){return new Se.y(Oe=>{let J;return(0,me.f)(Oe,Pe,()=>{J=Qe[Ae.h](),(0,me.f)(Oe,Pe,()=>{let Xe,Fe;try{({value:Xe,done:Fe}=J.next())}catch(je){return void Oe.error(je)}Fe?Oe.complete():Oe.next(Xe)},0,!0)}),()=>(0,Ue.m)(null==J?void 0:J.return)&&J.return()})}(Qe,Pe);if((0,le.L)(Qe))return function at(Qe,Pe){return pe((0,le.Q)(Qe),Pe)}(Qe,Pe)}throw(0,ve.z)(Qe)}(Qe,Pe):(0,a.Xf)(Qe)}},8421:(ln,ft,$)=>{"use strict";$.d(ft,{Xf:()=>ke});var a=$(655),te=$(1144),z=$(8239),Te=$(9751),xe=$(3670),Se=$(2206),de=$(4532),Ae=$(6495),Ue=$(3260),me=$(576),fe=$(7849),pe=$(8822);function ke(st){if(st instanceof Te.y)return st;if(null!=st){if((0,xe.c)(st))return function Ge(st){return new Te.y(et=>{const Qe=st[pe.L]();if((0,me.m)(Qe.subscribe))return Qe.subscribe(et);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(st);if((0,te.z)(st))return function ut(st){return new Te.y(et=>{for(let Qe=0;Qe<st.length&&!et.closed;Qe++)et.next(st[Qe]);et.complete()})}(st);if((0,z.t)(st))return function Dt(st){return new Te.y(et=>{st.then(Qe=>{et.closed||(et.next(Qe),et.complete())},Qe=>et.error(Qe)).then(null,fe.h)})}(st);if((0,Se.D)(st))return ve(st);if((0,Ae.T)(st))return function Me(st){return new Te.y(et=>{for(const Qe of st)if(et.next(Qe),et.closed)return;et.complete()})}(st);if((0,Ue.L)(st))return function le(st){return ve((0,Ue.Q)(st))}(st)}throw(0,de.z)(st)}function ve(st){return new Te.y(et=>{(function at(st,et){var Qe,Pe,Oe,J;return(0,a.mG)(this,void 0,void 0,function*(){try{for(Qe=(0,a.KL)(st);!(Pe=yield Qe.next()).done;)if(et.next(Pe.value),et.closed)return}catch(Xe){Oe={error:Xe}}finally{try{Pe&&!Pe.done&&(J=Qe.return)&&(yield J.call(Qe))}finally{if(Oe)throw Oe.error}}et.complete()})})(st,et).catch(Qe=>et.error(Qe))})}},6451:(ln,ft,$)=>{"use strict";$.d(ft,{T:()=>Se});var a=$(8189),te=$(8421),z=$(515),Te=$(7669),xe=$(8996);function Se(...de){const Ae=(0,Te.yG)(de),Ue=(0,Te._6)(de,1/0),me=de;return me.length?1===me.length?(0,te.Xf)(me[0]):(0,a.J)(Ue)((0,xe.D)(me,Ae)):z.E}},9646:(ln,ft,$)=>{"use strict";$.d(ft,{of:()=>z});var a=$(7669),te=$(8996);function z(...Te){const xe=(0,a.yG)(Te);return(0,te.D)(Te,xe)}},5403:(ln,ft,$)=>{"use strict";$.d(ft,{x:()=>te});var a=$(930);function te(Te,xe,Se,de,Ae){return new z(Te,xe,Se,de,Ae)}class z extends a.Lv{constructor(xe,Se,de,Ae,Ue,me){super(xe),this.onFinalize=Ue,this.shouldUnsubscribe=me,this._next=Se?function(fe){try{Se(fe)}catch(pe){xe.error(pe)}}:super._next,this._error=Ae?function(fe){try{Ae(fe)}catch(pe){xe.error(pe)}finally{this.unsubscribe()}}:super._error,this._complete=de?function(){try{de()}catch(fe){xe.error(fe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var xe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Se}=this;super.unsubscribe(),!Se&&(null===(xe=this.onFinalize)||void 0===xe||xe.call(this))}}}},6590:(ln,ft,$)=>{"use strict";$.d(ft,{d:()=>z});var a=$(4482),te=$(5403);function z(Te){return(0,a.e)((xe,Se)=>{let de=!1;xe.subscribe((0,te.x)(Se,Ae=>{de=!0,Se.next(Ae)},()=>{de||Se.next(Te),Se.complete()}))})}},1884:(ln,ft,$)=>{"use strict";$.d(ft,{x:()=>Te});var a=$(4671),te=$(4482),z=$(5403);function Te(Se,de=a.y){return Se=null!=Se?Se:xe,(0,te.e)((Ae,Ue)=>{let me,fe=!0;Ae.subscribe((0,z.x)(Ue,pe=>{const ke=de(pe);(fe||!Se(me,ke))&&(fe=!1,me=ke,Ue.next(pe))}))})}function xe(Se,de){return Se===de}},9300:(ln,ft,$)=>{"use strict";$.d(ft,{h:()=>z});var a=$(4482),te=$(5403);function z(Te,xe){return(0,a.e)((Se,de)=>{let Ae=0;Se.subscribe((0,te.x)(de,Ue=>Te.call(xe,Ue,Ae++)&&de.next(Ue)))})}},590:(ln,ft,$)=>{"use strict";$.d(ft,{P:()=>de});var a=$(6805),te=$(9300),z=$(5698),Te=$(6590),xe=$(8068),Se=$(4671);function de(Ae,Ue){const me=arguments.length>=2;return fe=>fe.pipe(Ae?(0,te.h)((pe,ke)=>Ae(pe,ke,fe)):Se.y,(0,z.q)(1),me?(0,Te.d)(Ue):(0,xe.T)(()=>new a.K))}},4004:(ln,ft,$)=>{"use strict";$.d(ft,{U:()=>z});var a=$(4482),te=$(5403);function z(Te,xe){return(0,a.e)((Se,de)=>{let Ae=0;Se.subscribe((0,te.x)(de,Ue=>{de.next(Te.call(xe,Ue,Ae++))}))})}},8189:(ln,ft,$)=>{"use strict";$.d(ft,{J:()=>z});var a=$(5577),te=$(4671);function z(Te=1/0){return(0,a.z)(te.y,Te)}},5577:(ln,ft,$)=>{"use strict";$.d(ft,{z:()=>Ae});var a=$(4004),te=$(8421),z=$(4482),Te=$(9672),xe=$(5403),de=$(576);function Ae(Ue,me,fe=1/0){return(0,de.m)(me)?Ae((pe,ke)=>(0,a.U)((Ge,ut)=>me(pe,Ge,ke,ut))((0,te.Xf)(Ue(pe,ke))),fe):("number"==typeof me&&(fe=me),(0,z.e)((pe,ke)=>function Se(Ue,me,fe,pe,ke,Ge,ut,Dt){const Me=[];let ve=0,le=0,at=!1;const st=()=>{at&&!Me.length&&!ve&&me.complete()},et=Pe=>ve<pe?Qe(Pe):Me.push(Pe),Qe=Pe=>{Ge&&me.next(Pe),ve++;let Oe=!1;(0,te.Xf)(fe(Pe,le++)).subscribe((0,xe.x)(me,J=>{null==ke||ke(J),Ge?et(J):me.next(J)},()=>{Oe=!0},void 0,()=>{if(Oe)try{for(ve--;Me.length&&ve<pe;){const J=Me.shift();ut?(0,Te.f)(me,ut,()=>Qe(J)):Qe(J)}st()}catch(J){me.error(J)}}))};return Ue.subscribe((0,xe.x)(me,et,()=>{at=!0,st()})),()=>{null==Dt||Dt()}}(pe,ke,Ue,fe)))}},5363:(ln,ft,$)=>{"use strict";$.d(ft,{Q:()=>Te});var a=$(9672),te=$(4482),z=$(5403);function Te(xe,Se=0){return(0,te.e)((de,Ae)=>{de.subscribe((0,z.x)(Ae,Ue=>(0,a.f)(Ae,xe,()=>Ae.next(Ue),Se),()=>(0,a.f)(Ae,xe,()=>Ae.complete(),Se),Ue=>(0,a.f)(Ae,xe,()=>Ae.error(Ue),Se)))})}},5026:(ln,ft,$)=>{"use strict";$.d(ft,{R:()=>Te});var a=$(4482),te=$(5403);function Te(xe,Se){return(0,a.e)(function z(xe,Se,de,Ae,Ue){return(me,fe)=>{let pe=de,ke=Se,Ge=0;me.subscribe((0,te.x)(fe,ut=>{const Dt=Ge++;ke=pe?xe(ke,ut,Dt):(pe=!0,ut),Ae&&fe.next(ke)},Ue&&(()=>{pe&&fe.next(ke),fe.complete()})))}}(xe,Se,arguments.length>=2,!0))}},3099:(ln,ft,$)=>{"use strict";$.d(ft,{B:()=>xe});var a=$(8421),te=$(7579),z=$(930),Te=$(4482);function xe(de={}){const{connector:Ae=(()=>new te.x),resetOnError:Ue=!0,resetOnComplete:me=!0,resetOnRefCountZero:fe=!0}=de;return pe=>{let ke,Ge,ut,Dt=0,Me=!1,ve=!1;const le=()=>{null==Ge||Ge.unsubscribe(),Ge=void 0},at=()=>{le(),ke=ut=void 0,Me=ve=!1},st=()=>{const et=ke;at(),null==et||et.unsubscribe()};return(0,Te.e)((et,Qe)=>{Dt++,!ve&&!Me&&le();const Pe=ut=null!=ut?ut:Ae();Qe.add(()=>{Dt--,0===Dt&&!ve&&!Me&&(Ge=Se(st,fe))}),Pe.subscribe(Qe),!ke&&Dt>0&&(ke=new z.Hp({next:Oe=>Pe.next(Oe),error:Oe=>{ve=!0,le(),Ge=Se(at,Ue,Oe),Pe.error(Oe)},complete:()=>{Me=!0,le(),Ge=Se(at,me),Pe.complete()}}),(0,a.Xf)(et).subscribe(ke))})(pe)}}function Se(de,Ae,...Ue){if(!0===Ae)return void de();if(!1===Ae)return;const me=new z.Hp({next:()=>{me.unsubscribe(),de()}});return Ae(...Ue).subscribe(me)}},8675:(ln,ft,$)=>{"use strict";$.d(ft,{O:()=>Te});var a=$(7272),te=$(7669),z=$(4482);function Te(...xe){const Se=(0,te.yG)(xe);return(0,z.e)((de,Ae)=>{(Se?(0,a.z)(xe,de,Se):(0,a.z)(xe,de)).subscribe(Ae)})}},9468:(ln,ft,$)=>{"use strict";$.d(ft,{R:()=>te});var a=$(4482);function te(z,Te=0){return(0,a.e)((xe,Se)=>{Se.add(z.schedule(()=>xe.subscribe(Se),Te))})}},3900:(ln,ft,$)=>{"use strict";$.d(ft,{w:()=>Te});var a=$(8421),te=$(4482),z=$(5403);function Te(xe,Se){return(0,te.e)((de,Ae)=>{let Ue=null,me=0,fe=!1;const pe=()=>fe&&!Ue&&Ae.complete();de.subscribe((0,z.x)(Ae,ke=>{null==Ue||Ue.unsubscribe();let Ge=0;const ut=me++;(0,a.Xf)(xe(ke,ut)).subscribe(Ue=(0,z.x)(Ae,Dt=>Ae.next(Se?Se(ke,Dt,ut,Ge++):Dt),()=>{Ue=null,pe()}))},()=>{fe=!0,pe()}))})}},5698:(ln,ft,$)=>{"use strict";$.d(ft,{q:()=>Te});var a=$(515),te=$(4482),z=$(5403);function Te(xe){return xe<=0?()=>a.E:(0,te.e)((Se,de)=>{let Ae=0;Se.subscribe((0,z.x)(de,Ue=>{++Ae<=xe&&(de.next(Ue),xe<=Ae&&de.complete())}))})}},8505:(ln,ft,$)=>{"use strict";$.d(ft,{b:()=>xe});var a=$(576),te=$(4482),z=$(5403),Te=$(4671);function xe(Se,de,Ae){const Ue=(0,a.m)(Se)||de||Ae?{next:Se,error:de,complete:Ae}:Se;return Ue?(0,te.e)((me,fe)=>{var pe;null===(pe=Ue.subscribe)||void 0===pe||pe.call(Ue);let ke=!0;me.subscribe((0,z.x)(fe,Ge=>{var ut;null===(ut=Ue.next)||void 0===ut||ut.call(Ue,Ge),fe.next(Ge)},()=>{var Ge;ke=!1,null===(Ge=Ue.complete)||void 0===Ge||Ge.call(Ue),fe.complete()},Ge=>{var ut;ke=!1,null===(ut=Ue.error)||void 0===ut||ut.call(Ue,Ge),fe.error(Ge)},()=>{var Ge,ut;ke&&(null===(Ge=Ue.unsubscribe)||void 0===Ge||Ge.call(Ue)),null===(ut=Ue.finalize)||void 0===ut||ut.call(Ue)}))}):Te.y}},8068:(ln,ft,$)=>{"use strict";$.d(ft,{T:()=>Te});var a=$(6805),te=$(4482),z=$(5403);function Te(Se=xe){return(0,te.e)((de,Ae)=>{let Ue=!1;de.subscribe((0,z.x)(Ae,me=>{Ue=!0,Ae.next(me)},()=>Ue?Ae.complete():Ae.error(Se())))})}function xe(){return new a.K}},4408:(ln,ft,$)=>{"use strict";$.d(ft,{o:()=>xe});var a=$(727);class te extends a.w0{constructor(de,Ae){super()}schedule(de,Ae=0){return this}}const z={setInterval(Se,de,...Ae){const{delegate:Ue}=z;return null!=Ue&&Ue.setInterval?Ue.setInterval(Se,de,...Ae):setInterval(Se,de,...Ae)},clearInterval(Se){const{delegate:de}=z;return((null==de?void 0:de.clearInterval)||clearInterval)(Se)},delegate:void 0};var Te=$(8737);class xe extends te{constructor(de,Ae){super(de,Ae),this.scheduler=de,this.work=Ae,this.pending=!1}schedule(de,Ae=0){var Ue;if(this.closed)return this;this.state=de;const me=this.id,fe=this.scheduler;return null!=me&&(this.id=this.recycleAsyncId(fe,me,Ae)),this.pending=!0,this.delay=Ae,this.id=null!==(Ue=this.id)&&void 0!==Ue?Ue:this.requestAsyncId(fe,this.id,Ae),this}requestAsyncId(de,Ae,Ue=0){return z.setInterval(de.flush.bind(de,this),Ue)}recycleAsyncId(de,Ae,Ue=0){if(null!=Ue&&this.delay===Ue&&!1===this.pending)return Ae;null!=Ae&&z.clearInterval(Ae)}execute(de,Ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ue=this._execute(de,Ae);if(Ue)return Ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(de,Ae){let me,Ue=!1;try{this.work(de)}catch(fe){Ue=!0,me=fe||new Error("Scheduled action threw falsy error")}if(Ue)return this.unsubscribe(),me}unsubscribe(){if(!this.closed){const{id:de,scheduler:Ae}=this,{actions:Ue}=Ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Te.P)(Ue,this),null!=de&&(this.id=this.recycleAsyncId(Ae,de,null)),this.delay=null,super.unsubscribe()}}}},7565:(ln,ft,$)=>{"use strict";$.d(ft,{v:()=>z});var a=$(6063);class te{constructor(xe,Se=te.now){this.schedulerActionCtor=xe,this.now=Se}schedule(xe,Se=0,de){return new this.schedulerActionCtor(this,xe).schedule(de,Se)}}te.now=a.l.now;class z extends te{constructor(xe,Se=te.now){super(xe,Se),this.actions=[],this._active=!1}flush(xe){const{actions:Se}=this;if(this._active)return void Se.push(xe);let de;this._active=!0;do{if(de=xe.execute(xe.state,xe.delay))break}while(xe=Se.shift());if(this._active=!1,de){for(;xe=Se.shift();)xe.unsubscribe();throw de}}}},4986:(ln,ft,$)=>{"use strict";$.d(ft,{z:()=>z});var a=$(4408);const z=new($(7565).v)(a.o)},6063:(ln,ft,$)=>{"use strict";$.d(ft,{l:()=>a});const a={now:()=>(a.delegate||Date).now(),delegate:void 0}},3410:(ln,ft,$)=>{"use strict";$.d(ft,{z:()=>a});const a={setTimeout(te,z,...Te){const{delegate:xe}=a;return null!=xe&&xe.setTimeout?xe.setTimeout(te,z,...Te):setTimeout(te,z,...Te)},clearTimeout(te){const{delegate:z}=a;return((null==z?void 0:z.clearTimeout)||clearTimeout)(te)},delegate:void 0}},2202:(ln,ft,$)=>{"use strict";$.d(ft,{h:()=>te});const te=function a(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ln,ft,$)=>{"use strict";$.d(ft,{L:()=>a});const a="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(ln,ft,$)=>{"use strict";$.d(ft,{K:()=>te});const te=(0,$(3888).d)(z=>function(){z(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(ln,ft,$)=>{"use strict";$.d(ft,{_6:()=>Se,jO:()=>Te,yG:()=>xe});var a=$(576);function z(de){return de[de.length-1]}function Te(de){return(0,a.m)(z(de))?de.pop():void 0}function xe(de){return function te(de){return de&&(0,a.m)(de.schedule)}(z(de))?de.pop():void 0}function Se(de,Ae){return"number"==typeof z(de)?de.pop():Ae}},4742:(ln,ft,$)=>{"use strict";$.d(ft,{D:()=>xe});const{isArray:a}=Array,{getPrototypeOf:te,prototype:z,keys:Te}=Object;function xe(de){if(1===de.length){const Ae=de[0];if(a(Ae))return{args:Ae,keys:null};if(function Se(de){return de&&"object"==typeof de&&te(de)===z}(Ae)){const Ue=Te(Ae);return{args:Ue.map(me=>Ae[me]),keys:Ue}}}return{args:de,keys:null}}},8737:(ln,ft,$)=>{"use strict";function a(te,z){if(te){const Te=te.indexOf(z);0<=Te&&te.splice(Te,1)}}$.d(ft,{P:()=>a})},3888:(ln,ft,$)=>{"use strict";function a(te){const Te=te(xe=>{Error.call(xe),xe.stack=(new Error).stack});return Te.prototype=Object.create(Error.prototype),Te.prototype.constructor=Te,Te}$.d(ft,{d:()=>a})},1810:(ln,ft,$)=>{"use strict";function a(te,z){return te.reduce((Te,xe,Se)=>(Te[xe]=z[Se],Te),{})}$.d(ft,{n:()=>a})},2806:(ln,ft,$)=>{"use strict";$.d(ft,{O:()=>Te,x:()=>z});var a=$(2416);let te=null;function z(xe){if(a.v.useDeprecatedSynchronousErrorHandling){const Se=!te;if(Se&&(te={errorThrown:!1,error:null}),xe(),Se){const{errorThrown:de,error:Ae}=te;if(te=null,de)throw Ae}}else xe()}function Te(xe){a.v.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=xe)}},9672:(ln,ft,$)=>{"use strict";function a(te,z,Te,xe=0,Se=!1){const de=z.schedule(function(){Te(),Se?te.add(this.schedule(null,xe)):this.unsubscribe()},xe);if(te.add(de),!Se)return de}$.d(ft,{f:()=>a})},4671:(ln,ft,$)=>{"use strict";function a(te){return te}$.d(ft,{y:()=>a})},1144:(ln,ft,$)=>{"use strict";$.d(ft,{z:()=>a});const a=te=>te&&"number"==typeof te.length&&"function"!=typeof te},2206:(ln,ft,$)=>{"use strict";$.d(ft,{D:()=>te});var a=$(576);function te(z){return Symbol.asyncIterator&&(0,a.m)(null==z?void 0:z[Symbol.asyncIterator])}},576:(ln,ft,$)=>{"use strict";function a(te){return"function"==typeof te}$.d(ft,{m:()=>a})},3670:(ln,ft,$)=>{"use strict";$.d(ft,{c:()=>z});var a=$(8822),te=$(576);function z(Te){return(0,te.m)(Te[a.L])}},6495:(ln,ft,$)=>{"use strict";$.d(ft,{T:()=>z});var a=$(2202),te=$(576);function z(Te){return(0,te.m)(null==Te?void 0:Te[a.h])}},8239:(ln,ft,$)=>{"use strict";$.d(ft,{t:()=>te});var a=$(576);function te(z){return(0,a.m)(null==z?void 0:z.then)}},3260:(ln,ft,$)=>{"use strict";$.d(ft,{L:()=>Te,Q:()=>z});var a=$(655),te=$(576);function z(xe){return(0,a.FC)(this,arguments,function*(){const de=xe.getReader();try{for(;;){const{value:Ae,done:Ue}=yield(0,a.qq)(de.read());if(Ue)return yield(0,a.qq)(void 0);yield yield(0,a.qq)(Ae)}}finally{de.releaseLock()}})}function Te(xe){return(0,te.m)(null==xe?void 0:xe.getReader)}},4482:(ln,ft,$)=>{"use strict";$.d(ft,{A:()=>te,e:()=>z});var a=$(576);function te(Te){return(0,a.m)(null==Te?void 0:Te.lift)}function z(Te){return xe=>{if(te(xe))return xe.lift(function(Se){try{return Te(Se,this)}catch(de){this.error(de)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(ln,ft,$)=>{"use strict";$.d(ft,{Z:()=>Te});var a=$(4004);const{isArray:te}=Array;function Te(xe){return(0,a.U)(Se=>function z(xe,Se){return te(Se)?xe(...Se):xe(Se)}(xe,Se))}},5032:(ln,ft,$)=>{"use strict";function a(){}$.d(ft,{Z:()=>a})},9635:(ln,ft,$)=>{"use strict";$.d(ft,{U:()=>z,z:()=>te});var a=$(4671);function te(...Te){return z(Te)}function z(Te){return 0===Te.length?a.y:1===Te.length?Te[0]:function(Se){return Te.reduce((de,Ae)=>Ae(de),Se)}}},7849:(ln,ft,$)=>{"use strict";$.d(ft,{h:()=>z});var a=$(2416),te=$(3410);function z(Te){te.z.setTimeout(()=>{const{onUnhandledError:xe}=a.v;if(!xe)throw Te;xe(Te)})}},4532:(ln,ft,$)=>{"use strict";function a(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}$.d(ft,{z:()=>a})},863:(ln,ft,$)=>{var a={"./ion-accordion_2.entry.js":[9654,8592,9654],"./ion-action-sheet.entry.js":[3648,8592,3648],"./ion-alert.entry.js":[1118,8592,1118],"./ion-app_8.entry.js":[53,8592,3236],"./ion-avatar_3.entry.js":[4753,4753],"./ion-back-button.entry.js":[2073,8592,2073],"./ion-backdrop.entry.js":[8939,8939],"./ion-breadcrumb_2.entry.js":[7544,8592,7544],"./ion-button_2.entry.js":[5652,5652],"./ion-card_5.entry.js":[388,388],"./ion-checkbox.entry.js":[9922,9922],"./ion-chip.entry.js":[657,657],"./ion-col_3.entry.js":[9824,9824],"./ion-datetime-button.entry.js":[9230,7206,9230],"./ion-datetime_3.entry.js":[4959,7206,8592,4959],"./ion-fab_3.entry.js":[5836,8592,5836],"./ion-img.entry.js":[1033,1033],"./ion-infinite-scroll_2.entry.js":[8034,8592,5817],"./ion-input.entry.js":[1217,8592,1217],"./ion-item-option_3.entry.js":[2933,8592,4651],"./ion-item_8.entry.js":[4711,8592,4711],"./ion-loading.entry.js":[9434,8592,9434],"./ion-menu_3.entry.js":[8136,8592,8136],"./ion-modal.entry.js":[2349,8592,2349],"./ion-nav_2.entry.js":[5349,8592,5349],"./ion-picker-column-internal.entry.js":[7602,8592,7602],"./ion-picker-internal.entry.js":[9016,9016],"./ion-popover.entry.js":[3804,8592,3804],"./ion-progress-bar.entry.js":[4174,4174],"./ion-radio_2.entry.js":[4432,4432],"./ion-range.entry.js":[1709,8592,1709],"./ion-refresher_2.entry.js":[3326,8592,2175],"./ion-reorder_2.entry.js":[3583,8592,1186],"./ion-ripple-effect.entry.js":[9958,9958],"./ion-route_4.entry.js":[4330,4330],"./ion-searchbar.entry.js":[8628,8592,8628],"./ion-segment_2.entry.js":[9325,8592,9325],"./ion-select_3.entry.js":[2773,2773],"./ion-slide_2.entry.js":[1650,1650],"./ion-spinner.entry.js":[4908,8592,4908],"./ion-split-pane.entry.js":[9536,9536],"./ion-tab-bar_2.entry.js":[438,8592,438],"./ion-tab_2.entry.js":[1536,8592,1536],"./ion-text.entry.js":[4376,4376],"./ion-textarea.entry.js":[6560,6560],"./ion-toast.entry.js":[6120,8592,6120],"./ion-toggle.entry.js":[5168,8592,5168],"./ion-virtual-scroll.entry.js":[2289,2289]};function te(z){if(!$.o(a,z))return Promise.resolve().then(()=>{var Se=new Error("Cannot find module '"+z+"'");throw Se.code="MODULE_NOT_FOUND",Se});var Te=a[z],xe=Te[0];return Promise.all(Te.slice(1).map($.e)).then(()=>$(xe))}te.keys=()=>Object.keys(a),te.id=863,ln.exports=te},655:(ln,ft,$)=>{"use strict";function Te(W,pt){var nt={};for(var Ie in W)Object.prototype.hasOwnProperty.call(W,Ie)&&pt.indexOf(Ie)<0&&(nt[Ie]=W[Ie]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var we=0;for(Ie=Object.getOwnPropertySymbols(W);we<Ie.length;we++)pt.indexOf(Ie[we])<0&&Object.prototype.propertyIsEnumerable.call(W,Ie[we])&&(nt[Ie[we]]=W[Ie[we]])}return nt}function xe(W,pt,nt,Ie){var Je,we=arguments.length,be=we<3?pt:null===Ie?Ie=Object.getOwnPropertyDescriptor(pt,nt):Ie;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)be=Reflect.decorate(W,pt,nt,Ie);else for(var Le=W.length-1;Le>=0;Le--)(Je=W[Le])&&(be=(we<3?Je(be):we>3?Je(pt,nt,be):Je(pt,nt))||be);return we>3&&be&&Object.defineProperty(pt,nt,be),be}function pe(W,pt,nt,Ie){return new(nt||(nt=Promise))(function(be,Je){function Le(Pt){try{He(Ie.next(Pt))}catch(St){Je(St)}}function rt(Pt){try{He(Ie.throw(Pt))}catch(St){Je(St)}}function He(Pt){Pt.done?be(Pt.value):function we(be){return be instanceof nt?be:new nt(function(Je){Je(be)})}(Pt.value).then(Le,rt)}He((Ie=Ie.apply(W,pt||[])).next())})}function st(W){return this instanceof st?(this.v=W,this):new st(W)}function et(W,pt,nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var we,Ie=nt.apply(W,pt||[]),be=[];return we={},Je("next"),Je("throw"),Je("return"),we[Symbol.asyncIterator]=function(){return this},we;function Je(Nt){Ie[Nt]&&(we[Nt]=function(cn){return new Promise(function(xt,Dn){be.push([Nt,cn,xt,Dn])>1||Le(Nt,cn)})})}function Le(Nt,cn){try{!function rt(Nt){Nt.value instanceof st?Promise.resolve(Nt.value.v).then(He,Pt):St(be[0][2],Nt)}(Ie[Nt](cn))}catch(xt){St(be[0][3],xt)}}function He(Nt){Le("next",Nt)}function Pt(Nt){Le("throw",Nt)}function St(Nt,cn){Nt(cn),be.shift(),be.length&&Le(be[0][0],be[0][1])}}function Pe(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var nt,pt=W[Symbol.asyncIterator];return pt?pt.call(W):(W=function Dt(W){var pt="function"==typeof Symbol&&Symbol.iterator,nt=pt&&W[pt],Ie=0;if(nt)return nt.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&Ie>=W.length&&(W=void 0),{value:W&&W[Ie++],done:!W}}};throw new TypeError(pt?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),nt={},Ie("next"),Ie("throw"),Ie("return"),nt[Symbol.asyncIterator]=function(){return this},nt);function Ie(be){nt[be]=W[be]&&function(Je){return new Promise(function(Le,rt){!function we(be,Je,Le,rt){Promise.resolve(rt).then(function(He){be({value:He,done:Le})},Je)}(Le,rt,(Je=W[be](Je)).done,Je.value)})}}}$.d(ft,{FC:()=>et,KL:()=>Pe,_T:()=>Te,gn:()=>xe,mG:()=>pe,qq:()=>st})},6895:(ln,ft,$)=>{"use strict";$.d(ft,{Do:()=>le,EM:()=>us,HT:()=>Te,JF:()=>Qi,K0:()=>Se,Mx:()=>fn,O5:()=>lt,PM:()=>Lo,S$:()=>Dt,V_:()=>Ue,Ye:()=>at,b0:()=>ve,bD:()=>ys,ez:()=>Bs,q:()=>z,sg:()=>ne,tP:()=>pi,w_:()=>xe});var a=$(4650);let te=null;function z(){return te}function Te(N){te||(te=N)}class xe{}const Se=new a.OlP("DocumentToken");let de=(()=>{class N{historyGo(B){throw new Error("Not implemented")}}return N.\u0275fac=function(B){return new(B||N)},N.\u0275prov=a.Yz7({token:N,factory:function(){return function Ae(){return(0,a.LFG)(me)}()},providedIn:"platform"}),N})();const Ue=new a.OlP("Location Initialized");let me=(()=>{class N extends de{constructor(B){super(),this._doc=B,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return z().getBaseHref(this._doc)}onPopState(B){const re=z().getGlobalEventTarget(this._doc,"window");return re.addEventListener("popstate",B,!1),()=>re.removeEventListener("popstate",B)}onHashChange(B){const re=z().getGlobalEventTarget(this._doc,"window");return re.addEventListener("hashchange",B,!1),()=>re.removeEventListener("hashchange",B)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(B){this._location.pathname=B}pushState(B,re,ye){fe()?this._history.pushState(B,re,ye):this._location.hash=ye}replaceState(B,re,ye){fe()?this._history.replaceState(B,re,ye):this._location.hash=ye}forward(){this._history.forward()}back(){this._history.back()}historyGo(B=0){this._history.go(B)}getState(){return this._history.state}}return N.\u0275fac=function(B){return new(B||N)(a.LFG(Se))},N.\u0275prov=a.Yz7({token:N,factory:function(){return function pe(){return new me((0,a.LFG)(Se))}()},providedIn:"platform"}),N})();function fe(){return!!window.history.pushState}function ke(N,K){if(0==N.length)return K;if(0==K.length)return N;let B=0;return N.endsWith("/")&&B++,K.startsWith("/")&&B++,2==B?N+K.substring(1):1==B?N+K:N+"/"+K}function Ge(N){const K=N.match(/#|\?|$/),B=K&&K.index||N.length;return N.slice(0,B-("/"===N[B-1]?1:0))+N.slice(B)}function ut(N){return N&&"?"!==N[0]?"?"+N:N}let Dt=(()=>{class N{historyGo(B){throw new Error("Not implemented")}}return N.\u0275fac=function(B){return new(B||N)},N.\u0275prov=a.Yz7({token:N,factory:function(){return(0,a.f3M)(ve)},providedIn:"root"}),N})();const Me=new a.OlP("appBaseHref");let ve=(()=>{class N extends Dt{constructor(B,re){var ye,_t,Vt;super(),this._platformLocation=B,this._removeListenerFns=[],this._baseHref=null!==(ye=null!==(_t=null!=re?re:this._platformLocation.getBaseHrefFromDOM())&&void 0!==_t?_t:null===(Vt=(0,a.f3M)(Se).location)||void 0===Vt?void 0:Vt.origin)&&void 0!==ye?ye:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}prepareExternalUrl(B){return ke(this._baseHref,B)}path(B=!1){const re=this._platformLocation.pathname+ut(this._platformLocation.search),ye=this._platformLocation.hash;return ye&&B?`${re}${ye}`:re}pushState(B,re,ye,_t){const Vt=this.prepareExternalUrl(ye+ut(_t));this._platformLocation.pushState(B,re,Vt)}replaceState(B,re,ye,_t){const Vt=this.prepareExternalUrl(ye+ut(_t));this._platformLocation.replaceState(B,re,Vt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(B=0){var re,ye;null===(re=(ye=this._platformLocation).historyGo)||void 0===re||re.call(ye,B)}}return N.\u0275fac=function(B){return new(B||N)(a.LFG(de),a.LFG(Me,8))},N.\u0275prov=a.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})(),le=(()=>{class N extends Dt{constructor(B,re){super(),this._platformLocation=B,this._baseHref="",this._removeListenerFns=[],null!=re&&(this._baseHref=re)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}path(B=!1){let re=this._platformLocation.hash;return null==re&&(re="#"),re.length>0?re.substring(1):re}prepareExternalUrl(B){const re=ke(this._baseHref,B);return re.length>0?"#"+re:re}pushState(B,re,ye,_t){let Vt=this.prepareExternalUrl(ye+ut(_t));0==Vt.length&&(Vt=this._platformLocation.pathname),this._platformLocation.pushState(B,re,Vt)}replaceState(B,re,ye,_t){let Vt=this.prepareExternalUrl(ye+ut(_t));0==Vt.length&&(Vt=this._platformLocation.pathname),this._platformLocation.replaceState(B,re,Vt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(B=0){var re,ye;null===(re=(ye=this._platformLocation).historyGo)||void 0===re||re.call(ye,B)}}return N.\u0275fac=function(B){return new(B||N)(a.LFG(de),a.LFG(Me,8))},N.\u0275prov=a.Yz7({token:N,factory:N.\u0275fac}),N})(),at=(()=>{class N{constructor(B){this._subject=new a.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=B;const re=this._locationStrategy.getBaseHref();this._basePath=function Pe(N){if(new RegExp("^(https?:)?//").test(N)){const[,B]=N.split(/\/\/[^\/]+/);return B}return N}(Ge(Qe(re))),this._locationStrategy.onPopState(ye=>{this._subject.emit({url:this.path(!0),pop:!0,state:ye.state,type:ye.type})})}ngOnDestroy(){var B;null===(B=this._urlChangeSubscription)||void 0===B||B.unsubscribe(),this._urlChangeListeners=[]}path(B=!1){return this.normalize(this._locationStrategy.path(B))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(B,re=""){return this.path()==this.normalize(B+ut(re))}normalize(B){return N.stripTrailingSlash(function et(N,K){if(!N||!K.startsWith(N))return K;const B=K.substring(N.length);return""===B||["/",";","?","#"].includes(B[0])?B:K}(this._basePath,Qe(B)))}prepareExternalUrl(B){return B&&"/"!==B[0]&&(B="/"+B),this._locationStrategy.prepareExternalUrl(B)}go(B,re="",ye=null){this._locationStrategy.pushState(ye,"",B,re),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+ut(re)),ye)}replaceState(B,re="",ye=null){this._locationStrategy.replaceState(ye,"",B,re),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+ut(re)),ye)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(B=0){var re,ye;null===(re=(ye=this._locationStrategy).historyGo)||void 0===re||re.call(ye,B)}onUrlChange(B){return this._urlChangeListeners.push(B),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(re=>{this._notifyUrlChangeListeners(re.url,re.state)})),()=>{const re=this._urlChangeListeners.indexOf(B);var ye;this._urlChangeListeners.splice(re,1),0===this._urlChangeListeners.length&&(null===(ye=this._urlChangeSubscription)||void 0===ye||ye.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(B="",re){this._urlChangeListeners.forEach(ye=>ye(B,re))}subscribe(B,re,ye){return this._subject.subscribe({next:B,error:re,complete:ye})}}return N.normalizeQueryParams=ut,N.joinWithSlash=ke,N.stripTrailingSlash=Ge,N.\u0275fac=function(B){return new(B||N)(a.LFG(Dt))},N.\u0275prov=a.Yz7({token:N,factory:function(){return function st(){return new at((0,a.LFG)(Dt))}()},providedIn:"root"}),N})();function Qe(N){return N.replace(/\/index.html$/,"")}function fn(N,K){K=encodeURIComponent(K);for(const B of N.split(";")){const re=B.indexOf("="),[ye,_t]=-1==re?[B,""]:[B.slice(0,re),B.slice(re+1)];if(ye.trim()===K)return decodeURIComponent(_t)}return null}class Gr{constructor(K,B,re,ye){this.$implicit=K,this.ngForOf=B,this.index=re,this.count=ye}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ne=(()=>{class N{set ngForOf(B){this._ngForOf=B,this._ngForOfDirty=!0}set ngForTrackBy(B){this._trackByFn=B}get ngForTrackBy(){return this._trackByFn}constructor(B,re,ye){this._viewContainer=B,this._template=re,this._differs=ye,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(B){B&&(this._template=B)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const B=this._ngForOf;!this._differ&&B&&(this._differ=this._differs.find(B).create(this.ngForTrackBy))}if(this._differ){const B=this._differ.diff(this._ngForOf);B&&this._applyChanges(B)}}_applyChanges(B){const re=this._viewContainer;B.forEachOperation((ye,_t,Vt)=>{if(null==ye.previousIndex)re.createEmbeddedView(this._template,new Gr(ye.item,this._ngForOf,-1,-1),null===Vt?void 0:Vt);else if(null==Vt)re.remove(null===_t?void 0:_t);else if(null!==_t){const un=re.get(_t);re.move(un,Vt),he(un,ye)}});for(let ye=0,_t=re.length;ye<_t;ye++){const un=re.get(ye).context;un.index=ye,un.count=_t,un.ngForOf=this._ngForOf}B.forEachIdentityChange(ye=>{he(re.get(ye.currentIndex),ye)})}static ngTemplateContextGuard(B,re){return!0}}return N.\u0275fac=function(B){return new(B||N)(a.Y36(a.s_b),a.Y36(a.Rgc),a.Y36(a.ZZ4))},N.\u0275dir=a.lG2({type:N,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),N})();function he(N,K){N.context.$implicit=K.item}let lt=(()=>{class N{constructor(B,re){this._viewContainer=B,this._context=new Mt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=re}set ngIf(B){this._context.$implicit=this._context.ngIf=B,this._updateView()}set ngIfThen(B){ce("ngIfThen",B),this._thenTemplateRef=B,this._thenViewRef=null,this._updateView()}set ngIfElse(B){ce("ngIfElse",B),this._elseTemplateRef=B,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(B,re){return!0}}return N.\u0275fac=function(B){return new(B||N)(a.Y36(a.s_b),a.Y36(a.Rgc))},N.\u0275dir=a.lG2({type:N,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),N})();class Mt{constructor(){this.$implicit=null,this.ngIf=null}}function ce(N,K){if(K&&!K.createEmbeddedView)throw new Error(`${N} must be a TemplateRef, but received '${(0,a.AaK)(K)}'.`)}let pi=(()=>{class N{constructor(B){this._viewContainerRef=B,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(B){if(B.ngTemplateOutlet||B.ngTemplateOutletInjector){const re=this._viewContainerRef;if(this._viewRef&&re.remove(re.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:ye,ngTemplateOutletContext:_t,ngTemplateOutletInjector:Vt}=this;this._viewRef=re.createEmbeddedView(ye,_t,Vt?{injector:Vt}:void 0)}else this._viewRef=null}else this._viewRef&&B.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return N.\u0275fac=function(B){return new(B||N)(a.Y36(a.s_b))},N.\u0275dir=a.lG2({type:N,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[a.TTD]}),N})(),Bs=(()=>{class N{}return N.\u0275fac=function(B){return new(B||N)},N.\u0275mod=a.oAB({type:N}),N.\u0275inj=a.cJS({}),N})();const ys="browser",Pi="server";function Lo(N){return N===Pi}let us=(()=>{class N{}return N.\u0275prov=(0,a.Yz7)({token:N,providedIn:"root",factory:()=>new As((0,a.LFG)(Se),window)}),N})();class As{constructor(K,B){this.document=K,this.window=B,this.offset=()=>[0,0]}setOffset(K){this.offset=Array.isArray(K)?()=>K:K}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(K){this.supportsScrolling()&&this.window.scrollTo(K[0],K[1])}scrollToAnchor(K){if(!this.supportsScrolling())return;const B=function Ni(N,K){const B=N.getElementById(K)||N.getElementsByName(K)[0];if(B)return B;if("function"==typeof N.createTreeWalker&&N.body&&(N.body.createShadowRoot||N.body.attachShadow)){const re=N.createTreeWalker(N.body,NodeFilter.SHOW_ELEMENT);let ye=re.currentNode;for(;ye;){const _t=ye.shadowRoot;if(_t){const Vt=_t.getElementById(K)||_t.querySelector(`[name="${K}"]`);if(Vt)return Vt}ye=re.nextNode()}}return null}(this.document,K);B&&(this.scrollToElement(B),B.focus())}setHistoryScrollRestoration(K){if(this.supportScrollRestoration()){const B=this.window.history;B&&B.scrollRestoration&&(B.scrollRestoration=K)}}scrollToElement(K){const B=K.getBoundingClientRect(),re=B.left+this.window.pageXOffset,ye=B.top+this.window.pageYOffset,_t=this.offset();this.window.scrollTo(re-_t[0],ye-_t[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const K=ss(this.window.history)||ss(Object.getPrototypeOf(this.window.history));return!(!K||!K.writable&&!K.set)}catch(K){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(K){return!1}}}function ss(N){return Object.getOwnPropertyDescriptor(N,"scrollRestoration")}class Qi{}},4650:(ln,ft,$)=>{"use strict";$.d(ft,{$8M:()=>zs,$WT:()=>vi,$Z:()=>Hf,AFp:()=>rE,AaK:()=>Ae,AsE:()=>Wg,CHM:()=>j,CRH:()=>k0,CZH:()=>uv,CqO:()=>cp,D6c:()=>Dw,EJc:()=>VI,EpF:()=>ap,F$t:()=>Fd,F4k:()=>up,FYo:()=>$h,FiY:()=>on,G48:()=>aw,Gf:()=>P0,GfV:()=>v,GkF:()=>op,Gpc:()=>fe,Hsn:()=>fp,JOm:()=>os,KtG:()=>f,LFG:()=>rn,Lbi:()=>LI,Lck:()=>ze,MMx:()=>cr,NdJ:()=>tf,OlP:()=>Ai,Oqu:()=>uf,P3R:()=>xf,PXZ:()=>tw,Q6J:()=>sp,QGY:()=>lp,Qsj:()=>h,R0b:()=>Yu,RDi:()=>ic,Rgc:()=>om,SBq:()=>hc,Sil:()=>jI,Suo:()=>N0,TTD:()=>zr,TgZ:()=>ef,X6Q:()=>ow,XFs:()=>Yt,Xpm:()=>fr,Xts:()=>yo,Y36:()=>$c,YKP:()=>ue,YNc:()=>ip,Yjl:()=>zi,Yz7:()=>St,Z0I:()=>Dn,ZZ4:()=>o0,_Bn:()=>H,_UZ:()=>Mg,_Vd:()=>cc,_c5:()=>Cw,_uU:()=>zg,aQg:()=>a0,c2e:()=>BI,cJS:()=>cn,cg1:()=>bp,dDg:()=>QI,dqk:()=>xn,eFA:()=>mE,eJc:()=>H_,ekj:()=>Hg,eoX:()=>hE,f3M:()=>yn,g9A:()=>sE,h0i:()=>Z,hGG:()=>bw,hij:()=>yp,iGM:()=>O0,ifc:()=>vt,ip1:()=>nE,jDz:()=>ks,kL8:()=>yf,lG2:()=>ls,lqb:()=>fu,lri:()=>cE,n5z:()=>Ia,oAB:()=>fi,oxw:()=>hp,q4F:()=>S,qLn:()=>Ve,qOj:()=>pg,qZA:()=>kd,rWj:()=>dE,sBO:()=>lw,s_b:()=>ov,soG:()=>cv,tb:()=>pE,tp0:()=>wn,uIk:()=>Jh,vHH:()=>Me,vpe:()=>Xc,wAp:()=>Fr,xp6:()=>Lf,z2F:()=>dv,zSh:()=>Fc,zs3:()=>mu});var a=$(7579),te=$(727),z=$(9751),Te=$(6451),xe=$(3099);function Se(n){for(let r in n)if(n[r]===Se)return r;throw Error("Could not find renamed property on target object.")}function de(n,r){for(const o in r)r.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=r[o])}function Ae(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ae).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const o=r.indexOf("\n");return-1===o?r:r.substring(0,o)}function Ue(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const me=Se({__forward_ref__:Se});function fe(n){return n.__forward_ref__=fe,n.toString=function(){return Ae(this())},n}function pe(n){return ke(n)?n():n}function ke(n){return"function"==typeof n&&n.hasOwnProperty(me)&&n.__forward_ref__===fe}function Ge(n){return n&&!!n.\u0275providers}const Dt="https://g.co/ng/security#xss";class Me extends Error{constructor(r,o){super(ve(r,o)),this.code=r}}function ve(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}function le(n){return"string"==typeof n?n:null==n?"":String(n)}function Pe(n,r){throw new Me(-201,!1)}function Je(n,r){null==n&&function Le(n,r,o,l){throw new Error(`ASSERTION ERROR: ${n}`+(null==l?"":` [Expected=> ${o} ${l} ${r} <=Actual]`))}(r,n,null,"!=")}function St(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function cn(n){return{providers:n.providers||[],imports:n.imports||[]}}function xt(n){return Ln(n,Cr)||Ln(n,gn)}function Dn(n){return null!==xt(n)}function Ln(n,r){return n.hasOwnProperty(r)?n[r]:null}function nr(n){return n&&(n.hasOwnProperty(_r)||n.hasOwnProperty(dr))?n[_r]:null}const Cr=Se({\u0275prov:Se}),_r=Se({\u0275inj:Se}),gn=Se({ngInjectableDef:Se}),dr=Se({ngInjectorDef:Se});var Yt=(()=>((Yt=Yt||{})[Yt.Default=0]="Default",Yt[Yt.Host=1]="Host",Yt[Yt.Self=2]="Self",Yt[Yt.SkipSelf=4]="SkipSelf",Yt[Yt.Optional=8]="Optional",Yt))();let Zr;function br(n){const r=Zr;return Zr=n,r}function ei(n,r,o){const l=xt(n);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:o&Yt.Optional?null:void 0!==r?r:void Pe(Ae(n))}const xn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Cn={},jr="__NG_DI_FLAG__",Gt="ngTempTokenPath",yi="ngTokenPath",Gi=/\n/gm,Sr="\u0275",ui="__source";let sr;function kn(n){const r=sr;return sr=n,r}function hi(n,r=Yt.Default){if(void 0===sr)throw new Me(-203,!1);return null===sr?ei(n,void 0,r):sr.get(n,r&Yt.Optional?null:void 0,r)}function rn(n,r=Yt.Default){return(function Tr(){return Zr}()||hi)(pe(n),r)}function yn(n,r=Yt.Default){return rn(n,Mn(r))}function Mn(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Pn(n){const r=[];for(let o=0;o<n.length;o++){const l=pe(n[o]);if(Array.isArray(l)){if(0===l.length)throw new Me(900,!1);let p,_=Yt.Default;for(let D=0;D<l.length;D++){const O=l[D],L=Or(O);"number"==typeof L?-1===L?p=O.token:_|=L:p=O}r.push(rn(p,_))}else r.push(rn(l))}return r}function jn(n,r){return n[jr]=r,n.prototype[jr]=r,n}function Or(n){return n[jr]}function We(n){return{toString:n}.toString()}var Rt=(()=>((Rt=Rt||{})[Rt.OnPush=0]="OnPush",Rt[Rt.Default=1]="Default",Rt))(),vt=(()=>{return(n=vt||(vt={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",vt;var n})();const hn={},Be=[],$e=Se({\u0275cmp:Se}),ge=Se({\u0275dir:Se}),yt=Se({\u0275pipe:Se}),Ot=Se({\u0275mod:Se}),Ht=Se({\u0275fac:Se}),On=Se({__NG_ELEMENT_ID__:Se});let Wn=0;function fr(n){return We(()=>{const o=!0===n.standalone,l={},p={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Rt.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Be,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||vt.Emulated,id:"c"+Wn++,styles:n.styles||Be,_:null,setInput:null,schemas:n.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},_=n.dependencies,D=n.features;return p.inputs=Pr(n.inputs,l),p.outputs=Pr(n.outputs),D&&D.forEach(O=>O(p)),p.directiveDefs=_?()=>("function"==typeof _?_():_).map(Li).filter(Yi):null,p.pipeDefs=_?()=>("function"==typeof _?_():_).map(Nr).filter(Yi):null,p})}function Li(n){return Qn(n)||ti(n)}function Yi(n){return null!==n}function fi(n){return We(()=>({type:n.type,bootstrap:n.bootstrap||Be,declarations:n.declarations||Be,imports:n.imports||Be,exports:n.exports||Be,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Pr(n,r){if(null==n)return hn;const o={};for(const l in n)if(n.hasOwnProperty(l)){let p=n[l],_=p;Array.isArray(p)&&(_=p[1],p=p[0]),o[p]=l,r&&(r[p]=_)}return o}const ls=fr;function zi(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Qn(n){return n[$e]||null}function ti(n){return n[ge]||null}function Nr(n){return n[yt]||null}function vi(n){const r=Qn(n)||ti(n)||Nr(n);return null!==r&&r.standalone}function ri(n,r){const o=n[Ot]||null;if(!o&&!0===r)throw new Error(`Type ${Ae(n)} does not have '\u0275mod' property.`);return o}const Mr=0,fn=1,Xn=2,$r=3,Qr=4,Oi=5,Hr=6,wi=7,Gr=8,ne=9,he=10,Ne=11,lt=12,Mt=13,ce=14,Ye=15,dt=16,Ct=17,Lt=18,sn=19,Sn=20,Bn=21,Yn=22,it=1,qe=2,mt=7,Ut=8,nn=9,In=10;function kr(n){return Array.isArray(n)&&"object"==typeof n[it]}function Er(n){return Array.isArray(n)&&!0===n[it]}function Ir(n){return 0!=(4&n.flags)}function pr(n){return n.componentOffset>-1}function Kn(n){return 1==(1&n.flags)}function gi(n){return null!==n.template}function ii(n){return 0!=(256&n[Xn])}function is(n,r){return n.hasOwnProperty(Ht)?n[Ht]:null}class Lo{constructor(r,o,l){this.previousValue=r,this.currentValue=o,this.firstChange=l}isFirstChange(){return this.firstChange}}function zr(){return bi}function bi(n){return n.type.prototype.ngOnChanges&&(n.setInput=us),gr}function gr(){const n=ss(this),r=null==n?void 0:n.current;if(r){const o=n.previous;if(o===hn)n.previous=r;else for(let l in r)o[l]=r[l];n.current=null,this.ngOnChanges(r)}}function us(n,r,o,l){const p=this.declaredInputs[o],_=ss(n)||function Ni(n,r){return n[As]=r}(n,{previous:hn,current:null}),D=_.current||(_.current={}),O=_.previous,L=O[p];D[p]=new Lo(L&&L.currentValue,r,O===hn),n[l]=r}zr.ngInherit=!0;const As="__ngSimpleChanges__";function ss(n){return n[As]||null}const Xi=function(n,r,o){};function Dr(n){for(;Array.isArray(n);)n=n[Mr];return n}function Xs(n,r){return Dr(r[n])}function Ci(n,r){return Dr(r[n.index])}function co(n,r){return n.data[r]}function $i(n,r){const o=r[n];return kr(o)?o:o[Mr]}function ho(n){return 64==(64&n[Xn])}function ki(n,r){return null==r?null:n[r]}function Xr(n){n[Lt]=0}function eo(n,r){n[Oi]+=r;let o=n,l=n[$r];for(;null!==l&&(1===r&&1===o[Oi]||-1===r&&0===o[Oi]);)l[Oi]+=r,o=l,l=l[$r]}const or={lFrame:al(null),bindingsEnabled:!0};function tr(){return or.bindingsEnabled}function qt(){return or.lFrame.lView}function Fn(){return or.lFrame.tView}function j(n){return or.lFrame.contextLView=n,n[Gr]}function f(n){return or.lFrame.contextLView=null,n}function I(){let n=y();for(;null!==n&&64===n.type;)n=n.parent;return n}function y(){return or.lFrame.currentTNode}function Q(n,r){const o=or.lFrame;o.currentTNode=n,o.isParent=r}function gt(){return or.lFrame.isParent}function tn(){or.lFrame.isParent=!1}function Ui(){return or.lFrame.bindingIndex++}function si(n){const r=or.lFrame,o=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,o}function Wa(n,r){const o=or.lFrame;o.bindingIndex=o.bindingRootIndex=n,ca(r)}function ca(n){or.lFrame.currentDirectiveIndex=n}function Pa(){return or.lFrame.currentQueryIndex}function xs(n){or.lFrame.currentQueryIndex=n}function Na(n){const r=n[fn];return 2===r.type?r.declTNode:1===r.type?n[Hr]:null}function Bo(n,r,o){if(o&Yt.SkipSelf){let p=r,_=n;for(;!(p=p.parent,null!==p||o&Yt.Host||(p=Na(_),null===p||(_=_[Ye],10&p.type))););if(null===p)return!1;r=p,n=_}const l=or.lFrame=Ka();return l.currentTNode=r,l.lView=n,!0}function So(n){const r=Ka(),o=n[fn];or.lFrame=r,r.currentTNode=o.firstChild,r.lView=n,r.tView=o,r.contextLView=n,r.bindingIndex=o.bindingStartIndex,r.inI18n=!1}function Ka(){const n=or.lFrame,r=null===n?null:n.child;return null===r?al(n):r}function al(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function ll(){const n=or.lFrame;return or.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const ql=ll;function Ya(){const n=ll();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function _i(){return or.lFrame.selectedIndex}function Hs(n){or.lFrame.selectedIndex=n}function Di(){const n=or.lFrame;return co(n.tView,n.selectedIndex)}function pl(n,r){for(let o=r.directiveStart,l=r.directiveEnd;o<l;o++){const _=n.data[o].type.prototype,{ngAfterContentInit:D,ngAfterContentChecked:O,ngAfterViewInit:L,ngAfterViewChecked:Y,ngOnDestroy:oe}=_;D&&(n.contentHooks||(n.contentHooks=[])).push(-o,D),O&&((n.contentHooks||(n.contentHooks=[])).push(o,O),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,O)),L&&(n.viewHooks||(n.viewHooks=[])).push(-o,L),Y&&((n.viewHooks||(n.viewHooks=[])).push(o,Y),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,Y)),null!=oe&&(n.destroyHooks||(n.destroyHooks=[])).push(o,oe)}}function ka(n,r,o){Pl(n,r,3,o)}function ea(n,r,o,l){(3&n[Xn])===o&&Pl(n,r,o,l)}function Fa(n,r){let o=n[Xn];(3&o)===r&&(o&=2047,o+=1,n[Xn]=o)}function Pl(n,r,o,l){const _=null!=l?l:-1,D=r.length-1;let O=0;for(let L=void 0!==l?65535&n[Lt]:0;L<D;L++)if("number"==typeof r[L+1]){if(O=r[L],null!=l&&O>=l)break}else r[L]<0&&(n[Lt]+=65536),(O<_||-1==_)&&(N(n,o,r,L),n[Lt]=(4294901760&n[Lt])+L+2),L++}function N(n,r,o,l){const p=o[l]<0,_=o[l+1],O=n[p?-o[l]:o[l]];if(p){if(n[Xn]>>11<n[Lt]>>16&&(3&n[Xn])===r){n[Xn]+=2048,Xi(4,O,_);try{_.call(O)}finally{Xi(5,O,_)}}}else{Xi(4,O,_);try{_.call(O)}finally{Xi(5,O,_)}}}const K=-1;class B{constructor(r,o,l){this.factory=r,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=l}}function ar(n,r,o){let l=0;for(;l<o.length;){const p=o[l];if("number"==typeof p){if(0!==p)break;l++;const _=o[l++],D=o[l++],O=o[l++];n.setAttribute(r,D,O,_)}else{const _=p,D=o[++l];zt(_)?n.setProperty(r,_,D):n.setAttribute(r,_,D),l++}}return l}function Ei(n){return 3===n||4===n||6===n}function zt(n){return 64===n.charCodeAt(0)}function _n(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let o=-1;for(let l=0;l<r.length;l++){const p=r[l];"number"==typeof p?o=p:0===o||hs(n,o,p,null,-1===o||2===o?r[++l]:null)}}return n}function hs(n,r,o,l,p){let _=0,D=n.length;if(-1===r)D=-1;else for(;_<n.length;){const O=n[_++];if("number"==typeof O){if(O===r){D=-1;break}if(O>r){D=_-1;break}}}for(;_<n.length;){const O=n[_];if("number"==typeof O)break;if(O===o){if(null===l)return void(null!==p&&(n[_+1]=p));if(l===n[_+1])return void(n[_+2]=p)}_++,null!==l&&_++,null!==p&&_++}-1!==D&&(n.splice(D,0,r),_=D+1),n.splice(_++,0,o),null!==l&&n.splice(_++,0,l),null!==p&&n.splice(_++,0,p)}function dn(n){return n!==K}function It(n){return 32767&n}function Ii(n,r){let o=function Wt(n){return n>>16}(n),l=r;for(;o>0;)l=l[Ye],o--;return l}let Vo=!0;function Uo(n){const r=Vo;return Vo=n,r}const Zl=255,Ea=5;let Za=0;const Gs={};function La(n,r){const o=ul(n,r);if(-1!==o)return o;const l=r[fn];l.firstCreatePass&&(n.injectorIndex=r.length,ml(l.data,n),ml(r,null),ml(l.blueprint,null));const p=mr(n,r),_=n.injectorIndex;if(dn(p)){const D=It(p),O=Ii(p,r),L=O[fn].data;for(let Y=0;Y<8;Y++)r[_+Y]=O[D+Y]|L[D+Y]}return r[_+8]=p,_}function ml(n,r){n.push(0,0,0,0,0,0,0,0,r)}function ul(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function mr(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,l=null,p=r;for(;null!==p;){if(l=Cu(p),null===l)return K;if(o++,p=p[Ye],-1!==l.injectorIndex)return l.injectorIndex|o<<16}return K}function ha(n,r,o){!function gl(n,r,o){let l;"string"==typeof o?l=o.charCodeAt(0)||0:o.hasOwnProperty(On)&&(l=o[On]),null==l&&(l=o[On]=Za++);const p=l&Zl;r.data[n+(p>>Ea)]|=1<<p}(n,r,o)}function Si(n,r,o){if(o&Yt.Optional||void 0!==n)return n;Pe()}function qn(n,r,o,l){if(o&Yt.Optional&&void 0===l&&(l=null),!(o&(Yt.Self|Yt.Host))){const p=n[ne],_=br(void 0);try{return p?p.get(r,l,o&Yt.Optional):ei(r,l,o&Yt.Optional)}finally{br(_)}}return Si(l,0,o)}function xo(n,r,o,l=Yt.Default,p){if(null!==n){if(1024&r[Xn]){const D=function wu(n,r,o,l,p){let _=n,D=r;for(;null!==_&&null!==D&&1024&D[Xn]&&!(256&D[Xn]);){const O=Ur(_,D,o,l|Yt.Self,Gs);if(O!==Gs)return O;let L=_.parent;if(!L){const Y=D[Bn];if(Y){const oe=Y.get(o,Gs,l);if(oe!==Gs)return oe}L=Cu(D),D=D[Ye]}_=L}return p}(n,r,o,l,Gs);if(D!==Gs)return D}const _=Ur(n,r,o,l,Gs);if(_!==Gs)return _}return qn(r,o,l,p)}function Ur(n,r,o,l,p){const _=function cl(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(On)?n[On]:void 0;return"number"==typeof r?r>=0?r&Zl:Mo:r}(o);if("function"==typeof _){if(!Bo(r,n,l))return l&Yt.Host?Si(p,0,l):qn(r,o,l,p);try{const D=_(l);if(null!=D||l&Yt.Optional)return D;Pe()}finally{ql()}}else if("number"==typeof _){let D=null,O=ul(n,r),L=K,Y=l&Yt.Host?r[dt][Hr]:null;for((-1===O||l&Yt.SkipSelf)&&(L=-1===O?mr(n,r):r[O+8],L!==K&&fa(l,!1)?(D=r[fn],O=It(L),r=Ii(L,r)):O=-1);-1!==O;){const oe=r[fn];if(es(_,O,oe.data)){const Ce=Nl(O,r,o,D,l,Y);if(Ce!==Gs)return Ce}L=r[O+8],L!==K&&fa(l,r[fn].data[O+8]===Y)&&es(_,O,r)?(D=oe,O=It(L),r=Ii(L,r)):O=-1}}return p}function Nl(n,r,o,l,p,_){const D=r[fn],O=D.data[n+8],oe=ai(O,D,o,null==l?pr(O)&&Vo:l!=D&&0!=(3&O.type),p&Yt.Host&&_===O);return null!==oe?pn(r,D,oe,O):Gs}function ai(n,r,o,l,p){const _=n.providerIndexes,D=r.data,O=1048575&_,L=n.directiveStart,oe=_>>20,ct=p?O+oe:n.directiveEnd;for(let Tt=l?O:O+oe;Tt<ct;Tt++){const Xt=D[Tt];if(Tt<L&&o===Xt||Tt>=L&&Xt.type===o)return Tt}if(p){const Tt=D[L];if(Tt&&gi(Tt)&&Tt.type===o)return L}return null}function pn(n,r,o,l){let p=n[o];const _=r.data;if(function re(n){return n instanceof B}(p)){const D=p;D.resolving&&function st(n,r){const o=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Me(-200,`Circular dependency in DI detected for ${n}${o}`)}(function at(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():le(n)}(_[o]));const O=Uo(D.canSeeViewProviders);D.resolving=!0;const L=D.injectImpl?br(D.injectImpl):null;Bo(n,l,Yt.Default);try{p=n[o]=D.factory(void 0,_,n,l),r.firstCreatePass&&o>=l.directiveStart&&function da(n,r,o){const{ngOnChanges:l,ngOnInit:p,ngDoCheck:_}=r.type.prototype;if(l){const D=bi(r);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,D),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,D)}p&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,p),_&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,_),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,_))}(o,_[o],r)}finally{null!==L&&br(L),Uo(O),D.resolving=!1,ql()}}return p}function es(n,r,o){return!!(o[r+(n>>Ea)]&1<<n)}function fa(n,r){return!(n&Yt.Self||n&Yt.Host&&r)}class pa{constructor(r,o){this._tNode=r,this._lView=o}get(r,o,l){return xo(this._tNode,this._lView,r,Mn(l),o)}}function Mo(){return new pa(I(),qt())}function Ia(n){return We(()=>{const r=n.prototype.constructor,o=r[Ht]||Qa(r),l=Object.prototype;let p=Object.getPrototypeOf(n.prototype).constructor;for(;p&&p!==l;){const _=p[Ht]||Qa(p);if(_&&_!==o)return _;p=Object.getPrototypeOf(p)}return _=>new _})}function Qa(n){return ke(n)?()=>{const r=Qa(pe(n));return r&&r()}:is(n)}function Cu(n){const r=n[fn],o=r.type;return 2===o?r.declTNode:1===o?n[Hr]:null}function zs(n){return function Ql(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const o=n.attrs;if(o){const l=o.length;let p=0;for(;p<l;){const _=o[p];if(Ei(_))break;if(0===_)p+=2;else if("number"==typeof _)for(p++;p<l&&"string"==typeof o[p];)p++;else{if(_===r)return o[p+1];p+=2}}}return null}(I(),n)}const na="__parameters__";function bt(n,r,o){return We(()=>{const l=function Ca(n){return function(...o){if(n){const l=n(...o);for(const p in l)this[p]=l[p]}}}(r);function p(..._){if(this instanceof p)return l.apply(this,_),this;const D=new p(..._);return O.annotation=D,O;function O(L,Y,oe){const Ce=L.hasOwnProperty(na)?L[na]:Object.defineProperty(L,na,{value:[]})[na];for(;Ce.length<=oe;)Ce.push(null);return(Ce[oe]=Ce[oe]||[]).push(D),L}}return o&&(p.prototype=Object.create(o.prototype)),p.prototype.ngMetadataName=n,p.annotationCls=p,p})}class Ai{constructor(r,o){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=St({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function po(n,r){n.forEach(o=>Array.isArray(o)?po(o,r):r(o))}function Ba(n,r,o){r>=n.length?n.push(o):n.splice(r,0,o)}function Ro(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function jo(n,r){const o=[];for(let l=0;l<n;l++)o.push(r);return o}function ro(n,r,o){let l=li(n,r);return l>=0?n[1|l]=o:(l=~l,function Ho(n,r,o,l){let p=n.length;if(p==r)n.push(o,l);else if(1===p)n.push(l,n[0]),n[0]=o;else{for(p--,n.push(n[p-1],n[p]);p>r;)n[p]=n[p-2],p--;n[r]=o,n[r+1]=l}}(n,l,r,o)),l}function Ws(n,r){const o=li(n,r);if(o>=0)return n[1|o]}function li(n,r){return function $a(n,r,o){let l=0,p=n.length>>o;for(;p!==l;){const _=l+(p-l>>1),D=n[_<<o];if(r===D)return _<<o;D>r?p=_:l=_+1}return~(p<<o)}(n,r,1)}const on=jn(bt("Optional"),8),wn=jn(bt("SkipSelf"),4);var os=(()=>((os=os||{})[os.Important=1]="Important",os[os.DashCase=2]="DashCase",os))();const ga=new Map;let el=0;const Zu="__ngContext__";function ws(n,r){kr(r)?(n[Zu]=r[Sn],function qu(n){ga.set(n[Sn],n)}(r)):n[Zu]=r}let ru;function ld(n,r){return ru(n,r)}function Tl(n){const r=n[$r];return Er(r)?r[$r]:r}function ud(n){return Ju(n[Mt])}function cd(n){return Ju(n[Qr])}function Ju(n){for(;null!==n&&!Er(n);)n=n[Qr];return n}function Ua(n,r,o,l,p){if(null!=l){let _,D=!1;Er(l)?_=l:kr(l)&&(D=!0,l=l[Mr]);const O=Dr(l);0===n&&null!==o?null==p?Ha(r,o,O):ma(r,o,O,p||null,!0):1===n&&null!==o?ma(r,o,O,p||null,!0):2===n?function go(n,r,o){const l=hl(n,r);l&&function ku(n,r,o,l){n.removeChild(r,o,l)}(n,l,r,o)}(r,O,D):3===n&&r.destroyNode(O),null!=_&&function qd(n,r,o,l,p){const _=o[mt];_!==Dr(o)&&Ua(r,n,l,_,p);for(let O=In;O<o.length;O++){const L=o[O];oo(L[fn],L,n,r,l,_)}}(r,n,_,o,p)}}function Ru(n,r,o){return n.createElement(r,o)}function Ki(n,r){const o=n[nn],l=o.indexOf(r),p=r[$r];512&r[Xn]&&(r[Xn]&=-513,eo(p,-1)),o.splice(l,1)}function Ou(n,r){if(n.length<=In)return;const o=In+r,l=n[o];if(l){const p=l[Ct];null!==p&&p!==n&&Ki(p,l),r>0&&(n[o-1][Qr]=l[Qr]);const _=Ro(n,In+r);!function Vl(n,r){oo(n,r,r[Ne],2,null,null),r[Mr]=null,r[Hr]=null}(l[fn],l);const D=_[sn];null!==D&&D.detachView(_[fn]),l[$r]=null,l[Qr]=null,l[Xn]&=-65}return l}function Sa(n,r){if(!(128&r[Xn])){const o=r[Ne];o.destroyNode&&oo(n,r,o,3,null,null),function ja(n){let r=n[Mt];if(!r)return Tc(n[fn],n);for(;r;){let o=null;if(kr(r))o=r[Mt];else{const l=r[In];l&&(o=l)}if(!o){for(;r&&!r[Qr]&&r!==n;)kr(r)&&Tc(r[fn],r),r=r[$r];null===r&&(r=n),kr(r)&&Tc(r[fn],r),o=r&&r[Qr]}r=o}}(r)}}function Tc(n,r){if(!(128&r[Xn])){r[Xn]&=-65,r[Xn]|=128,function Pu(n,r){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let l=0;l<o.length;l+=2){const p=r[o[l]];if(!(p instanceof B)){const _=o[l+1];if(Array.isArray(_))for(let D=0;D<_.length;D+=2){const O=p[_[D]],L=_[D+1];Xi(4,O,L);try{L.call(O)}finally{Xi(5,O,L)}}else{Xi(4,p,_);try{_.call(p)}finally{Xi(5,p,_)}}}}}(n,r),function Kd(n,r){const o=n.cleanup,l=r[wi];let p=-1;if(null!==o)for(let _=0;_<o.length-1;_+=2)if("string"==typeof o[_]){const D=o[_+3];D>=0?l[p=D]():l[p=-D].unsubscribe(),_+=2}else{const D=l[p=o[_+1]];o[_].call(D)}if(null!==l){for(let _=p+1;_<l.length;_++)(0,l[_])();r[wi]=null}}(n,r),1===r[fn].type&&r[Ne].destroy();const o=r[Ct];if(null!==o&&Er(r[$r])){o!==r[$r]&&Ki(o,r);const l=r[sn];null!==l&&l.detachView(n)}!function Au(n){ga.delete(n[Sn])}(r)}}function Sc(n,r,o){return function Nu(n,r,o){let l=r;for(;null!==l&&40&l.type;)l=(r=l).parent;if(null===l)return o[Mr];{const{componentOffset:p}=l;if(p>-1){const{encapsulation:_}=n.data[l.directiveStart+p];if(_===vt.None||_===vt.Emulated)return null}return Ci(l,o)}}(n,r.parent,o)}function ma(n,r,o,l,p){n.insertBefore(r,o,l,p)}function Ha(n,r,o){n.appendChild(r,o)}function fd(n,r,o,l,p){null!==l?ma(n,r,o,l,p):Ha(n,r,o)}function hl(n,r){return n.parentNode(r)}function Yd(n,r,o){return di(n,r,o)}let ou,au,Aa,di=function Cs(n,r,o){return 40&n.type?Ci(n,o):null};function ts(n,r,o,l){const p=Sc(n,l,r),_=r[Ne],O=Yd(l.parent||r[Hr],l,r);if(null!=p)if(Array.isArray(o))for(let L=0;L<o.length;L++)fd(_,p,o[L],O,!1);else fd(_,p,o,O,!1);void 0!==ou&&ou(_,l,r,o,p)}function Ul(n,r){if(null!==r){const o=r.type;if(3&o)return Ci(r,n);if(4&o)return Al(-1,n[r.index]);if(8&o){const l=r.child;if(null!==l)return Ul(n,l);{const p=n[r.index];return Er(p)?Al(-1,p):Dr(p)}}if(32&o)return ld(r,n)()||Dr(n[r.index]);{const l=bs(n,r);return null!==l?Array.isArray(l)?l[0]:Ul(Tl(n[dt]),l):Ul(n,r.next)}}return null}function bs(n,r){return null!==r?n[dt][Hr].projection[r.projection]:null}function Al(n,r){const o=In+n+1;if(o<r.length){const l=r[o],p=l[fn].firstChild;if(null!==p)return Ul(l,p)}return r[mt]}function Ds(n,r,o,l,p,_,D){for(;null!=o;){const O=l[o.index],L=o.type;if(D&&0===r&&(O&&ws(Dr(O),l),o.flags|=2),32!=(32&o.flags))if(8&L)Ds(n,r,o.child,l,p,_,!1),Ua(r,n,p,O,_);else if(32&L){const Y=ld(o,l);let oe;for(;oe=Y();)Ua(r,n,p,oe,_);Ua(r,n,p,O,_)}else 16&L?Ga(n,r,l,o,p,_):Ua(r,n,p,O,_);o=D?o.projectionNext:o.next}}function oo(n,r,o,l,p,_){Ds(o,l,n.firstChild,r,p,_,!1)}function Ga(n,r,o,l,p,_){const D=o[dt],L=D[Hr].projection[l.projection];if(Array.isArray(L))for(let Y=0;Y<L.length;Y++)Ua(r,n,p,L[Y],_);else Ds(n,r,L,D[$r],p,_,!0)}function tc(n,r,o){""===o?n.removeAttribute(r,"class"):n.setAttribute(r,"class",o)}function nc(n,r,o){const{mergedAttrs:l,classes:p,styles:_}=o;null!==l&&ar(n,r,l),null!==p&&tc(n,r,p),null!==_&&function Kr(n,r,o){n.setAttribute(r,"style",o)}(n,r,_)}function ic(n){au=n}function yd(n){var r;return(null===(r=function Hl(){if(void 0===Aa&&(Aa=null,xn.trustedTypes))try{Aa=xn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Aa}())||void 0===r?void 0:r.createScriptURL(n))||n}class Mc{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Dt})`}}function g(n){return n instanceof Mc?n.changingThisBreaksApplicationSecurity:n}function E(n,r){const o=function A(n){return n instanceof Mc&&n.getTypeName()||null}(n);if(null!=o&&o!==r){if("ResourceURL"===o&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${o} (see ${Dt})`)}return o===r}const Ma=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var mo=(()=>((mo=mo||{})[mo.NONE=0]="NONE",mo[mo.HTML=1]="HTML",mo[mo.STYLE=2]="STYLE",mo[mo.SCRIPT=3]="SCRIPT",mo[mo.URL=4]="URL",mo[mo.RESOURCE_URL=5]="RESOURCE_URL",mo))();function Np(n){const r=nl();return r?r.sanitize(mo.URL,n)||"":E(n,"URL")?g(n):function lu(n){return(n=String(n)).match(Ma)?n:"unsafe:"+n}(le(n))}function Sf(n){const r=nl();if(r)return yd(r.sanitize(mo.RESOURCE_URL,n)||"");if(E(n,"ResourceURL"))return yd(g(n));throw new Me(904,!1)}function xf(n,r,o){return function Lp(n,r){return"src"===r&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===r&&("base"===n||"link"===n)?Sf:Np}(r,o)(n)}function nl(){const n=qt();return n&&n[lt]}const yo=new Ai("ENVIRONMENT_INITIALIZER"),za=new Ai("INJECTOR",-1),Vu=new Ai("INJECTOR_DEF_TYPES");class No{get(r,o=Cn){if(o===Cn){const l=new Error(`NullInjectorError: No provider for ${Ae(r)}!`);throw l.name="NullInjectorError",l}return o}}function Nh(...n){return{\u0275providers:Jd(0,n),\u0275fromNgModule:!0}}function Jd(n,...r){const o=[],l=new Set;let p;return po(r,_=>{const D=_;eh(D,o,[],l)&&(p||(p=[]),p.push(D))}),void 0!==p&&cu(p,o),o}function cu(n,r){for(let o=0;o<n.length;o++){const{providers:p}=n[o];th(p,_=>{r.push(_)})}}function eh(n,r,o,l){if(!(n=pe(n)))return!1;let p=null,_=nr(n);const D=!_&&Qn(n);if(_||D){if(D&&!D.standalone)return!1;p=n}else{const L=n.ngModule;if(_=nr(L),!_)return!1;p=L}const O=l.has(p);if(D){if(O)return!1;if(l.add(p),D.dependencies){const L="function"==typeof D.dependencies?D.dependencies():D.dependencies;for(const Y of L)eh(Y,r,o,l)}}else{if(!_)return!1;{if(null!=_.imports&&!O){let Y;l.add(p);try{po(_.imports,oe=>{eh(oe,r,o,l)&&(Y||(Y=[]),Y.push(oe))})}finally{}void 0!==Y&&cu(Y,r)}if(!O){const Y=is(p)||(()=>new p);r.push({provide:p,useFactory:Y,deps:Be},{provide:Vu,useValue:p,multi:!0},{provide:yo,useValue:()=>rn(p),multi:!0})}const L=_.providers;null==L||O||th(L,oe=>{r.push(oe)})}}return p!==n&&void 0!==n.providers}function th(n,r){for(let o of n)Ge(o)&&(o=o.\u0275providers),Array.isArray(o)?th(o,r):r(o)}const _d=Se({provide:String,useValue:Se});function zl(n){return null!==n&&"object"==typeof n&&_d in n}function Ra(n){return"function"==typeof n}const Fc=new Ai("Set Injector scope."),Lc={},Of={};let Ed;function Id(){return void 0===Ed&&(Ed=new No),Ed}class fu{}class kh extends fu{get destroyed(){return this._destroyed}constructor(r,o,l,p){super(),this.parent=o,this.source=l,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,lc(r,D=>this.processProvider(D)),this.records.set(za,ac(void 0,this)),p.has("environment")&&this.records.set(fu,ac(void 0,this));const _=this.records.get(Fc);null!=_&&"string"==typeof _.value&&this.scopes.add(_.value),this.injectorDefTypes=new Set(this.get(Vu.multi,Be,Yt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const o=kn(this),l=br(void 0);try{return r()}finally{kn(o),br(l)}}get(r,o=Cn,l=Yt.Default){this.assertNotDestroyed(),l=Mn(l);const p=kn(this),_=br(void 0);try{if(!(l&Yt.SkipSelf)){let O=this.records.get(r);if(void 0===O){const L=function Vp(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ai}(r)&&xt(r);O=L&&this.injectableDefInScope(L)?ac(Bc(r),Lc):null,this.records.set(r,O)}if(null!=O)return this.hydrate(r,O)}return(l&Yt.Self?Id():this.parent).get(r,o=l&Yt.Optional&&o===Cn?null:o)}catch(D){if("NullInjectorError"===D.name){if((D[Gt]=D[Gt]||[]).unshift(Ae(r)),p)throw D;return function Re(n,r,o,l){const p=n[Gt];throw r[ui]&&p.unshift(r[ui]),n.message=function Ee(n,r,o,l=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==Sr?n.slice(2):n;let p=Ae(r);if(Array.isArray(r))p=r.map(Ae).join(" -> ");else if("object"==typeof r){let _=[];for(let D in r)if(r.hasOwnProperty(D)){let O=r[D];_.push(D+":"+("string"==typeof O?JSON.stringify(O):Ae(O)))}p=`{${_.join(", ")}}`}return`${o}${l?"("+l+")":""}[${p}]: ${n.replace(Gi,"\n  ")}`}("\n"+n.message,p,o,l),n[yi]=p,n[Gt]=null,n}(D,r,"R3InjectorError",this.source)}throw D}finally{br(_),kn(p)}}resolveInjectorInitializers(){const r=kn(this),o=br(void 0);try{const l=this.get(yo.multi,Be,Yt.Self);for(const p of l)p()}finally{kn(r),br(o)}}toString(){const r=[],o=this.records;for(const l of o.keys())r.push(Ae(l));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Me(205,!1)}processProvider(r){let o=Ra(r=pe(r))?r:pe(r&&r.provide);const l=function Uu(n){return zl(n)?ac(void 0,n.useValue):ac(Pf(n),Lc)}(r);if(Ra(r)||!0!==r.multi)this.records.get(o);else{let p=this.records.get(o);p||(p=ac(void 0,Lc,!0),p.factory=()=>Pn(p.multi),this.records.set(o,p)),o=r,p.multi.push(r)}this.records.set(o,l)}hydrate(r,o){return o.value===Lc&&(o.value=Of,o.value=o.factory()),"object"==typeof o.value&&o.value&&function $p(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(r){if(!r.providedIn)return!1;const o=pe(r.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function Bc(n){const r=xt(n),o=null!==r?r.factory:is(n);if(null!==o)return o;if(n instanceof Ai)throw new Me(204,!1);if(n instanceof Function)return function wd(n){const r=n.length;if(r>0)throw jo(r,"?"),new Me(204,!1);const o=function Un(n){const r=n&&(n[Cr]||n[gn]);return r?(function Qt(n){if(n.hasOwnProperty("name"))return n.name;(""+n).match(/^function\s*([^\s(]+)/)}(n),r):null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new Me(204,!1)}function Pf(n,r,o){let l;if(Ra(n)){const p=pe(n);return is(p)||Bc(p)}if(zl(n))l=()=>pe(n.useValue);else if(function hu(n){return!(!n||!n.useFactory)}(n))l=()=>n.useFactory(...Pn(n.deps||[]));else if(function du(n){return!(!n||!n.useExisting)}(n))l=()=>rn(pe(n.useExisting));else{const p=pe(n&&(n.useClass||n.provide));if(!function Nf(n){return!!n.deps}(n))return is(p)||Bc(p);l=()=>new p(...Pn(n.deps))}return l}function ac(n,r,o=!1){return{factory:n,value:r,multi:o?[]:void 0}}function lc(n,r){for(const o of n)Array.isArray(o)?lc(o,r):o&&Ge(o)?lc(o.\u0275providers,r):r(o)}class uc{}class pu{}class Up{resolveComponentFactory(r){throw function kf(n){const r=Error(`No component factory found for ${Ae(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let cc=(()=>{class n{}return n.NULL=new Up,n})();function Lh(){return dc(I(),qt())}function dc(n,r){return new hc(Ci(n,r))}let hc=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=Lh,n})();function Bh(n){return n instanceof hc?n.nativeElement:n}class $h{}let h=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function u(){const n=qt(),o=$i(I().index,n);return(kr(o)?o:n)[Ne]}(),n})(),d=(()=>{class n{}return n.\u0275prov=St({token:n,providedIn:"root",factory:()=>null}),n})();class v{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const S=new v("15.2.2"),k={},G="ngOriginalError";function _e(n){return n[G]}class Ve{constructor(){this._console=console}handleError(r){const o=this._findOriginalError(r);this._console.error("ERROR",r),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(r){let o=r&&_e(r);for(;o&&_e(o);)o=_e(o);return o||null}}function Ko(n){return n instanceof Function?n():n}function hm(n,r,o){let l=n.length;for(;;){const p=n.indexOf(r,o);if(-1===p)return p;if(0===p||n.charCodeAt(p-1)<=32){const _=r.length;if(p+_===l||n.charCodeAt(p+_)<=32)return p}o=p+1}}const fm="ng-template";function yv(n,r,o){let l=0;for(;l<n.length;){let p=n[l++];if(o&&"class"===p){if(p=n[l],-1!==hm(p.toLowerCase(),r,0))return!0}else if(1===p){for(;l<n.length&&"string"==typeof(p=n[l++]);)if(p.toLowerCase()===r)return!0;return!1}}return!1}function pm(n){return 4===n.type&&n.value!==fm}function Ff(n,r,o){return r===(4!==n.type||o?n.value:fm)}function gm(n,r,o){let l=4;const p=n.attrs||[],_=function Cd(n){for(let r=0;r<n.length;r++)if(Ei(n[r]))return r;return n.length}(p);let D=!1;for(let O=0;O<r.length;O++){const L=r[O];if("number"!=typeof L){if(!D)if(4&l){if(l=2|1&l,""!==L&&!Ff(n,L,o)||""===L&&1===r.length){if(gu(l))return!1;D=!0}}else{const Y=8&l?L:r[++O];if(8&l&&null!==n.attrs){if(!yv(n.attrs,Y,o)){if(gu(l))return!1;D=!0}continue}const Ce=mm(8&l?"class":L,p,pm(n),o);if(-1===Ce){if(gu(l))return!1;D=!0;continue}if(""!==Y){let ct;ct=Ce>_?"":p[Ce+1].toLowerCase();const Tt=8&l?ct:null;if(Tt&&-1!==hm(Tt,Y,0)||2&l&&Y!==ct){if(gu(l))return!1;D=!0}}}}else{if(!D&&!gu(l)&&!gu(L))return!1;if(D&&gu(L))continue;D=!1,l=L|1&l}}return gu(l)||D}function gu(n){return 0==(1&n)}function mm(n,r,o,l){if(null===r)return-1;let p=0;if(l||!o){let _=!1;for(;p<r.length;){const D=r[p];if(D===n)return p;if(3===D||6===D)_=!0;else{if(1===D||2===D){let O=r[++p];for(;"string"==typeof O;)O=r[++p];continue}if(4===D)break;if(0===D){p+=4;continue}}p+=_?1:2}return-1}return function Uh(n,r){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const l=n[o];if("number"==typeof l)return-1;if(l===r)return o;o++}return-1}(r,n)}function ym(n,r,o=!1){for(let l=0;l<r.length;l++)if(gm(n,r[l],o))return!0;return!1}function _m(n,r){e:for(let o=0;o<r.length;o++){const l=r[o];if(n.length===l.length){for(let p=0;p<n.length;p++)if(n[p]!==l[p])continue e;return!0}}return!1}function Hp(n,r){return n?":not("+r.trim()+")":r}function vv(n){let r=n[0],o=1,l=2,p="",_=!1;for(;o<n.length;){let D=n[o];if("string"==typeof D)if(2&l){const O=n[++o];p+="["+D+(O.length>0?'="'+O+'"':"")+"]"}else 8&l?p+="."+D:4&l&&(p+=" "+D);else""!==p&&!gu(D)&&(r+=Hp(_,p),p=""),l=D,_=_||!gu(l);o++}return""!==p&&(r+=Hp(_,p)),r}const Jr={};function Lf(n){aa(Fn(),qt(),_i()+n,!1)}function aa(n,r,o,l){if(!l)if(3==(3&r[Xn])){const _=n.preOrderCheckHooks;null!==_&&ka(r,_,o)}else{const _=n.preOrderHooks;null!==_&&ea(r,_,0,o)}Hs(o)}function $f(n,r=null,o=null,l){const p=Vf(n,r,o,l);return p.resolveInjectorInitializers(),p}function Vf(n,r=null,o=null,l,p=new Set){const _=[o||Be,Nh(n)];return l=l||("object"==typeof n?void 0:Ae(n)),new kh(_,r||Id(),l||null,p)}let mu=(()=>{class n{static create(o,l){if(Array.isArray(o))return $f({name:""},l,o,"");{var p;const _=null!==(p=o.name)&&void 0!==p?p:"";return $f({name:_},o.parent,o.providers,_)}}}return n.THROW_IF_NOT_FOUND=Cn,n.NULL=new No,n.\u0275prov=St({token:n,providedIn:"any",factory:()=>rn(za)}),n.__NG_ELEMENT_ID__=-1,n})();function $c(n,r=Yt.Default){const o=qt();return null===o?rn(n,r):xo(I(),o,pe(n),r)}function Hf(){throw new Error("invalid")}function Pm(n,r){const o=n.contentQueries;if(null!==o)for(let l=0;l<o.length;l+=2){const _=o[l+1];if(-1!==_){const D=n.data[_];xs(o[l]),D.contentQueries(2,r[_],_)}}}function Gf(n,r,o,l,p,_,D,O,L,Y,oe){const Ce=r.blueprint.slice();return Ce[Mr]=p,Ce[Xn]=76|l,(null!==oe||n&&1024&n[Xn])&&(Ce[Xn]|=1024),Xr(Ce),Ce[$r]=Ce[Ye]=n,Ce[Gr]=o,Ce[he]=D||n&&n[he],Ce[Ne]=O||n&&n[Ne],Ce[lt]=L||n&&n[lt]||null,Ce[ne]=Y||n&&n[ne]||null,Ce[Hr]=_,Ce[Sn]=function tu(){return el++}(),Ce[Bn]=oe,Ce[dt]=2==r.type?n[dt]:Ce,Ce}function nh(n,r,o,l,p){let _=n.data[r];if(null===_)_=function zf(n,r,o,l,p){const _=y(),D=gt(),L=n.data[r]=function tg(n,r,o,l,p,_){return{type:o,index:l,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,D?_:_&&_.parent,o,r,l,p);return null===n.firstChild&&(n.firstChild=L),null!==_&&(D?null==_.child&&null!==L.parent&&(_.child=L):null===_.next&&(_.next=L,L.prev=_)),L}(n,r,o,l,p),function la(){return or.lFrame.inI18n}()&&(_.flags|=32);else if(64&_.type){_.type=o,_.value=l,_.attrs=p;const D=function P(){const n=or.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();_.injectorIndex=null===D?-1:D.injectorIndex}return Q(_,!0),_}function Vc(n,r,o,l){if(0===o)return-1;const p=r.length;for(let _=0;_<o;_++)r.push(l),n.blueprint.push(l),n.data.push(null);return p}function Sd(n,r,o){So(r);try{const l=n.viewQuery;null!==l&&Uc(1,l,o);const p=n.template;null!==p&&Qp(n,r,p,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Pm(n,r),n.staticViewQueries&&Uc(2,n.viewQuery,o);const _=n.components;null!==_&&function Mv(n,r){for(let o=0;o<r.length;o++)Vv(n,r[o])}(r,_)}catch(l){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),l}finally{r[Xn]&=-5,Ya()}}function rh(n,r,o,l){const p=r[Xn];if(128!=(128&p)){So(r);try{Xr(r),function Ji(n){return or.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&Qp(n,r,o,2,l);const D=3==(3&p);if(D){const Y=n.preOrderCheckHooks;null!==Y&&ka(r,Y,null)}else{const Y=n.preOrderHooks;null!==Y&&ea(r,Y,0,null),Fa(r,0)}if(function ug(n){for(let r=ud(n);null!==r;r=cd(r)){if(!r[qe])continue;const o=r[nn];for(let l=0;l<o.length;l++){const p=o[l];512&p[Xn]||eo(p[$r],1),p[Xn]|=512}}}(r),function Bv(n){for(let r=ud(n);null!==r;r=cd(r))for(let o=In;o<r.length;o++){const l=r[o],p=l[fn];ho(l)&&rh(p,l,p.template,l[Gr])}}(r),null!==n.contentQueries&&Pm(n,r),D){const Y=n.contentCheckHooks;null!==Y&&ka(r,Y)}else{const Y=n.contentHooks;null!==Y&&ea(r,Y,1),Fa(r,1)}!function Om(n,r){const o=n.hostBindingOpCodes;if(null!==o)try{for(let l=0;l<o.length;l++){const p=o[l];if(p<0)Hs(~p);else{const _=p,D=o[++l],O=o[++l];Wa(D,_),O(2,r[_])}}}finally{Hs(-1)}}(n,r);const O=n.components;null!==O&&function Nm(n,r){for(let o=0;o<r.length;o++)$v(n,r[o])}(r,O);const L=n.viewQuery;if(null!==L&&Uc(2,L,l),D){const Y=n.viewCheckHooks;null!==Y&&ka(r,Y)}else{const Y=n.viewHooks;null!==Y&&ea(r,Y,2),Fa(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[Xn]&=-41,512&r[Xn]&&(r[Xn]&=-513,eo(r[$r],-1))}finally{Ya()}}}function Qp(n,r,o,l,p){const _=_i(),D=2&l;try{Hs(-1),D&&r.length>Yn&&aa(n,r,Yn,!1),Xi(D?2:0,p),o(l,p)}finally{Hs(_),Xi(D?3:1,p)}}function Xp(n,r,o){if(Ir(r)){const p=r.directiveEnd;for(let _=r.directiveStart;_<p;_++){const D=n.data[_];D.contentQueries&&D.contentQueries(1,o[_],_)}}}function Jp(n,r,o){tr()&&(function Nv(n,r,o,l){const p=o.directiveStart,_=o.directiveEnd;pr(o)&&function Fv(n,r,o){const l=Ci(r,n),p=km(o),_=n[he],D=qh(n,Gf(n,p,null,o.onPush?32:16,l,r,_,_.createRenderer(l,o),null,null,null));n[r.index]=D}(r,o,n.data[p+o.componentOffset]),n.firstCreatePass||La(o,r),ws(l,r);const D=o.initialInputs;for(let O=p;O<_;O++){const L=n.data[O],Y=pn(r,n,O,o);ws(Y,r),null!==D&&Bm(0,O-p,Y,L,0,D),gi(L)&&($i(o.index,r)[Gr]=pn(r,n,O,o))}}(n,r,o,Ci(o,r)),64==(64&o.flags)&&Yf(n,r,o))}function eg(n,r,o=Ci){const l=r.localNames;if(null!==l){let p=r.index+1;for(let _=0;_<l.length;_+=2){const D=l[_+1],O=-1===D?o(r,n):n[D];n[p++]=O}}}function km(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Wh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Wh(n,r,o,l,p,_,D,O,L,Y){const oe=Yn+l,Ce=oe+p,ct=function Rv(n,r){const o=[];for(let l=0;l<r;l++)o.push(l<n?null:Jr);return o}(oe,Ce),Tt="function"==typeof Y?Y():Y;return ct[fn]={type:n,blueprint:ct,template:o,queries:null,viewQuery:O,declTNode:r,data:ct.slice().fill(null,oe),bindingStartIndex:oe,expandoStartIndex:Ce,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof D?D():D,firstChild:null,schemas:L,consts:Tt,incompleteFirstPass:!1}}function ih(n,r,o,l){const p=Qf(r);null===o?p.push(l):(p.push(o),n.firstCreatePass&&Md(n).push(l,p.length-1))}function Ad(n,r,o,l){for(let p in n)if(n.hasOwnProperty(p)){o=null===o?{}:o;const _=n[p];null===l?Wf(o,r,p,_):l.hasOwnProperty(p)&&Wf(o,r,l[p],_)}return o}function Wf(n,r,o,l){n.hasOwnProperty(o)?n[o].push(r,l):n[o]=[r,l]}function ng(n,r){const o=$i(r,n);16&o[Xn]||(o[Xn]|=32)}function yu(n,r,o,l){if(tr()){const p=null===l?null:{"":-1},_=function og(n,r){const o=n.directiveRegistry;let l=null,p=null;if(o)for(let D=0;D<o.length;D++){const O=o[D];if(ym(r,O.selectors,!1))if(l||(l=[]),gi(O))if(null!==O.findHostDirectiveDefs){const L=[];p=p||new Map,O.findHostDirectiveDefs(O,L,p),l.unshift(...L,O),sh(n,r,L.length)}else l.unshift(O),sh(n,r,0);else{var _;p=p||new Map,null===(_=O.findHostDirectiveDefs)||void 0===_||_.call(O,O,l,p),l.push(O)}}return null===l?null:[l,p]}(n,o);let D,O;null===_?D=O=null:[D,O]=_,null!==D&&ig(n,r,o,D,p,O),p&&function ag(n,r,o){if(r){const l=n.localNames=[];for(let p=0;p<r.length;p+=2){const _=o[r[p+1]];if(null==_)throw new Me(-301,!1);l.push(r[p],_)}}}(o,l,p)}o.mergedAttrs=_n(o.mergedAttrs,o.attrs)}function ig(n,r,o,l,p,_){for(let Y=0;Y<l.length;Y++)ha(La(o,r),n,l[Y].type);!function oh(n,r,o){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+o,n.providerIndexes=r}(o,n.data.length,l.length);for(let Y=0;Y<l.length;Y++){const oe=l[Y];oe.providersResolver&&oe.providersResolver(oe)}let D=!1,O=!1,L=Vc(n,r,l.length,null);for(let Y=0;Y<l.length;Y++){const oe=l[Y];o.mergedAttrs=_n(o.mergedAttrs,oe.hostAttrs),lg(n,o,r,L,oe),Lm(L,oe,p),null!==oe.contentQueries&&(o.flags|=4),(null!==oe.hostBindings||null!==oe.hostAttrs||0!==oe.hostVars)&&(o.flags|=64);const Ce=oe.type.prototype;!D&&(Ce.ngOnChanges||Ce.ngOnInit||Ce.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),D=!0),!O&&(Ce.ngOnChanges||Ce.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),O=!0),L++}!function Kf(n,r,o){const p=r.directiveEnd,_=n.data,D=r.attrs,O=[];let L=null,Y=null;for(let oe=r.directiveStart;oe<p;oe++){const Ce=_[oe],ct=o?o.get(Ce):null,Xt=ct?ct.outputs:null;L=Ad(Ce.inputs,oe,L,ct?ct.inputs:null),Y=Ad(Ce.outputs,oe,Y,Xt);const mn=null===L||null===D||pm(r)?null:Lv(L,oe,D);O.push(mn)}null!==L&&(L.hasOwnProperty("class")&&(r.flags|=8),L.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=O,r.inputs=L,r.outputs=Y}(n,o,_)}function Yf(n,r,o){const l=o.directiveStart,p=o.directiveEnd,_=o.index,D=function ua(){return or.lFrame.currentDirectiveIndex}();try{Hs(_);for(let O=l;O<p;O++){const L=n.data[O],Y=r[O];ca(O),(null!==L.hostBindings||0!==L.hostVars||null!==L.hostAttrs)&&kv(L,Y)}}finally{Hs(-1),ca(D)}}function kv(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function sh(n,r,o){r.componentOffset=o,(n.components||(n.components=[])).push(r.index)}function Lm(n,r,o){if(o){if(r.exportAs)for(let l=0;l<r.exportAs.length;l++)o[r.exportAs[l]]=n;gi(r)&&(o[""]=n)}}function lg(n,r,o,l,p){n.data[l]=p;const _=p.factory||(p.factory=is(p.type)),D=new B(_,gi(p),$c);n.blueprint[l]=D,o[l]=D,function Pv(n,r,o,l,p){const _=p.hostBindings;if(_){let D=n.hostBindingOpCodes;null===D&&(D=n.hostBindingOpCodes=[]);const O=~r.index;(function sg(n){let r=n.length;for(;r>0;){const o=n[--r];if("number"==typeof o&&o<0)return o}return 0})(D)!=O&&D.push(O),D.push(o,l,_)}}(n,r,l,Vc(n,o,p.hostVars,Jr),p)}function ju(n,r,o,l,p,_){const D=Ci(n,r);!function qf(n,r,o,l,p,_,D){if(null==_)n.removeAttribute(r,p,o);else{const O=null==D?le(_):D(_,l||"",p);n.setAttribute(r,p,O,o)}}(r[Ne],D,_,n.value,o,l,p)}function Bm(n,r,o,l,p,_){const D=_[r];if(null!==D){const O=l.setInput;for(let L=0;L<D.length;){const Y=D[L++],oe=D[L++],Ce=D[L++];null!==O?l.setInput(o,Ce,Y,oe):o[oe]=Ce}}}function Lv(n,r,o){let l=null,p=0;for(;p<o.length;){const _=o[p];if(0!==_)if(5!==_){if("number"==typeof _)break;if(n.hasOwnProperty(_)){null===l&&(l=[]);const D=n[_];for(let O=0;O<D.length;O+=2)if(D[O]===r){l.push(_,D[O+1],o[p+1]);break}}p+=2}else p+=2;else p+=4}return l}function Zf(n,r,o,l){return[n,!0,!1,r,null,0,l,o,null,null]}function $v(n,r){const o=$i(r,n);if(ho(o)){const l=o[fn];48&o[Xn]?rh(l,o,l.template,o[Gr]):o[Oi]>0&&Yh(o)}}function Yh(n){for(let l=ud(n);null!==l;l=cd(l))for(let p=In;p<l.length;p++){const _=l[p];if(ho(_))if(512&_[Xn]){const D=_[fn];rh(D,_,D.template,_[Gr])}else _[Oi]>0&&Yh(_)}const o=n[fn].components;if(null!==o)for(let l=0;l<o.length;l++){const p=$i(o[l],n);ho(p)&&p[Oi]>0&&Yh(p)}}function Vv(n,r){const o=$i(r,n),l=o[fn];(function cg(n,r){for(let o=r.length;o<n.blueprint.length;o++)r.push(n.blueprint[o])})(l,o),Sd(l,o,o[Gr])}function qh(n,r){return n[Mt]?n[ce][Qr]=r:n[Mt]=r,n[ce]=r,r}function Zh(n){for(;n;){n[Xn]|=32;const r=Tl(n);if(ii(n)&&!r)return n;n=r}return null}function ah(n,r,o,l=!0){const p=r[he];p.begin&&p.begin();try{rh(n,r,n.template,o)}catch(D){throw l&&dg(r,D),D}finally{p.end&&p.end()}}function Uc(n,r,o){xs(0),r(n,o)}function Qf(n){return n[wi]||(n[wi]=[])}function Md(n){return n.cleanup||(n.cleanup=[])}function dg(n,r){const o=n[ne],l=o?o.get(Ve,null):null;l&&l.handleError(r)}function jc(n,r,o,l,p){for(let _=0;_<o.length;){const D=o[_++],O=o[_++],L=r[D],Y=n.data[D];null!==Y.setInput?Y.setInput(L,p,l,O):L[O]=p}}function gc(n,r,o){const l=Xs(r,n);!function dd(n,r,o){n.setValue(r,o)}(n[Ne],l,o)}function Xf(n,r,o){let l=o?n.styles:null,p=o?n.classes:null,_=0;if(null!==r)for(let D=0;D<r.length;D++){const O=r[D];"number"==typeof O?_=O:1==_?p=Ue(p,O):2==_&&(l=Ue(l,O+": "+r[++D]+";"))}o?n.styles=l:n.stylesWithoutHost=l,o?n.classes=p:n.classesWithoutHost=p}function lh(n,r,o,l,p=!1){for(;null!==o;){const _=r[o.index];if(null!==_&&l.push(Dr(_)),Er(_))for(let O=In;O<_.length;O++){const L=_[O],Y=L[fn].firstChild;null!==Y&&lh(L[fn],L,Y,l)}const D=o.type;if(8&D)lh(n,r,o.child,l);else if(32&D){const O=ld(o,r);let L;for(;L=O();)l.push(L)}else if(16&D){const O=bs(r,o);if(Array.isArray(O))l.push(...O);else{const L=Tl(r[dt]);lh(L[fn],L,O,l,!0)}}o=p?o.projectionNext:o.next}return l}class Od{get rootNodes(){const r=this._lView,o=r[fn];return lh(o,r,o.firstChild,[])}constructor(r,o){this._lView=r,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Gr]}set context(r){this._lView[Gr]=r}get destroyed(){return 128==(128&this._lView[Xn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[$r];if(Er(r)){const o=r[Ut],l=o?o.indexOf(this):-1;l>-1&&(Ou(r,l),Ro(o,l))}this._attachedToViewContainer=!1}Sa(this._lView[fn],this._lView)}onDestroy(r){ih(this._lView[fn],this._lView,null,r)}markForCheck(){Zh(this._cdRefInjectingView||this._lView)}detach(){this._lView[Xn]&=-65}reattach(){this._lView[Xn]|=64}detectChanges(){ah(this._lView[fn],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Me(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function su(n,r){oo(n,r,r[Ne],2,null,null)}(this._lView[fn],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Me(902,!1);this._appRef=r}}class hg extends Od{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;ah(r[fn],r,r[Gr],!1)}checkNoChanges(){}get context(){return null}}class Jf extends cc{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const o=Qn(r);return new Pd(o,this.ngModule)}}function Vm(n){const r=[];for(let o in n)n.hasOwnProperty(o)&&r.push({propName:n[o],templateName:o});return r}class fg{constructor(r,o){this.injector=r,this.parentInjector=o}get(r,o,l){l=Mn(l);const p=this.injector.get(r,k,l);return p!==k||o===k?p:this.parentInjector.get(r,o,l)}}class Pd extends pu{get inputs(){return Vm(this.componentDef.inputs)}get outputs(){return Vm(this.componentDef.outputs)}constructor(r,o){super(),this.componentDef=r,this.ngModule=o,this.componentType=r.type,this.selector=function Em(n){return n.map(vv).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!o}create(r,o,l,p){var _;let D=(p=p||this.ngModule)instanceof fu?p:null===(_=p)||void 0===_?void 0:_.injector;D&&null!==this.componentDef.getStandaloneInjector&&(D=this.componentDef.getStandaloneInjector(D)||D);const O=D?new fg(r,D):r,L=O.get($h,null);if(null===L)throw new Me(407,!1);const Y=O.get(d,null),oe=L.createRenderer(null,this.componentDef),Ce=this.componentDef.selectors[0][0]||"div",ct=l?function Ov(n,r,o){return n.selectRootElement(r,o===vt.ShadowDom)}(oe,l,this.componentDef.encapsulation):Ru(oe,Ce,function Uv(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Ce)),Tt=this.componentDef.onPush?288:272,Xt=Wh(0,null,null,1,0,null,null,null,null,null),mn=Gf(null,Xt,null,Tt,null,null,L,oe,Y,O,null);let zn,vr;So(mn);try{const Lr=this.componentDef;let an,qr=null;Lr.findHostDirectiveDefs?(an=[],qr=new Map,Lr.findHostDirectiveDefs(Lr,an,qr),an.push(Lr)):an=[Lr];const Fs=function Gv(n,r){const o=n[fn],l=Yn;return n[l]=r,nh(o,l,2,"#host",null)}(mn,ct),Fo=function Um(n,r,o,l,p,_,D,O){const L=p[fn];!function jm(n,r,o,l){for(const p of n)r.mergedAttrs=_n(r.mergedAttrs,p.hostAttrs);null!==r.mergedAttrs&&(Xf(r,r.mergedAttrs,!0),null!==o&&nc(l,o,r))}(l,n,r,D);const Y=_.createRenderer(r,o),oe=Gf(p,km(o),null,o.onPush?32:16,p[n.index],n,_,Y,O||null,null,null);return L.firstCreatePass&&sh(L,n,l.length-1),qh(p,oe),p[n.index]=oe}(Fs,ct,Lr,an,mn,L,oe);vr=co(Xt,Yn),ct&&function Gm(n,r,o,l){if(l)ar(n,o,["ng-version",S.full]);else{const{attrs:p,classes:_}=function _v(n){const r=[],o=[];let l=1,p=2;for(;l<n.length;){let _=n[l];if("string"==typeof _)2===p?""!==_&&r.push(_,n[++l]):8===p&&o.push(_);else{if(!gu(p))break;p=_}l++}return{attrs:r,classes:o}}(r.selectors[0]);p&&ar(n,o,p),_&&_.length>0&&tc(n,o,_.join(" "))}}(oe,Lr,ct,l),void 0!==o&&function zv(n,r,o){const l=n.projection=[];for(let p=0;p<r.length;p++){const _=o[p];l.push(null!=_?Array.from(_):null)}}(vr,this.ngContentSelectors,o),zn=function Hm(n,r,o,l,p,_){const D=I(),O=p[fn],L=Ci(D,p);ig(O,p,D,o,null,l);for(let oe=0;oe<o.length;oe++)ws(pn(p,O,D.directiveStart+oe,D),p);Yf(O,p,D),L&&ws(L,p);const Y=pn(p,O,D.directiveStart+D.componentOffset,D);if(n[Gr]=p[Gr]=Y,null!==_)for(const oe of _)oe(Y,r);return Xp(O,D,n),Y}(Fo,Lr,an,qr,mn,[Wv]),Sd(Xt,mn,null)}finally{Ya()}return new jv(this.componentType,zn,dc(vr,mn),mn,vr)}}class jv extends uc{constructor(r,o,l,p,_){super(),this.location=l,this._rootLView=p,this._tNode=_,this.instance=o,this.hostView=this.changeDetectorRef=new hg(p),this.componentType=r}setInput(r,o){const l=this._tNode.inputs;let p;if(null!==l&&(p=l[r])){const _=this._rootLView;jc(_[fn],_,p,r,o),ng(_,this._tNode.index)}}get injector(){return new pa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Wv(){const n=I();pl(qt()[fn],n)}function pg(n){let r=function zm(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const l=[n];for(;r;){let p;if(gi(n))p=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Me(903,!1);p=r.\u0275dir}if(p){if(o){l.push(p);const D=n;D.inputs=Qh(n.inputs),D.declaredInputs=Qh(n.declaredInputs),D.outputs=Qh(n.outputs);const O=p.hostBindings;O&&yg(n,O);const L=p.viewQuery,Y=p.contentQueries;if(L&&mg(n,L),Y&&Kv(n,Y),de(n.inputs,p.inputs),de(n.declaredInputs,p.declaredInputs),de(n.outputs,p.outputs),gi(p)&&p.data.animation){const oe=n.data;oe.animation=(oe.animation||[]).concat(p.data.animation)}}const _=p.features;if(_)for(let D=0;D<_.length;D++){const O=_[D];O&&O.ngInherit&&O(n),O===pg&&(o=!1)}}r=Object.getPrototypeOf(r)}!function gg(n){let r=0,o=null;for(let l=n.length-1;l>=0;l--){const p=n[l];p.hostVars=r+=p.hostVars,p.hostAttrs=_n(p.hostAttrs,o=_n(o,p.hostAttrs))}}(l)}function Qh(n){return n===hn?{}:n===Be?[]:n}function mg(n,r){const o=n.viewQuery;n.viewQuery=o?(l,p)=>{r(l,p),o(l,p)}:r}function Kv(n,r){const o=n.contentQueries;n.contentQueries=o?(l,p,_)=>{r(l,p,_),o(l,p,_)}:r}function yg(n,r){const o=n.hostBindings;n.hostBindings=o?(l,p)=>{r(l,p),o(l,p)}:r}function uh(n){return!!Xh(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Xh(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ya(n,r,o){return!Object.is(n[r],o)&&(n[r]=o,!0)}function Jh(n,r,o,l){const p=qt();return ya(p,Ui(),r)&&(Fn(),ju(Di(),p,n,r,o,l)),Jh}function fh(n,r,o,l,p,_){const O=function Nd(n,r,o,l){const p=ya(n,r,o);return ya(n,r+1,l)||p}(n,function Br(){return or.lFrame.bindingIndex}(),o,p);return si(2),O?r+le(o)+l+le(p)+_:Jr}function ip(n,r,o,l,p,_,D,O){const L=qt(),Y=Fn(),oe=n+Yn,Ce=Y.firstCreatePass?function Sg(n,r,o,l,p,_,D,O,L){const Y=r.consts,oe=nh(r,n,4,D||null,ki(Y,O));yu(r,o,oe,ki(Y,L)),pl(r,oe);const Ce=oe.tView=Wh(2,oe,l,p,_,r.directiveRegistry,r.pipeRegistry,null,r.schemas,Y);return null!==r.queries&&(r.queries.template(r,oe),Ce.queries=r.queries.embeddedTView(oe)),oe}(oe,Y,L,r,o,l,p,_,D):Y.data[oe];Q(Ce,!1);const ct=L[Ne].createComment("");ts(Y,L,ct,Ce),ws(ct,L),qh(L,L[oe]=Zf(ct,L,ct,Ce)),Kn(Ce)&&Jp(Y,L,Ce),null!=D&&eg(L,Ce,O)}function sp(n,r,o){const l=qt();return ya(l,Ui(),r)&&function rl(n,r,o,l,p,_,D,O){const L=Ci(r,o);let oe,Y=r.inputs;!O&&null!=Y&&(oe=Y[l])?(jc(n,o,oe,l,p),pr(r)&&ng(o,r.index)):3&r.type&&(l=function Kh(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(l),p=null!=D?D(p,r.value||"",l):p,_.setProperty(L,l,p))}(Fn(),Di(),l,n,r,l[Ne],o,!1),sp}function Ag(n,r,o,l,p){const D=p?"class":"style";jc(n,o,r.inputs[D],D,l)}function ef(n,r,o,l){const p=qt(),_=Fn(),D=Yn+n,O=p[Ne],L=_.firstCreatePass?function xg(n,r,o,l,p,_){const D=r.consts,L=nh(r,n,2,l,ki(D,p));return yu(r,o,L,ki(D,_)),null!==L.attrs&&Xf(L,L.attrs,!1),null!==L.mergedAttrs&&Xf(L,L.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,L),L}(D,_,p,r,o,l):_.data[D],Y=p[D]=Ru(O,r,function Ti(){return or.lFrame.currentNamespace}()),oe=Kn(L);return Q(L,!0),nc(O,Y,L),32!=(32&L.flags)&&ts(_,p,Y,L),0===function to(){return or.lFrame.elementDepthCount}()&&ws(Y,p),function vs(){or.lFrame.elementDepthCount++}(),oe&&(Jp(_,p,L),Xp(_,L,p)),null!==l&&eg(p,L),ef}function kd(){let n=I();gt()?tn():(n=n.parent,Q(n,!1));const r=n;!function Us(){or.lFrame.elementDepthCount--}();const o=Fn();return o.firstCreatePass&&(pl(o,n),Ir(n)&&o.queries.elementEnd(n)),null!=r.classesWithoutHost&&function un(n){return 0!=(8&n.flags)}(r)&&Ag(o,r,qt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function hr(n){return 0!=(16&n.flags)}(r)&&Ag(o,r,qt(),r.stylesWithoutHost,!1),kd}function Mg(n,r,o,l){return ef(n,r,o,l),kd(),Mg}function Rg(n,r,o){const l=qt(),p=Fn(),_=n+Yn,D=p.firstCreatePass?function Qv(n,r,o,l,p){const _=r.consts,D=ki(_,l),O=nh(r,n,8,"ng-container",D);return null!==D&&Xf(O,D,!0),yu(r,o,O,ki(_,p)),null!==r.queries&&r.queries.elementStart(r,O),O}(_,p,l,r,o):p.data[_];Q(D,!0);const O=l[_]=l[Ne].createComment("");return ts(p,l,O,D),ws(O,l),Kn(D)&&(Jp(p,l,D),Xp(p,D,l)),null!=o&&eg(l,D),Rg}function Og(){let n=I();const r=Fn();return gt()?tn():(n=n.parent,Q(n,!1)),r.firstCreatePass&&(pl(r,n),Ir(n)&&r.queries.elementEnd(n)),Og}function op(n,r,o){return Rg(n,r,o),Og(),op}function ap(){return qt()}function lp(n){return!!n&&"function"==typeof n.then}function up(n){return!!n&&"function"==typeof n.subscribe}const cp=up;function tf(n,r,o,l){const p=qt(),_=Fn(),D=I();return function Ng(n,r,o,l,p,_,D){const O=Kn(l),Y=n.firstCreatePass&&Md(n),oe=r[Gr],Ce=Qf(r);let ct=!0;if(3&l.type||D){const mn=Ci(l,r),zn=D?D(mn):mn,vr=Ce.length,Lr=D?qr=>D(Dr(qr[l.index])):l.index;let an=null;if(!D&&O&&(an=function Pg(n,r,o,l){const p=n.cleanup;if(null!=p)for(let _=0;_<p.length-1;_+=2){const D=p[_];if(D===o&&p[_+1]===l){const O=r[wi],L=p[_+2];return O.length>L?O[L]:null}"string"==typeof D&&(_+=2)}return null}(n,r,p,l.index)),null!==an)(an.__ngLastListenerFn__||an).__ngNextListenerFn__=_,an.__ngLastListenerFn__=_,ct=!1;else{_=dp(l,r,oe,_,!1);const qr=o.listen(zn,p,_);Ce.push(_,qr),Y&&Y.push(p,Lr,vr,vr+1)}}else _=dp(l,r,oe,_,!1);const Tt=l.outputs;let Xt;if(ct&&null!==Tt&&(Xt=Tt[p])){const mn=Xt.length;if(mn)for(let zn=0;zn<mn;zn+=2){const Fs=r[Xt[zn]][Xt[zn+1]].subscribe(_),Fo=Ce.length;Ce.push(_,Fs),Y&&Y.push(p,l.index,Fo,-(Fo+1))}}}(_,p,p[Ne],D,n,r,l),tf}function rf(n,r,o,l){try{return Xi(6,r,o),!1!==o(l)}catch(p){return dg(n,p),!1}finally{Xi(7,r,o)}}function dp(n,r,o,l,p){return function _(D){if(D===Function)return l;Zh(n.componentOffset>-1?$i(n.index,r):r);let L=rf(r,o,l,D),Y=_.__ngNextListenerFn__;for(;Y;)L=rf(r,o,Y,D)&&L,Y=Y.__ngNextListenerFn__;return p&&!1===L&&(D.preventDefault(),D.returnValue=!1),L}}function hp(n=1){return function Xo(n){return(or.lFrame.contextLView=function Iu(n,r){for(;n>0;)r=r[Ye],n--;return r}(n,or.lFrame.contextLView))[Gr]}(n)}function Jm(n,r){let o=null;const l=function vm(n){const r=n.attrs;if(null!=r){const o=r.indexOf(5);if(!(1&o))return r[o+1]}return null}(n);for(let p=0;p<r.length;p++){const _=r[p];if("*"!==_){if(null===l?ym(n,_,!0):_m(l,_))return p}else o=p}return o}function Fd(n){const r=qt()[dt][Hr];if(!r.projection){const l=r.projection=jo(n?n.length:1,null),p=l.slice();let _=r.child;for(;null!==_;){const D=n?Jm(_,n):0;null!==D&&(p[D]?p[D].projectionNext=_:l[D]=_,p[D]=_),_=_.next}}}function fp(n,r=0,o){const l=qt(),p=Fn(),_=nh(p,Yn+n,16,null,o||null);null===_.projection&&(_.projection=r),tn(),32!=(32&_.flags)&&function xc(n,r,o){Ga(r[Ne],0,r,o,Sc(n,o,r),Yd(o.parent||r[Hr],o,r))}(p,l,_)}function yh(n,r){return n<<17|r<<2}function mc(n){return n>>17&32767}function vh(n){return 2|n}function oi(n){return(131068&n)>>2}function pp(n,r){return-131069&n|r<<2}function Ld(n){return 1|n}function $g(n,r,o,l,p){const _=n[o+1],D=null===r;let O=l?mc(_):oi(_),L=!1;for(;0!==O&&(!1===L||D);){const oe=n[O+1];Jv(n[O],r)&&(L=!0,n[O+1]=l?Ld(oe):vh(oe)),O=l?mc(oe):oi(oe)}L&&(n[o+1]=l?vh(_):Ld(_))}function Jv(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&li(n,r)>=0}function Hg(n,r){return function vu(n,r,o,l){const p=qt(),_=Fn(),D=si(2);_.firstUpdatePass&&function hy(n,r,o,l){const p=n.data;if(null===p[o+1]){const _=p[_i()],D=function _h(n,r){return r>=n.expandoStartIndex}(n,o);(function Ih(n,r){return 0!=(n.flags&(r?8:16))})(_,l)&&null===r&&!D&&(r=!1),r=function Wu(n,r,o,l){const p=function _a(n){const r=or.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let _=l?r.residualClasses:r.residualStyles;if(null===p)0===(l?r.classBindings:r.styleBindings)&&(o=af(o=Eh(null,n,r,o,l),r.attrs,l),_=null);else{const D=r.directiveStylingLast;if(-1===D||n[D]!==p)if(o=Eh(p,n,r,o,l),null===_){let L=function yc(n,r,o){const l=o?r.classBindings:r.styleBindings;if(0!==oi(l))return n[mc(l)]}(n,r,l);void 0!==L&&Array.isArray(L)&&(L=Eh(null,n,r,L[1],l),L=af(L,r.attrs,l),function f0(n,r,o,l){n[mc(o?r.classBindings:r.styleBindings)]=l}(n,r,l,L))}else _=function Bd(n,r,o){let l;const p=r.directiveEnd;for(let _=1+r.directiveStylingLast;_<p;_++)l=af(l,n[_].hostAttrs,o);return af(l,r.attrs,o)}(n,r,l)}return void 0!==_&&(l?r.residualClasses=_:r.residualStyles=_),o}(p,_,r,l),function Oa(n,r,o,l,p,_){let D=_?r.classBindings:r.styleBindings,O=mc(D),L=oi(D);n[l]=o;let oe,Y=!1;if(Array.isArray(o)?(oe=o[1],(null===oe||li(o,oe)>0)&&(Y=!0)):oe=o,p)if(0!==L){const ct=mc(n[O+1]);n[l+1]=yh(ct,O),0!==ct&&(n[ct+1]=pp(n[ct+1],l)),n[O+1]=function ay(n,r){return 131071&n|r<<17}(n[O+1],l)}else n[l+1]=yh(O,0),0!==O&&(n[O+1]=pp(n[O+1],l)),O=l;else n[l+1]=yh(L,0),0===O?O=l:n[L+1]=pp(n[L+1],l),L=l;Y&&(n[l+1]=vh(n[l+1])),$g(n,oe,l,!0),$g(n,oe,l,!1),function Hu(n,r,o,l,p){const _=p?n.residualClasses:n.residualStyles;null!=_&&"string"==typeof r&&li(_,r)>=0&&(o[l+1]=Ld(o[l+1]))}(r,oe,n,l,_),D=yh(O,L),_?r.classBindings=D:r.styleBindings=D}(p,_,r,o,D,l)}}(_,n,D,l),r!==Jr&&ya(p,D,r)&&function lf(n,r,o,l,p,_,D,O){if(!(3&r.type))return;const L=n.data,Y=L[O+1],oe=function ly(n){return 1==(1&n)}(Y)?py(L,r,o,p,oi(Y),D):void 0;Ku(oe)||(Ku(_)||function oy(n){return 2==(2&n)}(Y)&&(_=py(L,null,o,p,O,D)),function gd(n,r,o,l,p){if(r)p?n.addClass(o,l):n.removeClass(o,l);else{let _=-1===l.indexOf("-")?void 0:os.DashCase;null==p?n.removeStyle(o,l,_):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),_|=os.Important),n.setStyle(o,l,p,_))}}(l,D,Xs(_i(),o),p,_))}(_,_.data[_i()],p,p[Ne],n,p[D+1]=function mp(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Ae(g(n)))),n}(r,o),l,D)}(n,r,null,!0),Hg}function Eh(n,r,o,l,p){let _=null;const D=o.directiveEnd;let O=o.directiveStylingLast;for(-1===O?O=o.directiveStart:O++;O<D&&(_=r[O],l=af(l,_.hostAttrs,p),_!==n);)O++;return null!==n&&(o.directiveStylingLast=O),l}function af(n,r,o){const l=o?1:2;let p=-1;if(null!==r)for(let _=0;_<r.length;_++){const D=r[_];"number"==typeof D?p=D:p===l&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ro(n,D,!!o||r[++_]))}return void 0===n?null:n}function py(n,r,o,l,p,_){const D=null===r;let O;for(;p>0;){const L=n[p],Y=Array.isArray(L),oe=Y?L[1]:L,Ce=null===oe;let ct=o[p+1];ct===Jr&&(ct=Ce?Be:void 0);let Tt=Ce?Ws(ct,l):oe===l?ct:void 0;if(Y&&!Ku(Tt)&&(Tt=Ws(L,l)),Ku(Tt)&&(O=Tt,D))return O;const Xt=n[p+1];p=D?mc(Xt):oi(Xt)}if(null!==r){let L=_?r.residualClasses:r.residualStyles;null!=L&&(O=Ws(L,l))}return O}function Ku(n){return void 0!==n}function zg(n,r=""){const o=qt(),l=Fn(),p=n+Yn,_=l.firstCreatePass?nh(l,p,1,r,null):l.data[p],D=o[p]=function Sl(n,r){return n.createText(r)}(o[Ne],r);ts(l,o,D,_),Q(_,!1)}function uf(n){return yp("",n,""),uf}function yp(n,r,o){const l=qt(),p=function Hc(n,r,o,l){return ya(n,Ui(),o)?r+le(o)+l:Jr}(l,n,r,o);return p!==Jr&&gc(l,_i(),p),yp}function Wg(n,r,o,l,p){const _=qt(),D=fh(_,n,r,o,l,p);return D!==Jr&&gc(_,_i(),D),Wg}const qc=void 0;var Ty=["en",[["a","p"],["AM","PM"],qc],[["AM","PM"],qc,qc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],qc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],qc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",qc,"{1} 'at' {0}",qc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Dy(n){const o=Math.floor(Math.abs(n)),l=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===l?1:5}];let $d={};function bp(n){const r=function c_(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=Ay(r);if(o)return o;const l=r.split("-")[0];if(o=Ay(l),o)return o;if("en"===l)return Ty;throw new Me(701,!1)}function yf(n){return bp(n)[Fr.PluralCase]}function Ay(n){return n in $d||($d[n]=xn.ng&&xn.ng.common&&xn.ng.common.locales&&xn.ng.common.locales[n]),$d[n]}var Fr=(()=>((Fr=Fr||{})[Fr.LocaleId=0]="LocaleId",Fr[Fr.DayPeriodsFormat=1]="DayPeriodsFormat",Fr[Fr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Fr[Fr.DaysFormat=3]="DaysFormat",Fr[Fr.DaysStandalone=4]="DaysStandalone",Fr[Fr.MonthsFormat=5]="MonthsFormat",Fr[Fr.MonthsStandalone=6]="MonthsStandalone",Fr[Fr.Eras=7]="Eras",Fr[Fr.FirstDayOfWeek=8]="FirstDayOfWeek",Fr[Fr.WeekendRange=9]="WeekendRange",Fr[Fr.DateFormat=10]="DateFormat",Fr[Fr.TimeFormat=11]="TimeFormat",Fr[Fr.DateTimeFormat=12]="DateTimeFormat",Fr[Fr.NumberSymbols=13]="NumberSymbols",Fr[Fr.NumberFormats=14]="NumberFormats",Fr[Fr.CurrencyCode=15]="CurrencyCode",Fr[Fr.CurrencySymbol=16]="CurrencySymbol",Fr[Fr.CurrencyName=17]="CurrencyName",Fr[Fr.Currencies=18]="Currencies",Fr[Fr.Directionality=19]="Directionality",Fr[Fr.PluralCase=20]="PluralCase",Fr[Fr.ExtraData=21]="ExtraData",Fr))();const Kl="en-US";let xy=Kl;function i(n,r,o,l,p){if(n=pe(n),Array.isArray(n))for(let _=0;_<n.length;_++)i(n[_],r,o,l,p);else{const _=Fn(),D=qt();let O=Ra(n)?n:pe(n.provide),L=Pf(n);const Y=I(),oe=1048575&Y.providerIndexes,Ce=Y.directiveStart,ct=Y.providerIndexes>>20;if(Ra(n)||!n.multi){const Tt=new B(L,p,$c),Xt=s(O,r,p?oe:oe+ct,Ce);-1===Xt?(ha(La(Y,D),_,O),e(_,n,r.length),r.push(O),Y.directiveStart++,Y.directiveEnd++,p&&(Y.providerIndexes+=1048576),o.push(Tt),D.push(Tt)):(o[Xt]=Tt,D[Xt]=Tt)}else{const Tt=s(O,r,oe+ct,Ce),Xt=s(O,r,oe,oe+ct),zn=Xt>=0&&o[Xt];if(p&&!zn||!p&&!(Tt>=0&&o[Tt])){ha(La(Y,D),_,O);const vr=function R(n,r,o,l,p){const _=new B(n,o,$c);return _.multi=[],_.index=r,_.componentProviders=0,t(_,p,l&&!o),_}(p?m:c,o.length,p,l,L);!p&&zn&&(o[Xt].providerFactory=vr),e(_,n,r.length,0),r.push(O),Y.directiveStart++,Y.directiveEnd++,p&&(Y.providerIndexes+=1048576),o.push(vr),D.push(vr)}else e(_,n,Tt>-1?Tt:Xt,t(o[p?Xt:Tt],L,!p&&l));!p&&l&&zn&&o[Xt].componentProviders++}}}function e(n,r,o,l){const p=Ra(r),_=function Rf(n){return!!n.useClass}(r);if(p||_){const L=(_?pe(r.useClass):r).prototype.ngOnDestroy;if(L){const Y=n.destroyHooks||(n.destroyHooks=[]);if(!p&&r.multi){const oe=Y.indexOf(o);-1===oe?Y.push(o,[l,L]):Y[oe+1].push(l,L)}else Y.push(o,L)}}}function t(n,r,o){return o&&n.componentProviders++,n.multi.push(r)-1}function s(n,r,o,l){for(let p=o;p<l;p++)if(r[p]===n)return p;return-1}function c(n,r,o,l){return C(this.multi,[])}function m(n,r,o,l){const p=this.multi;let _;if(this.providerFactory){const D=this.providerFactory.componentProviders,O=pn(o,o[fn],this.providerFactory.index,l);_=O.slice(0,D),C(p,_);for(let L=D;L<O.length;L++)_.push(O[L])}else _=[],C(p,_);return _}function C(n,r){for(let o=0;o<n.length;o++)r.push((0,n[o])());return r}function H(n,r=[]){return o=>{o.providersResolver=(l,p)=>function N_(n,r,o){const l=Fn();if(l.firstCreatePass){const p=gi(n);i(o,l.data,l.blueprint,p,!0),i(r,l.data,l.blueprint,p,!1)}}(l,p?p(n):n,r)}}class Z{}class ue{}function ze(n,r){return new Kt(n,null!=r?r:null)}class Kt extends Z{constructor(r,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Jf(this);const l=ri(r);this._bootstrapComponents=Ko(l.bootstrap),this._r3Injector=Vf(r,o,[{provide:Z,useValue:this},{provide:cc,useValue:this.componentFactoryResolver}],Ae(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class en extends ue{constructor(r){super(),this.moduleType=r}create(r){return new Kt(this.moduleType,r)}}class Hn extends Z{constructor(r,o,l){super(),this.componentFactoryResolver=new Jf(this),this.instance=null;const p=new kh([...r,{provide:Z,useValue:this},{provide:cc,useValue:this.componentFactoryResolver}],o||Id(),l,new Set(["environment"]));this.injector=p,p.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function cr(n,r,o=null){return new Hn(n,r,o).injector}let fs=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const l=Jd(0,o.type),p=l.length>0?cr([l],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,p)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=St({token:n,providedIn:"environment",factory:()=>new n(rn(fu))}),n})();function ks(n){n.getStandaloneInjector=r=>r.get(fs).getOrCreateStandaloneInjector(n)}function k_(n){return r=>{setTimeout(n,void 0,r)}}const Xc=class iI extends a.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,o,l){let p=r,_=o||(()=>null),D=l;if(r&&"object"==typeof r){var O,L,Y;const Ce=r;p=null===(O=Ce.next)||void 0===O?void 0:O.bind(Ce),_=null===(L=Ce.error)||void 0===L?void 0:L.bind(Ce),D=null===(Y=Ce.complete)||void 0===Y?void 0:Y.bind(Ce)}this.__isAsync&&(_=k_(_),p&&(p=k_(p)),D&&(D=k_(D)));const oe=super.subscribe({next:p,error:_,complete:D});return r instanceof te.w0&&r.add(oe),oe}};function sI(){return this._results[Symbol.iterator]()}class F_{get changes(){return this._changes||(this._changes=new Xc)}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=F_.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=sI)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,o){return this._results.reduce(r,o)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,o){const l=this;l.dirty=!1;const p=function Rs(n){return n.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function Ta(n,r,o){if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++){let p=n[l],_=r[l];if(o&&(p=o(p),_=o(_)),_!==p)return!1}return!0}(l._results,p,o))&&(l._results=p,l.length=p.length,l.last=p[this.length-1],l.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let om=(()=>{class n{}return n.__NG_ELEMENT_ID__=lI,n})();const oI=om,aI=class extends oI{constructor(r,o,l){super(),this._declarationLView=r,this._declarationTContainer=o,this.elementRef=l}createEmbeddedView(r,o){const l=this._declarationTContainer.tView,p=Gf(this._declarationLView,l,r,16,null,l.declTNode,null,null,null,null,o||null);p[Ct]=this._declarationLView[this._declarationTContainer.index];const D=this._declarationLView[sn];return null!==D&&(p[sn]=D.createEmbeddedView(l)),Sd(l,p,r),new Od(p)}};function lI(){return sv(I(),qt())}function sv(n,r){return 4&n.type?new aI(r,n,dc(n,r)):null}let ov=(()=>{class n{}return n.__NG_ELEMENT_ID__=uI,n})();function uI(){return x0(I(),qt())}const cI=ov,S0=class extends cI{constructor(r,o,l){super(),this._lContainer=r,this._hostTNode=o,this._hostLView=l}get element(){return dc(this._hostTNode,this._hostLView)}get injector(){return new pa(this._hostTNode,this._hostLView)}get parentInjector(){const r=mr(this._hostTNode,this._hostLView);if(dn(r)){const o=Ii(r,this._hostLView),l=It(r);return new pa(o[fn].data[l+8],o)}return new pa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const o=A0(this._lContainer);return null!==o&&o[r]||null}get length(){return this._lContainer.length-In}createEmbeddedView(r,o,l){let p,_;"number"==typeof l?p=l:null!=l&&(p=l.index,_=l.injector);const D=r.createEmbeddedView(o||{},_);return this.insert(D,p),D}createComponent(r,o,l,p,_){const D=r&&!function ra(n){return"function"==typeof n}(r);let O;if(D)O=o;else{const Ce=o||{};O=Ce.index,l=Ce.injector,p=Ce.projectableNodes,_=Ce.environmentInjector||Ce.ngModuleRef}const L=D?r:new Pd(Qn(r)),Y=l||this.parentInjector;if(!_&&null==L.ngModule){const ct=(D?Y:this.parentInjector).get(fu,null);ct&&(_=ct)}const oe=L.create(Y,p,void 0,_);return this.insert(oe.hostView,O),oe}insert(r,o){const l=r._lView,p=l[fn];if(function Js(n){return Er(n[$r])}(l)){const oe=this.indexOf(r);if(-1!==oe)this.detach(oe);else{const Ce=l[$r],ct=new S0(Ce,Ce[Hr],Ce[$r]);ct.detach(ct.indexOf(r))}}const _=this._adjustIndex(o),D=this._lContainer;!function hd(n,r,o,l){const p=In+l,_=o.length;l>0&&(o[p-1][Qr]=r),l<_-In?(r[Qr]=o[p],Ba(o,In+l,r)):(o.push(r),r[Qr]=null),r[$r]=o;const D=r[Ct];null!==D&&o!==D&&function ec(n,r){const o=n[nn];r[dt]!==r[$r][$r][dt]&&(n[qe]=!0),null===o?n[nn]=[r]:o.push(r)}(D,r);const O=r[sn];null!==O&&O.insertView(n),r[Xn]|=64}(p,l,D,_);const O=Al(_,D),L=l[Ne],Y=hl(L,D[mt]);return null!==Y&&function Dc(n,r,o,l,p,_){l[Mr]=p,l[Hr]=r,oo(n,l,o,1,p,_)}(p,D[Hr],L,l,Y,O),r.attachToViewContainerRef(),Ba(L_(D),_,r),r}move(r,o){return this.insert(r,o)}indexOf(r){const o=A0(this._lContainer);return null!==o?o.indexOf(r):-1}remove(r){const o=this._adjustIndex(r,-1),l=Ou(this._lContainer,o);l&&(Ro(L_(this._lContainer),o),Sa(l[fn],l))}detach(r){const o=this._adjustIndex(r,-1),l=Ou(this._lContainer,o);return l&&null!=Ro(L_(this._lContainer),o)?new Od(l):null}_adjustIndex(r,o=0){return null==r?this.length+o:r}};function A0(n){return n[Ut]}function L_(n){return n[Ut]||(n[Ut]=[])}function x0(n,r){let o;const l=r[n.index];if(Er(l))o=l;else{let p;if(8&n.type)p=Dr(l);else{const _=r[Ne];p=_.createComment("");const D=Ci(n,r);ma(_,hl(_,D),p,function Ac(n,r){return n.nextSibling(r)}(_,D),!1)}r[n.index]=o=Zf(l,r,p,n),qh(r,o)}return new S0(o,n,r)}class B_{constructor(r){this.queryList=r,this.matches=null}clone(){return new B_(this.queryList)}setDirty(){this.queryList.setDirty()}}class $_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const o=r.queries;if(null!==o){const l=null!==r.contentQueries?r.contentQueries[0]:o.length,p=[];for(let _=0;_<l;_++){const D=o.getByIndex(_);p.push(this.queries[D.indexInDeclarationView].clone())}return new $_(p)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let o=0;o<this.queries.length;o++)null!==B0(r,o).matches&&this.queries[o].setDirty()}}class M0{constructor(r,o,l=null){this.predicate=r,this.flags=o,this.read=l}}class V_{constructor(r=[]){this.queries=r}elementStart(r,o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(r,o)}elementEnd(r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(r)}embeddedTView(r){let o=null;for(let l=0;l<this.length;l++){const p=null!==o?o.length:0,_=this.getByIndex(l).embeddedTView(r,p);_&&(_.indexInDeclarationView=l,null!==o?o.push(_):o=[_])}return null!==o?new V_(o):null}template(r,o){for(let l=0;l<this.queries.length;l++)this.queries[l].template(r,o)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class U_{constructor(r,o=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(r,o){this.isApplyingToNode(o)&&this.matchTNode(r,o)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,o){this.elementStart(r,o)}embeddedTView(r,o){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,o),new U_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let l=r.parent;for(;null!==l&&8&l.type&&l.index!==o;)l=l.parent;return o===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(r,o){const l=this.metadata.predicate;if(Array.isArray(l))for(let p=0;p<l.length;p++){const _=l[p];this.matchTNodeWithReadOption(r,o,dI(o,_)),this.matchTNodeWithReadOption(r,o,ai(o,r,_,!1,!1))}else l===om?4&o.type&&this.matchTNodeWithReadOption(r,o,-1):this.matchTNodeWithReadOption(r,o,ai(o,r,l,!1,!1))}matchTNodeWithReadOption(r,o,l){if(null!==l){const p=this.metadata.read;if(null!==p)if(p===hc||p===ov||p===om&&4&o.type)this.addMatch(o.index,-2);else{const _=ai(o,r,p,!1,!1);null!==_&&this.addMatch(o.index,_)}else this.addMatch(o.index,l)}}addMatch(r,o){null===this.matches?this.matches=[r,o]:this.matches.push(r,o)}}function dI(n,r){const o=n.localNames;if(null!==o)for(let l=0;l<o.length;l+=2)if(o[l]===r)return o[l+1];return null}function fI(n,r,o,l){return-1===o?function hI(n,r){return 11&n.type?dc(n,r):4&n.type?sv(n,r):null}(r,n):-2===o?function pI(n,r,o){return o===hc?dc(r,n):o===om?sv(r,n):o===ov?x0(r,n):void 0}(n,r,l):pn(n,n[fn],o,r)}function R0(n,r,o,l){const p=r[sn].queries[l];if(null===p.matches){const _=n.data,D=o.matches,O=[];for(let L=0;L<D.length;L+=2){const Y=D[L];O.push(Y<0?null:fI(r,_[Y],D[L+1],o.metadata.read))}p.matches=O}return p.matches}function j_(n,r,o,l){const p=n.queries.getByIndex(o),_=p.matches;if(null!==_){const D=R0(n,r,p,o);for(let O=0;O<_.length;O+=2){const L=_[O];if(L>0)l.push(D[O/2]);else{const Y=_[O+1],oe=r[-L];for(let Ce=In;Ce<oe.length;Ce++){const ct=oe[Ce];ct[Ct]===ct[$r]&&j_(ct[fn],ct,Y,l)}if(null!==oe[nn]){const Ce=oe[nn];for(let ct=0;ct<Ce.length;ct++){const Tt=Ce[ct];j_(Tt[fn],Tt,Y,l)}}}}}return l}function O0(n){const r=qt(),o=Fn(),l=Pa();xs(l+1);const p=B0(o,l);if(n.dirty&&function Qo(n){return 4==(4&n[Xn])}(r)===(2==(2&p.metadata.flags))){if(null===p.matches)n.reset([]);else{const _=p.crossesNgTemplate?j_(o,r,l,[]):R0(o,r,p,l);n.reset(_,Bh),n.notifyOnChanges()}return!0}return!1}function P0(n,r,o){const l=Fn();l.firstCreatePass&&(L0(l,new M0(n,r,o),-1),2==(2&r)&&(l.staticViewQueries=!0)),F0(l,qt(),r)}function N0(n,r,o,l){const p=Fn();if(p.firstCreatePass){const _=I();L0(p,new M0(r,o,l),_.index),function mI(n,r){const o=n.contentQueries||(n.contentQueries=[]);r!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,r)}(p,n),2==(2&o)&&(p.staticContentQueries=!0)}F0(p,qt(),o)}function k0(){return function gI(n,r){return n[sn].queries[r].queryList}(qt(),Pa())}function F0(n,r,o){const l=new F_(4==(4&o));ih(n,r,l,l.destroy),null===r[sn]&&(r[sn]=new $_),r[sn].queries.push(new B_(l))}function L0(n,r,o){null===n.queries&&(n.queries=new V_),n.queries.track(new U_(r,o))}function B0(n,r){return n.queries.getByIndex(r)}function H_(n){return!!ri(n)}function lv(...n){}const nE=new Ai("Application Initializer");let uv=(()=>{class n{constructor(o){this.appInits=o,this.resolve=lv,this.reject=lv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,p)=>{this.resolve=l,this.reject=p})}runInitializers(){if(this.initialized)return;const o=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const _=this.appInits[p]();if(lp(_))o.push(_);else if(cp(_)){const D=new Promise((O,L)=>{_.subscribe({complete:O,error:L})});o.push(D)}}Promise.all(o).then(()=>{l()}).catch(p=>{this.reject(p)}),0===o.length&&l(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(rn(nE,8))},n.\u0275prov=St({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rE=new Ai("AppId",{providedIn:"root",factory:function iE(){return`${Y_()}${Y_()}${Y_()}`}});function Y_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const sE=new Ai("Platform Initializer"),LI=new Ai("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let BI=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=St({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const cv=new Ai("LocaleId",{providedIn:"root",factory:()=>yn(cv,Yt.Optional|Yt.SkipSelf)||function $I(){return typeof $localize<"u"&&$localize.locale||Kl}()}),VI=new Ai("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class UI{constructor(r,o){this.ngModuleFactory=r,this.componentFactories=o}}let jI=(()=>{class n{compileModuleSync(o){return new en(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const l=this.compileModuleSync(o),_=Ko(ri(o).declarations).reduce((D,O)=>{const L=Qn(O);return L&&D.push(new Pd(L)),D},[]);return new UI(l,_)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=St({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const zI=(()=>Promise.resolve(0))();function q_(n){typeof Zone>"u"?zI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Yu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xc(!1),this.onMicrotaskEmpty=new Xc(!1),this.onStable=new Xc(!1),this.onError=new Xc(!1),typeof Zone>"u")throw new Me(908,!1);Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!l&&o,p.shouldCoalesceRunChangeDetection=l,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function WI(){let n=xn.requestAnimationFrame,r=xn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const l=r[Zone.__symbol__("OriginalDelegate")];l&&(r=l)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function qI(n){const r=()=>{!function YI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(xn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Q_(n),n.isCheckStableRunning=!0,Z_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Q_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,l,p,_,D,O)=>{try{return lE(n),o.invokeTask(p,_,D,O)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||n.shouldCoalesceRunChangeDetection)&&r(),uE(n)}},onInvoke:(o,l,p,_,D,O,L)=>{try{return lE(n),o.invoke(p,_,D,O,L)}finally{n.shouldCoalesceRunChangeDetection&&r(),uE(n)}},onHasTask:(o,l,p,_)=>{o.hasTask(p,_),l===p&&("microTask"==_.change?(n._hasPendingMicrotasks=_.microTask,Q_(n),Z_(n)):"macroTask"==_.change&&(n.hasPendingMacrotasks=_.macroTask))},onHandleError:(o,l,p,_)=>(o.handleError(p,_),n.runOutsideAngular(()=>n.onError.emit(_)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Yu.isInAngularZone())throw new Me(909,!1)}static assertNotInAngularZone(){if(Yu.isInAngularZone())throw new Me(909,!1)}run(r,o,l){return this._inner.run(r,o,l)}runTask(r,o,l,p){const _=this._inner,D=_.scheduleEventTask("NgZoneEvent: "+p,r,KI,lv,lv);try{return _.runTask(D,o,l)}finally{_.cancelTask(D)}}runGuarded(r,o,l){return this._inner.runGuarded(r,o,l)}runOutsideAngular(r){return this._outer.run(r)}}const KI={};function Z_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Q_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function lE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function uE(n){n._nesting--,Z_(n)}class ZI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xc,this.onMicrotaskEmpty=new Xc,this.onStable=new Xc,this.onError=new Xc}run(r,o,l){return r.apply(o,l)}runGuarded(r,o,l){return r.apply(o,l)}runOutsideAngular(r){return r()}runTask(r,o,l,p){return r.apply(o,l)}}const cE=new Ai(""),dE=new Ai("");let X_,QI=(()=>{class n{constructor(o,l,p){this._ngZone=o,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,X_||(function XI(n){X_=n}(p),p.addToWindow(l)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Yu.assertNotInAngularZone(),q_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())q_(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(o)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,l,p){let _=-1;l&&l>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(D=>D.timeoutId!==_),o(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:o,timeoutId:_,updateCb:p})}whenStable(o,l,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,l,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,l,p){return[]}}return n.\u0275fac=function(o){return new(o||n)(rn(Yu),rn(hE),rn(dE))},n.\u0275prov=St({token:n,factory:n.\u0275fac}),n})(),hE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,l){this._applications.set(o,l)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,l=!0){var p,_;return null!==(p=null===(_=X_)||void 0===_?void 0:_.findTestabilityInTree(this,o,l))&&void 0!==p?p:null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=St({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Gd=!1;let Sh=null;const fE=new Ai("AllowMultipleToken"),J_=new Ai("PlatformDestroyListeners"),pE=new Ai("appBootstrapListener");class tw{constructor(r,o){this.name=r,this.token=o}}function mE(n,r,o=[]){const l=`Platform: ${r}`,p=new Ai(l);return(_=[])=>{let D=e0();if(!D||D.injector.get(fE,!1)){const O=[...o,..._,{provide:p,useValue:!0}];n?n(O):function nw(n){if(Sh&&!Sh.get(fE,!1))throw new Me(400,!1);Sh=n;const r=n.get(vE);(function gE(n){const r=n.get(sE,null);r&&r.forEach(o=>o())})(n)}(function yE(n=[],r){return mu.create({name:r,providers:[{provide:Fc,useValue:"platform"},{provide:J_,useValue:new Set([()=>Sh=null])},...n]})}(O,l))}return function iw(n){const r=e0();if(!r)throw new Me(401,!1);return r}()}}function e0(){var n,r;return null!==(n=null===(r=Sh)||void 0===r?void 0:r.get(vE))&&void 0!==n?n:null}let vE=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,l){const p=function EE(n,r){let o;return o="noop"===n?new ZI:("zone.js"===n?void 0:n)||new Yu(r),o}(null==l?void 0:l.ngZone,function _E(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(l)),_=[{provide:Yu,useValue:p}];return p.run(()=>{const D=mu.create({providers:_,parent:this.injector,name:o.moduleType.name}),O=o.create(D),L=O.injector.get(Ve,null);if(!L)throw new Me(402,!1);return p.runOutsideAngular(()=>{const Y=p.onError.subscribe({next:oe=>{L.handleError(oe)}});O.onDestroy(()=>{hv(this._modules,O),Y.unsubscribe()})}),function IE(n,r,o){try{const l=o();return lp(l)?l.catch(p=>{throw r.runOutsideAngular(()=>n.handleError(p)),p}):l}catch(l){throw r.runOutsideAngular(()=>n.handleError(l)),l}}(L,p,()=>{const Y=O.injector.get(uv);return Y.runInitializers(),Y.donePromise.then(()=>(function _c(n){Je(n,"Expected localeId to be defined"),"string"==typeof n&&(xy=n.toLowerCase().replace(/_/g,"-"))}(O.injector.get(cv,Kl)||Kl),this._moduleDoBootstrap(O),O))})})}bootstrapModule(o,l=[]){const p=wE({},l);return function JI(n,r,o){const l=new en(o);return Promise.resolve(l)}(0,0,o).then(_=>this.bootstrapModuleFactory(_,p))}_moduleDoBootstrap(o){const l=o.injector.get(dv);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(p=>l.bootstrap(p));else{if(!o.instance.ngDoBootstrap)throw new Me(-403,!1);o.instance.ngDoBootstrap(l)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Me(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const o=this._injector.get(J_,null);o&&(o.forEach(l=>l()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(rn(mu))},n.\u0275prov=St({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function wE(n,r){return Array.isArray(r)?r.reduce(wE,n):{...n,...r}}let dv=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(o,l,p){this._zone=o,this._injector=l,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new z.y(O=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{O.next(this._stable),O.complete()})}),D=new z.y(O=>{let L;this._zone.runOutsideAngular(()=>{L=this._zone.onStable.subscribe(()=>{Yu.assertNotInAngularZone(),q_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,O.next(!0))})})});const Y=this._zone.onUnstable.subscribe(()=>{Yu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{O.next(!1)}))});return()=>{L.unsubscribe(),Y.unsubscribe()}});this.isStable=(0,Te.T)(_,D.pipe((0,xe.B)()))}bootstrap(o,l){const p=o instanceof pu;if(!this._injector.get(uv).done){!p&&vi(o);throw new Me(405,Gd)}let D;D=p?o:this._injector.get(cc).resolveComponentFactory(o),this.componentTypes.push(D.componentType);const O=function ew(n){return n.isBoundToModule}(D)?void 0:this._injector.get(Z),Y=D.create(mu.NULL,[],l||D.selector,O),oe=Y.location.nativeElement,Ce=Y.injector.get(cE,null);return null==Ce||Ce.registerApplication(oe),Y.onDestroy(()=>{this.detachView(Y.hostView),hv(this.components,Y),null==Ce||Ce.unregisterApplication(oe)}),this._loadComponent(Y),Y}tick(){if(this._runningTick)throw new Me(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const l=o;this._views.push(l),l.attachToAppRef(this)}detachView(o){const l=o;hv(this._views,l),l.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const l=this._injector.get(pE,[]);l.push(...this._bootstrapListeners),l.forEach(p=>p(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>hv(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Me(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(o){return new(o||n)(rn(Yu),rn(fu),rn(Ve))},n.\u0275prov=St({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function hv(n,r){const o=n.indexOf(r);o>-1&&n.splice(o,1)}function ow(){return!1}function aw(){}let lw=(()=>{class n{}return n.__NG_ELEMENT_ID__=uw,n})();function uw(n){return function cw(n,r,o){if(pr(n)&&!o){const l=$i(n.index,r);return new Od(l,l)}return 47&n.type?new Od(r[dt],r):null}(I(),qt(),16==(16&n))}class SE{constructor(){}supports(r){return uh(r)}create(r){return new mw(r)}}const gw=(n,r)=>r;class mw{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||gw}forEachItem(r){let o;for(o=this._itHead;null!==o;o=o._next)r(o)}forEachOperation(r){let o=this._itHead,l=this._removalsHead,p=0,_=null;for(;o||l;){const D=!l||o&&o.currentIndex<xE(l,p,_)?o:l,O=xE(D,p,_),L=D.currentIndex;if(D===l)p--,l=l._nextRemoved;else if(o=o._next,null==D.previousIndex)p++;else{_||(_=[]);const Y=O-p,oe=L-p;if(Y!=oe){for(let ct=0;ct<Y;ct++){const Tt=ct<_.length?_[ct]:_[ct]=0,Xt=Tt+ct;oe<=Xt&&Xt<Y&&(_[ct]=Tt+1)}_[D.previousIndex]=oe-Y}}O!==L&&r(D,O,L)}}forEachPreviousItem(r){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachMovedItem(r){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}forEachIdentityChange(r){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)r(o)}diff(r){if(null==r&&(r=[]),!uh(r))throw new Me(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let p,_,D,o=this._itHead,l=!1;if(Array.isArray(r)){this.length=r.length;for(let O=0;O<this.length;O++)_=r[O],D=this._trackByFn(O,_),null!==o&&Object.is(o.trackById,D)?(l&&(o=this._verifyReinsertion(o,_,D,O)),Object.is(o.item,_)||this._addIdentityChange(o,_)):(o=this._mismatch(o,_,D,O),l=!0),o=o._next}else p=0,function wg(n,r){if(Array.isArray(n))for(let o=0;o<n.length;o++)r(n[o]);else{const o=n[Symbol.iterator]();let l;for(;!(l=o.next()).done;)r(l.value)}}(r,O=>{D=this._trackByFn(p,O),null!==o&&Object.is(o.trackById,D)?(l&&(o=this._verifyReinsertion(o,O,D,p)),Object.is(o.item,O)||this._addIdentityChange(o,O)):(o=this._mismatch(o,O,D,p),l=!0),o=o._next,p++}),this.length=p;return this._truncate(o),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,o,l,p){let _;return null===r?_=this._itTail:(_=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._reinsertAfter(r,_,p)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(l,p))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._moveAfter(r,_,p)):r=this._addAfter(new yw(o,l),_,p),r}_verifyReinsertion(r,o,l,p){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==_?r=this._reinsertAfter(_,r._prev,p):r.currentIndex!=p&&(r.currentIndex=p,this._addToMoves(r,p)),r}_truncate(r){for(;null!==r;){const o=r._next;this._addToRemovals(this._unlink(r)),r=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,o,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const p=r._prevRemoved,_=r._nextRemoved;return null===p?this._removalsHead=_:p._nextRemoved=_,null===_?this._removalsTail=p:_._prevRemoved=p,this._insertAfter(r,o,l),this._addToMoves(r,l),r}_moveAfter(r,o,l){return this._unlink(r),this._insertAfter(r,o,l),this._addToMoves(r,l),r}_addAfter(r,o,l){return this._insertAfter(r,o,l),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,o,l){const p=null===o?this._itHead:o._next;return r._next=p,r._prev=o,null===p?this._itTail=r:p._prev=r,null===o?this._itHead=r:o._next=r,null===this._linkedRecords&&(this._linkedRecords=new AE),this._linkedRecords.put(r),r.currentIndex=l,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const o=r._prev,l=r._next;return null===o?this._itHead=l:o._next=l,null===l?this._itTail=o:l._prev=o,r}_addToMoves(r,o){return r.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new AE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,o){return r.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class yw{constructor(r,o){this.item=r,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class vw{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,o){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===o||o<=l.currentIndex)&&Object.is(l.trackById,r))return l;return null}remove(r){const o=r._prevDup,l=r._nextDup;return null===o?this._head=l:o._nextDup=l,null===l?this._tail=o:l._prevDup=o,null===this._head}}class AE{constructor(){this.map=new Map}put(r){const o=r.trackById;let l=this.map.get(o);l||(l=new vw,this.map.set(o,l)),l.add(r)}get(r,o){const p=this.map.get(r);return p?p.get(r,o):null}remove(r){const o=r.trackById;return this.map.get(o).remove(r)&&this.map.delete(o),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function xE(n,r,o){const l=n.previousIndex;if(null===l)return l;let p=0;return o&&l<o.length&&(p=o[l]),l+r+p}class ME{constructor(){}supports(r){return r instanceof Map||Xh(r)}create(){return new _w}}class _w{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let o;for(o=this._mapHead;null!==o;o=o._next)r(o)}forEachPreviousItem(r){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)r(o)}forEachChangedItem(r){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}diff(r){if(r){if(!(r instanceof Map||Xh(r)))throw new Me(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(r,(l,p)=>{if(o&&o.key===p)this._maybeAddToChanges(o,l),this._appendAfter=o,o=o._next;else{const _=this._getOrCreateRecordForKey(p,l);o=this._insertBeforeOrAppend(o,_)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let l=o;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,o){if(r){const l=r._prev;return o._next=r,o._prev=l,r._prev=o,l&&(l._next=o),r===this._mapHead&&(this._mapHead=o),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(r,o){if(this._records.has(r)){const p=this._records.get(r);this._maybeAddToChanges(p,o);const _=p._prev,D=p._next;return _&&(_._next=D),D&&(D._prev=_),p._next=null,p._prev=null,p}const l=new Ew(r);return this._records.set(r,l),l.currentValue=o,this._addToAdditions(l),l}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,o){Object.is(o,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=o,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,o){r instanceof Map?r.forEach(o):Object.keys(r).forEach(l=>o(r[l],l))}}class Ew{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function RE(){return new o0([new SE])}let o0=(()=>{class n{constructor(o){this.factories=o}static create(o,l){if(null!=l){const p=l.factories.slice();o=o.concat(p)}return new n(o)}static extend(o){return{provide:n,useFactory:l=>n.create(o,l||RE()),deps:[[n,new wn,new on]]}}find(o){const l=this.factories.find(p=>p.supports(o));if(null!=l)return l;throw new Me(901,!1)}}return n.\u0275prov=St({token:n,providedIn:"root",factory:RE}),n})();function OE(){return new a0([new ME])}let a0=(()=>{class n{constructor(o){this.factories=o}static create(o,l){if(l){const p=l.factories.slice();o=o.concat(p)}return new n(o)}static extend(o){return{provide:n,useFactory:l=>n.create(o,l||OE()),deps:[[n,new wn,new on]]}}find(o){const l=this.factories.find(p=>p.supports(o));if(l)return l;throw new Me(901,!1)}}return n.\u0275prov=St({token:n,providedIn:"root",factory:OE}),n})();const Cw=mE(null,"core",[]);let bw=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(rn(dv))},n.\u0275mod=fi({type:n}),n.\u0275inj=cn({}),n})();function Dw(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},433:(ln,ft,$)=>{"use strict";$.d(ft,{u5:()=>qt,JU:()=>ut,a5:()=>Zr,JJ:()=>Ar,On:()=>rr});var a=$(4650),te=$(6895),z=$(8996),Te=$(9751),xe=$(4742),Se=$(8421),de=$(7669),Ae=$(5403),Ue=$(3268),me=$(1810),pe=$(4004);let ke=(()=>{class j{constructor(I,y){this._renderer=I,this._elementRef=y,this.onChange=P=>{},this.onTouched=()=>{}}setProperty(I,y){this._renderer.setProperty(this._elementRef.nativeElement,I,y)}registerOnTouched(I){this.onTouched=I}registerOnChange(I){this.onChange=I}setDisabledState(I){this.setProperty("disabled",I)}}return j.\u0275fac=function(I){return new(I||j)(a.Y36(a.Qsj),a.Y36(a.SBq))},j.\u0275dir=a.lG2({type:j}),j})(),Ge=(()=>{class j extends ke{}return j.\u0275fac=function(){let f;return function(y){return(f||(f=a.n5z(j)))(y||j)}}(),j.\u0275dir=a.lG2({type:j,features:[a.qOj]}),j})();const ut=new a.OlP("NgValueAccessor"),ve={provide:ut,useExisting:(0,a.Gpc)(()=>st),multi:!0},at=new a.OlP("CompositionEventMode");let st=(()=>{class j extends ke{constructor(I,y,P){super(I,y),this._compositionMode=P,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function le(){const j=(0,te.q)()?(0,te.q)().getUserAgent():"";return/android (\d+)/.test(j.toLowerCase())}())}writeValue(I){this.setProperty("value",null==I?"":I)}_handleInput(I){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(I)}_compositionStart(){this._composing=!0}_compositionEnd(I){this._composing=!1,this._compositionMode&&this.onChange(I)}}return j.\u0275fac=function(I){return new(I||j)(a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(at,8))},j.\u0275dir=a.lG2({type:j,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(I,y){1&I&&a.NdJ("input",function(Q){return y._handleInput(Q.target.value)})("blur",function(){return y.onTouched()})("compositionstart",function(){return y._compositionStart()})("compositionend",function(Q){return y._compositionEnd(Q.target.value)})},features:[a._Bn([ve]),a.qOj]}),j})();const et=!1,Oe=new a.OlP("NgValidators"),J=new a.OlP("NgAsyncValidators");function Je(j){return null!=j}function Le(j){const f=(0,a.QGY)(j)?(0,z.D)(j):j;if(et&&!(0,a.CqO)(f)){let I="Expected async validator to return Promise or Observable.";throw"object"==typeof j&&(I+=" Are you using a synchronous validator where an async validator is expected?"),new a.vHH(-1101,I)}return f}function rt(j){let f={};return j.forEach(I=>{f=null!=I?{...f,...I}:f}),0===Object.keys(f).length?null:f}function He(j,f){return f.map(I=>I(j))}function St(j){return j.map(f=>function Pt(j){return!j.validate}(f)?f:I=>f.validate(I))}function cn(j){return null!=j?function Nt(j){if(!j)return null;const f=j.filter(Je);return 0==f.length?null:function(I){return rt(He(I,f))}}(St(j)):null}function Dn(j){return null!=j?function xt(j){if(!j)return null;const f=j.filter(Je);return 0==f.length?null:function(I){return function fe(...j){const f=(0,de.jO)(j),{args:I,keys:y}=(0,xe.D)(j),P=new Te.y(Q=>{const{length:gt}=I;if(!gt)return void Q.complete();const tn=new Array(gt);let vn=gt,Gn=gt;for(let Rr=0;Rr<gt;Rr++){let Zn=!1;(0,Se.Xf)(I[Rr]).subscribe((0,Ae.x)(Q,Br=>{Zn||(Zn=!0,Gn--),tn[Rr]=Br},()=>vn--,void 0,()=>{(!vn||!Zn)&&(Gn||Q.next(y?(0,me.n)(y,tn):tn),Q.complete())}))}});return f?P.pipe((0,Ue.Z)(f)):P}(He(I,f).map(Le)).pipe((0,pe.U)(rt))}}(St(j)):null}function Ln(j,f){return null===j?[f]:Array.isArray(j)?[...j,f]:[j,f]}function nr(j){return j?Array.isArray(j)?j:[j]:[]}function Cr(j,f){return Array.isArray(j)?j.includes(f):j===f}function _r(j,f){const I=nr(f);return nr(j).forEach(P=>{Cr(I,P)||I.push(P)}),I}function gn(j,f){return nr(f).filter(I=>!Cr(j,I))}class dr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(f){this._rawValidators=f||[],this._composedValidatorFn=cn(this._rawValidators)}_setAsyncValidators(f){this._rawAsyncValidators=f||[],this._composedAsyncValidatorFn=Dn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(f){this._onDestroyCallbacks.push(f)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(f=>f()),this._onDestroyCallbacks=[]}reset(f){this.control&&this.control.reset(f)}hasError(f,I){return!!this.control&&this.control.hasError(f,I)}getError(f,I){return this.control?this.control.getError(f,I):null}}class Yt extends dr{get formDirective(){return null}get path(){return null}}class Zr extends dr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Tr{constructor(f){this._cd=f}get isTouched(){var f,I;return!(null===(f=this._cd)||void 0===f||null===(I=f.control)||void 0===I||!I.touched)}get isUntouched(){var f,I;return!(null===(f=this._cd)||void 0===f||null===(I=f.control)||void 0===I||!I.untouched)}get isPristine(){var f,I;return!(null===(f=this._cd)||void 0===f||null===(I=f.control)||void 0===I||!I.pristine)}get isDirty(){var f,I;return!(null===(f=this._cd)||void 0===f||null===(I=f.control)||void 0===I||!I.dirty)}get isValid(){var f,I;return!(null===(f=this._cd)||void 0===f||null===(I=f.control)||void 0===I||!I.valid)}get isInvalid(){var f,I;return!(null===(f=this._cd)||void 0===f||null===(I=f.control)||void 0===I||!I.invalid)}get isPending(){var f,I;return!(null===(f=this._cd)||void 0===f||null===(I=f.control)||void 0===I||!I.pending)}get isSubmitted(){var f;return!(null===(f=this._cd)||void 0===f||!f.submitted)}}let Ar=(()=>{class j extends Tr{constructor(I){super(I)}}return j.\u0275fac=function(I){return new(I||j)(a.Y36(Zr,2))},j.\u0275dir=a.lG2({type:j,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(I,y){2&I&&a.ekj("ng-untouched",y.isUntouched)("ng-touched",y.isTouched)("ng-pristine",y.isPristine)("ng-dirty",y.isDirty)("ng-valid",y.isValid)("ng-invalid",y.isInvalid)("ng-pending",y.isPending)},features:[a.qOj]}),j})();const jn="VALID",Or="INVALID",Re="PENDING",Ee="DISABLED";function Be(j){return null!=j&&!Array.isArray(j)&&"object"==typeof j}class yt{constructor(f,I){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(f),this._assignAsyncValidators(I)}get validator(){return this._composedValidatorFn}set validator(f){this._rawValidators=this._composedValidatorFn=f}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(f){this._rawAsyncValidators=this._composedAsyncValidatorFn=f}get parent(){return this._parent}get valid(){return this.status===jn}get invalid(){return this.status===Or}get pending(){return this.status==Re}get disabled(){return this.status===Ee}get enabled(){return this.status!==Ee}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(f){this._assignValidators(f)}setAsyncValidators(f){this._assignAsyncValidators(f)}addValidators(f){this.setValidators(_r(f,this._rawValidators))}addAsyncValidators(f){this.setAsyncValidators(_r(f,this._rawAsyncValidators))}removeValidators(f){this.setValidators(gn(f,this._rawValidators))}removeAsyncValidators(f){this.setAsyncValidators(gn(f,this._rawAsyncValidators))}hasValidator(f){return Cr(this._rawValidators,f)}hasAsyncValidator(f){return Cr(this._rawAsyncValidators,f)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(f={}){this.touched=!0,this._parent&&!f.onlySelf&&this._parent.markAsTouched(f)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(f=>f.markAllAsTouched())}markAsUntouched(f={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(I=>{I.markAsUntouched({onlySelf:!0})}),this._parent&&!f.onlySelf&&this._parent._updateTouched(f)}markAsDirty(f={}){this.pristine=!1,this._parent&&!f.onlySelf&&this._parent.markAsDirty(f)}markAsPristine(f={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(I=>{I.markAsPristine({onlySelf:!0})}),this._parent&&!f.onlySelf&&this._parent._updatePristine(f)}markAsPending(f={}){this.status=Re,!1!==f.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!f.onlySelf&&this._parent.markAsPending(f)}disable(f={}){const I=this._parentMarkedDirty(f.onlySelf);this.status=Ee,this.errors=null,this._forEachChild(y=>{y.disable({...f,onlySelf:!0})}),this._updateValue(),!1!==f.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...f,skipPristineCheck:I}),this._onDisabledChange.forEach(y=>y(!0))}enable(f={}){const I=this._parentMarkedDirty(f.onlySelf);this.status=jn,this._forEachChild(y=>{y.enable({...f,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:f.emitEvent}),this._updateAncestors({...f,skipPristineCheck:I}),this._onDisabledChange.forEach(y=>y(!1))}_updateAncestors(f){this._parent&&!f.onlySelf&&(this._parent.updateValueAndValidity(f),f.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(f){this._parent=f}getRawValue(){return this.value}updateValueAndValidity(f={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===jn||this.status===Re)&&this._runAsyncValidator(f.emitEvent)),!1!==f.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!f.onlySelf&&this._parent.updateValueAndValidity(f)}_updateTreeValidity(f={emitEvent:!0}){this._forEachChild(I=>I._updateTreeValidity(f)),this.updateValueAndValidity({onlySelf:!0,emitEvent:f.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ee:jn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(f){if(this.asyncValidator){this.status=Re,this._hasOwnPendingAsyncValidator=!0;const I=Le(this.asyncValidator(this));this._asyncValidationSubscription=I.subscribe(y=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(y,{emitEvent:f})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(f,I={}){this.errors=f,this._updateControlsErrors(!1!==I.emitEvent)}get(f){let I=f;return null==I||(Array.isArray(I)||(I=I.split(".")),0===I.length)?null:I.reduce((y,P)=>y&&y._find(P),this)}getError(f,I){const y=I?this.get(I):this;return y&&y.errors?y.errors[f]:null}hasError(f,I){return!!this.getError(f,I)}get root(){let f=this;for(;f._parent;)f=f._parent;return f}_updateControlsErrors(f){this.status=this._calculateStatus(),f&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(f)}_initObservables(){this.valueChanges=new a.vpe,this.statusChanges=new a.vpe}_calculateStatus(){return this._allControlsDisabled()?Ee:this.errors?Or:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Re)?Re:this._anyControlsHaveStatus(Or)?Or:jn}_anyControlsHaveStatus(f){return this._anyControls(I=>I.status===f)}_anyControlsDirty(){return this._anyControls(f=>f.dirty)}_anyControlsTouched(){return this._anyControls(f=>f.touched)}_updatePristine(f={}){this.pristine=!this._anyControlsDirty(),this._parent&&!f.onlySelf&&this._parent._updatePristine(f)}_updateTouched(f={}){this.touched=this._anyControlsTouched(),this._parent&&!f.onlySelf&&this._parent._updateTouched(f)}_registerOnCollectionChange(f){this._onCollectionChange=f}_setUpdateStrategy(f){Be(f)&&null!=f.updateOn&&(this._updateOn=f.updateOn)}_parentMarkedDirty(f){return!f&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(f){return null}_assignValidators(f){this._rawValidators=Array.isArray(f)?f.slice():f,this._composedValidatorFn=function Rt(j){return Array.isArray(j)?cn(j):j||null}(this._rawValidators)}_assignAsyncValidators(f){this._rawAsyncValidators=Array.isArray(f)?f.slice():f,this._composedAsyncValidatorFn=function hn(j){return Array.isArray(j)?Dn(j):j||null}(this._rawAsyncValidators)}}const Fi=new a.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Li}),Li="always";function fi(j,f,I=Li){var y,P;(function zi(j,f){const I=function Un(j){return j._rawValidators}(j);null!==f.validator?j.setValidators(Ln(I,f.validator)):"function"==typeof I&&j.setValidators([I]);const y=function Qt(j){return j._rawAsyncValidators}(j);null!==f.asyncValidator?j.setAsyncValidators(Ln(y,f.asyncValidator)):"function"==typeof y&&j.setAsyncValidators([y]);const P=()=>j.updateValueAndValidity();Pr(f._rawValidators,P),Pr(f._rawAsyncValidators,P)})(j,f),f.valueAccessor.writeValue(j.value),(j.disabled||"always"===I)&&(null===(y=(P=f.valueAccessor).setDisabledState)||void 0===y||y.call(P,j.disabled)),function ti(j,f){f.valueAccessor.registerOnChange(I=>{j._pendingValue=I,j._pendingChange=!0,j._pendingDirty=!0,"change"===j.updateOn&&vi(j,f)})}(j,f),function ri(j,f){const I=(y,P)=>{f.valueAccessor.writeValue(y),P&&f.viewToModelUpdate(y)};j.registerOnChange(I),f._registerOnDestroy(()=>{j._unregisterOnChange(I)})}(j,f),function Nr(j,f){f.valueAccessor.registerOnTouched(()=>{j._pendingTouched=!0,"blur"===j.updateOn&&j._pendingChange&&vi(j,f),"submit"!==j.updateOn&&j.markAsTouched()})}(j,f),function ls(j,f){if(f.valueAccessor.setDisabledState){const I=y=>{f.valueAccessor.setDisabledState(y)};j.registerOnDisabledChange(I),f._registerOnDestroy(()=>{j._unregisterOnDisabledChange(I)})}}(j,f)}function Pr(j,f){j.forEach(I=>{I.registerOnValidatorChange&&I.registerOnValidatorChange(f)})}function vi(j,f){j._pendingDirty&&j.markAsDirty(),j.setValue(j._pendingValue,{emitModelToViewChange:!1}),f.viewToModelUpdate(j._pendingValue),j._pendingChange=!1}function dt(j,f){const I=j.indexOf(f);I>-1&&j.splice(I,1)}function Ct(j){return"object"==typeof j&&null!==j&&2===Object.keys(j).length&&"value"in j&&"disabled"in j}const Lt=class extends yt{constructor(f=null,I,y){super(function We(j){return(Be(j)?j.validators:j)||null}(I),function vt(j,f){return(Be(f)?f.asyncValidators:j)||null}(y,I)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(f),this._setUpdateStrategy(I),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Be(I)&&(I.nonNullable||I.initialValueIsDefault)&&(this.defaultValue=Ct(f)?f.value:f)}setValue(f,I={}){this.value=this._pendingValue=f,this._onChange.length&&!1!==I.emitModelToViewChange&&this._onChange.forEach(y=>y(this.value,!1!==I.emitViewToModelChange)),this.updateValueAndValidity(I)}patchValue(f,I={}){this.setValue(f,I)}reset(f=this.defaultValue,I={}){this._applyFormState(f),this.markAsPristine(I),this.markAsUntouched(I),this.setValue(this.value,I),this._pendingChange=!1}_updateValue(){}_anyControls(f){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(f){this._onChange.push(f)}_unregisterOnChange(f){dt(this._onChange,f)}registerOnDisabledChange(f){this._onDisabledChange.push(f)}_unregisterOnDisabledChange(f){dt(this._onDisabledChange,f)}_forEachChild(f){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(f){Ct(f)?(this.value=this._pendingValue=f.value,f.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=f}},nn={provide:Zr,useExisting:(0,a.Gpc)(()=>rr)},In=(()=>Promise.resolve())();let rr=(()=>{class j extends Zr{constructor(I,y,P,Q,gt,tn){super(),this._changeDetectorRef=gt,this.callSetDisabledState=tn,this.control=new Lt,this._registered=!1,this.update=new a.vpe,this._parent=I,this._setValidators(y),this._setAsyncValidators(P),this.valueAccessor=function he(j,f){if(!f)return null;let I,y,P;return Array.isArray(f),f.forEach(Q=>{Q.constructor===st?I=Q:function Gr(j){return Object.getPrototypeOf(j.constructor)===Ge}(Q)?y=Q:P=Q}),P||y||I||null}(0,Q)}ngOnChanges(I){if(this._checkForErrors(),!this._registered||"name"in I){if(this._registered&&(this._checkName(),this.formDirective)){const y=I.name.previousValue;this.formDirective.removeControl({name:y,path:this._getPath(y)})}this._setUpControl()}"isDisabled"in I&&this._updateDisabled(I),function wi(j,f){if(!j.hasOwnProperty("model"))return!1;const I=j.model;return!!I.isFirstChange()||!Object.is(f,I.currentValue)}(I,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(I){this.viewModel=I,this.update.emit(I)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){fi(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(I){In.then(()=>{var y;this.control.setValue(I,{emitViewToModelChange:!1}),null===(y=this._changeDetectorRef)||void 0===y||y.markForCheck()})}_updateDisabled(I){const y=I.isDisabled.currentValue,P=0!==y&&(0,a.D6c)(y);In.then(()=>{var Q;P&&!this.control.disabled?this.control.disable():!P&&this.control.disabled&&this.control.enable(),null===(Q=this._changeDetectorRef)||void 0===Q||Q.markForCheck()})}_getPath(I){return this._parent?function Yi(j,f){return[...f.path,j]}(I,this._parent):[I]}}return j.\u0275fac=function(I){return new(I||j)(a.Y36(Yt,9),a.Y36(Oe,10),a.Y36(J,10),a.Y36(ut,10),a.Y36(a.sBO,8),a.Y36(Fi,8))},j.\u0275dir=a.lG2({type:j,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[a._Bn([nn]),a.qOj,a.TTD]}),j})(),gi=(()=>{class j{}return j.\u0275fac=function(I){return new(I||j)},j.\u0275mod=a.oAB({type:j}),j.\u0275inj=a.cJS({}),j})(),or=(()=>{class j{}return j.\u0275fac=function(I){return new(I||j)},j.\u0275mod=a.oAB({type:j}),j.\u0275inj=a.cJS({imports:[gi]}),j})(),qt=(()=>{class j{static withConfig(I){var y;return{ngModule:j,providers:[{provide:Fi,useValue:null!==(y=I.callSetDisabledState)&&void 0!==y?y:Li}]}}}return j.\u0275fac=function(I){return new(I||j)},j.\u0275mod=a.oAB({type:j}),j.\u0275inj=a.cJS({imports:[or]}),j})()},1481:(ln,ft,$)=>{"use strict";$.d(ft,{Dx:()=>xn,b2:()=>Zr,q6:()=>_r});var a=$(6895),te=$(4650);class z extends a.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Te extends z{static makeCurrent(){(0,a.HT)(new Te)}onAndCancel($e,ge,yt){return $e.addEventListener(ge,yt,!1),()=>{$e.removeEventListener(ge,yt,!1)}}dispatchEvent($e,ge){$e.dispatchEvent(ge)}remove($e){$e.parentNode&&$e.parentNode.removeChild($e)}createElement($e,ge){return(ge=ge||this.getDefaultDocument()).createElement($e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode($e){return $e.nodeType===Node.ELEMENT_NODE}isShadowRoot($e){return $e instanceof DocumentFragment}getGlobalEventTarget($e,ge){return"window"===ge?window:"document"===ge?$e:"body"===ge?$e.body:null}getBaseHref($e){const ge=function Se(){return xe=xe||document.querySelector("base"),xe?xe.getAttribute("href"):null}();return null==ge?null:function Ae(Be){de=de||document.createElement("a"),de.setAttribute("href",Be);const $e=de.pathname;return"/"===$e.charAt(0)?$e:`/${$e}`}(ge)}resetBaseElement(){xe=null}getUserAgent(){return window.navigator.userAgent}getCookie($e){return(0,a.Mx)(document.cookie,$e)}}let de,xe=null;const Ue=new te.OlP("TRANSITION_ID"),fe=[{provide:te.ip1,useFactory:function me(Be,$e,ge){return()=>{ge.get(te.CZH).donePromise.then(()=>{const yt=(0,a.q)(),Ot=$e.querySelectorAll(`style[ng-transition="${Be}"]`);for(let Ht=0;Ht<Ot.length;Ht++)yt.remove(Ot[Ht])})}},deps:[Ue,a.K0,te.zs3],multi:!0}];let ke=(()=>{class Be{build(){return new XMLHttpRequest}}return Be.\u0275fac=function(ge){return new(ge||Be)},Be.\u0275prov=te.Yz7({token:Be,factory:Be.\u0275fac}),Be})();const Ge=new te.OlP("EventManagerPlugins");let ut=(()=>{class Be{constructor(ge,yt){this._zone=yt,this._eventNameToPlugin=new Map,ge.forEach(Ot=>{Ot.manager=this}),this._plugins=ge.slice().reverse()}addEventListener(ge,yt,Ot){return this._findPluginFor(yt).addEventListener(ge,yt,Ot)}addGlobalEventListener(ge,yt,Ot){return this._findPluginFor(yt).addGlobalEventListener(ge,yt,Ot)}getZone(){return this._zone}_findPluginFor(ge){const yt=this._eventNameToPlugin.get(ge);if(yt)return yt;const Ot=this._plugins;for(let Ht=0;Ht<Ot.length;Ht++){const On=Ot[Ht];if(On.supports(ge))return this._eventNameToPlugin.set(ge,On),On}throw new Error(`No event manager plugin found for event ${ge}`)}}return Be.\u0275fac=function(ge){return new(ge||Be)(te.LFG(Ge),te.LFG(te.R0b))},Be.\u0275prov=te.Yz7({token:Be,factory:Be.\u0275fac}),Be})();class Dt{constructor($e){this._doc=$e}addGlobalEventListener($e,ge,yt){const Ot=(0,a.q)().getGlobalEventTarget(this._doc,$e);if(!Ot)throw new Error(`Unsupported event target ${Ot} for event ${ge}`);return this.addEventListener(Ot,ge,yt)}}let Me=(()=>{class Be{constructor(){this.usageCount=new Map}addStyles(ge){for(const yt of ge)1===this.changeUsageCount(yt,1)&&this.onStyleAdded(yt)}removeStyles(ge){for(const yt of ge)0===this.changeUsageCount(yt,-1)&&this.onStyleRemoved(yt)}onStyleRemoved(ge){}onStyleAdded(ge){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(ge,yt){var Ot;const Ht=this.usageCount;let On=null!==(Ot=Ht.get(ge))&&void 0!==Ot?Ot:0;return On+=yt,On>0?Ht.set(ge,On):Ht.delete(ge),On}ngOnDestroy(){for(const ge of this.getAllStyles())this.onStyleRemoved(ge);this.usageCount.clear()}}return Be.\u0275fac=function(ge){return new(ge||Be)},Be.\u0275prov=te.Yz7({token:Be,factory:Be.\u0275fac}),Be})(),ve=(()=>{class Be extends Me{constructor(ge){super(),this.doc=ge,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(ge){for(const yt of this.hostNodes)this.addStyleToHost(yt,ge)}onStyleRemoved(ge){const yt=this.styleRef,Ot=yt.get(ge);null==Ot||Ot.forEach(Ht=>Ht.remove()),yt.delete(ge)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(ge){this.hostNodes.add(ge);for(const yt of this.getAllStyles())this.addStyleToHost(ge,yt)}removeHost(ge){this.hostNodes.delete(ge)}addStyleToHost(ge,yt){const Ot=this.doc.createElement("style");Ot.textContent=yt,ge.appendChild(Ot);const Ht=this.styleRef.get(yt);Ht?Ht.push(Ot):this.styleRef.set(yt,[Ot])}resetHostNodes(){const ge=this.hostNodes;ge.clear(),ge.add(this.doc.head)}}return Be.\u0275fac=function(ge){return new(ge||Be)(te.LFG(a.K0))},Be.\u0275prov=te.Yz7({token:Be,factory:Be.\u0275fac}),Be})();const le={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},at=/%COMP%/g,J=new te.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function je(Be,$e){return $e.flat(100).map(ge=>ge.replace(at,Be))}function Ke(Be){return $e=>{if("__ngUnwrap__"===$e)return Be;!1===Be($e)&&($e.preventDefault(),$e.returnValue=!1)}}let tt=(()=>{class Be{constructor(ge,yt,Ot,Ht){this.eventManager=ge,this.sharedStylesHost=yt,this.appId=Ot,this.removeStylesOnCompDestory=Ht,this.rendererByCompId=new Map,this.defaultRenderer=new W(ge)}createRenderer(ge,yt){if(!ge||!yt)return this.defaultRenderer;const Ot=this.getOrCreateRenderer(ge,yt);return Ot instanceof Je?Ot.applyToHost(ge):Ot instanceof be&&Ot.applyStyles(),Ot}getOrCreateRenderer(ge,yt){const Ot=this.rendererByCompId;let Ht=Ot.get(yt.id);if(!Ht){const On=this.eventManager,Wn=this.sharedStylesHost,fr=this.removeStylesOnCompDestory;switch(yt.encapsulation){case te.ifc.Emulated:Ht=new Je(On,Wn,yt,this.appId,fr);break;case te.ifc.ShadowDom:return new we(On,Wn,ge,yt);default:Ht=new be(On,Wn,yt,fr)}Ht.onDestroy=()=>Ot.delete(yt.id),Ot.set(yt.id,Ht)}return Ht}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return Be.\u0275fac=function(ge){return new(ge||Be)(te.LFG(ut),te.LFG(ve),te.LFG(te.AFp),te.LFG(J))},Be.\u0275prov=te.Yz7({token:Be,factory:Be.\u0275fac}),Be})();class W{constructor($e){this.eventManager=$e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement($e,ge){return ge?document.createElementNS(le[ge]||ge,$e):document.createElement($e)}createComment($e){return document.createComment($e)}createText($e){return document.createTextNode($e)}appendChild($e,ge){(Ie($e)?$e.content:$e).appendChild(ge)}insertBefore($e,ge,yt){$e&&(Ie($e)?$e.content:$e).insertBefore(ge,yt)}removeChild($e,ge){$e&&$e.removeChild(ge)}selectRootElement($e,ge){let yt="string"==typeof $e?document.querySelector($e):$e;if(!yt)throw new Error(`The selector "${$e}" did not match any elements`);return ge||(yt.textContent=""),yt}parentNode($e){return $e.parentNode}nextSibling($e){return $e.nextSibling}setAttribute($e,ge,yt,Ot){if(Ot){ge=Ot+":"+ge;const Ht=le[Ot];Ht?$e.setAttributeNS(Ht,ge,yt):$e.setAttribute(ge,yt)}else $e.setAttribute(ge,yt)}removeAttribute($e,ge,yt){if(yt){const Ot=le[yt];Ot?$e.removeAttributeNS(Ot,ge):$e.removeAttribute(`${yt}:${ge}`)}else $e.removeAttribute(ge)}addClass($e,ge){$e.classList.add(ge)}removeClass($e,ge){$e.classList.remove(ge)}setStyle($e,ge,yt,Ot){Ot&(te.JOm.DashCase|te.JOm.Important)?$e.style.setProperty(ge,yt,Ot&te.JOm.Important?"important":""):$e.style[ge]=yt}removeStyle($e,ge,yt){yt&te.JOm.DashCase?$e.style.removeProperty(ge):$e.style[ge]=""}setProperty($e,ge,yt){$e[ge]=yt}setValue($e,ge){$e.nodeValue=ge}listen($e,ge,yt){return"string"==typeof $e?this.eventManager.addGlobalEventListener($e,ge,Ke(yt)):this.eventManager.addEventListener($e,ge,Ke(yt))}}function Ie(Be){return"TEMPLATE"===Be.tagName&&void 0!==Be.content}class we extends W{constructor($e,ge,yt,Ot){super($e),this.sharedStylesHost=ge,this.hostEl=yt,this.shadowRoot=yt.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Ht=je(Ot.id,Ot.styles);for(const On of Ht){const Wn=document.createElement("style");Wn.textContent=On,this.shadowRoot.appendChild(Wn)}}nodeOrShadowRoot($e){return $e===this.hostEl?this.shadowRoot:$e}appendChild($e,ge){return super.appendChild(this.nodeOrShadowRoot($e),ge)}insertBefore($e,ge,yt){return super.insertBefore(this.nodeOrShadowRoot($e),ge,yt)}removeChild($e,ge){return super.removeChild(this.nodeOrShadowRoot($e),ge)}parentNode($e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot($e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class be extends W{constructor($e,ge,yt,Ot,Ht=yt.id){super($e),this.sharedStylesHost=ge,this.removeStylesOnCompDestory=Ot,this.rendererUsageCount=0,this.styles=je(Ht,yt.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){var $e;this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount)&&(null===($e=this.onDestroy)||void 0===$e||$e.call(this))}}class Je extends be{constructor($e,ge,yt,Ot,Ht){const On=Ot+"-"+yt.id;super($e,ge,yt,Ht,On),this.contentAttr=function Xe(Be){return"_ngcontent-%COMP%".replace(at,Be)}(On),this.hostAttr=function Fe(Be){return"_nghost-%COMP%".replace(at,Be)}(On)}applyToHost($e){this.applyStyles(),this.setAttribute($e,this.hostAttr,"")}createElement($e,ge){const yt=super.createElement($e,ge);return super.setAttribute(yt,this.contentAttr,""),yt}}let Le=(()=>{class Be extends Dt{constructor(ge){super(ge)}supports(ge){return!0}addEventListener(ge,yt,Ot){return ge.addEventListener(yt,Ot,!1),()=>this.removeEventListener(ge,yt,Ot)}removeEventListener(ge,yt,Ot){return ge.removeEventListener(yt,Ot)}}return Be.\u0275fac=function(ge){return new(ge||Be)(te.LFG(a.K0))},Be.\u0275prov=te.Yz7({token:Be,factory:Be.\u0275fac}),Be})();const rt=["alt","control","meta","shift"],He={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Pt={alt:Be=>Be.altKey,control:Be=>Be.ctrlKey,meta:Be=>Be.metaKey,shift:Be=>Be.shiftKey};let St=(()=>{class Be extends Dt{constructor(ge){super(ge)}supports(ge){return null!=Be.parseEventName(ge)}addEventListener(ge,yt,Ot){const Ht=Be.parseEventName(yt),On=Be.eventCallback(Ht.fullKey,Ot,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,a.q)().onAndCancel(ge,Ht.domEventName,On))}static parseEventName(ge){const yt=ge.toLowerCase().split("."),Ot=yt.shift();if(0===yt.length||"keydown"!==Ot&&"keyup"!==Ot)return null;const Ht=Be._normalizeKey(yt.pop());let On="",Wn=yt.indexOf("code");if(Wn>-1&&(yt.splice(Wn,1),On="code."),rt.forEach(Fi=>{const Li=yt.indexOf(Fi);Li>-1&&(yt.splice(Li,1),On+=Fi+".")}),On+=Ht,0!=yt.length||0===Ht.length)return null;const fr={};return fr.domEventName=Ot,fr.fullKey=On,fr}static matchEventFullKeyCode(ge,yt){let Ot=He[ge.key]||ge.key,Ht="";return yt.indexOf("code.")>-1&&(Ot=ge.code,Ht="code."),!(null==Ot||!Ot)&&(Ot=Ot.toLowerCase()," "===Ot?Ot="space":"."===Ot&&(Ot="dot"),rt.forEach(On=>{On!==Ot&&(0,Pt[On])(ge)&&(Ht+=On+".")}),Ht+=Ot,Ht===yt)}static eventCallback(ge,yt,Ot){return Ht=>{Be.matchEventFullKeyCode(Ht,ge)&&Ot.runGuarded(()=>yt(Ht))}}static _normalizeKey(ge){return"esc"===ge?"escape":ge}}return Be.\u0275fac=function(ge){return new(ge||Be)(te.LFG(a.K0))},Be.\u0275prov=te.Yz7({token:Be,factory:Be.\u0275fac}),Be})();const _r=(0,te.eFA)(te._c5,"browser",[{provide:te.Lbi,useValue:a.bD},{provide:te.g9A,useValue:function Un(){Te.makeCurrent()},multi:!0},{provide:a.K0,useFactory:function nr(){return(0,te.RDi)(document),document},deps:[]}]),gn=new te.OlP(""),dr=[{provide:te.rWj,useClass:class pe{addToWindow($e){te.dqk.getAngularTestability=(yt,Ot=!0)=>{const Ht=$e.findTestabilityInTree(yt,Ot);if(null==Ht)throw new Error("Could not find testability for element.");return Ht},te.dqk.getAllAngularTestabilities=()=>$e.getAllTestabilities(),te.dqk.getAllAngularRootElements=()=>$e.getAllRootElements(),te.dqk.frameworkStabilizers||(te.dqk.frameworkStabilizers=[]),te.dqk.frameworkStabilizers.push(yt=>{const Ot=te.dqk.getAllAngularTestabilities();let Ht=Ot.length,On=!1;const Wn=function(fr){On=On||fr,Ht--,0==Ht&&yt(On)};Ot.forEach(function(fr){fr.whenStable(Wn)})})}findTestabilityInTree($e,ge,yt){if(null==ge)return null;const Ot=$e.getTestability(ge);return null!=Ot?Ot:yt?(0,a.q)().isShadowRoot(ge)?this.findTestabilityInTree($e,ge.host,!0):this.findTestabilityInTree($e,ge.parentElement,!0):null}},deps:[]},{provide:te.lri,useClass:te.dDg,deps:[te.R0b,te.eoX,te.rWj]},{provide:te.dDg,useClass:te.dDg,deps:[te.R0b,te.eoX,te.rWj]}],Yt=[{provide:te.zSh,useValue:"root"},{provide:te.qLn,useFactory:function Qt(){return new te.qLn},deps:[]},{provide:Ge,useClass:Le,multi:!0,deps:[a.K0,te.R0b,te.Lbi]},{provide:Ge,useClass:St,multi:!0,deps:[a.K0]},{provide:tt,useClass:tt,deps:[ut,ve,te.AFp,J]},{provide:te.FYo,useExisting:tt},{provide:Me,useExisting:ve},{provide:ve,useClass:ve,deps:[a.K0]},{provide:ut,useClass:ut,deps:[Ge,te.R0b]},{provide:a.JF,useClass:ke,deps:[]},[]];let Zr=(()=>{class Be{constructor(ge){}static withServerTransition(ge){return{ngModule:Be,providers:[{provide:te.AFp,useValue:ge.appId},{provide:Ue,useExisting:te.AFp},fe]}}}return Be.\u0275fac=function(ge){return new(ge||Be)(te.LFG(gn,12))},Be.\u0275mod=te.oAB({type:Be}),Be.\u0275inj=te.cJS({providers:[...Yt,...dr],imports:[a.ez,te.hGG]}),Be})(),xn=(()=>{class Be{constructor(ge){this._doc=ge}getTitle(){return this._doc.title}setTitle(ge){this._doc.title=ge||""}}return Be.\u0275fac=function(ge){return new(ge||Be)(te.LFG(a.K0))},Be.\u0275prov=te.Yz7({token:Be,factory:function(ge){let yt=null;return yt=ge?new ge:function Ar(){return new xn((0,te.LFG)(a.K0))}(),yt},providedIn:"root"}),Be})();typeof window<"u"&&window},2435:(ln,ft,$)=>{"use strict";$.d(ft,{gz:()=>ms,y6:()=>cs,OD:()=>Lt,eC:()=>Qt,wm:()=>wu,wN:()=>ul,F0:()=>es,rH:()=>pa,Bz:()=>Fl,Hx:()=>Mn});var a=$(4650),te=$(8996),z=$(9646),Te=$(1135),xe=$(6805),Se=$(9751),de=$(4742),Ae=$(4671),Ue=$(3268),me=$(7669),fe=$(1810),pe=$(5403),ke=$(9672);function Ge(...T){const x=(0,me.yG)(T),w=(0,me.jO)(T),{args:M,keys:V}=(0,de.D)(T);if(0===M.length)return(0,te.D)([],x);const X=new Se.y(function ut(T,x,w=Ae.y){return M=>{Dt(x,()=>{const{length:V}=T,X=new Array(V);let ie=V,Ze=V;for(let At=0;At<V;At++)Dt(x,()=>{const on=(0,te.D)(T[At],x);let Rn=!1;on.subscribe((0,pe.x)(M,wn=>{X[At]=wn,Rn||(Rn=!0,Ze--),Ze||M.next(w(X.slice()))},()=>{--ie||M.complete()}))},M)},M)}}(M,x,V?ie=>(0,fe.n)(V,ie):Ae.y));return w?X.pipe((0,Ue.Z)(w)):X}function Dt(T,x,w){T?(0,ke.f)(w,T,x):x()}var Me=$(7272),ve=$(8421);function le(T){return new Se.y(x=>{(0,ve.Xf)(T()).subscribe(x)})}var at=$(9635),st=$(576);function et(T,x){const w=(0,st.m)(T)?T:()=>T,M=V=>V.error(w());return new Se.y(x?V=>x.schedule(M,0,V):M)}var Qe=$(515),Pe=$(727),Oe=$(4482);function J(){return(0,Oe.e)((T,x)=>{let w=null;T._refCount++;const M=(0,pe.x)(x,void 0,void 0,void 0,()=>{if(!T||T._refCount<=0||0<--T._refCount)return void(w=null);const V=T._connection,X=w;w=null,V&&(!X||V===X)&&V.unsubscribe(),x.unsubscribe()});T.subscribe(M),M.closed||(w=T.connect())})}class Xe extends Se.y{constructor(x,w){super(),this.source=x,this.subjectFactory=w,this._subject=null,this._refCount=0,this._connection=null,(0,Oe.A)(x)&&(this.lift=x.lift)}_subscribe(x){return this.getSubject().subscribe(x)}getSubject(){const x=this._subject;return(!x||x.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:x}=this;this._subject=this._connection=null,null==x||x.unsubscribe()}connect(){let x=this._connection;if(!x){x=this._connection=new Pe.w0;const w=this.getSubject();x.add(this.source.subscribe((0,pe.x)(w,void 0,()=>{this._teardown(),w.complete()},M=>{this._teardown(),w.error(M)},()=>this._teardown()))),x.closed&&(this._connection=null,x=Pe.w0.EMPTY)}return x}refCount(){return J()(this)}}var Fe=$(7579),je=$(6895),Ke=$(4004),tt=$(3900),W=$(5698),pt=$(8675),nt=$(9300),Ie=$(5577),we=$(590);function be(T,x){return(0,st.m)(x)?(0,Ie.z)(T,x,1):(0,Ie.z)(T,1)}var Je=$(8505);function Le(T){return(0,Oe.e)((x,w)=>{let X,M=null,V=!1;M=x.subscribe((0,pe.x)(w,void 0,void 0,ie=>{X=(0,ve.Xf)(T(ie,Le(T)(x))),M?(M.unsubscribe(),M=null,X.subscribe(w)):V=!0})),V&&(M.unsubscribe(),M=null,X.subscribe(w))})}var rt=$(5026);function He(T){return T<=0?()=>Qe.E:(0,Oe.e)((x,w)=>{let M=[];x.subscribe((0,pe.x)(w,V=>{M.push(V),T<M.length&&M.shift()},()=>{for(const V of M)w.next(V);w.complete()},void 0,()=>{M=null}))})}var Pt=$(8068),St=$(6590);function Nt(T,x){const w=arguments.length>=2;return M=>M.pipe(T?(0,nt.h)((V,X)=>T(V,X,M)):Ae.y,He(1),w?(0,St.d)(x):(0,Pt.T)(()=>new xe.K))}function Dn(T){return(0,Oe.e)((x,w)=>{try{x.subscribe(w)}finally{w.add(T)}})}var Ln=$(8189),Un=$(1481);const Qt="primary",nr=Symbol("RouteTitle");class Cr{constructor(x){this.params=x||{}}has(x){return Object.prototype.hasOwnProperty.call(this.params,x)}get(x){if(this.has(x)){const w=this.params[x];return Array.isArray(w)?w[0]:w}return null}getAll(x){if(this.has(x)){const w=this.params[x];return Array.isArray(w)?w:[w]}return[]}get keys(){return Object.keys(this.params)}}function _r(T){return new Cr(T)}function gn(T,x,w){const M=w.path.split("/");if(M.length>T.length||"full"===w.pathMatch&&(x.hasChildren()||M.length<T.length))return null;const V={};for(let X=0;X<M.length;X++){const ie=M[X],Ze=T[X];if(ie.startsWith(":"))V[ie.substring(1)]=Ze;else if(ie!==Ze.path)return null}return{consumed:T.slice(0,M.length),posParams:V}}function Yt(T,x){const w=T?Object.keys(T):void 0,M=x?Object.keys(x):void 0;if(!w||!M||w.length!=M.length)return!1;let V;for(let X=0;X<w.length;X++)if(V=w[X],!Zr(T[V],x[V]))return!1;return!0}function Zr(T,x){if(Array.isArray(T)&&Array.isArray(x)){if(T.length!==x.length)return!1;const w=[...T].sort(),M=[...x].sort();return w.every((V,X)=>M[X]===V)}return T===x}function Tr(T){return Array.prototype.concat.apply([],T)}function br(T){return T.length>0?T[T.length-1]:null}function Ar(T,x){for(const w in T)T.hasOwnProperty(w)&&x(T[w],w)}function xn(T){return(0,a.CqO)(T)?T:(0,a.QGY)(T)?(0,te.D)(Promise.resolve(T)):(0,z.of)(T)}const En=!1,Tn={exact:function Gt(T,x,w){if(!$t(T.segments,x.segments)||!ui(T.segments,x.segments,w)||T.numberOfChildren!==x.numberOfChildren)return!1;for(const M in x.children)if(!T.children[M]||!Gt(T.children[M],x.children[M],w))return!1;return!0},subset:Gi},xr={exact:function jr(T,x){return Yt(T,x)},subset:function yi(T,x){return Object.keys(x).length<=Object.keys(T).length&&Object.keys(x).every(w=>Zr(T[w],x[w]))},ignored:()=>!0};function Cn(T,x,w){return Tn[w.paths](T.root,x.root,w.matrixParams)&&xr[w.queryParams](T.queryParams,x.queryParams)&&!("exact"===w.fragment&&T.fragment!==x.fragment)}function Gi(T,x,w){return Sr(T,x,x.segments,w)}function Sr(T,x,w,M){if(T.segments.length>w.length){const V=T.segments.slice(0,w.length);return!(!$t(V,w)||x.hasChildren()||!ui(V,w,M))}if(T.segments.length===w.length){if(!$t(T.segments,w)||!ui(T.segments,w,M))return!1;for(const V in x.children)if(!T.children[V]||!Gi(T.children[V],x.children[V],M))return!1;return!0}{const V=w.slice(0,T.segments.length),X=w.slice(T.segments.length);return!!($t(T.segments,V)&&ui(T.segments,V,M)&&T.children[Qt])&&Sr(T.children[Qt],x,X,M)}}function ui(T,x,w){return x.every((M,V)=>xr[w](T[V].parameters,M.parameters))}class sr{constructor(x=new kn([],{}),w={},M=null){this.root=x,this.queryParams=w,this.fragment=M}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_r(this.queryParams)),this._queryParamMap}toString(){return jn.serialize(this)}}class kn{constructor(x,w){this.segments=x,this.children=w,this.parent=null,Ar(w,(M,V)=>M.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Or(this)}}class hi{constructor(x,w){this.path=x,this.parameters=w}get parameterMap(){return this._parameterMap||(this._parameterMap=_r(this.parameters)),this._parameterMap}toString(){return $e(this)}}function $t(T,x){return T.length===x.length&&T.every((w,M)=>w.path===x[M].path)}let Mn=(()=>{class T{}return T.\u0275fac=function(w){return new(w||T)},T.\u0275prov=a.Yz7({token:T,factory:function(){return new Pn},providedIn:"root"}),T})();class Pn{parse(x){const w=new Li(x);return new sr(w.parseRootSegment(),w.parseQueryParams(),w.parseFragment())}serialize(x){const w=`/${Re(x.root,!0)}`,M=function yt(T){const x=Object.keys(T).map(w=>{const M=T[w];return Array.isArray(M)?M.map(V=>`${We(w)}=${We(V)}`).join("&"):`${We(w)}=${We(M)}`}).filter(w=>!!w);return x.length?`?${x.join("&")}`:""}(x.queryParams);return`${w}${M}${"string"==typeof x.fragment?`#${function Rt(T){return encodeURI(T)}(x.fragment)}`:""}`}}const jn=new Pn;function Or(T){return T.segments.map(x=>$e(x)).join("/")}function Re(T,x){if(!T.hasChildren())return Or(T);if(x){const w=T.children[Qt]?Re(T.children[Qt],!1):"",M=[];return Ar(T.children,(V,X)=>{X!==Qt&&M.push(`${X}:${Re(V,!1)}`)}),M.length>0?`${w}(${M.join("//")})`:w}{const w=function yn(T,x){let w=[];return Ar(T.children,(M,V)=>{V===Qt&&(w=w.concat(x(M,V)))}),Ar(T.children,(M,V)=>{V!==Qt&&(w=w.concat(x(M,V)))}),w}(T,(M,V)=>V===Qt?[Re(T.children[Qt],!1)]:[`${V}:${Re(M,!1)}`]);return 1===Object.keys(T.children).length&&null!=T.children[Qt]?`${Or(T)}/${w[0]}`:`${Or(T)}/(${w.join("//")})`}}function Ee(T){return encodeURIComponent(T).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function We(T){return Ee(T).replace(/%3B/gi,";")}function vt(T){return Ee(T).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hn(T){return decodeURIComponent(T)}function Be(T){return hn(T.replace(/\+/g,"%20"))}function $e(T){return`${vt(T.path)}${function ge(T){return Object.keys(T).map(x=>`;${vt(x)}=${vt(T[x])}`).join("")}(T.parameters)}`}const Ot=/^[^\/()?;=#]+/;function Ht(T){const x=T.match(Ot);return x?x[0]:""}const On=/^[^=?&#]+/,fr=/^[^&#]+/;class Li{constructor(x){this.url=x,this.remaining=x}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new kn([],{}):new kn([],this.parseChildren())}parseQueryParams(){const x={};if(this.consumeOptional("?"))do{this.parseQueryParam(x)}while(this.consumeOptional("&"));return x}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const x=[];for(this.peekStartsWith("(")||x.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),x.push(this.parseSegment());let w={};this.peekStartsWith("/(")&&(this.capture("/"),w=this.parseParens(!0));let M={};return this.peekStartsWith("(")&&(M=this.parseParens(!1)),(x.length>0||Object.keys(w).length>0)&&(M[Qt]=new kn(x,w)),M}parseSegment(){const x=Ht(this.remaining);if(""===x&&this.peekStartsWith(";"))throw new a.vHH(4009,En);return this.capture(x),new hi(hn(x),this.parseMatrixParams())}parseMatrixParams(){const x={};for(;this.consumeOptional(";");)this.parseParam(x);return x}parseParam(x){const w=Ht(this.remaining);if(!w)return;this.capture(w);let M="";if(this.consumeOptional("=")){const V=Ht(this.remaining);V&&(M=V,this.capture(M))}x[hn(w)]=hn(M)}parseQueryParam(x){const w=function Wn(T){const x=T.match(On);return x?x[0]:""}(this.remaining);if(!w)return;this.capture(w);let M="";if(this.consumeOptional("=")){const ie=function Fi(T){const x=T.match(fr);return x?x[0]:""}(this.remaining);ie&&(M=ie,this.capture(M))}const V=Be(w),X=Be(M);if(x.hasOwnProperty(V)){let ie=x[V];Array.isArray(ie)||(ie=[ie],x[V]=ie),ie.push(X)}else x[V]=X}parseParens(x){const w={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const M=Ht(this.remaining),V=this.remaining[M.length];if("/"!==V&&")"!==V&&";"!==V)throw new a.vHH(4010,En);let X;M.indexOf(":")>-1?(X=M.slice(0,M.indexOf(":")),this.capture(X),this.capture(":")):x&&(X=Qt);const ie=this.parseChildren();w[X]=1===Object.keys(ie).length?ie[Qt]:new kn([],ie),this.consumeOptional("//")}return w}peekStartsWith(x){return this.remaining.startsWith(x)}consumeOptional(x){return!!this.peekStartsWith(x)&&(this.remaining=this.remaining.substring(x.length),!0)}capture(x){if(!this.consumeOptional(x))throw new a.vHH(4011,En)}}function Yi(T){return T.segments.length>0?new kn([],{[Qt]:T}):T}function fi(T){const x={};for(const M of Object.keys(T.children)){const X=fi(T.children[M]);(X.segments.length>0||X.hasChildren())&&(x[M]=X)}return function Ri(T){if(1===T.numberOfChildren&&T.children[Qt]){const x=T.children[Qt];return new kn(T.segments.concat(x.segments),x.children)}return T}(new kn(T.segments,x))}function Pr(T){return T instanceof sr}const ls=!1;function Nr(T,x,w,M,V){var X;if(0===w.length)return Mr(x.root,x.root,x.root,M,V);const ie=function $r(T){if("string"==typeof T[0]&&1===T.length&&"/"===T[0])return new Xn(!0,0,T);let x=0,w=!1;const M=T.reduce((V,X,ie)=>{if("object"==typeof X&&null!=X){if(X.outlets){const Ze={};return Ar(X.outlets,(At,on)=>{Ze[on]="string"==typeof At?At.split("/"):At}),[...V,{outlets:Ze}]}if(X.segmentPath)return[...V,X.segmentPath]}return"string"!=typeof X?[...V,X]:0===ie?(X.split("/").forEach((Ze,At)=>{0==At&&"."===Ze||(0==At&&""===Ze?w=!0:".."===Ze?x++:""!=Ze&&V.push(Ze))}),V):[...V,X]},[]);return new Xn(w,x,M)}(w);return ie.toRoot()?Mr(x.root,x.root,new kn([],{}),M,V):function Ze(on){var Rn;const wn=function Hr(T,x,w,M){if(T.isAbsolute)return new Qr(x.root,!0,0);if(-1===M)return new Qr(w,w===x.root,0);return function wi(T,x,w){let M=T,V=x,X=w;for(;X>V;){if(X-=V,M=M.parent,!M)throw new a.vHH(4005,ls&&"Invalid number of '../'");V=M.segments.length}return new Qr(M,!1,V-X)}(w,M+(vi(T.commands[0])?0:1),T.numberOfDoubleDots)}(ie,x,null===(Rn=T.snapshot)||void 0===Rn?void 0:Rn._urlSegment,on),F=wn.processChildren?he(wn.segmentGroup,wn.index,ie.commands):ne(wn.segmentGroup,wn.index,ie.commands);return Mr(x.root,wn.segmentGroup,F,M,V)}(null===(X=T.snapshot)||void 0===X?void 0:X._lastPathIndex)}function vi(T){return"object"==typeof T&&null!=T&&!T.outlets&&!T.segmentPath}function ri(T){return"object"==typeof T&&null!=T&&T.outlets}function Mr(T,x,w,M,V){let ie,X={};M&&Ar(M,(At,on)=>{X[on]=Array.isArray(At)?At.map(Rn=>`${Rn}`):`${At}`}),ie=T===x?w:fn(T,x,w);const Ze=Yi(fi(ie));return new sr(Ze,X,V)}function fn(T,x,w){const M={};return Ar(T.children,(V,X)=>{M[X]=V===x?w:fn(V,x,w)}),new kn(T.segments,M)}class Xn{constructor(x,w,M){if(this.isAbsolute=x,this.numberOfDoubleDots=w,this.commands=M,x&&M.length>0&&vi(M[0]))throw new a.vHH(4003,ls&&"Root segment cannot have matrix parameters");const V=M.find(ri);if(V&&V!==br(M))throw new a.vHH(4004,ls&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Qr{constructor(x,w,M){this.segmentGroup=x,this.processChildren=w,this.index=M}}function ne(T,x,w){if(T||(T=new kn([],{})),0===T.segments.length&&T.hasChildren())return he(T,x,w);const M=function Ne(T,x,w){let M=0,V=x;const X={match:!1,pathIndex:0,commandIndex:0};for(;V<T.segments.length;){if(M>=w.length)return X;const ie=T.segments[V],Ze=w[M];if(ri(Ze))break;const At=`${Ze}`,on=M<w.length-1?w[M+1]:null;if(V>0&&void 0===At)break;if(At&&on&&"object"==typeof on&&void 0===on.outlets){if(!Ye(At,on,ie))return X;M+=2}else{if(!Ye(At,{},ie))return X;M++}V++}return{match:!0,pathIndex:V,commandIndex:M}}(T,x,w),V=w.slice(M.commandIndex);if(M.match&&M.pathIndex<T.segments.length){const X=new kn(T.segments.slice(0,M.pathIndex),{});return X.children[Qt]=new kn(T.segments.slice(M.pathIndex),T.children),he(X,0,V)}return M.match&&0===V.length?new kn(T.segments,{}):M.match&&!T.hasChildren()?lt(T,x,w):M.match?he(T,0,V):lt(T,x,w)}function he(T,x,w){if(0===w.length)return new kn(T.segments,{});{const M=function Gr(T){return ri(T[0])?T[0].outlets:{[Qt]:T}}(w),V={};return!M[Qt]&&T.children[Qt]&&1===T.numberOfChildren&&0===T.children[Qt].segments.length?he(T.children[Qt],x,w):(Ar(M,(X,ie)=>{"string"==typeof X&&(X=[X]),null!==X&&(V[ie]=ne(T.children[ie],x,X))}),Ar(T.children,(X,ie)=>{void 0===M[ie]&&(V[ie]=X)}),new kn(T.segments,V))}}function lt(T,x,w){const M=T.segments.slice(0,x);let V=0;for(;V<w.length;){const X=w[V];if(ri(X)){const At=Mt(X.outlets);return new kn(M,At)}if(0===V&&vi(w[0])){M.push(new hi(T.segments[x].path,ce(w[0]))),V++;continue}const ie=ri(X)?X.outlets[Qt]:`${X}`,Ze=V<w.length-1?w[V+1]:null;ie&&Ze&&vi(Ze)?(M.push(new hi(ie,ce(Ze))),V+=2):(M.push(new hi(ie,{})),V++)}return new kn(M,{})}function Mt(T){const x={};return Ar(T,(w,M)=>{"string"==typeof w&&(w=[w]),null!==w&&(x[M]=lt(new kn([],{}),0,w))}),x}function ce(T){const x={};return Ar(T,(w,M)=>x[M]=`${w}`),x}function Ye(T,x,w){return T==w.path&&Yt(x,w.parameters)}const dt="imperative";class Ct{constructor(x,w){this.id=x,this.url=w}}class Lt extends Ct{constructor(x,w,M="imperative",V=null){super(x,w),this.type=0,this.navigationTrigger=M,this.restoredState=V}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class sn extends Ct{constructor(x,w,M){super(x,w),this.urlAfterRedirects=M,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Sn extends Ct{constructor(x,w,M,V){super(x,w),this.reason=M,this.code=V,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Bn extends Ct{constructor(x,w,M,V){super(x,w),this.reason=M,this.code=V,this.type=16}}class Yn extends Ct{constructor(x,w,M,V){super(x,w),this.error=M,this.target=V,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class pi extends Ct{constructor(x,w,M,V){super(x,w),this.urlAfterRedirects=M,this.state=V,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class it extends Ct{constructor(x,w,M,V){super(x,w),this.urlAfterRedirects=M,this.state=V,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qe extends Ct{constructor(x,w,M,V,X){super(x,w),this.urlAfterRedirects=M,this.state=V,this.shouldActivate=X,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class mt extends Ct{constructor(x,w,M,V){super(x,w),this.urlAfterRedirects=M,this.state=V,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ut extends Ct{constructor(x,w,M,V){super(x,w),this.urlAfterRedirects=M,this.state=V,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nn{constructor(x){this.route=x,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class In{constructor(x){this.route=x,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class rr{constructor(x){this.snapshot=x,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kr{constructor(x){this.snapshot=x,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Er{constructor(x){this.snapshot=x,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ir{constructor(x){this.snapshot=x,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pr{constructor(x,w,M){this.routerEvent=x,this.position=w,this.anchor=M,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let ii=(()=>{class T{createUrlTree(w,M,V,X,ie,Ze){return Nr(w||M.root,V,X,ie,Ze)}}return T.\u0275fac=function(w){return new(w||T)},T.\u0275prov=a.Yz7({token:T,factory:T.\u0275fac}),T})(),uo=(()=>{class T{}return T.\u0275fac=function(w){return new(w||T)},T.\u0275prov=a.Yz7({token:T,factory:function(x){return ii.\u0275fac(x)},providedIn:"root"}),T})();class Ls{constructor(x){this._root=x}get root(){return this._root.value}parent(x){const w=this.pathFromRoot(x);return w.length>1?w[w.length-2]:null}children(x){const w=Io(x,this._root);return w?w.children.map(M=>M.value):[]}firstChild(x){const w=Io(x,this._root);return w&&w.children.length>0?w.children[0].value:null}siblings(x){const w=Vr(x,this._root);return w.length<2?[]:w[w.length-2].children.map(V=>V.value).filter(V=>V!==x)}pathFromRoot(x){return Vr(x,this._root).map(w=>w.value)}}function Io(T,x){if(T===x.value)return x;for(const w of x.children){const M=Io(T,w);if(M)return M}return null}function Vr(T,x){if(T===x.value)return[x];for(const w of x.children){const M=Vr(T,w);if(M.length)return M.unshift(x),M}return[]}class Jn{constructor(x,w){this.value=x,this.children=w}toString(){return`TreeNode(${this.value})`}}function ni(T){const x={};return T&&T.children.forEach(w=>x[w.value.outlet]=w),x}class wo extends Ls{constructor(x,w){super(x),this.snapshot=w,Bs(this,x)}toString(){return this.snapshot.toString()}}function Co(T,x){const w=function Bi(T,x){const ie=new ns([],{},{},"",{},Qt,x,null,T.root,-1,{});return new Qs("",new Jn(ie,[]))}(T,x),M=new Te.X([new hi("",{})]),V=new Te.X({}),X=new Te.X({}),ie=new Te.X({}),Ze=new Te.X(""),At=new ms(M,V,ie,Ze,X,Qt,x,w.root);return At.snapshot=w.root,new wo(new Jn(At,[]),w)}class ms{constructor(x,w,M,V,X,ie,Ze,At){var on,Rn;this.url=x,this.params=w,this.queryParams=M,this.fragment=V,this.data=X,this.outlet=ie,this.component=Ze,this.title=null!==(on=null===(Rn=this.data)||void 0===Rn?void 0:Rn.pipe((0,Ke.U)(wn=>wn[nr])))&&void 0!==on?on:(0,z.of)(void 0),this._futureSnapshot=At}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ke.U)(x=>_r(x)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ke.U)(x=>_r(x)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ss(T,x="emptyOnly"){const w=T.pathFromRoot;let M=0;if("always"!==x)for(M=w.length-1;M>=1;){const V=w[M],X=w[M-1];if(V.routeConfig&&""===V.routeConfig.path)M--;else{if(X.component)break;M--}}return function Zs(T){return T.reduce((x,w)=>{var M;return{params:{...x.params,...w.params},data:{...x.data,...w.data},resolve:{...w.data,...x.resolve,...null===(M=w.routeConfig)||void 0===M?void 0:M.data,...w._resolvedData}}},{params:{},data:{},resolve:{}})}(w.slice(M))}class ns{get title(){var x;return null===(x=this.data)||void 0===x?void 0:x[nr]}constructor(x,w,M,V,X,ie,Ze,At,on,Rn,wn){this.url=x,this.params=w,this.queryParams=M,this.fragment=V,this.data=X,this.outlet=ie,this.component=Ze,this.routeConfig=At,this._urlSegment=on,this._lastPathIndex=Rn,this._resolve=wn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=_r(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_r(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(M=>M.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Qs extends Ls{constructor(x,w){super(w),this.url=x,Bs(this,w)}toString(){return ys(this._root)}}function Bs(T,x){x.value._routerState=T,x.children.forEach(w=>Bs(T,w))}function ys(T){const x=T.children.length>0?` { ${T.children.map(ys).join(", ")} } `:"";return`${T.value}${x}`}function Pi(T){if(T.snapshot){const x=T.snapshot,w=T._futureSnapshot;T.snapshot=w,Yt(x.queryParams,w.queryParams)||T.queryParams.next(w.queryParams),x.fragment!==w.fragment&&T.fragment.next(w.fragment),Yt(x.params,w.params)||T.params.next(w.params),function dr(T,x){if(T.length!==x.length)return!1;for(let w=0;w<T.length;++w)if(!Yt(T[w],x[w]))return!1;return!0}(x.url,w.url)||T.url.next(w.url),Yt(x.data,w.data)||T.data.next(w.data)}else T.snapshot=T._futureSnapshot,T.data.next(T._futureSnapshot.data)}function rs(T,x){const w=Yt(T.params,x.params)&&function rn(T,x){return $t(T,x)&&T.every((w,M)=>Yt(w.parameters,x[M].parameters))}(T.url,x.url);return w&&!(!T.parent!=!x.parent)&&(!T.parent||rs(T.parent,x.parent))}function is(T,x,w){if(w&&T.shouldReuseRoute(x.value,w.value.snapshot)){const M=w.value;M._futureSnapshot=x.value;const V=function Lo(T,x,w){return x.children.map(M=>{for(const V of w.children)if(T.shouldReuseRoute(M.value,V.value.snapshot))return is(T,M,V);return is(T,M)})}(T,x,w);return new Jn(M,V)}{if(T.shouldAttach(x.value)){const X=T.retrieve(x.value);if(null!==X){const ie=X.route;return ie.value._futureSnapshot=x.value,ie.children=x.children.map(Ze=>is(T,Ze)),ie}}const M=function zr(T){return new ms(new Te.X(T.url),new Te.X(T.params),new Te.X(T.queryParams),new Te.X(T.fragment),new Te.X(T.data),T.outlet,T.component,T)}(x.value),V=x.children.map(X=>is(T,X));return new Jn(M,V)}}const bi="ngNavigationCancelingError";function gr(T,x){const{redirectTo:w,navigationBehaviorOptions:M}=Pr(x)?{redirectTo:x,navigationBehaviorOptions:void 0}:x,V=us(!1,0,x);return V.url=w,V.navigationBehaviorOptions=M,V}function us(T,x,w){const M=new Error("NavigationCancelingError: "+(T||""));return M[bi]=!0,M.cancellationCode=x,w&&(M.url=w),M}function As(T){return ss(T)&&Pr(T.url)}function ss(T){return T&&T[bi]}class Ni{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new cs,this.attachRef=null}}let cs=(()=>{class T{constructor(){this.contexts=new Map}onChildOutletCreated(w,M){const V=this.getOrCreateContext(w);V.outlet=M,this.contexts.set(w,V)}onChildOutletDestroyed(w){const M=this.getContext(w);M&&(M.outlet=null,M.attachRef=null)}onOutletDeactivated(){const w=this.contexts;return this.contexts=new Map,w}onOutletReAttached(w){this.contexts=w}getOrCreateContext(w){let M=this.getContext(w);return M||(M=new Ni,this.contexts.set(w,M)),M}getContext(w){return this.contexts.get(w)||null}}return T.\u0275fac=function(w){return new(w||T)},T.\u0275prov=a.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();const Qi=!1;let Xi=(()=>{class T{constructor(){this.activated=null,this._activatedRoute=null,this.name=Qt,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.attachEvents=new a.vpe,this.detachEvents=new a.vpe,this.parentContexts=(0,a.f3M)(cs),this.location=(0,a.f3M)(a.s_b),this.changeDetector=(0,a.f3M)(a.sBO),this.environmentInjector=(0,a.f3M)(a.lqb)}ngOnChanges(w){if(w.name){const{firstChange:M,previousValue:V}=w.name;if(M)return;this.isTrackedInParentContexts(V)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(V)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(w){var M;return(null===(M=this.parentContexts.getContext(w))||void 0===M?void 0:M.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const w=this.parentContexts.getContext(this.name);null!=w&&w.route&&(w.attachRef?this.attach(w.attachRef,w.route):this.activateWith(w.route,w.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new a.vHH(4012,Qi);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new a.vHH(4012,Qi);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new a.vHH(4012,Qi);this.location.detach();const w=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(w.instance),w}attach(w,M){this.activated=w,this._activatedRoute=M,this.location.insert(w.hostView),this.attachEvents.emit(w.instance)}deactivate(){if(this.activated){const w=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(w)}}activateWith(w,M){if(this.isActivated)throw new a.vHH(4013,Qi);this._activatedRoute=w;const V=this.location,ie=w.snapshot.component,Ze=this.parentContexts.getOrCreateContext(this.name).children,At=new mi(w,Ze,V.injector);if(M&&function $s(T){return!!T.resolveComponentFactory}(M)){const on=M.resolveComponentFactory(ie);this.activated=V.createComponent(on,V.length,At)}else this.activated=V.createComponent(ie,{index:V.length,injector:At,environmentInjector:null!=M?M:this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return T.\u0275fac=function(w){return new(w||T)},T.\u0275dir=a.lG2({type:T,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[a.TTD]}),T})();class mi{constructor(x,w,M){this.route=x,this.childContexts=w,this.parent=M}get(x,w){return x===ms?this.route:x===cs?this.childContexts:this.parent.get(x,w)}}let Dr=(()=>{class T{}return T.\u0275fac=function(w){return new(w||T)},T.\u0275cmp=a.Xpm({type:T,selectors:[["ng-component"]],standalone:!0,features:[a.jDz],decls:1,vars:0,template:function(w,M){1&w&&a._UZ(0,"router-outlet")},dependencies:[Xi],encapsulation:2}),T})();function Vs(T,x){var w;return T.providers&&!T._injector&&(T._injector=(0,a.MMx)(T.providers,x,`Route: ${T.path}`)),null!==(w=T._injector)&&void 0!==w?w:x}function Js(T){const x=T.children&&T.children.map(Js),w=x?{...T,children:x}:{...T};return!w.component&&!w.loadComponent&&(x||w.loadChildren)&&w.outlet&&w.outlet!==Qt&&(w.component=Dr),w}function ki(T){return T.outlet||Qt}function Xr(T,x){const w=T.filter(M=>ki(M)===x);return w.push(...T.filter(M=>ki(M)!==x)),w}function eo(T){var x;if(!T)return null;if(null!==(x=T.routeConfig)&&void 0!==x&&x._injector)return T.routeConfig._injector;for(let w=T.parent;w;w=w.parent){const M=w.routeConfig;if(null!=M&&M._loadedInjector)return M._loadedInjector;if(null!=M&&M._injector)return M._injector}return null}class Do{constructor(x,w,M,V){this.routeReuseStrategy=x,this.futureState=w,this.currState=M,this.forwardEvent=V}activate(x){const w=this.futureState._root,M=this.currState?this.currState._root:null;this.deactivateChildRoutes(w,M,x),Pi(this.futureState.root),this.activateChildRoutes(w,M,x)}deactivateChildRoutes(x,w,M){const V=ni(w);x.children.forEach(X=>{const ie=X.value.outlet;this.deactivateRoutes(X,V[ie],M),delete V[ie]}),Ar(V,(X,ie)=>{this.deactivateRouteAndItsChildren(X,M)})}deactivateRoutes(x,w,M){const V=x.value,X=w?w.value:null;if(V===X)if(V.component){const ie=M.getContext(V.outlet);ie&&this.deactivateChildRoutes(x,w,ie.children)}else this.deactivateChildRoutes(x,w,M);else X&&this.deactivateRouteAndItsChildren(w,M)}deactivateRouteAndItsChildren(x,w){x.value.component&&this.routeReuseStrategy.shouldDetach(x.value.snapshot)?this.detachAndStoreRouteSubtree(x,w):this.deactivateRouteAndOutlet(x,w)}detachAndStoreRouteSubtree(x,w){const M=w.getContext(x.value.outlet),V=M&&x.value.component?M.children:w,X=ni(x);for(const ie of Object.keys(X))this.deactivateRouteAndItsChildren(X[ie],V);if(M&&M.outlet){const ie=M.outlet.detach(),Ze=M.children.onOutletDeactivated();this.routeReuseStrategy.store(x.value.snapshot,{componentRef:ie,route:x,contexts:Ze})}}deactivateRouteAndOutlet(x,w){const M=w.getContext(x.value.outlet),V=M&&x.value.component?M.children:w,X=ni(x);for(const ie of Object.keys(X))this.deactivateRouteAndItsChildren(X[ie],V);M&&M.outlet&&(M.outlet.deactivate(),M.children.onOutletDeactivated(),M.attachRef=null,M.resolver=null,M.route=null)}activateChildRoutes(x,w,M){const V=ni(w);x.children.forEach(X=>{this.activateRoutes(X,V[X.value.outlet],M),this.forwardEvent(new Ir(X.value.snapshot))}),x.children.length&&this.forwardEvent(new kr(x.value.snapshot))}activateRoutes(x,w,M){const V=x.value,X=w?w.value:null;if(Pi(V),V===X)if(V.component){const Ze=M.getOrCreateContext(V.outlet);this.activateChildRoutes(x,w,Ze.children)}else this.activateChildRoutes(x,w,M);else if(V.component){const Ze=M.getOrCreateContext(V.outlet);if(this.routeReuseStrategy.shouldAttach(V.snapshot)){const At=this.routeReuseStrategy.retrieve(V.snapshot);this.routeReuseStrategy.store(V.snapshot,null),Ze.children.onOutletReAttached(At.contexts),Ze.attachRef=At.componentRef,Ze.route=At.route.value,Ze.outlet&&Ze.outlet.attach(At.componentRef,At.route.value),Pi(At.route.value),this.activateChildRoutes(x,null,Ze.children)}else{var ie;const At=eo(V.snapshot),on=null!==(ie=null==At?void 0:At.get(a._Vd))&&void 0!==ie?ie:null;Ze.attachRef=null,Ze.route=V,Ze.resolver=on,Ze.injector=At,Ze.outlet&&Ze.outlet.activateWith(V,Ze.injector),this.activateChildRoutes(x,null,Ze.children)}}else this.activateChildRoutes(x,null,M)}}class va{constructor(x){this.path=x,this.route=this.path[this.path.length-1]}}class to{constructor(x,w){this.component=x,this.route=w}}function vs(T,x,w){const M=T._root;return fo(M,x?x._root:null,w,[M.value])}function tr(T,x){const w=Symbol(),M=x.get(T,w);return M===w?"function"!=typeof T||(0,a.Z0I)(T)?x.get(T):T:M}function fo(T,x,w,M,V={canDeactivateChecks:[],canActivateChecks:[]}){const X=ni(x);return T.children.forEach(ie=>{(function To(T,x,w,M,V={canDeactivateChecks:[],canActivateChecks:[]}){const X=T.value,ie=x?x.value:null,Ze=w?w.getContext(T.value.outlet):null;if(ie&&X.routeConfig===ie.routeConfig){const At=function qt(T,x,w){if("function"==typeof w)return w(T,x);switch(w){case"pathParamsChange":return!$t(T.url,x.url);case"pathParamsOrQueryParamsChange":return!$t(T.url,x.url)||!Yt(T.queryParams,x.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rs(T,x)||!Yt(T.queryParams,x.queryParams);default:return!rs(T,x)}}(ie,X,X.routeConfig.runGuardsAndResolvers);At?V.canActivateChecks.push(new va(M)):(X.data=ie.data,X._resolvedData=ie._resolvedData),fo(T,x,X.component?Ze?Ze.children:null:w,M,V),At&&Ze&&Ze.outlet&&Ze.outlet.isActivated&&V.canDeactivateChecks.push(new to(Ze.outlet.component,ie))}else ie&&Fn(x,Ze,V),V.canActivateChecks.push(new va(M)),fo(T,null,X.component?Ze?Ze.children:null:w,M,V)})(ie,X[ie.value.outlet],w,M.concat([ie.value]),V),delete X[ie.value.outlet]}),Ar(X,(ie,Ze)=>Fn(ie,w.getContext(Ze),V)),V}function Fn(T,x,w){const M=ni(T),V=T.value;Ar(M,(X,ie)=>{Fn(X,V.component?x?x.children.getContext(ie):null:x,w)}),w.canDeactivateChecks.push(new to(V.component&&x&&x.outlet&&x.outlet.isActivated?x.outlet.component:null,V))}function j(T){return"function"==typeof T}function Gn(T){return T instanceof xe.K||"EmptyError"===(null==T?void 0:T.name)}const Rr=Symbol("INITIAL_VALUE");function Zn(){return(0,tt.w)(T=>Ge(T.map(x=>x.pipe((0,W.q)(1),(0,pt.O)(Rr)))).pipe((0,Ke.U)(x=>{for(const w of x)if(!0!==w){if(w===Rr)return Rr;if(!1===w||w instanceof sr)return w}return!0}),(0,nt.h)(x=>x!==Rr),(0,W.q)(1)))}function _a(T){return(0,at.z)((0,Je.b)(x=>{if(Pr(x))throw gr(0,x)}),(0,Ke.U)(x=>!0===x))}const xs={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Na(T,x,w,M,V){const X=Bo(T,x,w);return X.matched?function Pa(T,x,w,M){const V=x.canMatch;if(!V||0===V.length)return(0,z.of)(!0);const X=V.map(ie=>{const Ze=tr(ie,T);return xn(function gt(T){return T&&j(T.canMatch)}(Ze)?Ze.canMatch(x,w):T.runInContext(()=>Ze(x,w)))});return(0,z.of)(X).pipe(Zn(),_a())}(M=Vs(x,M),x,w).pipe((0,Ke.U)(ie=>!0===ie?X:{...xs})):(0,z.of)(X)}function Bo(T,x,w){var M;if(""===x.path)return"full"===x.pathMatch&&(T.hasChildren()||w.length>0)?{...xs}:{matched:!0,consumedSegments:[],remainingSegments:w,parameters:{},positionalParamSegments:{}};const X=(x.matcher||gn)(w,T,x);if(!X)return{...xs};const ie={};Ar(X.posParams,(At,on)=>{ie[on]=At.path});const Ze=X.consumed.length>0?{...ie,...X.consumed[X.consumed.length-1].parameters}:ie;return{matched:!0,consumedSegments:X.consumed,remainingSegments:w.slice(X.consumed.length),parameters:Ze,positionalParamSegments:null!==(M=X.posParams)&&void 0!==M?M:{}}}function So(T,x,w,M){if(w.length>0&&function ll(T,x,w){return w.some(M=>Ya(T,x,M)&&ki(M)!==Qt)}(T,w,M)){const X=new kn(x,function al(T,x,w,M){const V={};V[Qt]=M,M._sourceSegment=T,M._segmentIndexShift=x.length;for(const X of w)if(""===X.path&&ki(X)!==Qt){const ie=new kn([],{});ie._sourceSegment=T,ie._segmentIndexShift=x.length,V[ki(X)]=ie}return V}(T,x,M,new kn(w,T.children)));return X._sourceSegment=T,X._segmentIndexShift=x.length,{segmentGroup:X,slicedSegments:[]}}if(0===w.length&&function ql(T,x,w){return w.some(M=>Ya(T,x,M))}(T,w,M)){const X=new kn(T.segments,function Ka(T,x,w,M,V){const X={};for(const ie of M)if(Ya(T,w,ie)&&!V[ki(ie)]){const Ze=new kn([],{});Ze._sourceSegment=T,Ze._segmentIndexShift=x.length,X[ki(ie)]=Ze}return{...V,...X}}(T,x,w,M,T.children));return X._sourceSegment=T,X._segmentIndexShift=x.length,{segmentGroup:X,slicedSegments:w}}const V=new kn(T.segments,T.children);return V._sourceSegment=T,V._segmentIndexShift=x.length,{segmentGroup:V,slicedSegments:w}}function Ya(T,x,w){return(!(T.hasChildren()||x.length>0)||"full"!==w.pathMatch)&&""===w.path}function Xo(T,x,w,M){return!!(ki(T)===M||M!==Qt&&Ya(x,w,T))&&("**"===T.path||Bo(x,T,w).matched)}function Iu(T,x,w){return 0===x.length&&!T.children[w]}const _i=!1;class Hs{constructor(x){this.segmentGroup=x||null}}class Di{constructor(x){this.urlTree=x}}function Jo(T){return et(new Hs(T))}function ds(T){return et(new Di(T))}class da{constructor(x,w,M,V,X){this.injector=x,this.configLoader=w,this.urlSerializer=M,this.urlTree=V,this.config=X,this.allowRedirects=!0}apply(){const x=So(this.urlTree.root,[],[],this.config).segmentGroup,w=new kn(x.segments,x.children);return this.expandSegmentGroup(this.injector,this.config,w,Qt).pipe((0,Ke.U)(X=>this.createUrlTree(fi(X),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Le(X=>{if(X instanceof Di)return this.allowRedirects=!1,this.match(X.urlTree);throw X instanceof Hs?this.noMatchError(X):X}))}match(x){return this.expandSegmentGroup(this.injector,this.config,x.root,Qt).pipe((0,Ke.U)(V=>this.createUrlTree(fi(V),x.queryParams,x.fragment))).pipe(Le(V=>{throw V instanceof Hs?this.noMatchError(V):V}))}noMatchError(x){return new a.vHH(4002,_i)}createUrlTree(x,w,M){const V=Yi(x);return new sr(V,w,M)}expandSegmentGroup(x,w,M,V){return 0===M.segments.length&&M.hasChildren()?this.expandChildren(x,w,M).pipe((0,Ke.U)(X=>new kn([],X))):this.expandSegment(x,M,w,M.segments,V,!0)}expandChildren(x,w,M){const V=[];for(const X of Object.keys(M.children))"primary"===X?V.unshift(X):V.push(X);return(0,te.D)(V).pipe(be(X=>{const ie=M.children[X],Ze=Xr(w,X);return this.expandSegmentGroup(x,Ze,ie,X).pipe((0,Ke.U)(At=>({segment:At,outlet:X})))}),(0,rt.R)((X,ie)=>(X[ie.outlet]=ie.segment,X),{}),Nt())}expandSegment(x,w,M,V,X,ie){return(0,te.D)(M).pipe(be(Ze=>this.expandSegmentAgainstRoute(x,w,M,Ze,V,X,ie).pipe(Le(on=>{if(on instanceof Hs)return(0,z.of)(null);throw on}))),(0,we.P)(Ze=>!!Ze),Le((Ze,At)=>{if(Gn(Ze))return Iu(w,V,X)?(0,z.of)(new kn([],{})):Jo(w);throw Ze}))}expandSegmentAgainstRoute(x,w,M,V,X,ie,Ze){return Xo(V,w,X,ie)?void 0===V.redirectTo?this.matchSegmentAgainstRoute(x,w,V,X,ie):Ze&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(x,w,M,V,X,ie):Jo(w):Jo(w)}expandSegmentAgainstRouteUsingRedirect(x,w,M,V,X,ie){return"**"===V.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(x,M,V,ie):this.expandRegularSegmentAgainstRouteUsingRedirect(x,w,M,V,X,ie)}expandWildCardWithParamsAgainstRouteUsingRedirect(x,w,M,V){const X=this.applyRedirectCommands([],M.redirectTo,{});return M.redirectTo.startsWith("/")?ds(X):this.lineralizeSegments(M,X).pipe((0,Ie.z)(ie=>{const Ze=new kn(ie,{});return this.expandSegment(x,Ze,w,ie,V,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(x,w,M,V,X,ie){const{matched:Ze,consumedSegments:At,remainingSegments:on,positionalParamSegments:Rn}=Bo(w,V,X);if(!Ze)return Jo(w);const wn=this.applyRedirectCommands(At,V.redirectTo,Rn);return V.redirectTo.startsWith("/")?ds(wn):this.lineralizeSegments(V,wn).pipe((0,Ie.z)(F=>this.expandSegment(x,w,M,F.concat(on),ie,!1)))}matchSegmentAgainstRoute(x,w,M,V,X){return"**"===M.path?(x=Vs(M,x),M.loadChildren?(M._loadedRoutes?(0,z.of)({routes:M._loadedRoutes,injector:M._loadedInjector}):this.configLoader.loadChildren(x,M)).pipe((0,Ke.U)(Ze=>(M._loadedRoutes=Ze.routes,M._loadedInjector=Ze.injector,new kn(V,{})))):(0,z.of)(new kn(V,{}))):Na(w,M,V,x).pipe((0,tt.w)(({matched:ie,consumedSegments:Ze,remainingSegments:At})=>{var on;return ie?(x=null!==(on=M._injector)&&void 0!==on?on:x,this.getChildConfig(x,M,V).pipe((0,Ie.z)(wn=>{var F;const U=null!==(F=wn.injector)&&void 0!==F?F:x,ee=wn.routes,{segmentGroup:De,slicedSegments:ot}=So(w,Ze,At,ee),Et=new kn(De.segments,De.children);if(0===ot.length&&Et.hasChildren())return this.expandChildren(U,ee,Et).pipe((0,Ke.U)(er=>new kn(Ze,er)));if(0===ee.length&&0===ot.length)return(0,z.of)(new kn(Ze,{}));const Jt=ki(M)===X;return this.expandSegment(U,Et,ee,ot,Jt?Qt:X,!0).pipe((0,Ke.U)(An=>new kn(Ze.concat(An.segments),An.children)))}))):Jo(w)}))}getChildConfig(x,w,M){return w.children?(0,z.of)({routes:w.children,injector:x}):w.loadChildren?void 0!==w._loadedRoutes?(0,z.of)({routes:w._loadedRoutes,injector:w._loadedInjector}):function ca(T,x,w,M){const V=x.canLoad;if(void 0===V||0===V.length)return(0,z.of)(!0);const X=V.map(ie=>{const Ze=tr(ie,T);return xn(function I(T){return T&&j(T.canLoad)}(Ze)?Ze.canLoad(x,w):T.runInContext(()=>Ze(x,w)))});return(0,z.of)(X).pipe(Zn(),_a())}(x,w,M).pipe((0,Ie.z)(V=>V?this.configLoader.loadChildren(x,w).pipe((0,Je.b)(X=>{w._loadedRoutes=X.routes,w._loadedInjector=X.injector})):function $o(T){return et(us(_i,3))}())):(0,z.of)({routes:[],injector:x})}lineralizeSegments(x,w){let M=[],V=w.root;for(;;){if(M=M.concat(V.segments),0===V.numberOfChildren)return(0,z.of)(M);if(V.numberOfChildren>1||!V.children[Qt])return x.redirectTo,et(new a.vHH(4e3,_i));V=V.children[Qt]}}applyRedirectCommands(x,w,M){return this.applyRedirectCreateUrlTree(w,this.urlSerializer.parse(w),x,M)}applyRedirectCreateUrlTree(x,w,M,V){const X=this.createSegmentGroup(x,w.root,M,V);return new sr(X,this.createQueryParams(w.queryParams,this.urlTree.queryParams),w.fragment)}createQueryParams(x,w){const M={};return Ar(x,(V,X)=>{if("string"==typeof V&&V.startsWith(":")){const Ze=V.substring(1);M[X]=w[Ze]}else M[X]=V}),M}createSegmentGroup(x,w,M,V){const X=this.createSegments(x,w.segments,M,V);let ie={};return Ar(w.children,(Ze,At)=>{ie[At]=this.createSegmentGroup(x,Ze,M,V)}),new kn(X,ie)}createSegments(x,w,M,V){return w.map(X=>X.path.startsWith(":")?this.findPosParam(x,X,V):this.findOrReturn(X,M))}findPosParam(x,w,M){const V=M[w.path.substring(1)];if(!V)throw new a.vHH(4001,_i);return V}findOrReturn(x,w){let M=0;for(const V of w){if(V.path===x.path)return w.splice(M),V;M++}return x}}class ea{}class N{constructor(x,w,M,V,X,ie,Ze){this.injector=x,this.rootComponentType=w,this.config=M,this.urlTree=V,this.url=X,this.paramsInheritanceStrategy=ie,this.urlSerializer=Ze}recognize(){const x=So(this.urlTree.root,[],[],this.config.filter(w=>void 0===w.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,x,Qt).pipe((0,Ke.U)(w=>{if(null===w)return null;const M=new ns([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Qt,this.rootComponentType,null,this.urlTree.root,-1,{}),V=new Jn(M,w),X=new Qs(this.url,V);return this.inheritParamsAndData(X._root),X}))}inheritParamsAndData(x){const w=x.value,M=Ss(w,this.paramsInheritanceStrategy);w.params=Object.freeze(M.params),w.data=Object.freeze(M.data),x.children.forEach(V=>this.inheritParamsAndData(V))}processSegmentGroup(x,w,M,V){return 0===M.segments.length&&M.hasChildren()?this.processChildren(x,w,M):this.processSegment(x,w,M,M.segments,V)}processChildren(x,w,M){return(0,te.D)(Object.keys(M.children)).pipe(be(V=>{const X=M.children[V],ie=Xr(w,V);return this.processSegmentGroup(x,ie,X,V)}),(0,rt.R)((V,X)=>V&&X?(V.push(...X),V):null),function cn(T,x=!1){return(0,Oe.e)((w,M)=>{let V=0;w.subscribe((0,pe.x)(M,X=>{const ie=T(X,V++);(ie||x)&&M.next(X),!ie&&M.complete()}))})}(V=>null!==V),(0,St.d)(null),Nt(),(0,Ke.U)(V=>{if(null===V)return null;const X=ye(V);return function K(T){T.sort((x,w)=>x.value.outlet===Qt?-1:w.value.outlet===Qt?1:x.value.outlet.localeCompare(w.value.outlet))}(X),X}))}processSegment(x,w,M,V,X){return(0,te.D)(w).pipe(be(ie=>{var Ze;return this.processSegmentAgainstRoute(null!==(Ze=ie._injector)&&void 0!==Ze?Ze:x,ie,M,V,X)}),(0,we.P)(ie=>!!ie),Le(ie=>{if(Gn(ie))return Iu(M,V,X)?(0,z.of)([]):(0,z.of)(null);throw ie}))}processSegmentAgainstRoute(x,w,M,V,X){if(w.redirectTo||!Xo(w,M,V,X))return(0,z.of)(null);let ie;if("**"===w.path){var Ze,At;const on=V.length>0?br(V).parameters:{},Rn=un(M)+V.length,wn=new ns(V,on,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ft(w),ki(w),null!==(Ze=null!==(At=w.component)&&void 0!==At?At:w._loadedComponent)&&void 0!==Ze?Ze:null,w,Vt(M),Rn,ir(w));ie=(0,z.of)({snapshot:wn,consumedSegments:[],remainingSegments:[]})}else ie=Na(M,w,V,x).pipe((0,Ke.U)(({matched:on,consumedSegments:Rn,remainingSegments:wn,parameters:F})=>{var U,ee;if(!on)return null;const De=un(M)+Rn.length;return{snapshot:new ns(Rn,F,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ft(w),ki(w),null!==(U=null!==(ee=w.component)&&void 0!==ee?ee:w._loadedComponent)&&void 0!==U?U:null,w,Vt(M),De,ir(w)),consumedSegments:Rn,remainingSegments:wn}}));return ie.pipe((0,tt.w)(on=>{var Rn,wn;if(null===on)return(0,z.of)(null);const{snapshot:F,consumedSegments:U,remainingSegments:ee}=on;x=null!==(Rn=w._injector)&&void 0!==Rn?Rn:x;const De=null!==(wn=w._loadedInjector)&&void 0!==wn?wn:x,ot=function B(T){return T.children?T.children:T.loadChildren?T._loadedRoutes:[]}(w),{segmentGroup:Et,slicedSegments:Jt}=So(M,U,ee,ot.filter(An=>void 0===An.redirectTo));if(0===Jt.length&&Et.hasChildren())return this.processChildren(De,ot,Et).pipe((0,Ke.U)(An=>null===An?null:[new Jn(F,An)]));if(0===ot.length&&0===Jt.length)return(0,z.of)([new Jn(F,[])]);const Nn=ki(w)===X;return this.processSegment(De,ot,Et,Jt,Nn?Qt:X).pipe((0,Ke.U)(An=>null===An?null:[new Jn(F,An)]))}))}}function re(T){const x=T.value.routeConfig;return x&&""===x.path&&void 0===x.redirectTo}function ye(T){const x=[],w=new Set;for(const M of T){if(!re(M)){x.push(M);continue}const V=x.find(X=>M.value.routeConfig===X.value.routeConfig);void 0!==V?(V.children.push(...M.children),w.add(V)):x.push(M)}for(const M of w){const V=ye(M.children);x.push(new Jn(M.value,V))}return x.filter(M=>!w.has(M))}function Vt(T){let x=T;for(;x._sourceSegment;)x=x._sourceSegment;return x}function un(T){var x;let w=T,M=null!==(x=w._segmentIndexShift)&&void 0!==x?x:0;for(;w._sourceSegment;){var V;w=w._sourceSegment,M+=null!==(V=w._segmentIndexShift)&&void 0!==V?V:0}return M-1}function Ft(T){return T.data||{}}function ir(T){return T.resolve||{}}function It(T){return"string"==typeof T.title||null===T.title}function Wt(T){return(0,tt.w)(x=>{const w=T(x);return w?(0,te.D)(w).pipe((0,Ke.U)(()=>x)):(0,z.of)(x)})}const Uo=new a.OlP("ROUTES");let qa=(()=>{class T{constructor(w,M){this.injector=w,this.compiler=M,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(w){if(this.componentLoaders.get(w))return this.componentLoaders.get(w);if(w._loadedComponent)return(0,z.of)(w._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(w);const M=xn(w.loadComponent()).pipe((0,Ke.U)(Ea),(0,Je.b)(X=>{this.onLoadEndListener&&this.onLoadEndListener(w),w._loadedComponent=X}),Dn(()=>{this.componentLoaders.delete(w)})),V=new Xe(M,()=>new Fe.x).pipe(J());return this.componentLoaders.set(w,V),V}loadChildren(w,M){if(this.childrenLoaders.get(M))return this.childrenLoaders.get(M);if(M._loadedRoutes)return(0,z.of)({routes:M._loadedRoutes,injector:M._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(M);const X=this.loadModuleFactoryOrRoutes(M.loadChildren).pipe((0,Ke.U)(Ze=>{this.onLoadEndListener&&this.onLoadEndListener(M);let At,on,Rn=!1;Array.isArray(Ze)?on=Ze:(At=Ze.create(w).injector,on=Tr(At.get(Uo,[],a.XFs.Self|a.XFs.Optional)));return{routes:on.map(Js),injector:At}}),Dn(()=>{this.childrenLoaders.delete(M)})),ie=new Xe(X,()=>new Fe.x).pipe(J());return this.childrenLoaders.set(M,ie),ie}loadModuleFactoryOrRoutes(w){return xn(w()).pipe((0,Ke.U)(Ea),(0,Ie.z)(V=>V instanceof a.YKP||Array.isArray(V)?(0,z.of)(V):(0,te.D)(this.compiler.compileModuleAsync(V))))}}return T.\u0275fac=function(w){return new(w||T)(a.LFG(a.zs3),a.LFG(a.Sil))},T.\u0275prov=a.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function Ea(T){return function Zl(T){return T&&"object"==typeof T&&"default"in T}(T)?T.default:T}let Gs=(()=>{class T{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Fe.x,this.configLoader=(0,a.f3M)(qa),this.environmentInjector=(0,a.f3M)(a.lqb),this.urlSerializer=(0,a.f3M)(Mn),this.rootContexts=(0,a.f3M)(cs),this.navigationId=0,this.afterPreactivation=()=>(0,z.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=V=>this.events.next(new In(V)),this.configLoader.onLoadStartListener=V=>this.events.next(new nn(V))}complete(){var w;null===(w=this.transitions)||void 0===w||w.complete()}handleNavigationRequest(w){var M;const V=++this.navigationId;null===(M=this.transitions)||void 0===M||M.next({...this.transitions.value,...w,id:V})}setupNavigations(w){return this.transitions=new Te.X({id:0,targetPageId:0,currentUrlTree:w.currentUrlTree,currentRawUrl:w.currentUrlTree,extractedUrl:w.urlHandlingStrategy.extract(w.currentUrlTree),urlAfterRedirects:w.urlHandlingStrategy.extract(w.currentUrlTree),rawUrl:w.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:dt,restoredState:null,currentSnapshot:w.routerState.snapshot,targetSnapshot:null,currentRouterState:w.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,nt.h)(M=>0!==M.id),(0,Ke.U)(M=>({...M,extractedUrl:w.urlHandlingStrategy.extract(M.rawUrl)})),(0,tt.w)(M=>{let V=!1,X=!1;return(0,z.of)(M).pipe((0,Je.b)(ie=>{this.currentNavigation={id:ie.id,initialUrl:ie.rawUrl,extractedUrl:ie.extractedUrl,trigger:ie.source,extras:ie.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,tt.w)(ie=>{var Ze;const At=w.browserUrlTree.toString(),on=!w.navigated||ie.extractedUrl.toString()!==At||At!==w.currentUrlTree.toString(),Rn=null!==(Ze=ie.extras.onSameUrlNavigation)&&void 0!==Ze?Ze:w.onSameUrlNavigation;if(!on&&"reload"!==Rn){const wn="";return this.events.next(new Bn(ie.id,w.serializeUrl(M.rawUrl),wn,0)),w.rawUrlTree=ie.rawUrl,ie.resolve(null),Qe.E}if(w.urlHandlingStrategy.shouldProcessUrl(ie.rawUrl))return gl(ie.source)&&(w.browserUrlTree=ie.extractedUrl),(0,z.of)(ie).pipe((0,tt.w)(wn=>{var F,U;const ee=null===(F=this.transitions)||void 0===F?void 0:F.getValue();return this.events.next(new Lt(wn.id,this.urlSerializer.serialize(wn.extractedUrl),wn.source,wn.restoredState)),ee!==(null===(U=this.transitions)||void 0===U?void 0:U.getValue())?Qe.E:Promise.resolve(wn)}),function pl(T,x,w,M){return(0,tt.w)(V=>function Ti(T,x,w,M,V){return new da(T,x,w,M,V).apply()}(T,x,w,V.extractedUrl,M).pipe((0,Ke.U)(X=>({...V,urlAfterRedirects:X}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,w.config),(0,Je.b)(wn=>{this.currentNavigation={...this.currentNavigation,finalUrl:wn.urlAfterRedirects},M.urlAfterRedirects=wn.urlAfterRedirects}),function ar(T,x,w,M,V){return(0,Ie.z)(X=>function Pl(T,x,w,M,V,X,ie="emptyOnly"){return new N(T,x,w,M,V,ie,X).recognize().pipe((0,tt.w)(Ze=>null===Ze?function Fa(T){return new Se.y(x=>x.error(T))}(new ea):(0,z.of)(Ze)))}(T,x,w,X.urlAfterRedirects,M.serialize(X.urlAfterRedirects),M,V).pipe((0,Ke.U)(ie=>({...X,targetSnapshot:ie}))))}(this.environmentInjector,this.rootComponentType,w.config,this.urlSerializer,w.paramsInheritanceStrategy),(0,Je.b)(wn=>{if(M.targetSnapshot=wn.targetSnapshot,"eager"===w.urlUpdateStrategy){if(!wn.extras.skipLocationChange){const U=w.urlHandlingStrategy.merge(wn.urlAfterRedirects,wn.rawUrl);w.setBrowserUrl(U,wn)}w.browserUrlTree=wn.urlAfterRedirects}const F=new pi(wn.id,this.urlSerializer.serialize(wn.extractedUrl),this.urlSerializer.serialize(wn.urlAfterRedirects),wn.targetSnapshot);this.events.next(F)}));if(on&&w.urlHandlingStrategy.shouldProcessUrl(w.rawUrlTree)){const{id:wn,extractedUrl:F,source:U,restoredState:ee,extras:De}=ie,ot=new Lt(wn,this.urlSerializer.serialize(F),U,ee);this.events.next(ot);const Et=Co(F,this.rootComponentType).snapshot;return M={...ie,targetSnapshot:Et,urlAfterRedirects:F,extras:{...De,skipLocationChange:!1,replaceUrl:!1}},(0,z.of)(M)}{const wn="";return this.events.next(new Bn(ie.id,w.serializeUrl(M.extractedUrl),wn,1)),w.rawUrlTree=ie.rawUrl,ie.resolve(null),Qe.E}}),(0,Je.b)(ie=>{const Ze=new it(ie.id,this.urlSerializer.serialize(ie.extractedUrl),this.urlSerializer.serialize(ie.urlAfterRedirects),ie.targetSnapshot);this.events.next(Ze)}),(0,Ke.U)(ie=>M={...ie,guards:vs(ie.targetSnapshot,ie.currentSnapshot,this.rootContexts)}),function Br(T,x){return(0,Ie.z)(w=>{const{targetSnapshot:M,currentSnapshot:V,guards:{canActivateChecks:X,canDeactivateChecks:ie}}=w;return 0===ie.length&&0===X.length?(0,z.of)({...w,guardsResult:!0}):function Ji(T,x,w,M){return(0,te.D)(T).pipe((0,Ie.z)(V=>function ua(T,x,w,M,V){const X=x&&x.routeConfig?x.routeConfig.canDeactivate:null;if(!X||0===X.length)return(0,z.of)(!0);const ie=X.map(Ze=>{var At;const on=null!==(At=eo(x))&&void 0!==At?At:V,Rn=tr(Ze,on);return xn(function Q(T){return T&&j(T.canDeactivate)}(Rn)?Rn.canDeactivate(T,x,w,M):on.runInContext(()=>Rn(T,x,w,M))).pipe((0,we.P)())});return(0,z.of)(ie).pipe(Zn())}(V.component,V.route,w,x,M)),(0,we.P)(V=>!0!==V,!0))}(ie,M,V,T).pipe((0,Ie.z)(Ze=>Ze&&function f(T){return"boolean"==typeof T}(Ze)?function Ui(T,x,w,M){return(0,te.D)(x).pipe(be(V=>(0,Me.z)(function la(T,x){return null!==T&&x&&x(new rr(T)),(0,z.of)(!0)}(V.route.parent,M),function si(T,x){return null!==T&&x&&x(new Er(T)),(0,z.of)(!0)}(V.route,M),function Wa(T,x,w){const M=x[x.length-1],X=x.slice(0,x.length-1).reverse().map(ie=>function Us(T){const x=T.routeConfig?T.routeConfig.canActivateChild:null;return x&&0!==x.length?{node:T,guards:x}:null}(ie)).filter(ie=>null!==ie).map(ie=>le(()=>{const Ze=ie.guards.map(At=>{var on;const Rn=null!==(on=eo(ie.node))&&void 0!==on?on:w,wn=tr(At,Rn);return xn(function P(T){return T&&j(T.canActivateChild)}(wn)?wn.canActivateChild(M,T):Rn.runInContext(()=>wn(M,T))).pipe((0,we.P)())});return(0,z.of)(Ze).pipe(Zn())}));return(0,z.of)(X).pipe(Zn())}(T,V.path,w),function js(T,x,w){const M=x.routeConfig?x.routeConfig.canActivate:null;if(!M||0===M.length)return(0,z.of)(!0);const V=M.map(X=>le(()=>{var ie;const Ze=null!==(ie=eo(x))&&void 0!==ie?ie:w,At=tr(X,Ze);return xn(function y(T){return T&&j(T.canActivate)}(At)?At.canActivate(x,T):Ze.runInContext(()=>At(x,T))).pipe((0,we.P)())}));return(0,z.of)(V).pipe(Zn())}(T,V.route,w))),(0,we.P)(V=>!0!==V,!0))}(M,X,T,x):(0,z.of)(Ze)),(0,Ke.U)(Ze=>({...w,guardsResult:Ze})))})}(this.environmentInjector,ie=>this.events.next(ie)),(0,Je.b)(ie=>{if(M.guardsResult=ie.guardsResult,Pr(ie.guardsResult))throw gr(0,ie.guardsResult);const Ze=new qe(ie.id,this.urlSerializer.serialize(ie.extractedUrl),this.urlSerializer.serialize(ie.urlAfterRedirects),ie.targetSnapshot,!!ie.guardsResult);this.events.next(Ze)}),(0,nt.h)(ie=>!!ie.guardsResult||(w.restoreHistory(ie),this.cancelNavigationTransition(ie,"",3),!1)),Wt(ie=>{if(ie.guards.canActivateChecks.length)return(0,z.of)(ie).pipe((0,Je.b)(Ze=>{const At=new mt(Ze.id,this.urlSerializer.serialize(Ze.extractedUrl),this.urlSerializer.serialize(Ze.urlAfterRedirects),Ze.targetSnapshot);this.events.next(At)}),(0,tt.w)(Ze=>{let At=!1;return(0,z.of)(Ze).pipe(function Ei(T,x){return(0,Ie.z)(w=>{const{targetSnapshot:M,guards:{canActivateChecks:V}}=w;if(!V.length)return(0,z.of)(w);let X=0;return(0,te.D)(V).pipe(be(ie=>function zt(T,x,w,M){const V=T.routeConfig,X=T._resolve;return void 0!==(null==V?void 0:V.title)&&!It(V)&&(X[nr]=V.title),function _n(T,x,w,M){const V=function hs(T){return[...Object.keys(T),...Object.getOwnPropertySymbols(T)]}(T);if(0===V.length)return(0,z.of)({});const X={};return(0,te.D)(V).pipe((0,Ie.z)(ie=>function dn(T,x,w,M){var V;const X=null!==(V=eo(x))&&void 0!==V?V:M,ie=tr(T,X);return xn(ie.resolve?ie.resolve(x,w):X.runInContext(()=>ie(x,w)))}(T[ie],x,w,M).pipe((0,we.P)(),(0,Je.b)(Ze=>{X[ie]=Ze}))),He(1),function xt(T){return(0,Ke.U)(()=>T)}(X),Le(ie=>Gn(ie)?Qe.E:et(ie)))}(X,T,x,M).pipe((0,Ke.U)(ie=>(T._resolvedData=ie,T.data=Ss(T,w).resolve,V&&It(V)&&(T.data[nr]=V.title),null)))}(ie.route,M,T,x)),(0,Je.b)(()=>X++),He(1),(0,Ie.z)(ie=>X===V.length?(0,z.of)(w):Qe.E))})}(w.paramsInheritanceStrategy,this.environmentInjector),(0,Je.b)({next:()=>At=!0,complete:()=>{At||(w.restoreHistory(Ze),this.cancelNavigationTransition(Ze,"",2))}}))}),(0,Je.b)(Ze=>{const At=new Ut(Ze.id,this.urlSerializer.serialize(Ze.extractedUrl),this.urlSerializer.serialize(Ze.urlAfterRedirects),Ze.targetSnapshot);this.events.next(At)}))}),Wt(ie=>{const Ze=At=>{var on;const Rn=[];null!==(on=At.routeConfig)&&void 0!==on&&on.loadComponent&&!At.routeConfig._loadedComponent&&Rn.push(this.configLoader.loadComponent(At.routeConfig).pipe((0,Je.b)(wn=>{At.component=wn}),(0,Ke.U)(()=>{})));for(const wn of At.children)Rn.push(...Ze(wn));return Rn};return Ge(Ze(ie.targetSnapshot.root)).pipe((0,St.d)(),(0,W.q)(1))}),Wt(()=>this.afterPreactivation()),(0,Ke.U)(ie=>{const Ze=function bo(T,x,w){const M=is(T,x._root,w?w._root:void 0);return new wo(M,x)}(w.routeReuseStrategy,ie.targetSnapshot,ie.currentRouterState);return M={...ie,targetRouterState:Ze}}),(0,Je.b)(ie=>{w.currentUrlTree=ie.urlAfterRedirects,w.rawUrlTree=w.urlHandlingStrategy.merge(ie.urlAfterRedirects,ie.rawUrl),w.routerState=ie.targetRouterState,"deferred"===w.urlUpdateStrategy&&(ie.extras.skipLocationChange||w.setBrowserUrl(w.rawUrlTree,ie),w.browserUrlTree=ie.urlAfterRedirects)}),((T,x,w)=>(0,Ke.U)(M=>(new Do(x,M.targetRouterState,M.currentRouterState,w).activate(T),M)))(this.rootContexts,w.routeReuseStrategy,ie=>this.events.next(ie)),(0,Je.b)({next:ie=>{var Ze;V=!0,this.lastSuccessfulNavigation=this.currentNavigation,w.navigated=!0,this.events.next(new sn(ie.id,this.urlSerializer.serialize(ie.extractedUrl),this.urlSerializer.serialize(w.currentUrlTree))),null===(Ze=w.titleStrategy)||void 0===Ze||Ze.updateTitle(ie.targetRouterState.snapshot),ie.resolve(!0)},complete:()=>{V=!0}}),Dn(()=>{var ie;V||X||this.cancelNavigationTransition(M,"",1),(null===(ie=this.currentNavigation)||void 0===ie?void 0:ie.id)===M.id&&(this.currentNavigation=null)}),Le(ie=>{if(X=!0,ss(ie)){As(ie)||(w.navigated=!0,w.restoreHistory(M,!0));const At=new Sn(M.id,this.urlSerializer.serialize(M.extractedUrl),ie.message,ie.cancellationCode);if(this.events.next(At),As(ie)){const on=w.urlHandlingStrategy.merge(ie.url,w.rawUrlTree),Rn={skipLocationChange:M.extras.skipLocationChange,replaceUrl:"eager"===w.urlUpdateStrategy||gl(M.source)};w.scheduleNavigation(on,dt,null,Rn,{resolve:M.resolve,reject:M.reject,promise:M.promise})}else M.resolve(!1)}else{var Ze;w.restoreHistory(M,!0);const At=new Yn(M.id,this.urlSerializer.serialize(M.extractedUrl),ie,null!==(Ze=M.targetSnapshot)&&void 0!==Ze?Ze:void 0);this.events.next(At);try{M.resolve(w.errorHandler(ie))}catch(on){M.reject(on)}}return Qe.E}))}))}cancelNavigationTransition(w,M,V){const X=new Sn(w.id,this.urlSerializer.serialize(w.extractedUrl),M,V);this.events.next(X),w.resolve(!1)}}return T.\u0275fac=function(w){return new(w||T)},T.\u0275prov=a.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function gl(T){return T!==dt}let La=(()=>{class T{buildTitle(w){let M,V=w.root;for(;void 0!==V;){var X;M=null!==(X=this.getResolvedTitleForRoute(V))&&void 0!==X?X:M,V=V.children.find(ie=>ie.outlet===Qt)}return M}getResolvedTitleForRoute(w){return w.data[nr]}}return T.\u0275fac=function(w){return new(w||T)},T.\u0275prov=a.Yz7({token:T,factory:function(){return(0,a.f3M)(ml)},providedIn:"root"}),T})(),ml=(()=>{class T extends La{constructor(w){super(),this.title=w}updateTitle(w){const M=this.buildTitle(w);void 0!==M&&this.title.setTitle(M)}}return T.\u0275fac=function(w){return new(w||T)(a.LFG(Un.Dx))},T.\u0275prov=a.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})(),ul=(()=>{class T{}return T.\u0275fac=function(w){return new(w||T)},T.\u0275prov=a.Yz7({token:T,factory:function(){return(0,a.f3M)(ha)},providedIn:"root"}),T})();class mr{shouldDetach(x){return!1}store(x,w){}shouldAttach(x){return!1}retrieve(x){return null}shouldReuseRoute(x,w){return x.routeConfig===w.routeConfig}}let ha=(()=>{class T extends mr{}return T.\u0275fac=function(){let x;return function(M){return(x||(x=a.n5z(T)))(M||T)}}(),T.\u0275prov=a.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();const Si=new a.OlP("",{providedIn:"root",factory:()=>({})});let qn=(()=>{class T{}return T.\u0275fac=function(w){return new(w||T)},T.\u0275prov=a.Yz7({token:T,factory:function(){return(0,a.f3M)(xo)},providedIn:"root"}),T})(),xo=(()=>{class T{shouldProcessUrl(w){return!0}extract(w){return w}merge(w,M){return w}}return T.\u0275fac=function(w){return new(w||T)},T.\u0275prov=a.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function Nl(T){throw T}function ai(T,x,w){return x.parse("/")}const pn={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},cl={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let es=(()=>{class T{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){var w;return null===(w=this.location.getState())||void 0===w?void 0:w.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){var w;this.disposed=!1,this.currentPageId=0,this.console=(0,a.f3M)(a.c2e),this.isNgZoneEnabled=!1,this.options=(0,a.f3M)(Si,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Nl,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||ai,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,a.f3M)(qn),this.routeReuseStrategy=(0,a.f3M)(ul),this.urlCreationStrategy=(0,a.f3M)(uo),this.titleStrategy=(0,a.f3M)(La),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Tr(null!==(w=(0,a.f3M)(Uo,{optional:!0}))&&void 0!==w?w:[]),this.navigationTransitions=(0,a.f3M)(Gs),this.urlSerializer=(0,a.f3M)(Mn),this.location=(0,a.f3M)(je.Ye),this.isNgZoneEnabled=(0,a.f3M)(a.R0b)instanceof a.R0b&&a.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new sr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Co(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(M=>{this.lastSuccessfulId=M.id,this.currentPageId=M.targetPageId},M=>{this.console.warn(`Unhandled Navigation Error: ${M}`)})}resetRootComponentType(w){this.routerState.root.component=w,this.navigationTransitions.rootComponentType=w}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const w=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),dt,w)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(w=>{const M="popstate"===w.type?"popstate":"hashchange";"popstate"===M&&setTimeout(()=>{this.navigateToSyncWithBrowser(w.url,M,w.state)},0)}))}navigateToSyncWithBrowser(w,M,V){const X={replaceUrl:!0},ie=null!=V&&V.navigationId?V:null;if(V){const At={...V};delete At.navigationId,delete At.\u0275routerPageId,0!==Object.keys(At).length&&(X.state=At)}const Ze=this.parseUrl(w);this.scheduleNavigation(Ze,M,ie,X)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(w){this.config=w.map(Js),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(w,M={}){const{relativeTo:V,queryParams:X,fragment:ie,queryParamsHandling:Ze,preserveFragment:At}=M,on=At?this.currentUrlTree.fragment:ie;let Rn=null;switch(Ze){case"merge":Rn={...this.currentUrlTree.queryParams,...X};break;case"preserve":Rn=this.currentUrlTree.queryParams;break;default:Rn=X||null}return null!==Rn&&(Rn=this.removeEmptyProps(Rn)),this.urlCreationStrategy.createUrlTree(V,this.routerState,this.currentUrlTree,w,Rn,null!=on?on:null)}navigateByUrl(w,M={skipLocationChange:!1}){const V=Pr(w)?w:this.parseUrl(w),X=this.urlHandlingStrategy.merge(V,this.rawUrlTree);return this.scheduleNavigation(X,dt,null,M)}navigate(w,M={skipLocationChange:!1}){return function fa(T){for(let x=0;x<T.length;x++){const w=T[x];if(null==w)throw new a.vHH(4008,false)}}(w),this.navigateByUrl(this.createUrlTree(w,M),M)}serializeUrl(w){return this.urlSerializer.serialize(w)}parseUrl(w){let M;try{M=this.urlSerializer.parse(w)}catch(V){M=this.malformedUriErrorHandler(V,this.urlSerializer,w)}return M}isActive(w,M){let V;if(V=!0===M?{...pn}:!1===M?{...cl}:M,Pr(w))return Cn(this.currentUrlTree,w,V);const X=this.parseUrl(w);return Cn(this.currentUrlTree,X,V)}removeEmptyProps(w){return Object.keys(w).reduce((M,V)=>{const X=w[V];return null!=X&&(M[V]=X),M},{})}scheduleNavigation(w,M,V,X,ie){if(this.disposed)return Promise.resolve(!1);let Ze,At,on,Rn;if(ie?(Ze=ie.resolve,At=ie.reject,on=ie.promise):on=new Promise((U,ee)=>{Ze=U,At=ee}),"computed"===this.canceledNavigationResolution)if(V&&V.\u0275routerPageId)Rn=V.\u0275routerPageId;else if(X.replaceUrl||X.skipLocationChange){var wn;Rn=null!==(wn=this.browserPageId)&&void 0!==wn?wn:0}else{var F;Rn=(null!==(F=this.browserPageId)&&void 0!==F?F:0)+1}else Rn=0;return this.navigationTransitions.handleNavigationRequest({targetPageId:Rn,source:M,restoredState:V,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:w,extras:X,resolve:Ze,reject:At,promise:on,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),on.catch(U=>Promise.reject(U))}setBrowserUrl(w,M){const V=this.urlSerializer.serialize(w),X={...M.extras.state,...this.generateNgRouterState(M.id,M.targetPageId)};this.location.isCurrentPathEqualTo(V)||M.extras.replaceUrl?this.location.replaceState(V,"",X):this.location.go(V,"",X)}restoreHistory(w,M=!1){if("computed"===this.canceledNavigationResolution){var V,X;const ie=this.currentPageId-w.targetPageId;"popstate"!==w.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(V=this.getCurrentNavigation())||void 0===V?void 0:V.finalUrl)||0===ie?this.currentUrlTree===(null===(X=this.getCurrentNavigation())||void 0===X?void 0:X.finalUrl)&&0===ie&&(this.resetState(w),this.browserUrlTree=w.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(ie)}else"replace"===this.canceledNavigationResolution&&(M&&this.resetState(w),this.resetUrlToCurrentUrlTree())}resetState(w){this.routerState=w.currentRouterState,this.currentUrlTree=w.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,w.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(w,M){return"computed"===this.canceledNavigationResolution?{navigationId:w,\u0275routerPageId:M}:{navigationId:w}}}return T.\u0275fac=function(w){return new(w||T)},T.\u0275prov=a.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})(),pa=(()=>{class T{constructor(w,M,V,X,ie,Ze){var At;this.router=w,this.route=M,this.tabIndexAttribute=V,this.renderer=X,this.el=ie,this.locationStrategy=Ze,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Fe.x;const on=null===(At=ie.nativeElement.tagName)||void 0===At?void 0:At.toLowerCase();this.isAnchorElement="a"===on||"area"===on,this.isAnchorElement?this.subscription=w.events.subscribe(Rn=>{Rn instanceof sn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(w){this._preserveFragment=(0,a.D6c)(w)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(w){this._skipLocationChange=(0,a.D6c)(w)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(w){this._replaceUrl=(0,a.D6c)(w)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(w){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",w)}ngOnChanges(w){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(w){null!=w?(this.commands=Array.isArray(w)?w:[w],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(w,M,V,X,ie){return!!(null===this.urlTree||this.isAnchorElement&&(0!==w||M||V||X||ie||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){var w;null===(w=this.subscription)||void 0===w||w.unsubscribe()}updateHref(){var w;this.href=null!==this.urlTree&&this.locationStrategy?null===(w=this.locationStrategy)||void 0===w?void 0:w.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const M=null===this.href?null:(0,a.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",M)}applyAttributeValue(w,M){const V=this.renderer,X=this.el.nativeElement;null!==M?V.setAttribute(X,w,M):V.removeAttribute(X,w)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return T.\u0275fac=function(w){return new(w||T)(a.Y36(es),a.Y36(ms),a.$8M("tabindex"),a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(je.S$))},T.\u0275dir=a.lG2({type:T,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(w,M){1&w&&a.NdJ("click",function(X){return M.onClick(X.button,X.ctrlKey,X.shiftKey,X.altKey,X.metaKey)}),2&w&&a.uIk("target",M.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[a.TTD]}),T})();class Qa{}let wu=(()=>{class T{preload(w,M){return M().pipe(Le(()=>(0,z.of)(null)))}}return T.\u0275fac=function(w){return new(w||T)},T.\u0275prov=a.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})(),zs=(()=>{class T{constructor(w,M,V,X,ie){this.router=w,this.injector=V,this.preloadingStrategy=X,this.loader=ie}setUpPreloading(){this.subscription=this.router.events.pipe((0,nt.h)(w=>w instanceof sn),be(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(w,M){const V=[];for(const At of M){var X,ie;At.providers&&!At._injector&&(At._injector=(0,a.MMx)(At.providers,w,`Route: ${At.path}`));const on=null!==(X=At._injector)&&void 0!==X?X:w,Rn=null!==(ie=At._loadedInjector)&&void 0!==ie?ie:on;if(At.loadChildren&&!At._loadedRoutes&&void 0===At.canLoad||At.loadComponent&&!At._loadedComponent)V.push(this.preloadConfig(on,At));else if(At.children||At._loadedRoutes){var Ze;V.push(this.processRoutes(Rn,null!==(Ze=At.children)&&void 0!==Ze?Ze:At._loadedRoutes))}}return(0,te.D)(V).pipe((0,Ln.J)())}preloadConfig(w,M){return this.preloadingStrategy.preload(M,()=>{let V;V=M.loadChildren&&void 0===M.canLoad?this.loader.loadChildren(w,M):(0,z.of)(null);const X=V.pipe((0,Ie.z)(ie=>{var Ze;return null===ie?(0,z.of)(void 0):(M._loadedRoutes=ie.routes,M._loadedInjector=ie.injector,this.processRoutes(null!==(Ze=ie.injector)&&void 0!==Ze?Ze:w,ie.routes))}));if(M.loadComponent&&!M._loadedComponent){const ie=this.loader.loadComponent(M);return(0,te.D)([X,ie]).pipe((0,Ln.J)())}return X})}}return T.\u0275fac=function(w){return new(w||T)(a.LFG(es),a.LFG(a.Sil),a.LFG(a.lqb),a.LFG(Qa),a.LFG(qa))},T.\u0275prov=a.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();const ta=new a.OlP("");let na=(()=>{class T{constructor(w,M,V,X,ie={}){this.urlSerializer=w,this.transitions=M,this.viewportScroller=V,this.zone=X,this.options=ie,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ie.scrollPositionRestoration=ie.scrollPositionRestoration||"disabled",ie.anchorScrolling=ie.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof Lt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=w.navigationTrigger,this.restoredId=w.restoredState?w.restoredState.navigationId:0):w instanceof sn&&(this.lastId=w.id,this.scheduleScrollEvent(w,this.urlSerializer.parse(w.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof pr&&(w.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(w.position):w.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(w.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(w,M){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new pr(w,"popstate"===this.lastSource?this.store[this.restoredId]:null,M))})},0)})}ngOnDestroy(){var w,M;null===(w=this.routerEventsSubscription)||void 0===w||w.unsubscribe(),null===(M=this.scrollEventsSubscription)||void 0===M||M.unsubscribe()}}return T.\u0275fac=function(w){a.$Z()},T.\u0275prov=a.Yz7({token:T,factory:T.\u0275fac}),T})();var Zi=(()=>((Zi=Zi||{})[Zi.COMPLETE=0]="COMPLETE",Zi[Zi.FAILED=1]="FAILED",Zi[Zi.REDIRECTING=2]="REDIRECTING",Zi))();const Ca=!1;function Ms(T,x){return{\u0275kind:T,\u0275providers:x}}const Ai=new a.OlP("",{providedIn:"root",factory:()=>!1});function Ja(){const T=(0,a.f3M)(a.zs3);return x=>{var w,M;const V=T.get(a.z2F);if(x!==V.components[0])return;const X=T.get(es),ie=T.get(kl);1===T.get(_l)&&X.initialNavigation(),null===(w=T.get(Cc,null,a.XFs.Optional))||void 0===w||w.setUpPreloading(),null===(M=T.get(ta,null,a.XFs.Optional))||void 0===M||M.init(),X.resetRootComponentType(V.componentTypes[0]),ie.closed||(ie.next(),ie.unsubscribe())}}const kl=new a.OlP(Ca?"bootstrap done indicator":"",{factory:()=>new Fe.x}),_l=new a.OlP(Ca?"initial navigation":"",{providedIn:"root",factory:()=>1});function no(){let T=[];return T=Ca?[{provide:a.Xts,multi:!0,useFactory:()=>{const x=(0,a.f3M)(es);return()=>x.events.subscribe(w=>{var M,V,X,ie;null===(M=(V=console).group)||void 0===M||M.call(V,`Router Event: ${w.constructor.name}`),console.log(function Kn(T){var x,w,M,V;if(!("type"in T))return`Unknown Router Event: ${T.constructor.name}`;switch(T.type){case 14:return`ActivationEnd(path: '${(null===(x=T.snapshot.routeConfig)||void 0===x?void 0:x.path)||""}')`;case 13:return`ActivationStart(path: '${(null===(w=T.snapshot.routeConfig)||void 0===w?void 0:w.path)||""}')`;case 12:return`ChildActivationEnd(path: '${(null===(M=T.snapshot.routeConfig)||void 0===M?void 0:M.path)||""}')`;case 11:return`ChildActivationStart(path: '${(null===(V=T.snapshot.routeConfig)||void 0===V?void 0:V.path)||""}')`;case 8:return`GuardsCheckEnd(id: ${T.id}, url: '${T.url}', urlAfterRedirects: '${T.urlAfterRedirects}', state: ${T.state}, shouldActivate: ${T.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${T.id}, url: '${T.url}', urlAfterRedirects: '${T.urlAfterRedirects}', state: ${T.state})`;case 2:return`NavigationCancel(id: ${T.id}, url: '${T.url}')`;case 16:return`NavigationSkipped(id: ${T.id}, url: '${T.url}')`;case 1:return`NavigationEnd(id: ${T.id}, url: '${T.url}', urlAfterRedirects: '${T.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${T.id}, url: '${T.url}', error: ${T.error})`;case 0:return`NavigationStart(id: ${T.id}, url: '${T.url}')`;case 6:return`ResolveEnd(id: ${T.id}, url: '${T.url}', urlAfterRedirects: '${T.urlAfterRedirects}', state: ${T.state})`;case 5:return`ResolveStart(id: ${T.id}, url: '${T.url}', urlAfterRedirects: '${T.urlAfterRedirects}', state: ${T.state})`;case 10:return`RouteConfigLoadEnd(path: ${T.route.path})`;case 9:return`RouteConfigLoadStart(path: ${T.route.path})`;case 4:return`RoutesRecognized(id: ${T.id}, url: '${T.url}', urlAfterRedirects: '${T.urlAfterRedirects}', state: ${T.state})`;case 15:return`Scroll(anchor: '${T.anchor}', position: '${T.position?`${T.position[0]}, ${T.position[1]}`:null}')`}}(w)),console.log(w),null===(X=(ie=console).groupEnd)||void 0===X||X.call(ie)})}}]:[],Ms(1,T)}const Cc=new a.OlP(Ca?"router preloader":"");function Wi(T){return Ms(0,[{provide:Cc,useExisting:zs},{provide:Qa,useExisting:T}])}const Rs=!1,Ba=new a.OlP(Rs?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Ro=[je.Ye,{provide:Mn,useClass:Pn},es,cs,{provide:ms,useFactory:function yl(T){return T.routerState.root},deps:[es]},qa,Rs?{provide:Ai,useValue:!0}:[]];function jo(){return new a.PXZ("Router",es)}let Fl=(()=>{class T{constructor(w){}static forRoot(w,M){return{ngModule:T,providers:[Ro,Rs&&null!=M&&M.enableTracing?no().\u0275providers:[],{provide:Uo,multi:!0,useValue:w},{provide:Ba,useFactory:ro,deps:[[es,new a.FiY,new a.tp0]]},{provide:Si,useValue:M||{}},null!=M&&M.useHash?{provide:je.S$,useClass:je.Do}:{provide:je.S$,useClass:je.b0},{provide:ta,useFactory:()=>{const T=(0,a.f3M)(je.EM),x=(0,a.f3M)(a.R0b),w=(0,a.f3M)(Si),M=(0,a.f3M)(Gs),V=(0,a.f3M)(Mn);return w.scrollOffset&&T.setOffset(w.scrollOffset),new na(V,M,T,x,w)}},null!=M&&M.preloadingStrategy?Wi(M.preloadingStrategy).\u0275providers:[],{provide:a.PXZ,multi:!0,useFactory:jo},null!=M&&M.initialNavigation?Ws(M):[],[{provide:li,useFactory:Ja},{provide:a.tb,multi:!0,useExisting:li}]]}}static forChild(w){return{ngModule:T,providers:[{provide:Uo,multi:!0,useValue:w}]}}}return T.\u0275fac=function(w){return new(w||T)(a.LFG(Ba,8))},T.\u0275mod=a.oAB({type:T}),T.\u0275inj=a.cJS({imports:[Dr]}),T})();function ro(T){if(Rs&&T)throw new a.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Ws(T){return["disabled"===T.initialNavigation?Ms(3,[{provide:a.ip1,multi:!0,useFactory:()=>{const x=(0,a.f3M)(es);return()=>{x.setUpLocationChangeListener()}}},{provide:_l,useValue:2}]).\u0275providers:[],"enabledBlocking"===T.initialNavigation?Ms(2,[{provide:_l,useValue:0},{provide:a.ip1,multi:!0,deps:[a.zs3],useFactory:x=>{const w=x.get(je.V_,Promise.resolve());return()=>w.then(()=>new Promise(M=>{const V=x.get(es),X=x.get(kl);(function wa(T,x){T.events.pipe((0,nt.h)(w=>w instanceof sn||w instanceof Sn||w instanceof Yn||w instanceof Bn),(0,Ke.U)(w=>w instanceof sn||w instanceof Bn?Zi.COMPLETE:w instanceof Sn&&(0===w.code||1===w.code)?Zi.REDIRECTING:Zi.FAILED),(0,nt.h)(w=>w!==Zi.REDIRECTING),(0,W.q)(1)).subscribe(()=>{x()})})(V,()=>{M(!0)}),x.get(Gs).afterPreactivation=()=>(M(!0),X.closed?(0,z.of)(void 0):X),V.initialNavigation()}))}}]).\u0275providers:[]]}const li=new a.OlP(Rs?"Router Initializer":"")},3942:(ln,ft,$)=>{"use strict";$.d(ft,{Z:()=>ut});var a=$(2090),te=$(4859),z=$(9681),Te=$(1877);class xe{constructor(Me,ve){this._delegate=Me,this.firebase=ve,(0,z._addComponent)(Me,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=Me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Me){this._delegate.automaticDataCollectionEnabled=Me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Me=>{this._delegate.checkDestroyed(),Me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,z.deleteApp)(this._delegate)))}_getService(Me,ve=z._DEFAULT_ENTRY_NAME){var le;this._delegate.checkDestroyed();const at=this._delegate.container.getProvider(Me);return!at.isInitialized()&&"EXPLICIT"===(null===(le=at.getComponent())||void 0===le?void 0:le.instantiationMode)&&at.initialize(),at.getImmediate({identifier:ve})}_removeServiceInstance(Me,ve=z._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Me).clearInstance(ve)}_addComponent(Me){(0,z._addComponent)(this._delegate,Me)}_addOrOverwriteComponent(Me){(0,z._addOrOverwriteComponent)(this._delegate,Me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const de=new a.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),me=function Ue(){const Dt=function Ae(Dt){const Me={},ve={__esModule:!0,initializeApp:function st(Oe,J={}){const Xe=z.initializeApp(Oe,J);if((0,a.r3)(Me,Xe.name))return Me[Xe.name];const Fe=new Dt(Xe,ve);return Me[Xe.name]=Fe,Fe},app:at,registerVersion:z.registerVersion,setLogLevel:z.setLogLevel,onLog:z.onLog,apps:null,SDK_VERSION:z.SDK_VERSION,INTERNAL:{registerComponent:function Qe(Oe){const J=Oe.name,Xe=J.replace("-compat","");if(z._registerComponent(Oe)&&"PUBLIC"===Oe.type){const Fe=(je=at())=>{if("function"!=typeof je[Xe])throw de.create("invalid-app-argument",{appName:J});return je[Xe]()};void 0!==Oe.serviceProps&&(0,a.ZB)(Fe,Oe.serviceProps),ve[Xe]=Fe,Dt.prototype[Xe]=function(...je){return this._getService.bind(this,J).apply(this,Oe.multipleInstances?je:[])}}return"PUBLIC"===Oe.type?ve[Xe]:null},removeApp:function le(Oe){delete Me[Oe]},useAsService:function Pe(Oe,J){return"serverAuth"===J?null:J},modularAPIs:z}};function at(Oe){if(!(0,a.r3)(Me,Oe=Oe||z._DEFAULT_ENTRY_NAME))throw de.create("no-app",{appName:Oe});return Me[Oe]}return ve.default=ve,Object.defineProperty(ve,"apps",{get:function et(){return Object.keys(Me).map(Oe=>Me[Oe])}}),at.App=Dt,ve}(xe);return Dt.INTERNAL=Object.assign(Object.assign({},Dt.INTERNAL),{createFirebaseNamespace:Ue,extendNamespace:function Me(ve){(0,a.ZB)(Dt,ve)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),Dt}(),fe=new Te.Yd("@firebase/app-compat");if((0,a.jU)()&&void 0!==self.firebase){fe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Dt=self.firebase.SDK_VERSION;Dt&&Dt.indexOf("LITE")>=0&&fe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ut=me;!function Ge(Dt){(0,z.registerVersion)("@firebase/app-compat","0.2.4",Dt)}()},9681:(ln,ft,$)=>{"use strict";$.r(ft),$.d(ft,{FirebaseError:()=>Te.ZR,SDK_VERSION:()=>Un,_DEFAULT_ENTRY_NAME:()=>we,_addComponent:()=>rt,_addOrOverwriteComponent:()=>He,_apps:()=>Je,_clearComponents:()=>cn,_components:()=>Le,_getProvider:()=>St,_registerComponent:()=>Pt,_removeServiceInstance:()=>Nt,deleteApp:()=>_r,getApp:()=>nr,getApps:()=>Cr,initializeApp:()=>Qt,onLog:()=>Yt,registerVersion:()=>dr,setLogLevel:()=>Zr});var a=$(5861),te=$(4859),z=$(1877),Te=$(2090),xe=$(8766);class Se{constructor($t){this.container=$t}getPlatformInfoString(){return this.container.getProviders().map(yn=>{if(function de(rn){const $t=rn.getComponent();return"VERSION"===(null==$t?void 0:$t.type)}(yn)){const Mn=yn.getImmediate();return`${Mn.library}/${Mn.version}`}return null}).filter(yn=>yn).join(" ")}}const Ae="@firebase/app",me=new z.Yd("@firebase/app"),we="[DEFAULT]",be={[Ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Je=new Map,Le=new Map;function rt(rn,$t){try{rn.container.addComponent($t)}catch(yn){me.debug(`Component ${$t.name} failed to register with FirebaseApp ${rn.name}`,yn)}}function He(rn,$t){rn.container.addOrOverwriteComponent($t)}function Pt(rn){const $t=rn.name;if(Le.has($t))return me.debug(`There were multiple attempts to register component ${$t}.`),!1;Le.set($t,rn);for(const yn of Je.values())rt(yn,rn);return!0}function St(rn,$t){const yn=rn.container.getProvider("heartbeat").getImmediate({optional:!0});return yn&&yn.triggerHeartbeat(),rn.container.getProvider($t)}function Nt(rn,$t,yn=we){St(rn,$t).clearInstance(yn)}function cn(){Le.clear()}const Dn=new Te.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ln{constructor($t,yn,Mn){this._isDeleted=!1,this._options=Object.assign({},$t),this._config=Object.assign({},yn),this._name=yn.name,this._automaticDataCollectionEnabled=yn.automaticDataCollectionEnabled,this._container=Mn,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled($t){this.checkDestroyed(),this._automaticDataCollectionEnabled=$t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted($t){this._isDeleted=$t}checkDestroyed(){if(this.isDeleted)throw Dn.create("app-deleted",{appName:this._name})}}const Un="9.17.2";function Qt(rn,$t={}){let yn=rn;"object"!=typeof $t&&($t={name:$t});const Mn=Object.assign({name:we,automaticDataCollectionEnabled:!1},$t),Pn=Mn.name;if("string"!=typeof Pn||!Pn)throw Dn.create("bad-app-name",{appName:String(Pn)});if(yn||(yn=(0,Te.aH)()),!yn)throw Dn.create("no-options");const jn=Je.get(Pn);if(jn){if((0,Te.vZ)(yn,jn.options)&&(0,Te.vZ)(Mn,jn.config))return jn;throw Dn.create("duplicate-app",{appName:Pn})}const Or=new te.H0(Pn);for(const Ee of Le.values())Or.addComponent(Ee);const Re=new Ln(yn,Mn,Or);return Je.set(Pn,Re),Re}function nr(rn=we){const $t=Je.get(rn);if(!$t&&rn===we)return Qt();if(!$t)throw Dn.create("no-app",{appName:rn});return $t}function Cr(){return Array.from(Je.values())}function _r(rn){return gn.apply(this,arguments)}function gn(){return(gn=(0,a.Z)(function*(rn){const $t=rn.name;Je.has($t)&&(Je.delete($t),yield Promise.all(rn.container.getProviders().map(yn=>yn.delete())),rn.isDeleted=!0)})).apply(this,arguments)}function dr(rn,$t,yn){var Mn;let Pn=null!==(Mn=be[rn])&&void 0!==Mn?Mn:rn;yn&&(Pn+=`-${yn}`);const jn=Pn.match(/\s|\//),Or=$t.match(/\s|\//);if(jn||Or){const Re=[`Unable to register library "${Pn}" with version "${$t}":`];return jn&&Re.push(`library name "${Pn}" contains illegal characters (whitespace or "/")`),jn&&Or&&Re.push("and"),Or&&Re.push(`version name "${$t}" contains illegal characters (whitespace or "/")`),void me.warn(Re.join(" "))}Pt(new te.wA(`${Pn}-version`,()=>({library:Pn,version:$t}),"VERSION"))}function Yt(rn,$t){if(null!==rn&&"function"!=typeof rn)throw Dn.create("invalid-log-argument");(0,z.Am)(rn,$t)}function Zr(rn){(0,z.Ub)(rn)}const Tr="firebase-heartbeat-database",br=1,ei="firebase-heartbeat-store";let Ar=null;function xn(){return Ar||(Ar=(0,xe.X3)(Tr,br,{upgrade:(rn,$t)=>{0===$t&&rn.createObjectStore(ei)}}).catch(rn=>{throw Dn.create("idb-open",{originalErrorMessage:rn.message})})),Ar}function Tn(){return(Tn=(0,a.Z)(function*(rn){try{return(yield xn()).transaction(ei).objectStore(ei).get(jr(rn))}catch($t){if($t instanceof Te.ZR)me.warn($t.message);else{const yn=Dn.create("idb-get",{originalErrorMessage:null==$t?void 0:$t.message});me.warn(yn.message)}}})).apply(this,arguments)}function xr(rn,$t){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,a.Z)(function*(rn,$t){try{const Mn=(yield xn()).transaction(ei,"readwrite");return yield Mn.objectStore(ei).put($t,jr(rn)),Mn.done}catch(yn){if(yn instanceof Te.ZR)me.warn(yn.message);else{const Mn=Dn.create("idb-set",{originalErrorMessage:null==yn?void 0:yn.message});me.warn(Mn.message)}}})).apply(this,arguments)}function jr(rn){return`${rn.name}!${rn.options.appId}`}class Gi{constructor($t){this.container=$t,this._heartbeatsCache=null;const yn=this.container.getProvider("app").getImmediate();this._storage=new sr(yn),this._heartbeatsCachePromise=this._storage.read().then(Mn=>(this._heartbeatsCache=Mn,Mn))}triggerHeartbeat(){var $t=this;return(0,a.Z)(function*(){const Mn=$t.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Pn=Sr();if(null===$t._heartbeatsCache&&($t._heartbeatsCache=yield $t._heartbeatsCachePromise),$t._heartbeatsCache.lastSentHeartbeatDate!==Pn&&!$t._heartbeatsCache.heartbeats.some(jn=>jn.date===Pn))return $t._heartbeatsCache.heartbeats.push({date:Pn,agent:Mn}),$t._heartbeatsCache.heartbeats=$t._heartbeatsCache.heartbeats.filter(jn=>{const Or=new Date(jn.date).valueOf();return Date.now()-Or<=2592e6}),$t._storage.overwrite($t._heartbeatsCache)})()}getHeartbeatsHeader(){var $t=this;return(0,a.Z)(function*(){if(null===$t._heartbeatsCache&&(yield $t._heartbeatsCachePromise),null===$t._heartbeatsCache||0===$t._heartbeatsCache.heartbeats.length)return"";const yn=Sr(),{heartbeatsToSend:Mn,unsentEntries:Pn}=function ui(rn,$t=1024){const yn=[];let Mn=rn.slice();for(const Pn of rn){const jn=yn.find(Or=>Or.agent===Pn.agent);if(jn){if(jn.dates.push(Pn.date),kn(yn)>$t){jn.dates.pop();break}}else if(yn.push({agent:Pn.agent,dates:[Pn.date]}),kn(yn)>$t){yn.pop();break}Mn=Mn.slice(1)}return{heartbeatsToSend:yn,unsentEntries:Mn}}($t._heartbeatsCache.heartbeats),jn=(0,Te.L)(JSON.stringify({version:2,heartbeats:Mn}));return $t._heartbeatsCache.lastSentHeartbeatDate=yn,Pn.length>0?($t._heartbeatsCache.heartbeats=Pn,yield $t._storage.overwrite($t._heartbeatsCache)):($t._heartbeatsCache.heartbeats=[],$t._storage.overwrite($t._heartbeatsCache)),jn})()}}function Sr(){return(new Date).toISOString().substring(0,10)}class sr{constructor($t){this.app=$t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,a.Z)(function*(){return!!(0,Te.hl)()&&(0,Te.eu)().then(()=>!0).catch(()=>!1)})()}read(){var $t=this;return(0,a.Z)(function*(){return(yield $t._canUseIndexedDBPromise)&&(yield function En(rn){return Tn.apply(this,arguments)}($t.app))||{heartbeats:[]}})()}overwrite($t){var yn=this;return(0,a.Z)(function*(){var Mn;if(yield yn._canUseIndexedDBPromise){const jn=yield yn.read();return xr(yn.app,{lastSentHeartbeatDate:null!==(Mn=$t.lastSentHeartbeatDate)&&void 0!==Mn?Mn:jn.lastSentHeartbeatDate,heartbeats:$t.heartbeats})}})()}add($t){var yn=this;return(0,a.Z)(function*(){var Mn;if(yield yn._canUseIndexedDBPromise){const jn=yield yn.read();return xr(yn.app,{lastSentHeartbeatDate:null!==(Mn=$t.lastSentHeartbeatDate)&&void 0!==Mn?Mn:jn.lastSentHeartbeatDate,heartbeats:[...jn.heartbeats,...$t.heartbeats]})}})()}}function kn(rn){return(0,Te.L)(JSON.stringify({version:2,heartbeats:rn})).length}!function hi(rn){Pt(new te.wA("platform-logger",$t=>new Se($t),"PRIVATE")),Pt(new te.wA("heartbeat",$t=>new Gi($t),"PRIVATE")),dr(Ae,"0.9.4",rn),dr(Ae,"0.9.4","esm2017"),dr("fire-js","")}("")},4859:(ln,ft,$)=>{"use strict";$.d(ft,{H0:()=>Ae,wA:()=>z,zt:()=>xe});var a=$(5861),te=$(2090);class z{constructor(me,fe,pe){this.name=me,this.instanceFactory=fe,this.type=pe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(me){return this.instantiationMode=me,this}setMultipleInstances(me){return this.multipleInstances=me,this}setServiceProps(me){return this.serviceProps=me,this}setInstanceCreatedCallback(me){return this.onInstanceCreated=me,this}}const Te="[DEFAULT]";class xe{constructor(me,fe){this.name=me,this.container=fe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(me){const fe=this.normalizeInstanceIdentifier(me);if(!this.instancesDeferred.has(fe)){const pe=new te.BH;if(this.instancesDeferred.set(fe,pe),this.isInitialized(fe)||this.shouldAutoInitialize())try{const ke=this.getOrInitializeService({instanceIdentifier:fe});ke&&pe.resolve(ke)}catch(ke){}}return this.instancesDeferred.get(fe).promise}getImmediate(me){var fe;const pe=this.normalizeInstanceIdentifier(null==me?void 0:me.identifier),ke=null!==(fe=null==me?void 0:me.optional)&&void 0!==fe&&fe;if(!this.isInitialized(pe)&&!this.shouldAutoInitialize()){if(ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:pe})}catch(Ge){if(ke)return null;throw Ge}}getComponent(){return this.component}setComponent(me){if(me.name!==this.name)throw Error(`Mismatching Component ${me.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=me,this.shouldAutoInitialize()){if(function de(Ue){return"EAGER"===Ue.instantiationMode}(me))try{this.getOrInitializeService({instanceIdentifier:Te})}catch(fe){}for(const[fe,pe]of this.instancesDeferred.entries()){const ke=this.normalizeInstanceIdentifier(fe);try{const Ge=this.getOrInitializeService({instanceIdentifier:ke});pe.resolve(Ge)}catch(Ge){}}}}clearInstance(me=Te){this.instancesDeferred.delete(me),this.instancesOptions.delete(me),this.instances.delete(me)}delete(){var me=this;return(0,a.Z)(function*(){const fe=Array.from(me.instances.values());yield Promise.all([...fe.filter(pe=>"INTERNAL"in pe).map(pe=>pe.INTERNAL.delete()),...fe.filter(pe=>"_delete"in pe).map(pe=>pe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(me=Te){return this.instances.has(me)}getOptions(me=Te){return this.instancesOptions.get(me)||{}}initialize(me={}){const{options:fe={}}=me,pe=this.normalizeInstanceIdentifier(me.instanceIdentifier);if(this.isInitialized(pe))throw Error(`${this.name}(${pe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ke=this.getOrInitializeService({instanceIdentifier:pe,options:fe});for(const[Ge,ut]of this.instancesDeferred.entries())pe===this.normalizeInstanceIdentifier(Ge)&&ut.resolve(ke);return ke}onInit(me,fe){var pe;const ke=this.normalizeInstanceIdentifier(fe),Ge=null!==(pe=this.onInitCallbacks.get(ke))&&void 0!==pe?pe:new Set;Ge.add(me),this.onInitCallbacks.set(ke,Ge);const ut=this.instances.get(ke);return ut&&me(ut,ke),()=>{Ge.delete(me)}}invokeOnInitCallbacks(me,fe){const pe=this.onInitCallbacks.get(fe);if(pe)for(const ke of pe)try{ke(me,fe)}catch(Ge){}}getOrInitializeService({instanceIdentifier:me,options:fe={}}){let pe=this.instances.get(me);if(!pe&&this.component&&(pe=this.component.instanceFactory(this.container,{instanceIdentifier:(Ue=me,Ue===Te?void 0:Ue),options:fe}),this.instances.set(me,pe),this.instancesOptions.set(me,fe),this.invokeOnInitCallbacks(pe,me),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,me,pe)}catch(ke){}var Ue;return pe||null}normalizeInstanceIdentifier(me=Te){return this.component?this.component.multipleInstances?me:Te:me}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ae{constructor(me){this.name=me,this.providers=new Map}addComponent(me){const fe=this.getProvider(me.name);if(fe.isComponentSet())throw new Error(`Component ${me.name} has already been registered with ${this.name}`);fe.setComponent(me)}addOrOverwriteComponent(me){this.getProvider(me.name).isComponentSet()&&this.providers.delete(me.name),this.addComponent(me)}getProvider(me){if(this.providers.has(me))return this.providers.get(me);const fe=new xe(me,this);return this.providers.set(me,fe),fe}getProviders(){return Array.from(this.providers.values())}}},1877:(ln,ft,$)=>{"use strict";$.d(ft,{Am:()=>Ue,Ub:()=>Ae,Yd:()=>de,in:()=>te});const a=[];var te=(()=>{return(me=te||(te={}))[me.DEBUG=0]="DEBUG",me[me.VERBOSE=1]="VERBOSE",me[me.INFO=2]="INFO",me[me.WARN=3]="WARN",me[me.ERROR=4]="ERROR",me[me.SILENT=5]="SILENT",te;var me})();const z={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},Te=te.INFO,xe={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},Se=(me,fe,...pe)=>{if(fe<me.logLevel)return;const ke=(new Date).toISOString(),Ge=xe[fe];if(!Ge)throw new Error(`Attempted to log a message with an invalid logType (value: ${fe})`);console[Ge](`[${ke}]  ${me.name}:`,...pe)};class de{constructor(fe){this.name=fe,this._logLevel=Te,this._logHandler=Se,this._userLogHandler=null,a.push(this)}get logLevel(){return this._logLevel}set logLevel(fe){if(!(fe in te))throw new TypeError(`Invalid value "${fe}" assigned to \`logLevel\``);this._logLevel=fe}setLogLevel(fe){this._logLevel="string"==typeof fe?z[fe]:fe}get logHandler(){return this._logHandler}set logHandler(fe){if("function"!=typeof fe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=fe}get userLogHandler(){return this._userLogHandler}set userLogHandler(fe){this._userLogHandler=fe}debug(...fe){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...fe),this._logHandler(this,te.DEBUG,...fe)}log(...fe){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...fe),this._logHandler(this,te.VERBOSE,...fe)}info(...fe){this._userLogHandler&&this._userLogHandler(this,te.INFO,...fe),this._logHandler(this,te.INFO,...fe)}warn(...fe){this._userLogHandler&&this._userLogHandler(this,te.WARN,...fe),this._logHandler(this,te.WARN,...fe)}error(...fe){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...fe),this._logHandler(this,te.ERROR,...fe)}}function Ae(me){a.forEach(fe=>{fe.setLogLevel(me)})}function Ue(me,fe){for(const pe of a){let ke=null;fe&&fe.level&&(ke=z[fe.level]),pe.userLogHandler=null===me?null:(Ge,ut,...Dt)=>{const Me=Dt.map(ve=>{if(null==ve)return null;if("string"==typeof ve)return ve;if("number"==typeof ve||"boolean"==typeof ve)return ve.toString();if(ve instanceof Error)return ve.message;try{return JSON.stringify(ve)}catch(le){return null}}).filter(ve=>ve).join(" ");ut>=(null!=ke?ke:Ge.logLevel)&&me({level:te[ut].toLowerCase(),message:Me,args:Dt,type:Ge.name})}}}},259:(ln,ft,$)=>{"use strict";$.d(ft,{C6:()=>a.getApps,Mq:()=>a.getApp});var a=$(9681);(0,a.registerVersion)("firebase","9.17.2","app")},9260:(ln,ft,$)=>{"use strict";$.d(ft,{Z:()=>a.Z});var a=$(3942);a.Z.registerVersion("firebase","9.17.2","app-compat")},4217:(ln,ft,$)=>{"use strict";$.r(ft);var a=$(5861),te=$(3942),z=$(2090),Te=$(9681),xe=$(1877),Se=$(655),de=$(4859);const Ue={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},pe_EMAIL_SIGNIN="EMAIL_SIGNIN",pe_PASSWORD_RESET="PASSWORD_RESET",pe_RECOVER_EMAIL="RECOVER_EMAIL",pe_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",pe_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",pe_VERIFY_EMAIL="VERIFY_EMAIL";const ut=function ke(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Dt=function Ge(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Me=new z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),le=new xe.Yd("@firebase/auth");function at(b,...g){le.logLevel<=xe.in.ERROR&&le.error(`Auth (${Te.SDK_VERSION}): ${b}`,...g)}function st(b,...g){throw Oe(b,...g)}function et(b,...g){return Oe(b,...g)}function Qe(b,g,E){const A=Object.assign(Object.assign({},Dt()),{[g]:E});return new z.LL("auth","Firebase",A).create(g,{appName:b.name})}function Pe(b,g,E){if(!(g instanceof E))throw E.name!==g.constructor.name&&st(b,"argument-error"),Qe(b,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Oe(b,...g){if("string"!=typeof b){const E=g[0],A=[...g.slice(1)];return A[0]&&(A[0].appName=b.name),b._errorFactory.create(E,...A)}return Me.create(b,...g)}function J(b,g,...E){if(!b)throw Oe(g,...E)}function Xe(b){const g="INTERNAL ASSERTION FAILED: "+b;throw at(g),new Error(g)}function Fe(b,g){b||Xe(g)}const je=new Map;function Ke(b){Fe(b instanceof Function,"Expected a class definition");let g=je.get(b);return g?(Fe(g instanceof b,"Instance stored in cache mismatched with class"),g):(g=new b,je.set(b,g),g)}function pt(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function nt(){return"http:"===Ie()||"https:"===Ie()}function Ie(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class Je{constructor(g,E){this.shortDelay=g,this.longDelay=E,Fe(E>g,"Short delay should be less than long delay!"),this.isMobile=(0,z.uI)()||(0,z.b$)()}get(){return function we(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(nt()||(0,z.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Le(b,g){Fe(b.emulator,"Emulator should always be set here");const{url:E}=b.emulator;return g?`${E}${g.startsWith("/")?g.slice(1):g}`:E}class rt{static initialize(g,E,A){this.fetchImpl=g,E&&(this.headersImpl=E),A&&(this.responseImpl=A)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Xe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Xe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Xe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const He={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Pt=new Je(3e4,6e4);function St(b,g){return b.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:b.tenantId}):g}function Nt(b,g,E,A){return cn.apply(this,arguments)}function cn(){return(cn=(0,a.Z)(function*(b,g,E,A,q={}){return xt(b,q,(0,a.Z)(function*(){let ae={},ht={};A&&("GET"===g?ht=A:ae={body:JSON.stringify(A)});const jt=(0,z.xO)(Object.assign({key:b.config.apiKey},ht)).slice(1),bn=yield b._getAdditionalHeaders();return bn["Content-Type"]="application/json",b.languageCode&&(bn["X-Firebase-Locale"]=b.languageCode),rt.fetch()(Qt(b,b.config.apiHost,E,jt),Object.assign({method:g,headers:bn,referrerPolicy:"no-referrer"},ae))}))})).apply(this,arguments)}function xt(b,g,E){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,a.Z)(function*(b,g,E){b._canInitEmulator=!1;const A=Object.assign(Object.assign({},He),g);try{const q=new nr(b),ae=yield Promise.race([E(),q.promise]);q.clearNetworkTimeout();const ht=yield ae.json();if("needConfirmation"in ht)throw Cr(b,"account-exists-with-different-credential",ht);if(ae.ok&&!("errorMessage"in ht))return ht;{const jt=ae.ok?ht.errorMessage:ht.error.message,[bn,$n]=jt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===bn)throw Cr(b,"credential-already-in-use",ht);if("EMAIL_EXISTS"===bn)throw Cr(b,"email-already-in-use",ht);if("USER_DISABLED"===bn)throw Cr(b,"user-disabled",ht);const wr=A[bn]||bn.toLowerCase().replace(/[_\s]+/g,"-");if($n)throw Qe(b,wr,$n);st(b,wr)}}catch(q){if(q instanceof z.ZR)throw q;st(b,"internal-error",{message:String(q)})}})).apply(this,arguments)}function Ln(b,g,E,A){return Un.apply(this,arguments)}function Un(){return(Un=(0,a.Z)(function*(b,g,E,A,q={}){const ae=yield Nt(b,g,E,A,q);return"mfaPendingCredential"in ae&&st(b,"multi-factor-auth-required",{_serverResponse:ae}),ae})).apply(this,arguments)}function Qt(b,g,E,A){const q=`${g}${E}?${A}`;return b.config.emulator?Le(b.config,q):`${b.config.apiScheme}://${q}`}class nr{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((E,A)=>{this.timer=setTimeout(()=>A(et(this.auth,"network-request-failed")),Pt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Cr(b,g,E){const A={appName:b.name};E.email&&(A.email=E.email),E.phoneNumber&&(A.phoneNumber=E.phoneNumber);const q=et(b,g,A);return q.customData._tokenResponse=E,q}function gn(){return(gn=(0,a.Z)(function*(b,g){return Nt(b,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Yt(){return(Yt=(0,a.Z)(function*(b,g){return Nt(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Tr(){return(Tr=(0,a.Z)(function*(b,g){return Nt(b,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function br(b){if(b)try{const g=new Date(Number(b));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function xn(){return(xn=(0,a.Z)(function*(b,g=!1){const E=(0,z.m9)(b),A=yield E.getIdToken(g),q=Tn(A);J(q&&q.exp&&q.auth_time&&q.iat,E.auth,"internal-error");const ae="object"==typeof q.firebase?q.firebase:void 0,ht=null==ae?void 0:ae.sign_in_provider;return{claims:q,token:A,authTime:br(En(q.auth_time)),issuedAtTime:br(En(q.iat)),expirationTime:br(En(q.exp)),signInProvider:ht||null,signInSecondFactor:(null==ae?void 0:ae.sign_in_second_factor)||null}})).apply(this,arguments)}function En(b){return 1e3*Number(b)}function Tn(b){const[g,E,A]=b.split(".");if(void 0===g||void 0===E||void 0===A)return at("JWT malformed, contained fewer than 3 sections"),null;try{const q=(0,z.tV)(E);return q?JSON.parse(q):(at("Failed to decode base64 JWT payload"),null)}catch(q){return at("Caught error parsing JWT payload as JSON",null==q?void 0:q.toString()),null}}function Cn(b,g){return jr.apply(this,arguments)}function jr(){return(jr=(0,a.Z)(function*(b,g,E=!1){if(E)return g;try{return yield g}catch(A){throw A instanceof z.ZR&&function Gt({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}(A)&&b.auth.currentUser===b&&(yield b.auth.signOut()),A}})).apply(this,arguments)}class yi{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var E;if(g){const A=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),A}{this.errorBackoff=3e4;const q=(null!==(E=this.user.stsTokenManager.expirationTime)&&void 0!==E?E:0)-Date.now()-3e5;return Math.max(0,q)}}schedule(g=!1){var E=this;if(!this.isRunning)return;const A=this.getInterval(g);this.timerId=setTimeout((0,a.Z)(function*(){yield E.iteration()}),A)}iteration(){var g=this;return(0,a.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null==E?void 0:E.code)&&g.schedule(!0))}g.schedule()})()}}class Gi{constructor(g,E){this.createdAt=g,this.lastLoginAt=E,this._initializeTime()}_initializeTime(){this.lastSignInTime=br(this.lastLoginAt),this.creationTime=br(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Sr(b){return ui.apply(this,arguments)}function ui(){return ui=(0,a.Z)(function*(b){var g;const E=b.auth,A=yield b.getIdToken(),q=yield Cn(b,function Zr(b,g){return Tr.apply(this,arguments)}(E,{idToken:A}));J(null==q?void 0:q.users.length,E,"internal-error");const ae=q.users[0];b._notifyReloadListener(ae);const ht=null!==(g=ae.providerUserInfo)&&void 0!==g&&g.length?function rn(b){return b.map(g=>{var{providerId:E}=g,A=(0,Se._T)(g,["providerId"]);return{providerId:E,uid:A.rawId||"",displayName:A.displayName||null,email:A.email||null,phoneNumber:A.phoneNumber||null,photoURL:A.photoUrl||null}})}(ae.providerUserInfo):[],jt=function hi(b,g){return[...b.filter(A=>!g.some(q=>q.providerId===A.providerId)),...g]}(b.providerData,ht),wr=!!b.isAnonymous&&!(b.email&&ae.passwordHash||null!=jt&&jt.length),yr={uid:ae.localId,displayName:ae.displayName||null,photoURL:ae.photoUrl||null,email:ae.email||null,emailVerified:ae.emailVerified||!1,phoneNumber:ae.phoneNumber||null,tenantId:ae.tenantId||null,providerData:jt,metadata:new Gi(ae.createdAt,ae.lastLoginAt),isAnonymous:wr};Object.assign(b,yr)}),ui.apply(this,arguments)}function kn(){return(kn=(0,a.Z)(function*(b){const g=(0,z.m9)(b);yield Sr(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function yn(){return(yn=(0,a.Z)(function*(b,g){const E=yield xt(b,{},(0,a.Z)(function*(){const A=(0,z.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:q,apiKey:ae}=b.config,ht=Qt(b,q,"/v1/token",`key=${ae}`),jt=yield b._getAdditionalHeaders();return jt["Content-Type"]="application/x-www-form-urlencoded",rt.fetch()(ht,{method:"POST",headers:jt,body:A})}));return{accessToken:E.access_token,expiresIn:E.expires_in,refreshToken:E.refresh_token}})).apply(this,arguments)}class Mn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){J(g.idToken,"internal-error"),J(typeof g.idToken<"u","internal-error"),J(typeof g.refreshToken<"u","internal-error");const E="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function xr(b){const g=Tn(b);return J(g,"internal-error"),J(typeof g.exp<"u","internal-error"),J(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,E)}getToken(g,E=!1){var A=this;return(0,a.Z)(function*(){return J(!A.accessToken||A.refreshToken,g,"user-token-expired"),E||!A.accessToken||A.isExpired?A.refreshToken?(yield A.refresh(g,A.refreshToken),A.accessToken):null:A.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,E){var A=this;return(0,a.Z)(function*(){const{accessToken:q,refreshToken:ae,expiresIn:ht}=yield function $t(b,g){return yn.apply(this,arguments)}(g,E);A.updateTokensAndExpiration(q,ae,Number(ht))})()}updateTokensAndExpiration(g,E,A){this.refreshToken=E||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*A}static fromJSON(g,E){const{refreshToken:A,accessToken:q,expirationTime:ae}=E,ht=new Mn;return A&&(J("string"==typeof A,"internal-error",{appName:g}),ht.refreshToken=A),q&&(J("string"==typeof q,"internal-error",{appName:g}),ht.accessToken=q),ae&&(J("number"==typeof ae,"internal-error",{appName:g}),ht.expirationTime=ae),ht}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Mn,this.toJSON())}_performRefresh(){return Xe("not implemented")}}function Pn(b,g){J("string"==typeof b||typeof b>"u","internal-error",{appName:g})}class jn{constructor(g){var{uid:E,auth:A,stsTokenManager:q}=g,ae=(0,Se._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=E,this.auth=A,this.stsTokenManager=q,this.accessToken=q.accessToken,this.displayName=ae.displayName||null,this.email=ae.email||null,this.emailVerified=ae.emailVerified||!1,this.phoneNumber=ae.phoneNumber||null,this.photoURL=ae.photoURL||null,this.isAnonymous=ae.isAnonymous||!1,this.tenantId=ae.tenantId||null,this.providerData=ae.providerData?[...ae.providerData]:[],this.metadata=new Gi(ae.createdAt||void 0,ae.lastLoginAt||void 0)}getIdToken(g){var E=this;return(0,a.Z)(function*(){const A=yield Cn(E,E.stsTokenManager.getToken(E.auth,g));return J(A,E.auth,"internal-error"),E.accessToken!==A&&(E.accessToken=A,yield E.auth._persistUserIfCurrent(E),E.auth._notifyListenersIfCurrent(E)),A})()}getIdTokenResult(g){return function Ar(b){return xn.apply(this,arguments)}(this,g)}reload(){return function sr(b){return kn.apply(this,arguments)}(this)}_assign(g){this!==g&&(J(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(E=>Object.assign({},E)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new jn(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,E=!1){var A=this;return(0,a.Z)(function*(){let q=!1;g.idToken&&g.idToken!==A.stsTokenManager.accessToken&&(A.stsTokenManager.updateFromServerResponse(g),q=!0),E&&(yield Sr(A)),yield A.auth._persistUserIfCurrent(A),q&&A.auth._notifyListenersIfCurrent(A)})()}delete(){var g=this;return(0,a.Z)(function*(){const E=yield g.getIdToken();return yield Cn(g,function _r(b,g){return gn.apply(this,arguments)}(g.auth,{idToken:E})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,E){var A,q,ae,ht,jt,bn,$n,wr;const yr=null!==(A=E.displayName)&&void 0!==A?A:void 0,Ks=null!==(q=E.email)&&void 0!==q?q:void 0,Ma=null!==(ae=E.phoneNumber)&&void 0!==ae?ae:void 0,lu=null!==(ht=E.photoURL)&&void 0!==ht?ht:void 0,Ys=null!==(jt=E.tenantId)&&void 0!==jt?jt:void 0,Gl=null!==(bn=E._redirectEventId)&&void 0!==bn?bn:void 0,oc=null!==($n=E.createdAt)&&void 0!==$n?$n:void 0,Oc=null!==(wr=E.lastLoginAt)&&void 0!==wr?wr:void 0,{uid:Pc,emailVerified:Rl,isAnonymous:$u,providerData:vd,stsTokenManager:Nc}=E;J(Pc&&Nc,g,"internal-error");const kc=Mn.fromJSON(this.name,Nc);J("string"==typeof Pc,g,"internal-error"),Pn(yr,g.name),Pn(Ks,g.name),J("boolean"==typeof Rl,g,"internal-error"),J("boolean"==typeof $u,g,"internal-error"),Pn(Ma,g.name),Pn(lu,g.name),Pn(Ys,g.name),Pn(Gl,g.name),Pn(oc,g.name),Pn(Oc,g.name);const Po=new jn({uid:Pc,auth:g,email:Ks,emailVerified:Rl,displayName:yr,isAnonymous:$u,photoURL:lu,phoneNumber:Ma,tenantId:Ys,stsTokenManager:kc,createdAt:oc,lastLoginAt:Oc});return vd&&Array.isArray(vd)&&(Po.providerData=vd.map(bf=>Object.assign({},bf))),Gl&&(Po._redirectEventId=Gl),Po}static _fromIdTokenResponse(g,E,A=!1){return(0,a.Z)(function*(){const q=new Mn;q.updateFromServerResponse(E);const ae=new jn({uid:E.localId,auth:g,stsTokenManager:q,isAnonymous:A});return yield Sr(ae),ae})()}}const Re=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,a.Z)(function*(){return!0})()}_set(E,A){var q=this;return(0,a.Z)(function*(){q.storage[E]=A})()}_get(E){var A=this;return(0,a.Z)(function*(){const q=A.storage[E];return void 0===q?null:q})()}_remove(E){var A=this;return(0,a.Z)(function*(){delete A.storage[E]})()}_addListener(E,A){}_removeListener(E,A){}}return b.type="NONE",b})();function Ee(b,g,E){return`firebase:${b}:${g}:${E}`}class We{constructor(g,E,A){this.persistence=g,this.auth=E,this.userKey=A;const{config:q,name:ae}=this.auth;this.fullUserKey=Ee(this.userKey,q.apiKey,ae),this.fullPersistenceKey=Ee("persistence",q.apiKey,ae),this.boundEventHandler=E._onStorageEvent.bind(E),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,a.Z)(function*(){const E=yield g.persistence._get(g.fullUserKey);return E?jn._fromJSON(g.auth,E):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var E=this;return(0,a.Z)(function*(){if(E.persistence===g)return;const A=yield E.getCurrentUser();return yield E.removeCurrentUser(),E.persistence=g,A?E.setCurrentUser(A):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,E,A="authUser"){return(0,a.Z)(function*(){if(!E.length)return new We(Ke(Re),g,A);const q=(yield Promise.all(E.map(function(){var $n=(0,a.Z)(function*(wr){if(yield wr._isAvailable())return wr});return function(wr){return $n.apply(this,arguments)}}()))).filter($n=>$n);let ae=q[0]||Ke(Re);const ht=Ee(A,g.config.apiKey,g.name);let jt=null;for(const $n of E)try{const wr=yield $n._get(ht);if(wr){const yr=jn._fromJSON(g,wr);$n!==ae&&(jt=yr),ae=$n;break}}catch(wr){}const bn=q.filter($n=>$n._shouldAllowMigration);return ae._shouldAllowMigration&&bn.length?(ae=bn[0],jt&&(yield ae._set(ht,jt.toJSON())),yield Promise.all(E.map(function(){var $n=(0,a.Z)(function*(wr){if(wr!==ae)try{yield wr._remove(ht)}catch(yr){}});return function(wr){return $n.apply(this,arguments)}}())),new We(ae,g,A)):new We(ae,g,A)})()}}function Rt(b){const g=b.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if($e(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(vt(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(yt(g))return"Blackberry";if(Ot(g))return"Webos";if(hn(g))return"Safari";if((g.includes("chrome/")||Be(g))&&!g.includes("edge/"))return"Chrome";if(ge(g))return"Android";{const A=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==A?void 0:A.length))return A[1]}return"Other"}function vt(b=(0,z.z$)()){return/firefox\//i.test(b)}function hn(b=(0,z.z$)()){const g=b.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Be(b=(0,z.z$)()){return/crios\//i.test(b)}function $e(b=(0,z.z$)()){return/iemobile/i.test(b)}function ge(b=(0,z.z$)()){return/android/i.test(b)}function yt(b=(0,z.z$)()){return/blackberry/i.test(b)}function Ot(b=(0,z.z$)()){return/webos/i.test(b)}function Ht(b=(0,z.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function Fi(b=(0,z.z$)()){return Ht(b)||ge(b)||Ot(b)||yt(b)||/windows phone/i.test(b)||$e(b)}function Yi(b,g=[]){let E;switch(b){case"Browser":E=Rt((0,z.z$)());break;case"Worker":E=`${Rt((0,z.z$)())}-${b}`;break;default:E=b}const A=g.length?g.join(","):"FirebaseCore-web";return`${E}/JsCore/${Te.SDK_VERSION}/${A}`}class fi{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,E){const A=ae=>new Promise((ht,jt)=>{try{ht(g(ae))}catch(bn){jt(bn)}});A.onAbort=E,this.queue.push(A);const q=this.queue.length-1;return()=>{this.queue[q]=()=>Promise.resolve()}}runMiddleware(g){var E=this;return(0,a.Z)(function*(){if(E.auth.currentUser===g)return;const A=[];try{for(const q of E.queue)yield q(g),q.onAbort&&A.push(q.onAbort)}catch(q){A.reverse();for(const ae of A)try{ae()}catch(ht){}throw E.auth._errorFactory.create("login-blocked",{originalMessage:null==q?void 0:q.message})}})()}}class Ri{constructor(g,E,A){this.app=g,this.heartbeatServiceProvider=E,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ls(this),this.idTokenSubscription=new ls(this),this.beforeStateQueue=new fi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Me,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(g,E){var A=this;return E&&(this._popupRedirectResolver=Ke(E)),this._initializationPromise=this.queue((0,a.Z)(function*(){var q,ae;if(!A._deleted&&(A.persistenceManager=yield We.create(A,g),!A._deleted)){if(null!==(q=A._popupRedirectResolver)&&void 0!==q&&q._shouldInitProactively)try{yield A._popupRedirectResolver._initialize(A)}catch(ht){}yield A.initializeCurrentUser(E),A.lastNotifiedUid=(null===(ae=A.currentUser)||void 0===ae?void 0:ae.uid)||null,!A._deleted&&(A._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,a.Z)(function*(){if(g._deleted)return;const E=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||E){if(g.currentUser&&E&&g.currentUser.uid===E.uid)return g._currentUser._assign(E),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(E,!0)}})()}initializeCurrentUser(g){var E=this;return(0,a.Z)(function*(){var A;const q=yield E.assertedPersistence.getCurrentUser();let ae=q,ht=!1;if(g&&E.config.authDomain){yield E.getOrInitRedirectPersistenceManager();const jt=null===(A=E.redirectUser)||void 0===A?void 0:A._redirectEventId,bn=null==ae?void 0:ae._redirectEventId,$n=yield E.tryRedirectSignIn(g);(!jt||jt===bn)&&null!=$n&&$n.user&&(ae=$n.user,ht=!0)}if(!ae)return E.directlySetCurrentUser(null);if(!ae._redirectEventId){if(ht)try{yield E.beforeStateQueue.runMiddleware(ae)}catch(jt){ae=q,E._popupRedirectResolver._overrideRedirectResult(E,()=>Promise.reject(jt))}return ae?E.reloadAndSetCurrentUserOrClear(ae):E.directlySetCurrentUser(null)}return J(E._popupRedirectResolver,E,"argument-error"),yield E.getOrInitRedirectPersistenceManager(),E.redirectUser&&E.redirectUser._redirectEventId===ae._redirectEventId?E.directlySetCurrentUser(ae):E.reloadAndSetCurrentUserOrClear(ae)})()}tryRedirectSignIn(g){var E=this;return(0,a.Z)(function*(){let A=null;try{A=yield E._popupRedirectResolver._completeRedirectFn(E,g,!0)}catch(q){yield E._setRedirectUser(null)}return A})()}reloadAndSetCurrentUserOrClear(g){var E=this;return(0,a.Z)(function*(){try{yield Sr(g)}catch(A){if("auth/network-request-failed"!==(null==A?void 0:A.code))return E.directlySetCurrentUser(null)}return E.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function be(){if(typeof navigator>"u")return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var g=this;return(0,a.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var E=this;return(0,a.Z)(function*(){const A=g?(0,z.m9)(g):null;return A&&J(A.auth.config.apiKey===E.config.apiKey,E,"invalid-user-token"),E._updateCurrentUser(A&&A._clone(E))})()}_updateCurrentUser(g,E=!1){var A=this;return(0,a.Z)(function*(){if(!A._deleted)return g&&J(A.tenantId===g.tenantId,A,"tenant-id-mismatch"),E||(yield A.beforeStateQueue.runMiddleware(g)),A.queue((0,a.Z)(function*(){yield A.directlySetCurrentUser(g),A.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,a.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var E=this;return this.queue((0,a.Z)(function*(){yield E.assertedPersistence.setPersistence(Ke(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new z.LL("auth","Firebase",g())}onAuthStateChanged(g,E,A){return this.registerStateListener(this.authStateSubscription,g,E,A)}beforeAuthStateChanged(g,E){return this.beforeStateQueue.pushCallback(g,E)}onIdTokenChanged(g,E,A){return this.registerStateListener(this.idTokenSubscription,g,E,A)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,E){var A=this;return(0,a.Z)(function*(){const q=yield A.getOrInitRedirectPersistenceManager(E);return null===g?q.removeCurrentUser():q.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var E=this;return(0,a.Z)(function*(){if(!E.redirectPersistenceManager){const A=g&&Ke(g)||E._popupRedirectResolver;J(A,E,"argument-error"),E.redirectPersistenceManager=yield We.create(E,[Ke(A._redirectPersistence)],"redirectUser"),E.redirectUser=yield E.redirectPersistenceManager.getCurrentUser()}return E.redirectPersistenceManager})()}_redirectUserForId(g){var E=this;return(0,a.Z)(function*(){var A,q;return E._isInitialized&&(yield E.queue((0,a.Z)(function*(){}))),(null===(A=E._currentUser)||void 0===A?void 0:A._redirectEventId)===g?E._currentUser:(null===(q=E.redirectUser)||void 0===q?void 0:q._redirectEventId)===g?E.redirectUser:null})()}_persistUserIfCurrent(g){var E=this;return(0,a.Z)(function*(){if(g===E.currentUser)return E.queue((0,a.Z)(function*(){return E.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,E;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const A=null!==(E=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==E?E:null;this.lastNotifiedUid!==A&&(this.lastNotifiedUid=A,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,E,A,q){if(this._deleted)return()=>{};const ae="function"==typeof E?E:E.next.bind(E),ht=this._isInitialized?Promise.resolve():this._initializationPromise;return J(ht,this,"internal-error"),ht.then(()=>ae(this.currentUser)),"function"==typeof E?g.addObserver(E,A,q):g.addObserver(E)}directlySetCurrentUser(g){var E=this;return(0,a.Z)(function*(){E.currentUser&&E.currentUser!==g&&E._currentUser._stopProactiveRefresh(),g&&E.isProactiveRefreshEnabled&&g._startProactiveRefresh(),E.currentUser=g,g?yield E.assertedPersistence.setCurrentUser(g):yield E.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Yi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,a.Z)(function*(){var E;const A={"X-Client-Version":g.clientVersion};g.app.options.appId&&(A["X-Firebase-gmpid"]=g.app.options.appId);const q=yield null===(E=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===E?void 0:E.getHeartbeatsHeader();return q&&(A["X-Firebase-Client"]=q),A})()}}function Pr(b){return(0,z.m9)(b)}class ls{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,z.ne)(E=>this.observer=E)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Qn(b){const g=b.indexOf(":");return g<0?"":b.substr(0,g+1)}function Nr(b){if(!b)return null;const g=Number(b);return isNaN(g)?null:g}class ri{constructor(g,E){this.providerId=g,this.signInMethod=E}toJSON(){return Xe("not implemented")}_getIdTokenResponse(g){return Xe("not implemented")}_linkToIdToken(g,E){return Xe("not implemented")}_getReauthenticationResolver(g){return Xe("not implemented")}}function Mr(b,g){return fn.apply(this,arguments)}function fn(){return(fn=(0,a.Z)(function*(b,g){return Nt(b,"POST","/v1/accounts:resetPassword",St(b,g))})).apply(this,arguments)}function Xn(b,g){return $r.apply(this,arguments)}function $r(){return($r=(0,a.Z)(function*(b,g){return Nt(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Oi(){return(Oi=(0,a.Z)(function*(b,g){return Nt(b,"POST","/v1/accounts:update",St(b,g))})).apply(this,arguments)}function wi(){return(wi=(0,a.Z)(function*(b,g){return Ln(b,"POST","/v1/accounts:signInWithPassword",St(b,g))})).apply(this,arguments)}function Gr(b,g){return ne.apply(this,arguments)}function ne(){return(ne=(0,a.Z)(function*(b,g){return Nt(b,"POST","/v1/accounts:sendOobCode",St(b,g))})).apply(this,arguments)}function Ne(){return(Ne=(0,a.Z)(function*(b,g){return Gr(b,g)})).apply(this,arguments)}function Mt(){return(Mt=(0,a.Z)(function*(b,g){return Gr(b,g)})).apply(this,arguments)}function Ye(){return(Ye=(0,a.Z)(function*(b,g){return Gr(b,g)})).apply(this,arguments)}function Ct(){return(Ct=(0,a.Z)(function*(b,g){return Gr(b,g)})).apply(this,arguments)}function sn(){return(sn=(0,a.Z)(function*(b,g){return Ln(b,"POST","/v1/accounts:signInWithEmailLink",St(b,g))})).apply(this,arguments)}function Bn(){return(Bn=(0,a.Z)(function*(b,g){return Ln(b,"POST","/v1/accounts:signInWithEmailLink",St(b,g))})).apply(this,arguments)}class Yn extends ri{constructor(g,E,A,q=null){super("password",A),this._email=g,this._password=E,this._tenantId=q}static _fromEmailAndPassword(g,E){return new Yn(g,E,"password")}static _fromEmailAndCode(g,E,A=null){return new Yn(g,E,"emailLink",A)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const E="string"==typeof g?JSON.parse(g):g;if(null!=E&&E.email&&null!=E&&E.password){if("password"===E.signInMethod)return this._fromEmailAndPassword(E.email,E.password);if("emailLink"===E.signInMethod)return this._fromEmailAndCode(E.email,E.password,E.tenantId)}return null}_getIdTokenResponse(g){var E=this;return(0,a.Z)(function*(){switch(E.signInMethod){case"password":return function Hr(b,g){return wi.apply(this,arguments)}(g,{returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Lt(b,g){return sn.apply(this,arguments)}(g,{email:E._email,oobCode:E._password});default:st(g,"internal-error")}})()}_linkToIdToken(g,E){var A=this;return(0,a.Z)(function*(){switch(A.signInMethod){case"password":return Xn(g,{idToken:E,returnSecureToken:!0,email:A._email,password:A._password});case"emailLink":return function Sn(b,g){return Bn.apply(this,arguments)}(g,{idToken:E,email:A._email,oobCode:A._password});default:st(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function pi(b,g){return it.apply(this,arguments)}function it(){return(it=(0,a.Z)(function*(b,g){return Ln(b,"POST","/v1/accounts:signInWithIdp",St(b,g))})).apply(this,arguments)}class mt extends ri{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const E=new mt(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(E.idToken=g.idToken),g.accessToken&&(E.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(E.nonce=g.nonce),g.pendingToken&&(E.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(E.accessToken=g.oauthToken,E.secret=g.oauthTokenSecret):st("argument-error"),E}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const E="string"==typeof g?JSON.parse(g):g,{providerId:A,signInMethod:q}=E,ae=(0,Se._T)(E,["providerId","signInMethod"]);if(!A||!q)return null;const ht=new mt(A,q);return ht.idToken=ae.idToken||void 0,ht.accessToken=ae.accessToken||void 0,ht.secret=ae.secret,ht.nonce=ae.nonce,ht.pendingToken=ae.pendingToken||null,ht}_getIdTokenResponse(g){return pi(g,this.buildRequest())}_linkToIdToken(g,E){const A=this.buildRequest();return A.idToken=E,pi(g,A)}_getReauthenticationResolver(g){const E=this.buildRequest();return E.autoCreate=!1,pi(g,E)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const E={};this.idToken&&(E.id_token=this.idToken),this.accessToken&&(E.access_token=this.accessToken),this.secret&&(E.oauth_token_secret=this.secret),E.providerId=this.providerId,this.nonce&&!this.pendingToken&&(E.nonce=this.nonce),g.postBody=(0,z.xO)(E)}return g}}function nn(){return(nn=(0,a.Z)(function*(b,g){return Nt(b,"POST","/v1/accounts:sendVerificationCode",St(b,g))})).apply(this,arguments)}function rr(){return(rr=(0,a.Z)(function*(b,g){return Ln(b,"POST","/v1/accounts:signInWithPhoneNumber",St(b,g))})).apply(this,arguments)}function Er(){return(Er=(0,a.Z)(function*(b,g){const E=yield Ln(b,"POST","/v1/accounts:signInWithPhoneNumber",St(b,g));if(E.temporaryProof)throw Cr(b,"account-exists-with-different-credential",E);return E})).apply(this,arguments)}const Ir={USER_NOT_FOUND:"user-not-found"};function Kn(){return(Kn=(0,a.Z)(function*(b,g){return Ln(b,"POST","/v1/accounts:signInWithPhoneNumber",St(b,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Ir)})).apply(this,arguments)}class gi extends ri{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,E){return new gi({verificationId:g,verificationCode:E})}static _fromTokenResponse(g,E){return new gi({phoneNumber:g,temporaryProof:E})}_getIdTokenResponse(g){return function In(b,g){return rr.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,E){return function kr(b,g){return Er.apply(this,arguments)}(g,Object.assign({idToken:E},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function pr(b,g){return Kn.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:E,verificationId:A,verificationCode:q}=this.params;return g&&E?{temporaryProof:g,phoneNumber:E}:{sessionInfo:A,code:q}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:E,verificationCode:A,phoneNumber:q,temporaryProof:ae}=g;return A||E||q||ae?new gi({verificationId:E,verificationCode:A,phoneNumber:q,temporaryProof:ae}):null}}class uo{constructor(g){var E,A,q,ae,ht,jt;const bn=(0,z.zd)((0,z.pd)(g)),$n=null!==(E=bn.apiKey)&&void 0!==E?E:null,wr=null!==(A=bn.oobCode)&&void 0!==A?A:null,yr=function ii(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(q=bn.mode)&&void 0!==q?q:null);J($n&&wr&&yr,"argument-error"),this.apiKey=$n,this.operation=yr,this.code=wr,this.continueUrl=null!==(ae=bn.continueUrl)&&void 0!==ae?ae:null,this.languageCode=null!==(ht=bn.languageCode)&&void 0!==ht?ht:null,this.tenantId=null!==(jt=bn.tenantId)&&void 0!==jt?jt:null}static parseLink(g){const E=function lo(b){const g=(0,z.zd)((0,z.pd)(b)).link,E=g?(0,z.zd)((0,z.pd)(g)).deep_link_id:null,A=(0,z.zd)((0,z.pd)(b)).deep_link_id;return(A?(0,z.zd)((0,z.pd)(A)).link:null)||A||E||g||b}(g);try{return new uo(E)}catch(A){return null}}}let Io=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(E,A){return Yn._fromEmailAndPassword(E,A)}static credentialWithLink(E,A){const q=uo.parseLink(A);return J(q,"argument-error"),Yn._fromEmailAndCode(E,q.code,q.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class Vr{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Jn extends Vr{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class ni extends Jn{static credentialFromJSON(g){const E="string"==typeof g?JSON.parse(g):g;return J("providerId"in E&&"signInMethod"in E,"argument-error"),mt._fromParams(E)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return J(g.idToken||g.accessToken,"argument-error"),mt._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return ni.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return ni.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:E,oauthAccessToken:A,oauthTokenSecret:q,pendingToken:ae,nonce:ht,providerId:jt}=g;if(!A&&!q&&!E&&!ae||!jt)return null;try{return new ni(jt)._credential({idToken:E,accessToken:A,nonce:ht,pendingToken:ae})}catch(bn){return null}}}let wo=(()=>{class b extends Jn{constructor(){super("facebook.com")}static credential(E){return mt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:E})}static credentialFromResult(E){return b.credentialFromTaggedObject(E)}static credentialFromError(E){return b.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E||!("oauthAccessToken"in E)||!E.oauthAccessToken)return null;try{return b.credential(E.oauthAccessToken)}catch(A){return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),Co=(()=>{class b extends Jn{constructor(){super("google.com"),this.addScope("profile")}static credential(E,A){return mt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:E,accessToken:A})}static credentialFromResult(E){return b.credentialFromTaggedObject(E)}static credentialFromError(E){return b.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{oauthIdToken:A,oauthAccessToken:q}=E;if(!A&&!q)return null;try{return b.credential(A,q)}catch(ae){return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),Bi=(()=>{class b extends Jn{constructor(){super("github.com")}static credential(E){return mt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:E})}static credentialFromResult(E){return b.credentialFromTaggedObject(E)}static credentialFromError(E){return b.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E||!("oauthAccessToken"in E)||!E.oauthAccessToken)return null;try{return b.credential(E.oauthAccessToken)}catch(A){return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class Ss extends ri{constructor(g,E){super(g,g),this.pendingToken=E}_getIdTokenResponse(g){return pi(g,this.buildRequest())}_linkToIdToken(g,E){const A=this.buildRequest();return A.idToken=E,pi(g,A)}_getReauthenticationResolver(g){const E=this.buildRequest();return E.autoCreate=!1,pi(g,E)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const E="string"==typeof g?JSON.parse(g):g,{providerId:A,signInMethod:q,pendingToken:ae}=E;return A&&q&&ae&&A===q?new Ss(A,ae):null}static _create(g,E){return new Ss(g,E)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ns extends Vr{constructor(g){J(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return ns.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return ns.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const E=Ss.fromJSON(g);return J(E,"argument-error"),E}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:E,providerId:A}=g;if(!E||!A)return null;try{return Ss._create(A,E)}catch(q){return null}}}let Qs=(()=>{class b extends Jn{constructor(){super("twitter.com")}static credential(E,A){return mt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:E,oauthTokenSecret:A})}static credentialFromResult(E){return b.credentialFromTaggedObject(E)}static credentialFromError(E){return b.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{oauthAccessToken:A,oauthTokenSecret:q}=E;if(!A||!q)return null;try{return b.credential(A,q)}catch(ae){return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function Bs(b,g){return ys.apply(this,arguments)}function ys(){return(ys=(0,a.Z)(function*(b,g){return Ln(b,"POST","/v1/accounts:signUp",St(b,g))})).apply(this,arguments)}class Pi{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,E,A,q=!1){return(0,a.Z)(function*(){const ae=yield jn._fromIdTokenResponse(g,A,q),ht=rs(A);return new Pi({user:ae,providerId:ht,_tokenResponse:A,operationType:E})})()}static _forOperation(g,E,A){return(0,a.Z)(function*(){yield g._updateTokensIfNecessary(A,!0);const q=rs(A);return new Pi({user:g,providerId:q,_tokenResponse:A,operationType:E})})()}}function rs(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function is(){return(is=(0,a.Z)(function*(b){var g;const E=Pr(b);if(yield E._initializationPromise,null!==(g=E.currentUser)&&void 0!==g&&g.isAnonymous)return new Pi({user:E.currentUser,providerId:null,operationType:"signIn"});const A=yield Bs(E,{returnSecureToken:!0}),q=yield Pi._fromIdTokenResponse(E,"signIn",A,!0);return yield E._updateCurrentUser(q.user),q})).apply(this,arguments)}class Lo extends z.ZR{constructor(g,E,A,q){var ae;super(E.code,E.message),this.operationType=A,this.user=q,Object.setPrototypeOf(this,Lo.prototype),this.customData={appName:g.name,tenantId:null!==(ae=g.tenantId)&&void 0!==ae?ae:void 0,_serverResponse:E.customData._serverResponse,operationType:A}}static _fromErrorAndOperation(g,E,A,q){return new Lo(g,E,A,q)}}function zr(b,g,E,A){return("reauthenticate"===g?E._getReauthenticationResolver(b):E._getIdTokenResponse(b)).catch(ae=>{throw"auth/multi-factor-auth-required"===ae.code?Lo._fromErrorAndOperation(b,ae,g,A):ae})}function bi(b){return new Set(b.map(({providerId:g})=>g).filter(g=>!!g))}function us(){return us=(0,a.Z)(function*(b,g){const E=(0,z.m9)(b);yield Ni(!0,E,g);const{providerUserInfo:A}=yield function dr(b,g){return Yt.apply(this,arguments)}(E.auth,{idToken:yield E.getIdToken(),deleteProvider:[g]}),q=bi(A||[]);return E.providerData=E.providerData.filter(ae=>q.has(ae.providerId)),q.has("phone")||(E.phoneNumber=null),yield E.auth._persistUserIfCurrent(E),E}),us.apply(this,arguments)}function As(b,g){return ss.apply(this,arguments)}function ss(){return(ss=(0,a.Z)(function*(b,g,E=!1){const A=yield Cn(b,g._linkToIdToken(b.auth,yield b.getIdToken()),E);return Pi._forOperation(b,"link",A)})).apply(this,arguments)}function Ni(b,g,E){return cs.apply(this,arguments)}function cs(){return(cs=(0,a.Z)(function*(b,g,E){yield Sr(g);const q=!1===b?"provider-already-linked":"no-such-provider";J(bi(g.providerData).has(E)===b,g.auth,q)})).apply(this,arguments)}function Qi(b,g){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,a.Z)(function*(b,g,E=!1){const{auth:A}=b,q="reauthenticate";try{const ae=yield Cn(b,zr(A,q,g,b),E);J(ae.idToken,A,"internal-error");const ht=Tn(ae.idToken);J(ht,A,"internal-error");const{sub:jt}=ht;return J(b.uid===jt,A,"user-mismatch"),Pi._forOperation(b,q,ae)}catch(ae){throw"auth/user-not-found"===(null==ae?void 0:ae.code)&&st(A,"user-mismatch"),ae}})).apply(this,arguments)}function mi(b,g){return $s.apply(this,arguments)}function $s(){return($s=(0,a.Z)(function*(b,g,E=!1){const A="signIn",q=yield zr(b,A,g),ae=yield Pi._fromIdTokenResponse(b,A,q);return E||(yield b._updateCurrentUser(ae.user)),ae})).apply(this,arguments)}function Dr(b,g){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,a.Z)(function*(b,g){return mi(Pr(b),g)})).apply(this,arguments)}function Xs(b,g){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,a.Z)(function*(b,g){const E=(0,z.m9)(b);return yield Ni(!1,E,g.providerId),As(E,g)})).apply(this,arguments)}function Zo(b,g){return co.apply(this,arguments)}function co(){return(co=(0,a.Z)(function*(b,g){return Qi((0,z.m9)(b),g)})).apply(this,arguments)}function $i(){return($i=(0,a.Z)(function*(b,g){return Ln(b,"POST","/v1/accounts:signInWithCustomToken",St(b,g))})).apply(this,arguments)}function ho(){return ho=(0,a.Z)(function*(b,g){const E=Pr(b),A=yield function qi(b,g){return $i.apply(this,arguments)}(E,{token:g,returnSecureToken:!0}),q=yield Pi._fromIdTokenResponse(E,"signIn",A);return yield E._updateCurrentUser(q.user),q}),ho.apply(this,arguments)}class Js{constructor(g,E){this.factorId=g,this.uid=E.mfaEnrollmentId,this.enrollmentTime=new Date(E.enrolledAt).toUTCString(),this.displayName=E.displayName}static _fromServerResponse(g,E){return"phoneInfo"in E?ki._fromServerResponse(g,E):st(g,"internal-error")}}class ki extends Js{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,E){return new ki(E)}}function Xr(b,g,E){var A;J((null===(A=E.url)||void 0===A?void 0:A.length)>0,b,"invalid-continue-uri"),J(typeof E.dynamicLinkDomain>"u"||E.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),g.continueUrl=E.url,g.dynamicLinkDomain=E.dynamicLinkDomain,g.canHandleCodeInApp=E.handleCodeInApp,E.iOS&&(J(E.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),g.iOSBundleId=E.iOS.bundleId),E.android&&(J(E.android.packageName.length>0,b,"missing-android-pkg-name"),g.androidInstallApp=E.android.installApp,g.androidMinimumVersionCode=E.android.minimumVersion,g.androidPackageName=E.android.packageName)}function or(){return or=(0,a.Z)(function*(b,g,E){const A=(0,z.m9)(b),q={requestType:"PASSWORD_RESET",email:g};E&&Xr(A,q,E),yield function lt(b,g){return Mt.apply(this,arguments)}(A,q)}),or.apply(this,arguments)}function va(){return(va=(0,a.Z)(function*(b,g,E){yield Mr((0,z.m9)(b),{oobCode:g,newPassword:E})})).apply(this,arguments)}function vs(){return vs=(0,a.Z)(function*(b,g){yield function Qr(b,g){return Oi.apply(this,arguments)}((0,z.m9)(b),{oobCode:g})}),vs.apply(this,arguments)}function Us(b,g){return tr.apply(this,arguments)}function tr(){return(tr=(0,a.Z)(function*(b,g){const E=(0,z.m9)(b),A=yield Mr(E,{oobCode:g}),q=A.requestType;switch(J(q,E,"internal-error"),q){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":J(A.newEmail,E,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":J(A.mfaInfo,E,"internal-error");default:J(A.email,E,"internal-error")}let ae=null;return A.mfaInfo&&(ae=Js._fromServerResponse(Pr(E),A.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.newEmail:A.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.email:A.newEmail)||null,multiFactorInfo:ae},operation:q}})).apply(this,arguments)}function To(){return(To=(0,a.Z)(function*(b,g){const{data:E}=yield Us((0,z.m9)(b),g);return E.email})).apply(this,arguments)}function Fn(){return(Fn=(0,a.Z)(function*(b,g,E){const A=Pr(b),q=yield Bs(A,{returnSecureToken:!0,email:g,password:E}),ae=yield Pi._fromIdTokenResponse(A,"signIn",q);return yield A._updateCurrentUser(ae.user),ae})).apply(this,arguments)}function I(){return I=(0,a.Z)(function*(b,g,E){const A=(0,z.m9)(b),q={requestType:"EMAIL_SIGNIN",email:g};J(E.handleCodeInApp,A,"argument-error"),E&&Xr(A,q,E),yield function ce(b,g){return Ye.apply(this,arguments)}(A,q)}),I.apply(this,arguments)}function Q(){return(Q=(0,a.Z)(function*(b,g,E){const A=(0,z.m9)(b),q=Io.credentialWithLink(g,E||pt());return J(q._tenantId===(A.tenantId||null),A,"tenant-id-mismatch"),Dr(A,q)})).apply(this,arguments)}function tn(){return(tn=(0,a.Z)(function*(b,g){return Nt(b,"POST","/v1/accounts:createAuthUri",St(b,g))})).apply(this,arguments)}function Gn(){return Gn=(0,a.Z)(function*(b,g){const A={identifier:g,continueUri:nt()?pt():"http://localhost"},{signinMethods:q}=yield function gt(b,g){return tn.apply(this,arguments)}((0,z.m9)(b),A);return q||[]}),Gn.apply(this,arguments)}function Zn(){return Zn=(0,a.Z)(function*(b,g){const E=(0,z.m9)(b),q={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};g&&Xr(E.auth,q,g);const{email:ae}=yield function he(b,g){return Ne.apply(this,arguments)}(E.auth,q);ae!==b.email&&(yield b.reload())}),Zn.apply(this,arguments)}function Ji(){return Ji=(0,a.Z)(function*(b,g,E){const A=(0,z.m9)(b),ae={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:g};E&&Xr(A.auth,ae,E);const{email:ht}=yield function dt(b,g){return Ct.apply(this,arguments)}(A.auth,ae);ht!==b.email&&(yield b.reload())}),Ji.apply(this,arguments)}function si(){return(si=(0,a.Z)(function*(b,g){return Nt(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function js(){return js=(0,a.Z)(function*(b,{displayName:g,photoURL:E}){if(void 0===g&&void 0===E)return;const A=(0,z.m9)(b),ae={idToken:yield A.getIdToken(),displayName:g,photoUrl:E,returnSecureToken:!0},ht=yield Cn(A,function Ui(b,g){return si.apply(this,arguments)}(A.auth,ae));A.displayName=ht.displayName||null,A.photoURL=ht.photoUrl||null;const jt=A.providerData.find(({providerId:bn})=>"password"===bn);jt&&(jt.displayName=A.displayName,jt.photoURL=A.photoURL),yield A._updateTokensIfNecessary(ht)}),js.apply(this,arguments)}function ca(b,g,E){return _a.apply(this,arguments)}function _a(){return(_a=(0,a.Z)(function*(b,g,E){const{auth:A}=b,ae={idToken:yield b.getIdToken(),returnSecureToken:!0};g&&(ae.email=g),E&&(ae.password=E);const ht=yield Cn(b,Xn(A,ae));yield b._updateTokensIfNecessary(ht,!0)})).apply(this,arguments)}class xs{constructor(g,E,A={}){this.isNewUser=g,this.providerId=E,this.profile=A}}class Na extends xs{constructor(g,E,A,q){super(g,E,A),this.username=q}}class Bo extends xs{constructor(g,E){super(g,"facebook.com",E)}}class So extends Na{constructor(g,E){super(g,"github.com",E,"string"==typeof(null==E?void 0:E.login)?null==E?void 0:E.login:null)}}class Ka extends xs{constructor(g,E){super(g,"google.com",E)}}class al extends Na{constructor(g,E,A){super(g,"twitter.com",E,A)}}function ll(b){const{user:g,_tokenResponse:E}=b;return g.isAnonymous&&!E?{providerId:null,isNewUser:!1,profile:null}:function Pa(b){var g,E;if(!b)return null;const{providerId:A}=b,q=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},ae=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!A&&null!=b&&b.idToken){const ht=null===(E=null===(g=Tn(b.idToken))||void 0===g?void 0:g.firebase)||void 0===E?void 0:E.sign_in_provider;if(ht)return new xs(ae,"anonymous"!==ht&&"custom"!==ht?ht:null)}if(!A)return null;switch(A){case"facebook.com":return new Bo(ae,q);case"github.com":return new So(ae,q);case"google.com":return new Ka(ae,q);case"twitter.com":return new al(ae,q,b.screenName||null);case"custom":case"anonymous":return new xs(ae,null);default:return new xs(ae,A,q)}}(E)}class Ao{constructor(g,E,A){this.type=g,this.credential=E,this.auth=A}static _fromIdtoken(g,E){return new Ao("enroll",g,E)}static _fromMfaPendingCredential(g){return new Ao("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var E,A;if(null!=g&&g.multiFactorSession){if(null!==(E=g.multiFactorSession)&&void 0!==E&&E.pendingCredential)return Ao._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(A=g.multiFactorSession)&&void 0!==A&&A.idToken)return Ao._fromIdtoken(g.multiFactorSession.idToken)}return null}}class $o{constructor(g,E,A){this.session=g,this.hints=E,this.signInResolver=A}static _fromError(g,E){const A=Pr(g),q=E.customData._serverResponse,ae=(q.mfaInfo||[]).map(jt=>Js._fromServerResponse(A,jt));J(q.mfaPendingCredential,A,"internal-error");const ht=Ao._fromMfaPendingCredential(q.mfaPendingCredential);return new $o(ht,ae,function(){var jt=(0,a.Z)(function*(bn){const $n=yield bn._process(A,ht);delete q.mfaInfo,delete q.mfaPendingCredential;const wr=Object.assign(Object.assign({},q),{idToken:$n.idToken,refreshToken:$n.refreshToken});switch(E.operationType){case"signIn":const yr=yield Pi._fromIdTokenResponse(A,E.operationType,wr);return yield A._updateCurrentUser(yr.user),yr;case"reauthenticate":return J(E.user,A,"internal-error"),Pi._forOperation(E.user,E.operationType,wr);default:st(A,"internal-error")}});return function(bn){return jt.apply(this,arguments)}}())}resolveSignIn(g){var E=this;return(0,a.Z)(function*(){return E.signInResolver(g)})()}}class ea{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(E=>{E.mfaInfo&&(this.enrolledFactors=E.mfaInfo.map(A=>Js._fromServerResponse(g.auth,A)))})}static _fromUser(g){return new ea(g)}getSession(){var g=this;return(0,a.Z)(function*(){return Ao._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,E){var A=this;return(0,a.Z)(function*(){const q=g,ae=yield A.getSession(),ht=yield Cn(A.user,q._process(A.user.auth,ae,E));return yield A.user._updateTokensIfNecessary(ht),A.user.reload()})()}unenroll(g){var E=this;return(0,a.Z)(function*(){const A="string"==typeof g?g:g.uid,q=yield E.user.getIdToken();try{const ae=yield Cn(E.user,function ka(b,g){return Nt(b,"POST","/v2/accounts/mfaEnrollment:withdraw",St(b,g))}(E.user.auth,{idToken:q,mfaEnrollmentId:A}));E.enrolledFactors=E.enrolledFactors.filter(({uid:ht})=>ht!==A),yield E.user._updateTokensIfNecessary(ae),yield E.user.reload()}catch(ae){throw ae}})()}}const Fa=new WeakMap,N="__sak";class K{constructor(g,E){this.storageRetriever=g,this.type=E}_isAvailable(){try{return this.storage?(this.storage.setItem(N,"1"),this.storage.removeItem(N),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,E){return this.storage.setItem(g,JSON.stringify(E)),Promise.resolve()}_get(g){const E=this.storage.getItem(g);return Promise.resolve(E?JSON.parse(E):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Vt=(()=>{class b extends K{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(E,A)=>this.onStorageEvent(E,A),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function B(){const b=(0,z.z$)();return hn(b)||Ht(b)}()&&function Li(){try{return!(!window||window===window.top)}catch(b){return!1}}(),this.fallbackToPolling=Fi(),this._shouldAllowMigration=!0}forAllChangedKeys(E){for(const A of Object.keys(this.listeners)){const q=this.storage.getItem(A),ae=this.localCache[A];q!==ae&&E(A,ae,q)}}onStorageEvent(E,A=!1){if(!E.key)return void this.forAllChangedKeys((jt,bn,$n)=>{this.notifyListeners(jt,$n)});const q=E.key;if(A?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const jt=this.storage.getItem(q);if(E.newValue!==jt)null!==E.newValue?this.storage.setItem(q,E.newValue):this.storage.removeItem(q);else if(this.localCache[q]===E.newValue&&!A)return}const ae=()=>{const jt=this.storage.getItem(q);!A&&this.localCache[q]===jt||this.notifyListeners(q,jt)},ht=this.storage.getItem(q);!function fr(){return(0,z.w1)()&&10===document.documentMode}()||ht===E.newValue||E.newValue===E.oldValue?ae():setTimeout(ae,10)}notifyListeners(E,A){this.localCache[E]=A;const q=this.listeners[E];if(q)for(const ae of Array.from(q))ae(A&&JSON.parse(A))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((E,A,q)=>{this.onStorageEvent(new StorageEvent("storage",{key:E,oldValue:A,newValue:q}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(E,A){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[E]||(this.listeners[E]=new Set,this.localCache[E]=this.storage.getItem(E)),this.listeners[E].add(A)}_removeListener(E,A){this.listeners[E]&&(this.listeners[E].delete(A),0===this.listeners[E].size&&delete this.listeners[E]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(E,A){var q=()=>super._set,ae=this;return(0,a.Z)(function*(){yield q().call(ae,E,A),ae.localCache[E]=JSON.stringify(A)})()}_get(E){var A=()=>super._get,q=this;return(0,a.Z)(function*(){const ae=yield A().call(q,E);return q.localCache[E]=JSON.stringify(ae),ae})()}_remove(E){var A=()=>super._remove,q=this;return(0,a.Z)(function*(){yield A().call(q,E),delete q.localCache[E]})()}}return b.type="LOCAL",b})(),hr=(()=>{class b extends K{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(E,A){}_removeListener(E,A){}}return b.type="SESSION",b})();let ir=(()=>{class b{constructor(E){this.eventTarget=E,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(E){const A=this.receivers.find(ae=>ae.isListeningto(E));if(A)return A;const q=new b(E);return this.receivers.push(q),q}isListeningto(E){return this.eventTarget===E}handleEvent(E){var A=this;return(0,a.Z)(function*(){const q=E,{eventId:ae,eventType:ht,data:jt}=q.data,bn=A.handlersMap[ht];if(null==bn||!bn.size)return;q.ports[0].postMessage({status:"ack",eventId:ae,eventType:ht});const $n=Array.from(bn).map(function(){var yr=(0,a.Z)(function*(Ks){return Ks(q.origin,jt)});return function(Ks){return yr.apply(this,arguments)}}()),wr=yield function Ft(b){return Promise.all(b.map(function(){var g=(0,a.Z)(function*(E){try{return{fulfilled:!0,value:yield E}}catch(A){return{fulfilled:!1,reason:A}}});return function(E){return g.apply(this,arguments)}}()))}($n);q.ports[0].postMessage({status:"done",eventId:ae,eventType:ht,response:wr})})()}_subscribe(E,A){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[E]||(this.handlersMap[E]=new Set),this.handlersMap[E].add(A)}_unsubscribe(E,A){this.handlersMap[E]&&A&&this.handlersMap[E].delete(A),(!A||0===this.handlersMap[E].size)&&delete this.handlersMap[E],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function ar(b="",g=10){let E="";for(let A=0;A<g;A++)E+=Math.floor(10*Math.random());return b+E}class Ei{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,E,A=50){var q=this;return(0,a.Z)(function*(){const ae=typeof MessageChannel<"u"?new MessageChannel:null;if(!ae)throw new Error("connection_unavailable");let ht,jt;return new Promise((bn,$n)=>{const wr=ar("",20);ae.port1.start();const yr=setTimeout(()=>{$n(new Error("unsupported_event"))},A);jt={messageChannel:ae,onMessage(Ks){const Ma=Ks;if(Ma.data.eventId===wr)switch(Ma.data.status){case"ack":clearTimeout(yr),ht=setTimeout(()=>{$n(new Error("timeout"))},3e3);break;case"done":clearTimeout(ht),bn(Ma.data.response);break;default:clearTimeout(yr),clearTimeout(ht),$n(new Error("invalid_response"))}}},q.handlers.add(jt),ae.port1.addEventListener("message",jt.onMessage),q.target.postMessage({eventType:g,eventId:wr,data:E},[ae.port2])}).finally(()=>{jt&&q.removeMessageHandler(jt)})})()}}function zt(){return window}function hs(){return typeof zt().WorkerGlobalScope<"u"&&"function"==typeof zt().importScripts}function It(){return(It=(0,a.Z)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch(b){return null}})).apply(this,arguments)}const Vo="firebaseLocalStorageDb",Uo=1,qa="firebaseLocalStorage",Zl="fbase_key";class Ea{constructor(g){this.request=g}toPromise(){return new Promise((g,E)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{E(this.request.error)})})}}function Za(b,g){return b.transaction([qa],g?"readwrite":"readonly").objectStore(qa)}function gl(){const b=indexedDB.open(Vo,Uo);return new Promise((g,E)=>{b.addEventListener("error",()=>{E(b.error)}),b.addEventListener("upgradeneeded",()=>{const A=b.result;try{A.createObjectStore(qa,{keyPath:Zl})}catch(q){E(q)}}),b.addEventListener("success",(0,a.Z)(function*(){const A=b.result;A.objectStoreNames.contains(qa)?g(A):(A.close(),yield function Gs(){const b=indexedDB.deleteDatabase(Vo);return new Ea(b).toPromise()}(),g(yield gl()))}))})}function La(b,g,E){return ml.apply(this,arguments)}function ml(){return(ml=(0,a.Z)(function*(b,g,E){const A=Za(b,!0).put({[Zl]:g,value:E});return new Ea(A).toPromise()})).apply(this,arguments)}function mr(){return(mr=(0,a.Z)(function*(b,g){const E=Za(b,!1).get(g),A=yield new Ea(E).toPromise();return void 0===A?null:A.value})).apply(this,arguments)}function ha(b,g){const E=Za(b,!0).delete(g);return new Ea(E).toPromise()}const xo=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var E=this;return(0,a.Z)(function*(){return E.db||(E.db=yield gl()),E.db})()}_withRetries(E){var A=this;return(0,a.Z)(function*(){let q=0;for(;;)try{const ae=yield A._openDb();return yield E(ae)}catch(ae){if(q++>3)throw ae;A.db&&(A.db.close(),A.db=void 0)}})()}initializeServiceWorkerMessaging(){var E=this;return(0,a.Z)(function*(){return hs()?E.initializeReceiver():E.initializeSender()})()}initializeReceiver(){var E=this;return(0,a.Z)(function*(){E.receiver=ir._getInstance(function Ii(){return hs()?self:null}()),E.receiver._subscribe("keyChanged",function(){var A=(0,a.Z)(function*(q,ae){return{keyProcessed:(yield E._poll()).includes(ae.key)}});return function(q,ae){return A.apply(this,arguments)}}()),E.receiver._subscribe("ping",function(){var A=(0,a.Z)(function*(q,ae){return["keyChanged"]});return function(q,ae){return A.apply(this,arguments)}}())})()}initializeSender(){var E=this;return(0,a.Z)(function*(){var A,q;if(E.activeServiceWorker=yield function dn(){return It.apply(this,arguments)}(),!E.activeServiceWorker)return;E.sender=new Ei(E.activeServiceWorker);const ae=yield E.sender._send("ping",{},800);ae&&null!==(A=ae[0])&&void 0!==A&&A.fulfilled&&null!==(q=ae[0])&&void 0!==q&&q.value.includes("keyChanged")&&(E.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(E){var A=this;return(0,a.Z)(function*(){if(A.sender&&A.activeServiceWorker&&function Wt(){var b;return(null===(b=null==navigator?void 0:navigator.serviceWorker)||void 0===b?void 0:b.controller)||null}()===A.activeServiceWorker)try{yield A.sender._send("keyChanged",{key:E},A.serviceWorkerReceiverAvailable?800:50)}catch(q){}})()}_isAvailable(){return(0,a.Z)(function*(){try{if(!indexedDB)return!1;const E=yield gl();return yield La(E,N,"1"),yield ha(E,N),!0}catch(E){}return!1})()}_withPendingWrite(E){var A=this;return(0,a.Z)(function*(){A.pendingWrites++;try{yield E()}finally{A.pendingWrites--}})()}_set(E,A){var q=this;return(0,a.Z)(function*(){return q._withPendingWrite((0,a.Z)(function*(){return yield q._withRetries(ae=>La(ae,E,A)),q.localCache[E]=A,q.notifyServiceWorker(E)}))})()}_get(E){var A=this;return(0,a.Z)(function*(){const q=yield A._withRetries(ae=>function ul(b,g){return mr.apply(this,arguments)}(ae,E));return A.localCache[E]=q,q})()}_remove(E){var A=this;return(0,a.Z)(function*(){return A._withPendingWrite((0,a.Z)(function*(){return yield A._withRetries(q=>ha(q,E)),delete A.localCache[E],A.notifyServiceWorker(E)}))})()}_poll(){var E=this;return(0,a.Z)(function*(){const A=yield E._withRetries(ht=>{const jt=Za(ht,!1).getAll();return new Ea(jt).toPromise()});if(!A)return[];if(0!==E.pendingWrites)return[];const q=[],ae=new Set;for(const{fbase_key:ht,value:jt}of A)ae.add(ht),JSON.stringify(E.localCache[ht])!==JSON.stringify(jt)&&(E.notifyListeners(ht,jt),q.push(ht));for(const ht of Object.keys(E.localCache))E.localCache[ht]&&!ae.has(ht)&&(E.notifyListeners(ht,null),q.push(ht));return q})()}notifyListeners(E,A){this.localCache[E]=A;const q=this.listeners[E];if(q)for(const ae of Array.from(q))ae(A)}startPolling(){var E=this;this.stopPolling(),this.pollTimer=setInterval((0,a.Z)(function*(){return E._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(E,A){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[E]||(this.listeners[E]=new Set,this._get(E)),this.listeners[E].add(A)}_removeListener(E,A){this.listeners[E]&&(this.listeners[E].delete(A),0===this.listeners[E].size&&delete this.listeners[E]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function pn(){return(pn=(0,a.Z)(function*(b){return(yield Nt(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function es(b){return new Promise((g,E)=>{const A=document.createElement("script");A.setAttribute("src",b),A.onload=g,A.onerror=q=>{const ae=et("internal-error");ae.customData=q,E(ae)},A.type="text/javascript",A.charset="UTF-8",function cl(){var b,g;return null!==(g=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==g?g:document}().appendChild(A)})}function fa(b){return`__${b}${Math.floor(1e6*Math.random())}`}const Ia=1e12;class Qa{constructor(g){this.auth=g,this.counter=Ia,this._widgets=new Map}render(g,E){const A=this.counter;return this._widgets.set(A,new wu(g,this.auth.name,E||{})),this.counter++,A}reset(g){var E;const A=g||Ia;null===(E=this._widgets.get(A))||void 0===E||E.delete(),this._widgets.delete(A)}getResponse(g){var E;return(null===(E=this._widgets.get(g||Ia))||void 0===E?void 0:E.getResponse())||""}execute(g){var E=this;return(0,a.Z)(function*(){var A;return null===(A=E._widgets.get(g||Ia))||void 0===A||A.execute(),""})()}}class wu{constructor(g,E,A){this.params=A,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const q="string"==typeof g?document.getElementById(g):g;J(q,"argument-error",{appName:E}),this.container=q,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Cu(b){const g=[],E="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let A=0;A<b;A++)g.push(E.charAt(Math.floor(Math.random()*E.length)));return g.join("")}(50);const{callback:g,"expired-callback":E}=this.params;if(g)try{g(this.responseToken)}catch(A){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,E)try{E()}catch(A){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const zs=fa("rcb"),ta=new Je(3e4,6e4);class Zi{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=zt().grecaptcha)||void 0===g||!g.render)}load(g,E=""){return J(function wa(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(E),g,"argument-error"),this.shouldResolveImmediately(E)?Promise.resolve(zt().grecaptcha):new Promise((A,q)=>{const ae=zt().setTimeout(()=>{q(et(g,"network-request-failed"))},ta.get());zt()[zs]=()=>{zt().clearTimeout(ae),delete zt()[zs];const jt=zt().grecaptcha;if(!jt)return void q(et(g,"internal-error"));const bn=jt.render;jt.render=($n,wr)=>{const yr=bn($n,wr);return this.counter++,yr},this.hostLanguage=E,A(jt)},es(`https://www.google.com/recaptcha/api.js??${(0,z.xO)({onload:zs,render:"explicit",hl:E})}`).catch(()=>{clearTimeout(ae),q(et(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var E;return!(null===(E=zt().grecaptcha)||void 0===E||!E.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ca{load(g){return(0,a.Z)(function*(){return new Qa(g)})()}clearedOneInstance(){}}const bt="recaptcha",yl={theme:"light",type:"image"};class Ms{constructor(g,E=Object.assign({},yl),A){this.parameters=E,this.type=bt,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Pr(A),this.isInvisible="invisible"===this.parameters.size,J(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const q="string"==typeof g?document.getElementById(g):g;J(q,this.auth,"argument-error"),this.container=q,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ca:new Zi,this.validateStartingState()}verify(){var g=this;return(0,a.Z)(function*(){g.assertNotDestroyed();const E=yield g.render(),A=g.getAssertedRecaptcha();return A.getResponse(E)||new Promise(ae=>{const ht=jt=>{jt&&(g.tokenChangeListeners.delete(ht),ae(jt))};g.tokenChangeListeners.add(ht),g.isInvisible&&A.execute(E)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){J(!this.parameters.sitekey,this.auth,"argument-error"),J(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),J(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return E=>{if(this.tokenChangeListeners.forEach(A=>A(E)),"function"==typeof g)g(E);else if("string"==typeof g){const A=zt()[g];"function"==typeof A&&A(E)}}}assertNotDestroyed(){J(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,a.Z)(function*(){if(yield g.init(),!g.widgetId){let E=g.container;if(!g.isInvisible){const A=document.createElement("div");E.appendChild(A),E=A}g.widgetId=g.getAssertedRecaptcha().render(E,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,a.Z)(function*(){J(nt()&&!hs(),g.auth,"internal-error"),yield function Ai(){let b=null;return new Promise(g=>{"complete"!==document.readyState?(b=()=>g(),window.addEventListener("load",b)):g()}).catch(g=>{throw b&&window.removeEventListener("load",b),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const E=yield function ai(b){return pn.apply(this,arguments)}(g.auth);J(E,g.auth,"internal-error"),g.parameters.sitekey=E})()}getAssertedRecaptcha(){return J(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class vl{constructor(g,E){this.verificationId=g,this.onConfirmation=E}confirm(g){const E=gi._fromVerification(this.verificationId,g);return this.onConfirmation(E)}}function bu(){return(bu=(0,a.Z)(function*(b,g,E){const A=Pr(b),q=yield ba(A,g,(0,z.m9)(E));return new vl(q,ae=>Dr(A,ae))})).apply(this,arguments)}function kl(){return(kl=(0,a.Z)(function*(b,g,E){const A=(0,z.m9)(b);yield Ni(!1,A,"phone");const q=yield ba(A.auth,g,(0,z.m9)(E));return new vl(q,ae=>Xs(A,ae))})).apply(this,arguments)}function Du(){return(Du=(0,a.Z)(function*(b,g,E){const A=(0,z.m9)(b),q=yield ba(A.auth,g,(0,z.m9)(E));return new vl(q,ae=>Zo(A,ae))})).apply(this,arguments)}function ba(b,g,E){return no.apply(this,arguments)}function no(){return no=(0,a.Z)(function*(b,g,E){var A;const q=yield E.verify();try{let ae;if(J("string"==typeof q,b,"argument-error"),J(E.type===bt,b,"argument-error"),ae="string"==typeof g?{phoneNumber:g}:g,"session"in ae){const ht=ae.session;if("phoneNumber"in ae)return J("enroll"===ht.type,b,"internal-error"),(yield function da(b,g){return Nt(b,"POST","/v2/accounts/mfaEnrollment:start",St(b,g))}(b,{idToken:ht.credential,phoneEnrollmentInfo:{phoneNumber:ae.phoneNumber,recaptchaToken:q}})).phoneSessionInfo.sessionInfo;{J("signin"===ht.type,b,"internal-error");const jt=(null===(A=ae.multiFactorHint)||void 0===A?void 0:A.uid)||ae.multiFactorUid;return J(jt,b,"missing-multi-factor-info"),(yield function Ur(b,g){return Nt(b,"POST","/v2/accounts/mfaSignIn:start",St(b,g))}(b,{mfaPendingCredential:ht.credential,mfaEnrollmentId:jt,phoneSignInInfo:{recaptchaToken:q}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ht}=yield function Ut(b,g){return nn.apply(this,arguments)}(b,{phoneNumber:ae.phoneNumber,recaptchaToken:q});return ht}}finally{E._reset()}}),no.apply(this,arguments)}function Wi(){return(Wi=(0,a.Z)(function*(b,g){yield As((0,z.m9)(b),g)})).apply(this,arguments)}let Da=(()=>{class b{constructor(E){this.providerId=b.PROVIDER_ID,this.auth=Pr(E)}verifyPhoneNumber(E,A){return ba(this.auth,E,(0,z.m9)(A))}static credential(E,A){return gi._fromVerification(E,A)}static credentialFromResult(E){return b.credentialFromTaggedObject(E)}static credentialFromError(E){return b.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{phoneNumber:A,temporaryProof:q}=E;return A&&q?gi._fromTokenResponse(A,q):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function ra(b,g){return g?Ke(g):(J(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class Ta extends ri{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return pi(g,this._buildIdpRequest())}_linkToIdToken(g,E){return pi(g,this._buildIdpRequest(E))}_getReauthenticationResolver(g){return pi(g,this._buildIdpRequest())}_buildIdpRequest(g){const E={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(E.idToken=g),E}}function Rs(b){return mi(b.auth,new Ta(b),b.bypassAuthState)}function po(b){const{auth:g,user:E}=b;return J(E,g,"internal-error"),Qi(E,new Ta(b),b.bypassAuthState)}function Ba(b){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,a.Z)(function*(b){const{auth:g,user:E}=b;return J(E,g,"internal-error"),As(E,new Ta(b),b.bypassAuthState)})).apply(this,arguments)}class jo{constructor(g,E,A,q,ae=!1){this.auth=g,this.resolver=A,this.user=q,this.bypassAuthState=ae,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(E)?E:[E]}execute(){var g=this;return new Promise(function(){var E=(0,a.Z)(function*(A,q){g.pendingPromise={resolve:A,reject:q};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(ae){g.reject(ae)}});return function(A,q){return E.apply(this,arguments)}}())}onAuthEvent(g){var E=this;return(0,a.Z)(function*(){const{urlResponse:A,sessionId:q,postBody:ae,tenantId:ht,error:jt,type:bn}=g;if(jt)return void E.reject(jt);const $n={auth:E.auth,requestUri:A,sessionId:q,tenantId:ht||void 0,postBody:ae||void 0,user:E.user,bypassAuthState:E.bypassAuthState};try{E.resolve(yield E.getIdpTask(bn)($n))}catch(wr){E.reject(wr)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Rs;case"linkViaPopup":case"linkViaRedirect":return Ba;case"reauthViaPopup":case"reauthViaRedirect":return po;default:st(this.auth,"internal-error")}}resolve(g){Fe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Fe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Fl=new Je(2e3,1e4);function Ho(){return(Ho=(0,a.Z)(function*(b,g,E){const A=Pr(b);Pe(b,g,Vr);const q=ra(A,E);return new ia(A,"signInViaPopup",g,q).executeNotNull()})).apply(this,arguments)}function ro(){return(ro=(0,a.Z)(function*(b,g,E){const A=(0,z.m9)(b);Pe(A.auth,g,Vr);const q=ra(A.auth,E);return new ia(A.auth,"reauthViaPopup",g,q,A).executeNotNull()})).apply(this,arguments)}function li(){return(li=(0,a.Z)(function*(b,g,E){const A=(0,z.m9)(b);Pe(A.auth,g,Vr);const q=ra(A.auth,E);return new ia(A.auth,"linkViaPopup",g,q,A).executeNotNull()})).apply(this,arguments)}let ia=(()=>{class b extends jo{constructor(E,A,q,ae,ht){super(E,A,ae,ht),this.provider=q,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var E=this;return(0,a.Z)(function*(){const A=yield E.execute();return J(A,E.auth,"internal-error"),A})()}onExecution(){var E=this;return(0,a.Z)(function*(){Fe(1===E.filter.length,"Popup operations only handle one event");const A=ar();E.authWindow=yield E.resolver._openPopup(E.auth,E.provider,E.filter[0],A),E.authWindow.associatedEvent=A,E.resolver._originValidation(E.auth).catch(q=>{E.reject(q)}),E.resolver._isIframeWebStorageSupported(E.auth,q=>{q||E.reject(et(E.auth,"web-storage-unsupported"))}),E.pollUserCancellation()})()}get eventId(){var E;return(null===(E=this.authWindow)||void 0===E?void 0:E.associatedEvent)||null}cancel(){this.reject(et(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const E=()=>{var A,q;this.pollId=null!==(q=null===(A=this.authWindow)||void 0===A?void 0:A.window)&&void 0!==q&&q.closed?window.setTimeout(()=>{this.pollId=null,this.reject(et(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(E,Fl.get())};E()}}return b.currentPopupAction=null,b})();const $a="pendingRedirect",T=new Map;class x extends jo{constructor(g,E,A=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],E,void 0,A),this.eventId=null}execute(){var g=()=>super.execute,E=this;return(0,a.Z)(function*(){let A=T.get(E.auth._key());if(!A){try{const ae=(yield function w(b,g){return M.apply(this,arguments)}(E.resolver,E.auth))?yield g().call(E):null;A=()=>Promise.resolve(ae)}catch(q){A=()=>Promise.reject(q)}T.set(E.auth._key(),A)}return E.bypassAuthState||T.set(E.auth._key(),()=>Promise.resolve(null)),A()})()}onAuthEvent(g){var E=()=>super.onAuthEvent,A=this;return(0,a.Z)(function*(){if("signInViaRedirect"===g.type)return E().call(A,g);if("unknown"!==g.type){if(g.eventId){const q=yield A.auth._redirectUserForId(g.eventId);if(q)return A.user=q,E().call(A,g);A.resolve(null)}}else A.resolve(null)})()}onExecution(){return(0,a.Z)(function*(){})()}cleanUp(){}}function M(){return(M=(0,a.Z)(function*(b,g){const E=on(g),A=At(b);if(!(yield A._isAvailable()))return!1;const q="true"===(yield A._get(E));return yield A._remove(E),q})).apply(this,arguments)}function V(b,g){return X.apply(this,arguments)}function X(){return(X=(0,a.Z)(function*(b,g){return At(b)._set(on(g),"true")})).apply(this,arguments)}function Ze(b,g){T.set(b._key(),g)}function At(b){return Ke(b._redirectPersistence)}function on(b){return Ee($a,b.config.apiKey,b.name)}function Rn(b,g,E){return function wn(b,g,E){return F.apply(this,arguments)}(b,g,E)}function F(){return(F=(0,a.Z)(function*(b,g,E){const A=Pr(b);Pe(b,g,Vr),yield A._initializationPromise;const q=ra(A,E);return yield V(q,A),q._openRedirect(A,g,"signInViaRedirect")})).apply(this,arguments)}function U(b,g,E){return function ee(b,g,E){return De.apply(this,arguments)}(b,g,E)}function De(){return(De=(0,a.Z)(function*(b,g,E){const A=(0,z.m9)(b);Pe(A.auth,g,Vr),yield A.auth._initializationPromise;const q=ra(A.auth,E);yield V(q,A.auth);const ae=yield lr(A);return q._openRedirect(A.auth,g,"reauthViaRedirect",ae)})).apply(this,arguments)}function ot(b,g,E){return function Et(b,g,E){return Jt.apply(this,arguments)}(b,g,E)}function Jt(){return(Jt=(0,a.Z)(function*(b,g,E){const A=(0,z.m9)(b);Pe(A.auth,g,Vr),yield A.auth._initializationPromise;const q=ra(A.auth,E);yield Ni(!1,A,g.providerId),yield V(q,A.auth);const ae=yield lr(A);return q._openRedirect(A.auth,g,"linkViaRedirect",ae)})).apply(this,arguments)}function An(){return(An=(0,a.Z)(function*(b,g){return yield Pr(b)._initializationPromise,er(b,g,!1)})).apply(this,arguments)}function er(b,g){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,a.Z)(function*(b,g,E=!1){const A=Pr(b),q=ra(A,g),ht=yield new x(A,q,E).execute();return ht&&!E&&(delete ht.user._redirectEventId,yield A._persistUserIfCurrent(ht.user),yield A._setRedirectUser(null,g)),ht})).apply(this,arguments)}function lr(b){return io.apply(this,arguments)}function io(){return(io=(0,a.Z)(function*(b){const g=ar(`${b.uid}:::`);return b._redirectEventId=g,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),g})).apply(this,arguments)}class Va{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let E=!1;return this.consumers.forEach(A=>{this.isEventForConsumer(g,A)&&(E=!0,this.sendToConsumer(g,A),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Os(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ci(b);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,E||(this.queuedRedirectEvent=g,E=!0)),E}sendToConsumer(g,E){var A;if(g.error&&!ci(g)){const q=(null===(A=g.error.code)||void 0===A?void 0:A.split("auth/")[1])||"internal-error";E.onError(et(this.auth,q))}else E.onAuthEvent(g)}isEventForConsumer(g,E){const A=null===E.eventId||!!g.eventId&&g.eventId===E.eventId;return E.filter.includes(g.type)&&A}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yr(g))}saveEventToCache(g){this.cachedEventUids.add(Yr(g)),this.lastProcessedEventTime=Date.now()}}function Yr(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(g=>g).join("-")}function ci({type:b,error:g}){return"unknown"===b&&"auth/no-auth-event"===(null==g?void 0:g.code)}function Go(b){return dl.apply(this,arguments)}function dl(){return(dl=(0,a.Z)(function*(b,g={}){return Nt(b,"GET","/v1/projects",g)})).apply(this,arguments)}const Jc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ed=/^https?/;function nd(){return(nd=(0,a.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:g}=yield Go(b);for(const E of g)try{if(rd(E))return}catch(A){}st(b,"unauthorized-domain")})).apply(this,arguments)}function rd(b){const g=pt(),{protocol:E,hostname:A}=new URL(g);if(b.startsWith("chrome-extension://")){const ht=new URL(b);return""===ht.hostname&&""===A?"chrome-extension:"===E&&b.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===E&&ht.hostname===A}if(!ed.test(E))return!1;if(Jc.test(b))return A===b;const q=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+q+"|"+q+")$","i").test(A)}const id=new Je(3e4,6e4);function Tu(){const b=zt().___jsl;if(null!=b&&b.H)for(const g of Object.keys(b.H))if(b.H[g].r=b.H[g].r||[],b.H[g].L=b.H[g].L||[],b.H[g].r=[...b.H[g].L],b.CP)for(let E=0;E<b.CP.length;E++)b.CP[E]=null}let Jl=null;const sd=new Je(5e3,15e3),Ah="__/auth/iframe",Cf="emulator/auth/iframe",Ll={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Es(b){const g=b.config;J(g.authDomain,b,"auth-domain-config-required");const E=g.emulator?Le(g,Cf):`https://${b.config.authDomain}/${Ah}`,A={apiKey:g.apiKey,appName:b.name,v:Te.SDK_VERSION},q=xh.get(b.config.apiHost);q&&(A.eid=q);const ae=b._getFrameworks();return ae.length&&(A.fw=ae.join(",")),`${E}?${(0,z.xO)(A).slice(1)}`}function ps(){return ps=(0,a.Z)(function*(b){const g=yield function El(b){return Jl=Jl||function zd(b){return new Promise((g,E)=>{var A,q,ae;function ht(){Tu(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Tu(),E(et(b,"network-request-failed"))},timeout:id.get()})}if(null!==(q=null===(A=zt().gapi)||void 0===A?void 0:A.iframes)&&void 0!==q&&q.Iframe)g(gapi.iframes.getContext());else{if(null===(ae=zt().gapi)||void 0===ae||!ae.load){const jt=fa("iframefcb");return zt()[jt]=()=>{gapi.load?ht():E(et(b,"network-request-failed"))},es(`https://apis.google.com/js/api.js?onload=${jt}`).catch(bn=>E(bn))}ht()}}).catch(g=>{throw Jl=null,g})}(b),Jl}(b),E=zt().gapi;return J(E,b,"internal-error"),g.open({where:document.body,url:Es(b),messageHandlersFilter:E.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ll,dontclear:!0},A=>new Promise(function(){var q=(0,a.Z)(function*(ae,ht){yield A.restyle({setHideOnLeave:!1});const jt=et(b,"network-request-failed"),bn=zt().setTimeout(()=>{ht(jt)},sd.get());function $n(){zt().clearTimeout(bn),ae(A)}A.ping($n).then($n,()=>{ht(jt)})});return function(ae,ht){return q.apply(this,arguments)}}()))}),ps.apply(this,arguments)}const ji={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},od=500,eu=600,os="_blank",Ps="http://localhost";class bc{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}const ga="__/auth/handler",el="emulator/auth/handler";function tu(b,g,E,A,q,ae){J(b.config.authDomain,b,"auth-domain-config-required"),J(b.config.apiKey,b,"invalid-api-key");const ht={apiKey:b.config.apiKey,appName:b.name,authType:E,redirectUrl:A,v:Te.SDK_VERSION,eventId:q};if(g instanceof Vr){g.setDefaultLanguage(b.languageCode),ht.providerId=g.providerId||"",(0,z.xb)(g.getCustomParameters())||(ht.customParameters=JSON.stringify(g.getCustomParameters()));for(const[bn,$n]of Object.entries(ae||{}))ht[bn]=$n}if(g instanceof Jn){const bn=g.getScopes().filter($n=>""!==$n);bn.length>0&&(ht.scopes=bn.join(","))}b.tenantId&&(ht.tid=b.tenantId);const jt=ht;for(const bn of Object.keys(jt))void 0===jt[bn]&&delete jt[bn];return`${function qu({config:b}){return b.emulator?Le(b,el):`https://${b.authDomain}/${ga}`}(b)}?${(0,z.xO)(jt).slice(1)}`}const wl="webStorageSupport",nu=class Au{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hr,this._completeRedirectFn=er,this._overrideRedirectResult=Ze}_openPopup(g,E,A,q){var ae=this;return(0,a.Z)(function*(){var ht;Fe(null===(ht=ae.eventManagers[g._key()])||void 0===ht?void 0:ht.manager,"_initialize() not called before _openPopup()");const jt=tu(g,E,A,pt(),q);return function as(b,g,E,A=od,q=eu){const ae=Math.max((window.screen.availHeight-q)/2,0).toString(),ht=Math.max((window.screen.availWidth-A)/2,0).toString();let jt="";const bn=Object.assign(Object.assign({},ji),{width:A.toString(),height:q.toString(),top:ae,left:ht}),$n=(0,z.z$)().toLowerCase();E&&(jt=Be($n)?os:E),vt($n)&&(g=g||Ps,bn.scrollbars="yes");const wr=Object.entries(bn).reduce((Ks,[Ma,lu])=>`${Ks}${Ma}=${lu},`,"");if(function Wn(b=(0,z.z$)()){var g;return Ht(b)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}($n)&&"_self"!==jt)return function Su(b,g){const E=document.createElement("a");E.href=b,E.target=g;const A=document.createEvent("MouseEvent");A.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),E.dispatchEvent(A)}(g||"",jt),new bc(null);const yr=window.open(g||"",jt,wr);J(yr,b,"popup-blocked");try{yr.focus()}catch(Ks){}return new bc(yr)}(g,jt,ar())})()}_openRedirect(g,E,A,q){var ae=this;return(0,a.Z)(function*(){return yield ae._originValidation(g),function _n(b){zt().location.href=b}(tu(g,E,A,pt(),q)),new Promise(()=>{})})()}_initialize(g){const E=g._key();if(this.eventManagers[E]){const{manager:q,promise:ae}=this.eventManagers[E];return q?Promise.resolve(q):(Fe(ae,"If manager is not set, promise should be"),ae)}const A=this.initAndGetManager(g);return this.eventManagers[E]={promise:A},A.catch(()=>{delete this.eventManagers[E]}),A}initAndGetManager(g){var E=this;return(0,a.Z)(function*(){const A=yield function Il(b){return ps.apply(this,arguments)}(g),q=new Va(g);return A.register("authEvent",ae=>(J(null==ae?void 0:ae.authEvent,g,"invalid-auth-event"),{status:q.onEvent(ae.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),E.eventManagers[g._key()]={manager:q},E.iframes[g._key()]=A,q})()}_isIframeWebStorageSupported(g,E){this.iframes[g._key()].send(wl,{type:wl},q=>{var ae;const ht=null===(ae=null==q?void 0:q[0])||void 0===ae?void 0:ae[wl];void 0!==ht&&E(!!ht),st(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const E=g._key();return this.originValidationPromises[E]||(this.originValidationPromises[E]=function td(b){return nd.apply(this,arguments)}(g)),this.originValidationPromises[E]}get _shouldInitProactively(){return Fi()||hn()||Ht()}};class Is{constructor(g){this.factorId=g}_process(g,E,A){switch(E.type){case"enroll":return this._finalizeEnroll(g,E.credential,A);case"signin":return this._finalizeSignIn(g,E.credential);default:return Xe("unexpected MultiFactorSessionType")}}}class Oo extends Is{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Oo(g)}_finalizeEnroll(g,E,A){return function pl(b,g){return Nt(b,"POST","/v2/accounts/mfaEnrollment:finalize",St(b,g))}(g,{idToken:E,displayName:A,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,E){return function Nl(b,g){return Nt(b,"POST","/v2/accounts/mfaSignIn:finalize",St(b,g))}(g,{mfaPendingCredential:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Bl=(()=>{class b{constructor(){}static assertion(E){return Oo._fromCredential(E)}}return b.FACTOR_ID="phone",b})();var Zu="@firebase/auth";class Cl{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var E=this;return(0,a.Z)(function*(){return E.assertAuthConfigured(),yield E.auth._initializationPromise,E.auth.currentUser?{accessToken:yield E.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const E=this.auth.onIdTokenChanged(A=>{g((null==A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,E),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const E=this.internalListeners.get(g);E&&(this.internalListeners.delete(g),E(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function tl(){return window}(0,z.Pz)("authIdTokenMaxAge"),function bl(b){(0,Te._registerComponent)(new de.wA("auth",(g,{options:E})=>{const A=g.getProvider("app").getImmediate(),q=g.getProvider("heartbeat"),{apiKey:ae,authDomain:ht}=A.options;return((jt,bn)=>{J(ae&&!ae.includes(":"),"invalid-api-key",{appName:jt.name}),J(!(null!=ht&&ht.includes(":")),"argument-error",{appName:jt.name});const $n={apiKey:ae,authDomain:ht,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yi(b)},wr=new Ri(jt,bn,$n);return function W(b,g){const E=(null==g?void 0:g.persistence)||[],A=(Array.isArray(E)?E:[E]).map(Ke);null!=g&&g.errorMap&&b._updateErrorMap(g.errorMap),b._initializeWithPersistence(A,null==g?void 0:g.popupRedirectResolver)}(wr,E),wr})(A,q)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,E,A)=>{g.getProvider("auth-internal").initialize()})),(0,Te._registerComponent)(new de.wA("auth-internal",g=>{const E=Pr(g.getProvider("auth").getImmediate());return new Cl(E)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Te.registerVersion)(Zu,"0.21.4",function zo(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,Te.registerVersion)(Zu,"0.21.4","esm2017")}("Browser");const Dl=2e3;function ru(){return ru=(0,a.Z)(function*(b,g,E){var A;const{BuildInfo:q}=tl();Fe(g.sessionId,"AuthEvent did not contain a session ID");const ae=yield function cd(b){return Ju.apply(this,arguments)}(g.sessionId),ht={};return Ht()?ht.ibi=q.packageName:ge()?ht.apn=q.packageName:st(b,"operation-not-supported-in-this-environment"),q.displayName&&(ht.appDisplayName=q.displayName),ht.sessionId=ae,tu(b,E,g.type,void 0,null!==(A=g.eventId)&&void 0!==A?A:void 0,ht)}),ru.apply(this,arguments)}function Mu(){return(Mu=(0,a.Z)(function*(b){const{BuildInfo:g}=tl(),E={};Ht()?E.iosBundleId=g.packageName:ge()?E.androidPackageName=g.packageName:st(b,"operation-not-supported-in-this-environment"),yield Go(b,E)})).apply(this,arguments)}function $l(){return($l=(0,a.Z)(function*(b,g,E){const{cordova:A}=tl();let q=()=>{};try{yield new Promise((ae,ht)=>{let jt=null;function bn(){var yr;ae();const Ks=null===(yr=A.plugins.browsertab)||void 0===yr?void 0:yr.close;"function"==typeof Ks&&Ks(),"function"==typeof(null==E?void 0:E.close)&&E.close()}function $n(){jt||(jt=window.setTimeout(()=>{ht(et(b,"redirect-cancelled-by-user"))},Dl))}function wr(){"visible"===(null==document?void 0:document.visibilityState)&&$n()}g.addPassiveListener(bn),document.addEventListener("resume",$n,!1),ge()&&document.addEventListener("visibilitychange",wr,!1),q=()=>{g.removePassiveListener(bn),document.removeEventListener("resume",$n,!1),document.removeEventListener("visibilitychange",wr,!1),jt&&window.clearTimeout(jt)}})}finally{q()}})).apply(this,arguments)}function Ju(){return(Ju=(0,a.Z)(function*(b){const g=function Ua(b){if(Fe(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(b);const g=new ArrayBuffer(b.length),E=new Uint8Array(g);for(let A=0;A<b.length;A++)E[A]=b.charCodeAt(A);return E}(b),E=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(E)).map(q=>q.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Sl=20;class dd extends Va{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(E=>E(g)),super.onEvent(g)}initialized(){var g=this;return(0,a.Z)(function*(){yield g.initPromise})()}}function Vl(b){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,a.Z)(function*(b){const g=yield hd()._get(ec(b));return g&&(yield hd()._remove(ec(b))),g})).apply(this,arguments)}function ja(){const b=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<Sl;E++){const A=Math.floor(Math.random()*g.length);b.push(g.charAt(A))}return b.join("")}function hd(){return Ke(Vt)}function ec(b){return Ee("authEvent",b.config.apiKey,b.name)}function Sa(b){if(null==b||!b.includes("?"))return{};const[g,...E]=b.split("?");return(0,z.zd)(E.join("?"))}const Pu=class Kd{constructor(){this._redirectPersistence=hr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=er,this._overrideRedirectResult=Ze}_initialize(g){var E=this;return(0,a.Z)(function*(){const A=g._key();let q=E.eventManagers.get(A);return q||(q=new dd(g),E.eventManagers.set(A,q),E.attachCallbackListeners(g,q)),q})()}_openPopup(g){st(g,"operation-not-supported-in-this-environment")}_openRedirect(g,E,A,q){var ae=this;return(0,a.Z)(function*(){!function ud(b){var g,E,A,q,ae,ht,jt,bn,$n,wr;const yr=tl();J("function"==typeof(null===(g=null==yr?void 0:yr.universalLinks)||void 0===g?void 0:g.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),J(typeof(null===(E=null==yr?void 0:yr.BuildInfo)||void 0===E?void 0:E.packageName)<"u",b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),J("function"==typeof(null===(ae=null===(q=null===(A=null==yr?void 0:yr.cordova)||void 0===A?void 0:A.plugins)||void 0===q?void 0:q.browsertab)||void 0===ae?void 0:ae.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),J("function"==typeof(null===(bn=null===(jt=null===(ht=null==yr?void 0:yr.cordova)||void 0===ht?void 0:ht.plugins)||void 0===jt?void 0:jt.browsertab)||void 0===bn?void 0:bn.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),J("function"==typeof(null===(wr=null===($n=null==yr?void 0:yr.cordova)||void 0===$n?void 0:$n.InAppBrowser)||void 0===wr?void 0:wr.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const ht=yield ae._initialize(g);yield ht.initialized(),ht.resetRedirect(),function ie(){T.clear()}(),yield ae._originValidation(g);const jt=function iu(b,g,E=null){return{type:g,eventId:E,urlResponse:null,sessionId:ja(),postBody:null,tenantId:b.tenantId,error:et(b,"no-auth-event")}}(g,A,q);yield function Ru(b,g){return hd()._set(ec(b),g)}(g,jt);const bn=yield function ad(b,g,E){return ru.apply(this,arguments)}(g,jt,E),$n=yield function Tl(b){const{cordova:g}=tl();return new Promise(E=>{g.plugins.browsertab.isAvailable(A=>{let q=null;A?g.plugins.browsertab.openUrl(b):q=g.InAppBrowser.open(b,function On(b=(0,z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}()?"_blank":"_system","location=yes"),E(q)})})}(bn);return function Wd(b,g,E){return $l.apply(this,arguments)}(g,ht,$n)})()}_isIframeWebStorageSupported(g,E){throw new Error("Method not implemented.")}_originValidation(g){const E=g._key();return this.originValidationPromises[E]||(this.originValidationPromises[E]=function ld(b){return Mu.apply(this,arguments)}(g)),this.originValidationPromises[E]}attachCallbackListeners(g,E){const{universalLinks:A,handleOpenURL:q,BuildInfo:ae}=tl(),ht=setTimeout((0,a.Z)(function*(){yield Vl(g),E.onEvent(Sc())}),500),jt=function(){var wr=(0,a.Z)(function*(yr){clearTimeout(ht);const Ks=yield Vl(g);let Ma=null;Ks&&null!=yr&&yr.url&&(Ma=function su(b,g){var E,A;const q=function Ou(b){const g=Sa(b),E=g.link?decodeURIComponent(g.link):void 0,A=Sa(E).link,q=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return Sa(q).link||q||A||E||b}(g);if(q.includes("/__/auth/callback")){const ae=Sa(q),ht=ae.firebaseError?function Ki(b){try{return JSON.parse(b)}catch(g){return null}}(decodeURIComponent(ae.firebaseError)):null,jt=null===(A=null===(E=null==ht?void 0:ht.code)||void 0===E?void 0:E.split("auth/"))||void 0===A?void 0:A[1],bn=jt?et(jt):null;return bn?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:bn,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:q,postBody:null}}return null}(Ks,yr.url)),E.onEvent(Ma||Sc())});return function(Ks){return wr.apply(this,arguments)}}();typeof A<"u"&&"function"==typeof A.subscribe&&A.subscribe(null,jt);const bn=q,$n=`${ae.packageName.toLowerCase()}://`;tl().handleOpenURL=function(){var wr=(0,a.Z)(function*(yr){if(yr.toLowerCase().startsWith($n)&&jt({url:yr}),"function"==typeof bn)try{bn(yr)}catch(Ks){console.error(Ks)}});return function(yr){return wr.apply(this,arguments)}}()}};function Sc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:et("no-auth-event")}}const fd=1e3;function ku(){var b;return(null===(b=null==self?void 0:self.location)||void 0===b?void 0:b.protocol)||null}function hl(b=(0,z.z$)()){return!("file:"!==ku()&&"ionic:"!==ku()&&"capacitor:"!==ku()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function ou(){try{const b=self.localStorage,g=ar();if(b)return b.setItem(g,"1"),b.removeItem(g),!function di(b=(0,z.z$)()){return function Yd(){return(0,z.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Cs(b=(0,z.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,z.hl)()}catch(b){return Fu()&&(0,z.hl)()}return!1}function Fu(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ts(){return(function pd(){return"http:"===ku()||"https:"===ku()}()||(0,z.ru)()||hl())&&!function Ac(){return(0,z.b$)()||(0,z.UG)()}()&&ou()&&!Fu()}function Ul(){return hl()&&typeof document<"u"}function Al(){return(Al=(0,a.Z)(function*(){return!!Ul()&&new Promise(b=>{const g=setTimeout(()=>{b(!1)},fd);document.addEventListener("deviceready",()=>{clearTimeout(g),b(!0)})})})).apply(this,arguments)}const Ds={LOCAL:"local",NONE:"none",SESSION:"session"},oo=J,xc="persistence";function qd(b){return gd.apply(this,arguments)}function gd(){return(gd=(0,a.Z)(function*(b){yield b._initializationPromise;const g=tc(),E=Ee(xc,b.config.apiKey,b.name);g&&g.setItem(E,b._getPersistence())})).apply(this,arguments)}function tc(){var b;try{return(null===(b=function go(){return typeof window<"u"?window:null}())||void 0===b?void 0:b.sessionStorage)||null}catch(g){return null}}const nc=J;class oa{constructor(){this.browserResolver=Ke(nu),this.cordovaResolver=Ke(Pu),this.underlyingResolver=null,this._redirectPersistence=hr,this._completeRedirectFn=er,this._overrideRedirectResult=Ze}_initialize(g){var E=this;return(0,a.Z)(function*(){return yield E.selectUnderlyingResolver(),E.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,E,A,q){var ae=this;return(0,a.Z)(function*(){return yield ae.selectUnderlyingResolver(),ae.assertedUnderlyingResolver._openPopup(g,E,A,q)})()}_openRedirect(g,E,A,q){var ae=this;return(0,a.Z)(function*(){return yield ae.selectUnderlyingResolver(),ae.assertedUnderlyingResolver._openRedirect(g,E,A,q)})()}_isIframeWebStorageSupported(g,E){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,E)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return Ul()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return nc(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,a.Z)(function*(){if(g.underlyingResolver)return;const E=yield function bs(){return Al.apply(this,arguments)}();g.underlyingResolver=E?g.cordovaResolver:g.browserResolver})()}}function jl(b){return b.unwrap()}function Lu(b){return Bu(b)}function Bu(b){const{_tokenResponse:g}=b instanceof z.ZR?b.customData:b;if(!g)return null;if(!(b instanceof z.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return Da.credentialFromResult(b);const E=g.providerId;if(!E||E===Ue.PASSWORD)return null;let A;switch(E){case Ue.GOOGLE:A=Co;break;case Ue.FACEBOOK:A=wo;break;case Ue.GITHUB:A=Bi;break;case Ue.TWITTER:A=Qs;break;default:const{oauthIdToken:q,oauthAccessToken:ae,oauthTokenSecret:ht,pendingToken:jt,nonce:bn}=g;return ae||ht||q||jt?jt?E.startsWith("saml.")?Ss._create(E,jt):mt._fromParams({providerId:E,signInMethod:E,pendingToken:jt,idToken:q,accessToken:ae}):new ni(E).credential({idToken:q,accessToken:ae,rawNonce:bn}):null}return b instanceof z.ZR?A.credentialFromError(b):A.credentialFromResult(b)}function Wo(b,g){return g.catch(E=>{throw E instanceof z.ZR&&function rc(b,g){var E;const A=null===(E=g.customData)||void 0===E?void 0:E._tokenResponse;if("auth/multi-factor-auth-required"===(null==g?void 0:g.code))g.resolver=new md(b,function Ti(b,g){var E;const A=(0,z.m9)(b),q=g;return J(g.customData.operationType,A,"argument-error"),J(null===(E=q.customData._serverResponse)||void 0===E?void 0:E.mfaPendingCredential,A,"argument-error"),$o._fromError(A,q)}(b,g));else if(A){const q=Bu(g),ae=g;q&&(ae.credential=q,ae.tenantId=A.tenantId||void 0,ae.email=A.email||void 0,ae.phoneNumber=A.phoneNumber||void 0)}}(b,E),E}).then(E=>{const q=E.user;return{operationType:E.operationType,credential:Lu(E),additionalUserInfo:ll(E),user:Aa.getOrCreate(q)}})}function au(b,g){return ic.apply(this,arguments)}function ic(){return(ic=(0,a.Z)(function*(b,g){const E=yield g;return{verificationId:E.verificationId,confirm:A=>Wo(b,E.confirm(A))}})).apply(this,arguments)}class md{constructor(g,E){this.resolver=E,this.auth=function xl(b){return b.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return Wo(jl(this.auth),this.resolver.resolveSignIn(g))}}class Aa{constructor(g){this._delegate=g,this.multiFactor=function Pl(b){const g=(0,z.m9)(b);return Fa.has(g)||Fa.set(g,ea._fromUser(g)),Fa.get(g)}(g)}static getOrCreate(g){return Aa.USER_MAP.has(g)||Aa.USER_MAP.set(g,new Aa(g)),Aa.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var E=this;return(0,a.Z)(function*(){return Wo(E.auth,Xs(E._delegate,g))})()}linkWithPhoneNumber(g,E){var A=this;return(0,a.Z)(function*(){return au(A.auth,function Ja(b,g,E){return kl.apply(this,arguments)}(A._delegate,g,E))})()}linkWithPopup(g){var E=this;return(0,a.Z)(function*(){return Wo(E.auth,function Ws(b,g,E){return li.apply(this,arguments)}(E._delegate,g,oa))})()}linkWithRedirect(g){var E=this;return(0,a.Z)(function*(){return yield qd(Pr(E.auth)),ot(E._delegate,g,oa)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var E=this;return(0,a.Z)(function*(){return Wo(E.auth,Zo(E._delegate,g))})()}reauthenticateWithPhoneNumber(g,E){return au(this.auth,function _l(b,g,E){return Du.apply(this,arguments)}(this._delegate,g,E))}reauthenticateWithPopup(g){return Wo(this.auth,function _s(b,g,E){return ro.apply(this,arguments)}(this._delegate,g,oa))}reauthenticateWithRedirect(g){var E=this;return(0,a.Z)(function*(){return yield qd(Pr(E.auth)),U(E._delegate,g,oa)})()}sendEmailVerification(g){return function Rr(b,g){return Zn.apply(this,arguments)}(this._delegate,g)}unlink(g){var E=this;return(0,a.Z)(function*(){return yield function gr(b,g){return us.apply(this,arguments)}(E._delegate,g),E})()}updateEmail(g){return function Wa(b,g){return ca((0,z.m9)(b),g,null)}(this._delegate,g)}updatePassword(g){return function ua(b,g){return ca((0,z.m9)(b),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function Cc(b,g){return Wi.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function la(b,g){return js.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,E){return function Br(b,g,E){return Ji.apply(this,arguments)}(this._delegate,g,E)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Aa.USER_MAP=new WeakMap;const Hl=J;let xa=(()=>{class b{constructor(E,A){if(this.app=E,A.isInitialized())return this._delegate=A.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:q}=E.options;Hl(q,"invalid-api-key",{appName:E.name}),Hl(q,"invalid-api-key",{appName:E.name});const ae=typeof window<"u"?oa:void 0;this._delegate=A.initialize({options:{persistence:yd(q,E.name),popupRedirectResolver:ae}}),this._delegate._updateErrorMap(ut),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Aa.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(E){this._delegate.languageCode=E}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(E){this._delegate.tenantId=E}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(E,A){!function zi(b,g,E){const A=Pr(b);J(A._canInitEmulator,A,"emulator-config-failed"),J(/^https?:\/\//.test(g),A,"invalid-emulator-scheme");const q=!(null==E||!E.disableWarnings),ae=Qn(g),{host:ht,port:jt}=function ti(b){const g=Qn(b),E=/(\/\/)?([^?#/]+)/.exec(b.substr(g.length));if(!E)return{host:"",port:null};const A=E[2].split("@").pop()||"",q=/^(\[[^\]]+\])(:|$)/.exec(A);if(q){const ae=q[1];return{host:ae,port:Nr(A.substr(ae.length+1))}}{const[ae,ht]=A.split(":");return{host:ae,port:Nr(ht)}}}(g);A.config.emulator={url:`${ae}//${ht}${null===jt?"":`:${jt}`}/`},A.settings.appVerificationDisabledForTesting=!0,A.emulatorConfig=Object.freeze({host:ht,port:jt,protocol:ae.replace(":",""),options:Object.freeze({disableWarnings:q})}),q||function vi(){function b(){const g=document.createElement("p"),E=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",E.position="fixed",E.width="100%",E.backgroundColor="#ffffff",E.border=".1em solid #000000",E.color="#b50000",E.bottom="0px",E.left="0px",E.margin="0px",E.zIndex="10000",E.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}(this._delegate,E,A)}applyActionCode(E){return function to(b,g){return vs.apply(this,arguments)}(this._delegate,E)}checkActionCode(E){return Us(this._delegate,E)}confirmPasswordReset(E,A){return function Do(b,g,E){return va.apply(this,arguments)}(this._delegate,E,A)}createUserWithEmailAndPassword(E,A){var q=this;return(0,a.Z)(function*(){return Wo(q._delegate,function qt(b,g,E){return Fn.apply(this,arguments)}(q._delegate,E,A))})()}fetchProvidersForEmail(E){return this.fetchSignInMethodsForEmail(E)}fetchSignInMethodsForEmail(E){return function vn(b,g){return Gn.apply(this,arguments)}(this._delegate,E)}isSignInWithEmailLink(E){return function y(b,g){const E=uo.parseLink(g);return"EMAIL_SIGNIN"===(null==E?void 0:E.operation)}(0,E)}getRedirectResult(){var E=this;return(0,a.Z)(function*(){Hl(ts(),E._delegate,"operation-not-supported-in-this-environment");const A=yield function Nn(b,g){return An.apply(this,arguments)}(E._delegate,oa);return A?Wo(E._delegate,Promise.resolve(A)):{credential:null,user:null}})()}addFrameworkForLogging(E){!function Nu(b,g){Pr(b)._logFramework(g)}(this._delegate,E)}onAuthStateChanged(E,A,q){const{next:ae,error:ht,complete:jt}=Ml(E,A,q);return this._delegate.onAuthStateChanged(ae,ht,jt)}onIdTokenChanged(E,A,q){const{next:ae,error:ht,complete:jt}=Ml(E,A,q);return this._delegate.onIdTokenChanged(ae,ht,jt)}sendSignInLinkToEmail(E,A){return function f(b,g,E){return I.apply(this,arguments)}(this._delegate,E,A)}sendPasswordResetEmail(E,A){return function eo(b,g,E){return or.apply(this,arguments)}(this._delegate,E,A||void 0)}setPersistence(E){var A=this;return(0,a.Z)(function*(){let q;switch(function Ga(b,g){oo(Object.values(Ds).includes(g),b,"invalid-persistence-type"),(0,z.b$)()?oo(g!==Ds.SESSION,b,"unsupported-persistence-type"):(0,z.UG)()?oo(g===Ds.NONE,b,"unsupported-persistence-type"):Fu()?oo(g===Ds.NONE||g===Ds.LOCAL&&(0,z.hl)(),b,"unsupported-persistence-type"):oo(g===Ds.NONE||ou(),b,"unsupported-persistence-type")}(A._delegate,E),E){case Ds.SESSION:q=hr;break;case Ds.LOCAL:q=(yield Ke(xo)._isAvailable())?xo:Vt;break;case Ds.NONE:q=Re;break;default:return st("argument-error",{appName:A._delegate.name})}return A._delegate.setPersistence(q)})()}signInAndRetrieveDataWithCredential(E){return this.signInWithCredential(E)}signInAnonymously(){return Wo(this._delegate,function bo(b){return is.apply(this,arguments)}(this._delegate))}signInWithCredential(E){return Wo(this._delegate,Dr(this._delegate,E))}signInWithCustomToken(E){return Wo(this._delegate,function Qo(b,g){return ho.apply(this,arguments)}(this._delegate,E))}signInWithEmailAndPassword(E,A){return Wo(this._delegate,function j(b,g,E){return Dr((0,z.m9)(b),Io.credential(g,E))}(this._delegate,E,A))}signInWithEmailLink(E,A){return Wo(this._delegate,function P(b,g,E){return Q.apply(this,arguments)}(this._delegate,E,A))}signInWithPhoneNumber(E,A){return au(this._delegate,function Xa(b,g,E){return bu.apply(this,arguments)}(this._delegate,E,A))}signInWithPopup(E){var A=this;return(0,a.Z)(function*(){return Hl(ts(),A._delegate,"operation-not-supported-in-this-environment"),Wo(A._delegate,function Xl(b,g,E){return Ho.apply(this,arguments)}(A._delegate,E,oa))})()}signInWithRedirect(E){var A=this;return(0,a.Z)(function*(){return Hl(ts(),A._delegate,"operation-not-supported-in-this-environment"),yield qd(A._delegate),Rn(A._delegate,E,oa)})()}updateCurrentUser(E){return this._delegate.updateCurrentUser(E)}verifyPasswordResetCode(E){return function fo(b,g){return To.apply(this,arguments)}(this._delegate,E)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=Ds,b})();function Ml(b,g,E){let A=b;"function"!=typeof b&&({next:A,error:g,complete:E}=b);const q=A;return{next:ht=>q(ht&&Aa.getOrCreate(ht)),error:g,complete:E}}function yd(b,g){const E=function Kr(b,g){const E=tc();if(!E)return[];const A=Ee(xc,b,g);switch(E.getItem(A)){case Ds.NONE:return[Re];case Ds.LOCAL:return[xo,hr];case Ds.SESSION:return[hr];default:return[]}}(b,g);if(typeof self<"u"&&!E.includes(xo)&&E.push(xo),typeof window<"u")for(const A of[Vt,hr])E.includes(A)||E.push(A);return E.includes(Re)||E.push(Re),E}class Mc{constructor(){this.providerId="phone",this._delegate=new Da(jl(te.Z.auth()))}static credential(g,E){return Da.credential(g,E)}verifyPhoneNumber(g,E){return this._delegate.verifyPhoneNumber(g,E)}unwrap(){return this._delegate}}Mc.PHONE_SIGN_IN_METHOD=Da.PHONE_SIGN_IN_METHOD,Mc.PROVIDER_ID=Da.PROVIDER_ID;const Ns=J;class Rc{constructor(g,E,A=te.Z.app()){var q;Ns(null===(q=A.options)||void 0===q?void 0:q.apiKey,"invalid-api-key",{appName:A.name}),this._delegate=new Ms(g,E,A.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function sc(b){b.INTERNAL.registerComponent(new de.wA("auth-compat",g=>{const E=g.getProvider("app-compat").getImmediate(),A=g.getProvider("auth");return new xa(E,A)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:pe_EMAIL_SIGNIN,PASSWORD_RESET:pe_PASSWORD_RESET,RECOVER_EMAIL:pe_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:pe_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:pe_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:pe_VERIFY_EMAIL}},EmailAuthProvider:Io,FacebookAuthProvider:wo,GithubAuthProvider:Bi,GoogleAuthProvider:Co,OAuthProvider:ni,SAMLAuthProvider:ns,PhoneAuthProvider:Mc,PhoneMultiFactorGenerator:Bl,RecaptchaVerifier:Rc,TwitterAuthProvider:Qs,Auth:xa,AuthCredential:ri,Error:z.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.3.4")}(te.Z)},8766:(ln,ft,$)=>{"use strict";$.d(ft,{Lj:()=>st,X3:()=>at});var a=$(5861);const te=(J,Xe)=>Xe.some(Fe=>J instanceof Fe);let z,Te;const de=new WeakMap,Ae=new WeakMap,Ue=new WeakMap,me=new WeakMap,fe=new WeakMap;let Ge={get(J,Xe,Fe){if(J instanceof IDBTransaction){if("done"===Xe)return Ae.get(J);if("objectStoreNames"===Xe)return J.objectStoreNames||Ue.get(J);if("store"===Xe)return Fe.objectStoreNames[1]?void 0:Fe.objectStore(Fe.objectStoreNames[0])}return ve(J[Xe])},set:(J,Xe,Fe)=>(J[Xe]=Fe,!0),has:(J,Xe)=>J instanceof IDBTransaction&&("done"===Xe||"store"===Xe)||Xe in J};function Me(J){return"function"==typeof J?function Dt(J){return J!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Se(){return Te||(Te=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(J)?function(...Xe){return J.apply(le(this),Xe),ve(de.get(this))}:function(...Xe){return ve(J.apply(le(this),Xe))}:function(Xe,...Fe){const je=J.call(le(this),Xe,...Fe);return Ue.set(je,Xe.sort?Xe.sort():[Xe]),ve(je)}}(J):(J instanceof IDBTransaction&&function ke(J){if(Ae.has(J))return;const Xe=new Promise((Fe,je)=>{const Ke=()=>{J.removeEventListener("complete",tt),J.removeEventListener("error",W),J.removeEventListener("abort",W)},tt=()=>{Fe(),Ke()},W=()=>{je(J.error||new DOMException("AbortError","AbortError")),Ke()};J.addEventListener("complete",tt),J.addEventListener("error",W),J.addEventListener("abort",W)});Ae.set(J,Xe)}(J),te(J,function xe(){return z||(z=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(J,Ge):J)}function ve(J){if(J instanceof IDBRequest)return function pe(J){const Xe=new Promise((Fe,je)=>{const Ke=()=>{J.removeEventListener("success",tt),J.removeEventListener("error",W)},tt=()=>{Fe(ve(J.result)),Ke()},W=()=>{je(J.error),Ke()};J.addEventListener("success",tt),J.addEventListener("error",W)});return Xe.then(Fe=>{Fe instanceof IDBCursor&&de.set(Fe,J)}).catch(()=>{}),fe.set(Xe,J),Xe}(J);if(me.has(J))return me.get(J);const Xe=Me(J);return Xe!==J&&(me.set(J,Xe),fe.set(Xe,J)),Xe}const le=J=>fe.get(J);function at(J,Xe,{blocked:Fe,upgrade:je,blocking:Ke,terminated:tt}={}){const W=indexedDB.open(J,Xe),pt=ve(W);return je&&W.addEventListener("upgradeneeded",nt=>{je(ve(W.result),nt.oldVersion,nt.newVersion,ve(W.transaction))}),Fe&&W.addEventListener("blocked",()=>Fe()),pt.then(nt=>{tt&&nt.addEventListener("close",()=>tt()),Ke&&nt.addEventListener("versionchange",()=>Ke())}).catch(()=>{}),pt}function st(J,{blocked:Xe}={}){const Fe=indexedDB.deleteDatabase(J);return Xe&&Fe.addEventListener("blocked",()=>Xe()),ve(Fe).then(()=>{})}const et=["get","getKey","getAll","getAllKeys","count"],Qe=["put","add","delete","clear"],Pe=new Map;function Oe(J,Xe){if(!(J instanceof IDBDatabase)||Xe in J||"string"!=typeof Xe)return;if(Pe.get(Xe))return Pe.get(Xe);const Fe=Xe.replace(/FromIndex$/,""),je=Xe!==Fe,Ke=Qe.includes(Fe);if(!(Fe in(je?IDBIndex:IDBObjectStore).prototype)||!Ke&&!et.includes(Fe))return;const tt=function(){var W=(0,a.Z)(function*(pt,...nt){const Ie=this.transaction(pt,Ke?"readwrite":"readonly");let we=Ie.store;return je&&(we=we.index(nt.shift())),(yield Promise.all([we[Fe](...nt),Ke&&Ie.done]))[0]});return function(nt){return W.apply(this,arguments)}}();return Pe.set(Xe,tt),tt}!function ut(J){Ge=J(Ge)}(J=>({...J,get:(Xe,Fe,je)=>Oe(Xe,Fe)||J.get(Xe,Fe,je),has:(Xe,Fe)=>!!Oe(Xe,Fe)||J.has(Xe,Fe)}))},5861:(ln,ft,$)=>{"use strict";function a(z,Te,xe,Se,de,Ae,Ue){try{var me=z[Ae](Ue),fe=me.value}catch(pe){return void xe(pe)}me.done?Te(fe):Promise.resolve(fe).then(Se,de)}function te(z){return function(){var Te=this,xe=arguments;return new Promise(function(Se,de){var Ae=z.apply(Te,xe);function Ue(fe){a(Ae,Se,de,Ue,me,"next",fe)}function me(fe){a(Ae,Se,de,Ue,me,"throw",fe)}Ue(void 0)})}}$.d(ft,{Z:()=>te})}},ln=>{ln(ln.s=5061)}]);